var AO=Object.defineProperty;var OO=(t,e,n)=>e in t?AO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ue=(t,e,n)=>OO(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Or=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jO(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var iy={exports:{}},th={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function MO(){if(j_)return th;j_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:s,key:l,ref:a!==void 0?a:null,props:o}}return th.Fragment=e,th.jsx=n,th.jsxs=n,th}var M_;function EO(){return M_||(M_=1,iy.exports=MO()),iy.exports}var p=EO(),ay={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function RO(){if(E_)return Ze;E_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function S(I){return I===null||typeof I!="object"?null:(I=_&&I[_]||I["@@iterator"],typeof I=="function"?I:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,M={};function R(I,te,xe){this.props=I,this.context=te,this.refs=M,this.updater=xe||T}R.prototype.isReactComponent={},R.prototype.setState=function(I,te){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,te,"setState")},R.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function N(){}N.prototype=R.prototype;function B(I,te,xe){this.props=I,this.context=te,this.refs=M,this.updater=xe||T}var z=B.prototype=new N;z.constructor=B,O(z,R.prototype),z.isPureReactComponent=!0;var P=Array.isArray,U={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function ae(I,te,xe,Ae,we,Ne){return xe=Ne.ref,{$$typeof:t,type:I,key:te,ref:xe!==void 0?xe:null,props:Ne}}function J(I,te){return ae(I.type,te,void 0,void 0,void 0,I.props)}function X(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function oe(I){var te={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(xe){return te[xe]})}var A=/\/+/g;function Te(I,te){return typeof I=="object"&&I!==null&&I.key!=null?oe(""+I.key):te.toString(36)}function le(){}function $(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(le,le):(I.status="pending",I.then(function(te){I.status==="pending"&&(I.status="fulfilled",I.value=te)},function(te){I.status==="pending"&&(I.status="rejected",I.reason=te)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function be(I,te,xe,Ae,we){var Ne=typeof I;(Ne==="undefined"||Ne==="boolean")&&(I=null);var Re=!1;if(I===null)Re=!0;else switch(Ne){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(I.$$typeof){case t:case e:Re=!0;break;case y:return Re=I._init,be(Re(I._payload),te,xe,Ae,we)}}if(Re)return we=we(I),Re=Ae===""?"."+Te(I,0):Ae,P(we)?(xe="",Re!=null&&(xe=Re.replace(A,"$&/")+"/"),be(we,te,xe,"",function(W){return W})):we!=null&&(X(we)&&(we=J(we,xe+(we.key==null||I&&I.key===we.key?"":(""+we.key).replace(A,"$&/")+"/")+Re)),te.push(we)),1;Re=0;var ye=Ae===""?".":Ae+":";if(P(I))for(var F=0;F<I.length;F++)Ae=I[F],Ne=ye+Te(Ae,F),Re+=be(Ae,te,xe,Ne,we);else if(F=S(I),typeof F=="function")for(I=F.call(I),F=0;!(Ae=I.next()).done;)Ae=Ae.value,Ne=ye+Te(Ae,F++),Re+=be(Ae,te,xe,Ne,we);else if(Ne==="object"){if(typeof I.then=="function")return be($(I),te,xe,Ae,we);throw te=String(I),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Re}function q(I,te,xe){if(I==null)return I;var Ae=[],we=0;return be(I,Ae,"","",function(Ne){return te.call(xe,Ne,we++)}),Ae}function G(I){if(I._status===-1){var te=I._result;te=te(),te.then(function(xe){(I._status===0||I._status===-1)&&(I._status=1,I._result=xe)},function(xe){(I._status===0||I._status===-1)&&(I._status=2,I._result=xe)}),I._status===-1&&(I._status=0,I._result=te)}if(I._status===1)return I._result.default;throw I._result}var ce=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function _e(){}return Ze.Children={map:q,forEach:function(I,te,xe){q(I,function(){te.apply(this,arguments)},xe)},count:function(I){var te=0;return q(I,function(){te++}),te},toArray:function(I){return q(I,function(te){return te})||[]},only:function(I){if(!X(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ze.Component=R,Ze.Fragment=n,Ze.Profiler=a,Ze.PureComponent=B,Ze.StrictMode=s,Ze.Suspense=h,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ze.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ze.cache=function(I){return function(){return I.apply(null,arguments)}},Ze.cloneElement=function(I,te,xe){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var Ae=O({},I.props),we=I.key,Ne=void 0;if(te!=null)for(Re in te.ref!==void 0&&(Ne=void 0),te.key!==void 0&&(we=""+te.key),te)!ee.call(te,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&te.ref===void 0||(Ae[Re]=te[Re]);var Re=arguments.length-2;if(Re===1)Ae.children=xe;else if(1<Re){for(var ye=Array(Re),F=0;F<Re;F++)ye[F]=arguments[F+2];Ae.children=ye}return ae(I.type,we,void 0,void 0,Ne,Ae)},Ze.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},Ze.createElement=function(I,te,xe){var Ae,we={},Ne=null;if(te!=null)for(Ae in te.key!==void 0&&(Ne=""+te.key),te)ee.call(te,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(we[Ae]=te[Ae]);var Re=arguments.length-2;if(Re===1)we.children=xe;else if(1<Re){for(var ye=Array(Re),F=0;F<Re;F++)ye[F]=arguments[F+2];we.children=ye}if(I&&I.defaultProps)for(Ae in Re=I.defaultProps,Re)we[Ae]===void 0&&(we[Ae]=Re[Ae]);return ae(I,Ne,void 0,void 0,null,we)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(I){return{$$typeof:u,render:I}},Ze.isValidElement=X,Ze.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:G}},Ze.memo=function(I,te){return{$$typeof:g,type:I,compare:te===void 0?null:te}},Ze.startTransition=function(I){var te=U.T,xe={};U.T=xe;try{var Ae=I(),we=U.S;we!==null&&we(xe,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(_e,ce)}catch(Ne){ce(Ne)}finally{U.T=te}},Ze.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ze.use=function(I){return U.H.use(I)},Ze.useActionState=function(I,te,xe){return U.H.useActionState(I,te,xe)},Ze.useCallback=function(I,te){return U.H.useCallback(I,te)},Ze.useContext=function(I){return U.H.useContext(I)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(I,te){return U.H.useDeferredValue(I,te)},Ze.useEffect=function(I,te){return U.H.useEffect(I,te)},Ze.useId=function(){return U.H.useId()},Ze.useImperativeHandle=function(I,te,xe){return U.H.useImperativeHandle(I,te,xe)},Ze.useInsertionEffect=function(I,te){return U.H.useInsertionEffect(I,te)},Ze.useLayoutEffect=function(I,te){return U.H.useLayoutEffect(I,te)},Ze.useMemo=function(I,te){return U.H.useMemo(I,te)},Ze.useOptimistic=function(I,te){return U.H.useOptimistic(I,te)},Ze.useReducer=function(I,te,xe){return U.H.useReducer(I,te,xe)},Ze.useRef=function(I){return U.H.useRef(I)},Ze.useState=function(I){return U.H.useState(I)},Ze.useSyncExternalStore=function(I,te,xe){return U.H.useSyncExternalStore(I,te,xe)},Ze.useTransition=function(){return U.H.useTransition()},Ze.version="19.0.0",Ze}var R_;function o0(){return R_||(R_=1,ay.exports=RO()),ay.exports}var k=o0();const Da=r0(k);var ry={exports:{}},nh={},oy={exports:{}},ly={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function kO(){return k_||(k_=1,function(t){function e(q,G){var ce=q.length;q.push(G);e:for(;0<ce;){var _e=ce-1>>>1,I=q[_e];if(0<a(I,G))q[_e]=G,q[ce]=I,ce=_e;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var G=q[0],ce=q.pop();if(ce!==G){q[0]=ce;e:for(var _e=0,I=q.length,te=I>>>1;_e<te;){var xe=2*(_e+1)-1,Ae=q[xe],we=xe+1,Ne=q[we];if(0>a(Ae,ce))we<I&&0>a(Ne,Ae)?(q[_e]=Ne,q[we]=ce,_e=we):(q[_e]=Ae,q[xe]=ce,_e=xe);else if(we<I&&0>a(Ne,ce))q[_e]=Ne,q[we]=ce,_e=we;else break e}}return G}function a(q,G){var ce=q.sortIndex-G.sortIndex;return ce!==0?ce:q.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],g=[],y=1,_=null,S=3,T=!1,O=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function z(q){for(var G=n(g);G!==null;){if(G.callback===null)s(g);else if(G.startTime<=q)s(g),G.sortIndex=G.expirationTime,e(h,G);else break;G=n(g)}}function P(q){if(M=!1,z(q),!O)if(n(h)!==null)O=!0,$();else{var G=n(g);G!==null&&be(P,G.startTime-q)}}var U=!1,ee=-1,ae=5,J=-1;function X(){return!(t.unstable_now()-J<ae)}function oe(){if(U){var q=t.unstable_now();J=q;var G=!0;try{e:{O=!1,M&&(M=!1,N(ee),ee=-1),T=!0;var ce=S;try{t:{for(z(q),_=n(h);_!==null&&!(_.expirationTime>q&&X());){var _e=_.callback;if(typeof _e=="function"){_.callback=null,S=_.priorityLevel;var I=_e(_.expirationTime<=q);if(q=t.unstable_now(),typeof I=="function"){_.callback=I,z(q),G=!0;break t}_===n(h)&&s(h),z(q)}else s(h);_=n(h)}if(_!==null)G=!0;else{var te=n(g);te!==null&&be(P,te.startTime-q),G=!1}}break e}finally{_=null,S=ce,T=!1}G=void 0}}finally{G?A():U=!1}}}var A;if(typeof B=="function")A=function(){B(oe)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,le=Te.port2;Te.port1.onmessage=oe,A=function(){le.postMessage(null)}}else A=function(){R(oe,0)};function $(){U||(U=!0,A())}function be(q,G){ee=R(function(){q(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){O||T||(O=!0,$())},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(q){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var ce=S;S=G;try{return q()}finally{S=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ce=S;S=q;try{return G()}finally{S=ce}},t.unstable_scheduleCallback=function(q,G,ce){var _e=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?_e+ce:_e):ce=_e,q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ce+I,q={id:y++,callback:G,priorityLevel:q,startTime:ce,expirationTime:I,sortIndex:-1},ce>_e?(q.sortIndex=ce,e(g,q),n(h)===null&&q===n(g)&&(M?(N(ee),ee=-1):M=!0,be(P,ce-_e))):(q.sortIndex=I,e(h,q),O||T||(O=!0,$())),q},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(q){var G=S;return function(){var ce=S;S=G;try{return q.apply(this,arguments)}finally{S=ce}}}}(ly)),ly}var N_;function NO(){return N_||(N_=1,oy.exports=kO()),oy.exports}var cy={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function DO(){if(D_)return $n;D_=1;var t=o0();function e(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,g,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:h,containerInfo:g,implementation:y}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$n.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(h,g,null,y)},$n.flushSync=function(h){var g=l.T,y=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=g,s.p=y,s.d.f()}},$n.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(h,g))},$n.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},$n.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,_=u(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,T=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:T}):y==="script"&&s.d.X(h,{crossOrigin:_,integrity:S,fetchPriority:T,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},$n.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=u(g.as,g.crossOrigin);s.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(h)},$n.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,_=u(y,g.crossOrigin);s.d.L(h,y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},$n.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=u(g.as,g.crossOrigin);s.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(h)},$n.requestFormReset=function(h){s.d.r(h)},$n.unstable_batchedUpdates=function(h,g){return h(g)},$n.useFormState=function(h,g,y){return l.H.useFormState(h,g,y)},$n.useFormStatus=function(){return l.H.useHostTransitionStatus()},$n.version="19.0.0",$n}var P_;function PO(){if(P_)return cy.exports;P_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cy.exports=DO(),cy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function LO(){if(L_)return nh;L_=1;var t=NO(),e=o0(),n=PO();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Symbol.for("react.client.reference");function J(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ae?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case h:return"Fragment";case u:return"Portal";case y:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case T:return(i.displayName||"Context")+".Provider";case S:return(i._context.displayName||"Context")+".Consumer";case O:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:J(i.type)||"Memo";case B:r=i._payload,i=i._init;try{return J(i(r))}catch{}}return null}var X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.assign,A,Te;function le(i){if(A===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);A=r&&r[1]||"",Te=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+A+i+Te}var $=!1;function be(i,r){if(!i||$)return"";$=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(r){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(he){var re=he}Reflect.construct(i,[],Se)}else{try{Se.call()}catch(he){re=he}i.call(Se.prototype)}}else{try{throw Error()}catch(he){re=he}(Se=i())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(he){if(he&&re&&typeof he.stack=="string")return[he.stack,re.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),E=w[0],D=w[1];if(E&&D){var H=E.split(`
`),K=D.split(`
`);for(b=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;b<K.length&&!K[b].includes("DetermineComponentFrameRoot");)b++;if(m===H.length||b===K.length)for(m=H.length-1,b=K.length-1;1<=m&&0<=b&&H[m]!==K[b];)b--;for(;1<=m&&0<=b;m--,b--)if(H[m]!==K[b]){if(m!==1||b!==1)do if(m--,b--,0>b||H[m]!==K[b]){var de=`
`+H[m].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=m&&0<=b);break}}}finally{$=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?le(c):""}function q(i){switch(i.tag){case 26:case 27:case 5:return le(i.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function G(i){try{var r="";do r+=q(i),i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ce(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function _e(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function I(i){if(ce(i)!==i)throw Error(s(188))}function te(i){var r=i.alternate;if(!r){if(r=ce(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,m=r;;){var b=c.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){c=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===c)return I(b),i;if(w===m)return I(b),r;w=w.sibling}throw Error(s(188))}if(c.return!==m.return)c=b,m=w;else{for(var E=!1,D=b.child;D;){if(D===c){E=!0,c=b,m=w;break}if(D===m){E=!0,m=b,c=w;break}D=D.sibling}if(!E){for(D=w.child;D;){if(D===c){E=!0,c=w,m=b;break}if(D===m){E=!0,m=w,c=b;break}D=D.sibling}if(!E)throw Error(s(189))}}if(c.alternate!==m)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function xe(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=xe(i),r!==null)return r;i=i.sibling}return null}var Ae=Array.isArray,we=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Re=[],ye=-1;function F(i){return{current:i}}function W(i){0>ye||(i.current=Re[ye],Re[ye]=null,ye--)}function ve(i,r){ye++,Re[ye]=i.current,i.current=r}var se=F(null),Ce=F(null),Pe=F(null),Me=F(null);function et(i,r){switch(ve(Pe,r),ve(Ce,i),ve(se,null),i=r.nodeType,i){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?s_(r):0;break;default:if(i=i===8?r.parentNode:r,r=i.tagName,i=i.namespaceURI)i=s_(i),r=i_(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}W(se),ve(se,r)}function ue(){W(se),W(Ce),W(Pe)}function Le(i){i.memoizedState!==null&&ve(Me,i);var r=se.current,c=i_(r,i.type);r!==c&&(ve(Ce,i),ve(se,c))}function Ye(i){Ce.current===i&&(W(se),W(Ce)),Me.current===i&&(W(Me),Xu._currentValue=Ne)}var Ct=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,Ut=t.unstable_shouldYield,jn=t.unstable_requestPaint,Je=t.unstable_now,Tt=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,Mt=t.unstable_NormalPriority,cn=t.unstable_LowPriority,Un=t.unstable_IdlePriority,Gr=t.log,nl=t.unstable_setDisableYieldValue,vs=null,un=null;function Wr(i){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(vs,i,void 0,(i.current.flags&128)===128)}catch{}}function rs(i){if(typeof Gr=="function"&&nl(i),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(vs,i)}catch{}}var fn=Math.clz32?Math.clz32:Fi,mi=Math.log,sl=Math.LN2;function Fi(i){return i>>>=0,i===0?32:31-(mi(i)/sl|0)|0}var Ht=128,gi=4194304;function Dt(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function sn(i,r){var c=i.pendingLanes;if(c===0)return 0;var m=0,b=i.suspendedLanes,w=i.pingedLanes,E=i.warmLanes;i=i.finishedLanes!==0;var D=c&134217727;return D!==0?(c=D&~b,c!==0?m=Dt(c):(w&=D,w!==0?m=Dt(w):i||(E=D&~E,E!==0&&(m=Dt(E))))):(D=c&~b,D!==0?m=Dt(D):w!==0?m=Dt(w):i||(E=c&~E,E!==0&&(m=Dt(E)))),m===0?0:r!==0&&r!==m&&(r&b)===0&&(b=m&-m,E=r&-r,b>=E||b===32&&(E&4194176)!==0)?r:m}function Ot(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function wt(i,r){switch(i){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(){var i=Ht;return Ht<<=1,(Ht&4194176)===0&&(Ht=128),i}function il(){var i=gi;return gi<<=1,(gi&62914560)===0&&(gi=4194304),i}function pi(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function Fs(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function al(i,r,c,m,b,w){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,H=i.expirationTimes,K=i.hiddenUpdates;for(c=E&~c;0<c;){var de=31-fn(c),Se=1<<de;D[de]=0,H[de]=-1;var re=K[de];if(re!==null)for(K[de]=null,de=0;de<re.length;de++){var he=re[de];he!==null&&(he.lane&=-536870913)}c&=~Se}m!==0&&qi(i,m,0),w!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=w&~(E&~r))}function qi(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var m=31-fn(r);i.entangledLanes|=r,i.entanglements[m]=i.entanglements[m]|1073741824|c&4194218}function $i(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var m=31-fn(c),b=1<<m;b&r|i[m]&r&&(i[m]|=r),c&=~b}}function qa(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function yi(){var i=we.p;return i!==0?i:(i=window.event,i===void 0?32:w_(i.type))}function Yr(i,r){var c=we.p;try{return we.p=i,r()}finally{we.p=c}}var Os=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Os,hn="__reactProps$"+Os,bs="__reactContainer$"+Os,Kr="__reactEvents$"+Os,tt="__reactListeners$"+Os,Ee="__reactHandles$"+Os,Lt="__reactResources$"+Os,mn="__reactMarker$"+Os;function gn(i){delete i[Pt],delete i[hn],delete i[Kr],delete i[tt],delete i[Ee]}function os(i){var r=i[Pt];if(r)return r;for(var c=i.parentNode;c;){if(r=c[bs]||c[Pt]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=o_(i);i!==null;){if(c=i[Pt])return c;i=o_(i)}return r}i=c,c=i.parentNode}return null}function yt(i){if(i=i[Pt]||i[bs]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function vi(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function $a(i){var r=i[Lt];return r||(r=i[Lt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ft(i){i[mn]=!0}var rl=new Set,xd={};function Gi(i,r){Wi(i,r),Wi(i+"Capture",r)}function Wi(i,r){for(xd[i]=r,i=0;i<r.length;i++)rl.add(r[i])}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ic={},Sd={};function Cd(i){return Ct.call(Sd,i)?!0:Ct.call(Ic,i)?!1:wd.test(i)?Sd[i]=!0:(Ic[i]=!0,!1)}function ol(i,r,c){if(Cd(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var m=r.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function ll(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function $s(i,r,c,m){if(m===null)i.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+m)}}function ls(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function js(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function zc(i){var r=js(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),m=""+i[r];if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,w=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return b.call(this)},set:function(E){m=""+E,w.call(this,E)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(E){m=""+E},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Gs(i){i._valueTracker||(i._valueTracker=zc(i))}function Td(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),m="";return i&&(m=js(i)?i.checked?"true":"false":i.value),i=m,i!==c?(r.setValue(i),!0):!1}function cl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Vc=/[\n"\\]/g;function cs(i){return i.replace(Vc,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xr(i,r,c,m,b,w,E,D){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),r!=null?E==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+ls(r)):i.value!==""+ls(r)&&(i.value=""+ls(r)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),r!=null?Yt(i,E,ls(r)):c!=null?Yt(i,E,ls(c)):m!=null&&i.removeAttribute("value"),b==null&&w!=null&&(i.defaultChecked=!!w),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+ls(D):i.removeAttribute("name")}function Ad(i,r,c,m,b,w,E,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),r!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||r!=null))return;c=c!=null?""+ls(c):"",r=r!=null?""+ls(r):c,D||r===i.value||(i.value=r),i.defaultValue=r}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=D?i.checked:!!m,i.defaultChecked=!!m,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function Yt(i,r,c){r==="number"&&cl(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Ie(i,r,c,m){if(i=i.options,r){r={};for(var b=0;b<c.length;b++)r["$"+c[b]]=!0;for(c=0;c<i.length;c++)b=r.hasOwnProperty("$"+i[c].value),i[c].selected!==b&&(i[c].selected=b),b&&m&&(i[c].defaultSelected=!0)}else{for(c=""+ls(c),r=null,b=0;b<i.length;b++){if(i[b].value===c){i[b].selected=!0,m&&(i[b].defaultSelected=!0);return}r!==null||i[b].disabled||(r=i[b])}r!==null&&(r.selected=!0)}}function Hc(i,r,c){if(r!=null&&(r=""+ls(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+ls(c):""}function Mn(i,r,c,m){if(r==null){if(m!=null){if(c!=null)throw Error(s(92));if(Ae(m)){if(1<m.length)throw Error(s(93));m=m[0]}c=m}c==null&&(c=""),r=c}c=ls(r),i.defaultValue=c,m=i.textContent,m===c&&m!==""&&m!==null&&(i.value=m)}function Ga(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var Od=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jd(i,r,c){var m=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":m?i.setProperty(r,c):typeof c!="number"||c===0||Od.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function Fc(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||r!=null&&r.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var b in r)m=r[b],r.hasOwnProperty(b)&&c[b]!==m&&jd(i,b,m)}else for(var w in r)r.hasOwnProperty(w)&&jd(i,w,r[w])}function qc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$c=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qr(i){return $c.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Jr=null;function ul(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bi=null,Yi=null;function Zr(i){var r=yt(i);if(r&&(i=r.stateNode)){var c=i[hn]||null;e:switch(i=r.stateNode,r.type){case"input":if(Xr(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cs(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var m=c[r];if(m!==i&&m.form===i.form){var b=m[hn]||null;if(!b)throw Error(s(90));Xr(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(r=0;r<c.length;r++)m=c[r],m.form===i.form&&Td(m)}break e;case"textarea":Hc(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Ie(i,!!c.multiple,r,!1)}}}var Wa=!1;function Ki(i,r,c){if(Wa)return i(r,c);Wa=!0;try{var m=i(r);return m}finally{if(Wa=!1,(bi!==null||Yi!==null)&&(vf(),bi&&(r=bi,i=Yi,Yi=bi=null,Zr(r),i)))for(r=0;r<i.length;r++)Zr(i[r])}}function Ms(i,r){var c=i.stateNode;if(c===null)return null;var m=c[hn]||null;if(m===null)return null;c=m[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var hl=!1;if(qs)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){hl=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{hl=!1}var _i=null,xi=null,eo=null;function Ed(){if(eo)return eo;var i,r=xi,c=r.length,m,b="value"in _i?_i.value:_i.textContent,w=b.length;for(i=0;i<c&&r[i]===b[i];i++);var E=c-i;for(m=1;m<=E&&r[c-m]===b[w-m];m++);return eo=b.slice(i,1<m?1-m:void 0)}function dl(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function fl(){return!0}function qt(){return!1}function In(i){function r(c,m,b,w,E){this._reactName=c,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?fl:qt,this.isPropagationStopped=qt,this}return oe(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),r}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=In(Xi),to=oe({},Xi,{view:0,detail:0}),Rd=In(to),Gc,us,Ka,gl=oe({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ka&&(Ka&&i.type==="mousemove"?(Gc=i.screenX-Ka.screenX,us=i.screenY-Ka.screenY):us=Gc=0,Ka=i),Gc)},movementY:function(i){return"movementY"in i?i.movementY:us}}),no=In(gl),gg=oe({},gl,{dataTransfer:0}),pg=In(gg),yg=oe({},to,{relatedTarget:0}),Wc=In(yg),vg=oe({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),kd=In(vg),Nd=oe({},Xi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),bg=In(Nd),_g=oe({},Xi,{data:0}),Yc=In(_g),Dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},so={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xg(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=wi[i])?!!r[i]:!1}function Kc(){return xg}var Pd=oe({},to,{key:function(i){if(i.key){var r=Dd[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=dl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?so[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kc,charCode:function(i){return i.type==="keypress"?dl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?dl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wg=In(Pd),Sg=oe({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xc=In(Sg),Cg=oe({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kc}),Tg=In(Cg),Ag=oe({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ld=In(Ag),Og=oe({},gl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qc=In(Og),Bd=oe({},Xi,{newState:0,oldState:0}),io=In(Bd),Si=[9,13,27,32],Jc=qs&&"CompositionEvent"in window,ao=null;qs&&"documentMode"in document&&(ao=document.documentMode);var jg=qs&&"TextEvent"in window&&!ao,Ud=qs&&(!Jc||ao&&8<ao&&11>=ao),Id=" ",zd=!1;function Zc(i,r){switch(i){case"keyup":return Si.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qi=!1;function Mg(i,r){switch(i){case"compositionend":return Vd(r);case"keypress":return r.which!==32?null:(zd=!0,Id);case"textInput":return i=r.data,i===Id&&zd?null:i;default:return null}}function Eg(i,r){if(Qi)return i==="compositionend"||!Jc&&Zc(i,r)?(i=Ed(),eo=xi=_i=null,Qi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ud&&r.locale!=="ko"?null:r.data;default:return null}}var Hd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Hd[i.type]:r==="textarea"}function tu(i,r,c,m){bi?Yi?Yi.push(m):Yi=[m]:bi=m,r=Sf(r,"onChange"),0<r.length&&(c=new ml("onChange","change",null,c,m),i.push({event:c,listeners:r}))}var Xa=null,Qa=null;function Rg(i){J1(i,0)}function pl(i){var r=vi(i);if(Td(r))return i}function Fd(i,r){if(i==="change")return r}var nu=!1;if(qs){var Ci;if(qs){var Ji="oninput"in document;if(!Ji){var su=document.createElement("div");su.setAttribute("oninput","return;"),Ji=typeof su.oninput=="function"}Ci=Ji}else Ci=!1;nu=Ci&&(!document.documentMode||9<document.documentMode)}function iu(){Xa&&(Xa.detachEvent("onpropertychange",au),Qa=Xa=null)}function au(i){if(i.propertyName==="value"&&pl(Qa)){var r=[];tu(r,Qa,i,ul(i)),Ki(Rg,r)}}function qd(i,r,c){i==="focusin"?(iu(),Xa=r,Qa=c,Xa.attachEvent("onpropertychange",au)):i==="focusout"&&iu()}function kg(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pl(Qa)}function ru(i,r){if(i==="click")return pl(r)}function Ng(i,r){if(i==="input"||i==="change")return pl(r)}function yl(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Zn=typeof Object.is=="function"?Object.is:yl;function Zi(i,r){if(Zn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),m=Object.keys(r);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var b=c[m];if(!Ct.call(r,b)||!Zn(i[b],r[b]))return!1}return!0}function ou(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function zn(i,r){var c=ou(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=r&&m>=r)return{node:c,offset:r-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ou(c)}}function vl(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?vl(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function bl(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=cl(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=cl(i.document)}return r}function lu(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}function Dg(i,r){var c=bl(r);r=i.focusedElem;var m=i.selectionRange;if(c!==r&&r&&r.ownerDocument&&vl(r.ownerDocument.documentElement,r)){if(m!==null&&lu(r)){if(i=m.start,c=m.end,c===void 0&&(c=i),"selectionStart"in r)r.selectionStart=i,r.selectionEnd=Math.min(c,r.value.length);else if(c=(i=r.ownerDocument||document)&&i.defaultView||window,c.getSelection){c=c.getSelection();var b=r.textContent.length,w=Math.min(m.start,b);m=m.end===void 0?w:Math.min(m.end,b),!c.extend&&w>m&&(b=m,m=w,w=b),b=zn(r,w);var E=zn(r,m);b&&E&&(c.rangeCount!==1||c.anchorNode!==b.node||c.anchorOffset!==b.offset||c.focusNode!==E.node||c.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),c.removeAllRanges(),w>m?(c.addRange(i),c.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),c.addRange(i)))}}for(i=[],c=r;c=c.parentNode;)c.nodeType===1&&i.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<i.length;r++)c=i[r],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var cu=qs&&"documentMode"in document&&11>=document.documentMode,ea=null,uu=null,ro=null,_l=!1;function Ja(i,r,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_l||ea==null||ea!==cl(m)||(m=ea,"selectionStart"in m&&lu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ro&&Zi(ro,m)||(ro=m,m=Sf(uu,"onSelect"),0<m.length&&(r=new ml("onSelect","select",null,r,c),i.push({event:r,listeners:m}),r.target=ea)))}function ta(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var na={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},Ws={},xl={};qs&&(xl=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function sa(i){if(Ws[i])return Ws[i];if(!na[i])return i;var r=na[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in xl)return Ws[i]=r[c];return i}var hu=sa("animationend"),du=sa("animationiteration"),$d=sa("animationstart"),Pg=sa("transitionrun"),Lg=sa("transitionstart"),wl=sa("transitioncancel"),Ys=sa("transitionend"),Gd=new Map,Wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function pn(i,r){Gd.set(i,r),Gi(r,[i])}var hs=[],Za=0,fu=0;function Ks(){for(var i=Za,r=fu=Za=0;r<i;){var c=hs[r];hs[r++]=null;var m=hs[r];hs[r++]=null;var b=hs[r];hs[r++]=null;var w=hs[r];if(hs[r++]=null,m!==null&&b!==null){var E=m.pending;E===null?b.next=b:(b.next=E.next,E.next=b),m.pending=b}w!==0&&er(c,b,w)}}function yn(i,r,c,m){hs[Za++]=i,hs[Za++]=r,hs[Za++]=c,hs[Za++]=m,fu|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function mu(i,r,c,m){return yn(i,r,c,m),oo(i)}function Es(i,r){return yn(i,null,null,r),oo(i)}function er(i,r,c){i.lanes|=c;var m=i.alternate;m!==null&&(m.lanes|=c);for(var b=!1,w=i.return;w!==null;)w.childLanes|=c,m=w.alternate,m!==null&&(m.childLanes|=c),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(b=!0)),i=w,w=w.return;b&&r!==null&&i.tag===3&&(w=i.stateNode,b=31-fn(c),w=w.hiddenUpdates,i=w[b],i===null?w[b]=[r]:i.push(r),r.lane=c|536870912)}function oo(i){if(50<Fu)throw Fu=0,jp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Ti={},Yd=new WeakMap;function Vn(i,r){if(typeof i=="object"&&i!==null){var c=Yd.get(i);return c!==void 0?c:(r={value:i,source:r,stack:G(r)},Yd.set(i,r),r)}return{value:i,source:r,stack:G(r)}}var tr=[],nr=0,lo=null,Sl=0,ds=[],es=0,ia=null,Xs=1,Qs="";function aa(i,r){tr[nr++]=Sl,tr[nr++]=lo,lo=i,Sl=r}function Cl(i,r,c){ds[es++]=Xs,ds[es++]=Qs,ds[es++]=ia,ia=i;var m=Xs;i=Qs;var b=32-fn(m)-1;m&=~(1<<b),c+=1;var w=32-fn(r)+b;if(30<w){var E=b-b%5;w=(m&(1<<E)-1).toString(32),m>>=E,b-=E,Xs=1<<32-fn(r)+b|c<<b|m,Qs=w+i}else Xs=1<<w|c<<b|m,Qs=i}function gu(i){i.return!==null&&(aa(i,1),Cl(i,1,0))}function co(i){for(;i===lo;)lo=tr[--nr],tr[nr]=null,Sl=tr[--nr],tr[nr]=null;for(;i===ia;)ia=ds[--es],ds[es]=null,Qs=ds[--es],ds[es]=null,Xs=ds[--es],ds[es]=null}var En=null,vn=null,ct=!1,_s=null,Rs=!1,pu=Error(s(519));function Ai(i){var r=Error(s(418,""));throw Js(Vn(r,i)),pu}function Kd(i){var r=i.stateNode,c=i.type,m=i.memoizedProps;switch(r[Pt]=i,r[hn]=m,c){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(c=0;c<$u.length;c++)ot($u[c],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":ot("invalid",r),Ad(r,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Gs(r);break;case"select":ot("invalid",r);break;case"textarea":ot("invalid",r),Mn(r,m.value,m.defaultValue,m.children),Gs(r)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||m.suppressHydrationWarning===!0||n_(r.textContent,c)?(m.popover!=null&&(ot("beforetoggle",r),ot("toggle",r)),m.onScroll!=null&&ot("scroll",r),m.onScrollEnd!=null&&ot("scrollend",r),m.onClick!=null&&(r.onclick=Cf),r=!0):r=!1,r||Ai(i)}function ts(i){for(En=i.return;En;)switch(En.tag){case 3:case 27:Rs=!0;return;case 5:case 13:Rs=!1;return;default:En=En.return}}function ra(i){if(i!==En)return!1;if(!ct)return ts(i),ct=!0,!1;var r=!1,c;if((c=i.tag!==3&&i.tag!==27)&&((c=i.tag===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||$p(i.type,i.memoizedProps)),c=!c),c&&(r=!0),r&&vn&&Ai(i),ts(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(r===0){vn=ri(i.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;i=i.nextSibling}vn=null}}else vn=En?ri(i.stateNode.nextSibling):null;return!0}function oa(){vn=En=null,ct=!1}function Js(i){_s===null?_s=[i]:_s.push(i)}var la=Error(s(460)),yu=Error(s(474)),Tl={then:function(){}};function sr(i){return i=i.status,i==="fulfilled"||i==="rejected"}function uo(){}function ir(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(uo,uo),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,i===la?Error(s(483)):i;default:if(typeof r.status=="string")r.then(uo,uo);else{if(i=Et,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(m){if(r.status==="pending"){var b=r;b.status="fulfilled",b.value=m}},function(m){if(r.status==="pending"){var b=r;b.status="rejected",b.reason=m}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,i===la?Error(s(483)):i}throw Zs=r,la}}var Zs=null;function Al(){if(Zs===null)throw Error(s(459));var i=Zs;return Zs=null,i}var ei=null,ho=0;function ar(i){var r=ho;return ho+=1,ei===null&&(ei=[]),ir(ei,i,r)}function Hn(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ca(i,r){throw r.$$typeof===o?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Xd(i){var r=i._init;return r(i._payload)}function Qd(i){function r(Z,Y){if(i){var ie=Z.deletions;ie===null?(Z.deletions=[Y],Z.flags|=16):ie.push(Y)}}function c(Z,Y){if(!i)return null;for(;Y!==null;)r(Z,Y),Y=Y.sibling;return null}function m(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function b(Z,Y){return Z=br(Z,Y),Z.index=0,Z.sibling=null,Z}function w(Z,Y,ie){return Z.index=ie,i?(ie=Z.alternate,ie!==null?(ie=ie.index,ie<Y?(Z.flags|=33554434,Y):ie):(Z.flags|=33554434,Y)):(Z.flags|=1048576,Y)}function E(Z){return i&&Z.alternate===null&&(Z.flags|=33554434),Z}function D(Z,Y,ie,pe){return Y===null||Y.tag!==6?(Y=_p(ie,Z.mode,pe),Y.return=Z,Y):(Y=b(Y,ie),Y.return=Z,Y)}function H(Z,Y,ie,pe){var Be=ie.type;return Be===h?de(Z,Y,ie.props.children,pe,ie.key):Y!==null&&(Y.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===B&&Xd(Be)===Y.type)?(Y=b(Y,ie.props),Hn(Y,ie),Y.return=Z,Y):(Y=ff(ie.type,ie.key,ie.props,null,Z.mode,pe),Hn(Y,ie),Y.return=Z,Y)}function K(Z,Y,ie,pe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ie.containerInfo||Y.stateNode.implementation!==ie.implementation?(Y=xp(ie,Z.mode,pe),Y.return=Z,Y):(Y=b(Y,ie.children||[]),Y.return=Z,Y)}function de(Z,Y,ie,pe,Be){return Y===null||Y.tag!==7?(Y=To(ie,Z.mode,pe,Be),Y.return=Z,Y):(Y=b(Y,ie),Y.return=Z,Y)}function Se(Z,Y,ie){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=_p(""+Y,Z.mode,ie),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case l:return ie=ff(Y.type,Y.key,Y.props,null,Z.mode,ie),Hn(ie,Y),ie.return=Z,ie;case u:return Y=xp(Y,Z.mode,ie),Y.return=Z,Y;case B:var pe=Y._init;return Y=pe(Y._payload),Se(Z,Y,ie)}if(Ae(Y)||ee(Y))return Y=To(Y,Z.mode,ie,null),Y.return=Z,Y;if(typeof Y.then=="function")return Se(Z,ar(Y),ie);if(Y.$$typeof===T)return Se(Z,uf(Z,Y),ie);ca(Z,Y)}return null}function re(Z,Y,ie,pe){var Be=Y!==null?Y.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Be!==null?null:D(Z,Y,""+ie,pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:return ie.key===Be?H(Z,Y,ie,pe):null;case u:return ie.key===Be?K(Z,Y,ie,pe):null;case B:return Be=ie._init,ie=Be(ie._payload),re(Z,Y,ie,pe)}if(Ae(ie)||ee(ie))return Be!==null?null:de(Z,Y,ie,pe,null);if(typeof ie.then=="function")return re(Z,Y,ar(ie),pe);if(ie.$$typeof===T)return re(Z,Y,uf(Z,ie),pe);ca(Z,ie)}return null}function he(Z,Y,ie,pe,Be){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Z=Z.get(ie)||null,D(Y,Z,""+pe,Be);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case l:return Z=Z.get(pe.key===null?ie:pe.key)||null,H(Y,Z,pe,Be);case u:return Z=Z.get(pe.key===null?ie:pe.key)||null,K(Y,Z,pe,Be);case B:var st=pe._init;return pe=st(pe._payload),he(Z,Y,ie,pe,Be)}if(Ae(pe)||ee(pe))return Z=Z.get(ie)||null,de(Y,Z,pe,Be,null);if(typeof pe.then=="function")return he(Z,Y,ie,ar(pe),Be);if(pe.$$typeof===T)return he(Z,Y,ie,uf(Y,pe),Be);ca(Y,pe)}return null}function ze(Z,Y,ie,pe){for(var Be=null,st=null,He=Y,qe=Y=0,Tn=null;He!==null&&qe<ie.length;qe++){He.index>qe?(Tn=He,He=null):Tn=He.sibling;var ft=re(Z,He,ie[qe],pe);if(ft===null){He===null&&(He=Tn);break}i&&He&&ft.alternate===null&&r(Z,He),Y=w(ft,Y,qe),st===null?Be=ft:st.sibling=ft,st=ft,He=Tn}if(qe===ie.length)return c(Z,He),ct&&aa(Z,qe),Be;if(He===null){for(;qe<ie.length;qe++)He=Se(Z,ie[qe],pe),He!==null&&(Y=w(He,Y,qe),st===null?Be=He:st.sibling=He,st=He);return ct&&aa(Z,qe),Be}for(He=m(He);qe<ie.length;qe++)Tn=he(He,Z,qe,ie[qe],pe),Tn!==null&&(i&&Tn.alternate!==null&&He.delete(Tn.key===null?qe:Tn.key),Y=w(Tn,Y,qe),st===null?Be=Tn:st.sibling=Tn,st=Tn);return i&&He.forEach(function(Ar){return r(Z,Ar)}),ct&&aa(Z,qe),Be}function Ke(Z,Y,ie,pe){if(ie==null)throw Error(s(151));for(var Be=null,st=null,He=Y,qe=Y=0,Tn=null,ft=ie.next();He!==null&&!ft.done;qe++,ft=ie.next()){He.index>qe?(Tn=He,He=null):Tn=He.sibling;var Ar=re(Z,He,ft.value,pe);if(Ar===null){He===null&&(He=Tn);break}i&&He&&Ar.alternate===null&&r(Z,He),Y=w(Ar,Y,qe),st===null?Be=Ar:st.sibling=Ar,st=Ar,He=Tn}if(ft.done)return c(Z,He),ct&&aa(Z,qe),Be;if(He===null){for(;!ft.done;qe++,ft=ie.next())ft=Se(Z,ft.value,pe),ft!==null&&(Y=w(ft,Y,qe),st===null?Be=ft:st.sibling=ft,st=ft);return ct&&aa(Z,qe),Be}for(He=m(He);!ft.done;qe++,ft=ie.next())ft=he(He,Z,qe,ft.value,pe),ft!==null&&(i&&ft.alternate!==null&&He.delete(ft.key===null?qe:ft.key),Y=w(ft,Y,qe),st===null?Be=ft:st.sibling=ft,st=ft);return i&&He.forEach(function(TO){return r(Z,TO)}),ct&&aa(Z,qe),Be}function Zt(Z,Y,ie,pe){if(typeof ie=="object"&&ie!==null&&ie.type===h&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:e:{for(var Be=ie.key;Y!==null;){if(Y.key===Be){if(Be=ie.type,Be===h){if(Y.tag===7){c(Z,Y.sibling),pe=b(Y,ie.props.children),pe.return=Z,Z=pe;break e}}else if(Y.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===B&&Xd(Be)===Y.type){c(Z,Y.sibling),pe=b(Y,ie.props),Hn(pe,ie),pe.return=Z,Z=pe;break e}c(Z,Y);break}else r(Z,Y);Y=Y.sibling}ie.type===h?(pe=To(ie.props.children,Z.mode,pe,ie.key),pe.return=Z,Z=pe):(pe=ff(ie.type,ie.key,ie.props,null,Z.mode,pe),Hn(pe,ie),pe.return=Z,Z=pe)}return E(Z);case u:e:{for(Be=ie.key;Y!==null;){if(Y.key===Be)if(Y.tag===4&&Y.stateNode.containerInfo===ie.containerInfo&&Y.stateNode.implementation===ie.implementation){c(Z,Y.sibling),pe=b(Y,ie.children||[]),pe.return=Z,Z=pe;break e}else{c(Z,Y);break}else r(Z,Y);Y=Y.sibling}pe=xp(ie,Z.mode,pe),pe.return=Z,Z=pe}return E(Z);case B:return Be=ie._init,ie=Be(ie._payload),Zt(Z,Y,ie,pe)}if(Ae(ie))return ze(Z,Y,ie,pe);if(ee(ie)){if(Be=ee(ie),typeof Be!="function")throw Error(s(150));return ie=Be.call(ie),Ke(Z,Y,ie,pe)}if(typeof ie.then=="function")return Zt(Z,Y,ar(ie),pe);if(ie.$$typeof===T)return Zt(Z,Y,uf(Z,ie),pe);ca(Z,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Y!==null&&Y.tag===6?(c(Z,Y.sibling),pe=b(Y,ie),pe.return=Z,Z=pe):(c(Z,Y),pe=_p(ie,Z.mode,pe),pe.return=Z,Z=pe),E(Z)):c(Z,Y)}return function(Z,Y,ie,pe){try{ho=0;var Be=Zt(Z,Y,ie,pe);return ei=null,Be}catch(He){if(He===la)throw He;var st=Ds(29,He,null,Z.mode);return st.lanes=pe,st.return=Z,st}finally{}}}var Oi=Qd(!0),Jd=Qd(!1),ua=F(null),fs=F(0);function vu(i,r){i=Ca,ve(fs,i),ve(ua,r),Ca=i|r.baseLanes}function ha(){ve(fs,Ca),ve(ua,ua.current)}function Ol(){Ca=fs.current,W(ua),W(fs)}var ns=F(null),Rn=null;function ss(i){var r=i.alternate;ve(an,an.current&1),ve(ns,i),Rn===null&&(r===null||ua.current!==null||r.memoizedState!==null)&&(Rn=i)}function Zd(i){if(i.tag===22){if(ve(an,an.current),ve(ns,i),Rn===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(Rn=i)}}else ti()}function ti(){ve(an,an.current),ve(ns,ns.current)}function gt(i){W(ns),Rn===i&&(Rn=null),W(an)}var an=F(0);function jl(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bg=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,m){i.push(m)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},Ug=t.unstable_scheduleCallback,Ig=t.unstable_NormalPriority,rn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ml(){return{controller:new Bg,data:new Map,refCount:0}}function fo(i){i.refCount--,i.refCount===0&&Ug(Ig,function(){i.controller.abort()})}var da=null,bu=0,rr=0,or=null;function zg(i,r){if(da===null){var c=da=[];bu=0,rr=Lp(),or={status:"pending",value:void 0,then:function(m){c.push(m)}}}return bu++,r.then(ef,ef),r}function ef(){if(--bu===0&&da!==null){or!==null&&(or.status="fulfilled");var i=da;da=null,rr=0,or=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Vg(i,r){var c=[],m={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return i.then(function(){m.status="fulfilled",m.value=r;for(var b=0;b<c.length;b++)(0,c[b])(r)},function(b){for(m.status="rejected",m.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),m}var _u=X.S;X.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&zg(i,r),_u!==null&&_u(i,r)};var fa=F(null);function xu(){var i=fa.current;return i!==null?i:Et.pooledCache}function El(i,r){r===null?ve(fa,fa.current):ve(fa,r.pool)}function tf(){var i=xu();return i===null?null:{parent:rn._currentValue,pool:i}}var ni=0,Qe=null,vt=null,Kt=null,Rl=!1,lr=!1,ma=!1,kl=0,mo=0,cr=null,go=0;function It(){throw Error(s(321))}function po(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Zn(i[c],r[c]))return!1;return!0}function wu(i,r,c,m,b,w){return ni=w,Qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?bo:hr,ma=!1,w=c(m,b),ma=!1,lr&&(w=Su(r,c,m,b)),Nl(i),w}function Nl(i){X.H=Mi;var r=vt!==null&&vt.next!==null;if(ni=0,Kt=vt=Qe=null,Rl=!1,mo=0,cr=null,r)throw Error(s(300));i===null||Sn||(i=i.dependencies,i!==null&&cf(i)&&(Sn=!0))}function Su(i,r,c,m){Qe=i;var b=0;do{if(lr&&(cr=null),mo=0,lr=!1,25<=b)throw Error(s(301));if(b+=1,Kt=vt=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}X.H=_o,w=r(c,m)}while(lr);return w}function Hg(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?si(r):r,i=i.useState()[0],(vt!==null?vt.memoizedState:null)!==i&&(Qe.flags|=1024),r}function Cu(){var i=kl!==0;return kl=0,i}function Tu(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function Au(i){if(Rl){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Rl=!1}ni=0,Kt=vt=Qe=null,lr=!1,mo=kl=0,cr=null}function Fn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Qe.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function Xt(){if(vt===null){var i=Qe.alternate;i=i!==null?i.memoizedState:null}else i=vt.next;var r=Kt===null?Qe.memoizedState:Kt.next;if(r!==null)Kt=r,vt=i;else{if(i===null)throw Qe.alternate===null?Error(s(467)):Error(s(310));vt=i,i={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Kt===null?Qe.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}var yo;yo=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function si(i){var r=mo;return mo+=1,cr===null&&(cr=[]),i=ir(cr,i,r),r=Qe,(Kt===null?r.memoizedState:Kt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?bo:hr),i}function ji(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return si(i);if(i.$$typeof===T)return qn(i)}throw Error(s(438,String(i)))}function vo(i){var r=null,c=Qe.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var m=Qe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(r={data:m.data.map(function(b){return b.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=yo(),Qe.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),m=0;m<i;m++)c[m]=P;return r.index++,c}function ii(i,r){return typeof r=="function"?r(i):r}function Dl(i){var r=Xt();return Ou(r,vt,i)}function Ou(i,r,c){var m=i.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=c;var b=i.baseQueue,w=m.pending;if(w!==null){if(b!==null){var E=b.next;b.next=w.next,w.next=E}r.baseQueue=b=w,m.pending=null}if(w=i.baseState,b===null)i.memoizedState=w;else{r=b.next;var D=E=null,H=null,K=r,de=!1;do{var Se=K.lane&-536870913;if(Se!==K.lane?(ut&Se)===Se:(ni&Se)===Se){var re=K.revertLane;if(re===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),Se===rr&&(de=!0);else if((ni&re)===re){K=K.next,re===rr&&(de=!0);continue}else Se={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},H===null?(D=H=Se,E=w):H=H.next=Se,Qe.lanes|=re,_r|=re;Se=K.action,ma&&c(w,Se),w=K.hasEagerState?K.eagerState:c(w,Se)}else re={lane:Se,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},H===null?(D=H=re,E=w):H=H.next=re,Qe.lanes|=Se,_r|=Se;K=K.next}while(K!==null&&K!==r);if(H===null?E=w:H.next=D,!Zn(w,i.memoizedState)&&(Sn=!0,de&&(c=or,c!==null)))throw c;i.memoizedState=w,i.baseState=E,i.baseQueue=H,m.lastRenderedState=w}return b===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function ju(i){var r=Xt(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var m=c.dispatch,b=c.pending,w=r.memoizedState;if(b!==null){c.pending=null;var E=b=b.next;do w=i(w,E.action),E=E.next;while(E!==b);Zn(w,r.memoizedState)||(Sn=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),c.lastRenderedState=w}return[w,m]}function nf(i,r,c){var m=Qe,b=Xt(),w=ct;if(w){if(c===void 0)throw Error(s(407));c=c()}else c=r();var E=!Zn((vt||b).memoizedState,c);if(E&&(b.memoizedState=c,Sn=!0),b=b.queue,kn(af.bind(null,m,b,i),[i]),b.getSnapshot!==r||E||Kt!==null&&Kt.memoizedState.tag&1){if(m.flags|=2048,Ve(9,sf.bind(null,m,b,c,r),{destroy:void 0},null),Et===null)throw Error(s(349));w||(ni&60)!==0||Mu(m,r,c)}return c}function Mu(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=Qe.updateQueue,r===null?(r=yo(),Qe.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function sf(i,r,c,m){r.value=c,r.getSnapshot=m,d(r)&&f(i)}function af(i,r,c){return c(function(){d(r)&&f(i)})}function d(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Zn(i,c)}catch{return!0}}function f(i){var r=Es(i,2);r!==null&&is(r,i,2)}function v(i){var r=Fn();if(typeof i=="function"){var c=i;if(i=c(),ma){rs(!0);try{c()}finally{rs(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:i},r}function x(i,r,c,m){return i.baseState=c,Ou(i,vt,typeof m=="function"?m:ii)}function C(i,r,c,m,b){if(rf(i))throw Error(s(485));if(i=r.action,i!==null){var w={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){w.listeners.push(E)}};X.T!==null?c(!0):w.isTransition=!1,m(w),c=r.pending,c===null?(w.next=r.pending=w,j(r,w)):(w.next=c.next,r.pending=c.next=w)}}function j(i,r){var c=r.action,m=r.payload,b=i.state;if(r.isTransition){var w=X.T,E={};X.T=E;try{var D=c(b,m),H=X.S;H!==null&&H(E,D),L(i,r,D)}catch(K){ne(i,r,K)}finally{X.T=w}}else try{w=c(b,m),L(i,r,w)}catch(K){ne(i,r,K)}}function L(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){V(i,r,m)},function(m){return ne(i,r,m)}):V(i,r,c)}function V(i,r,c){r.status="fulfilled",r.value=c,Q(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,j(i,c)))}function ne(i,r,c){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do r.status="rejected",r.reason=c,Q(r),r=r.next;while(r!==m)}i.action=null}function Q(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ge(i,r){return r}function me(i,r){if(ct){var c=Et.formState;if(c!==null){e:{var m=Qe;if(ct){if(vn){t:{for(var b=vn,w=Rs;b.nodeType!==8;){if(!w){b=null;break t}if(b=ri(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){vn=ri(b.nextSibling),m=b.data==="F!";break e}}Ai(m)}m=!1}m&&(r=c[0])}}return c=Fn(),c.memoizedState=c.baseState=r,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ge,lastRenderedState:r},c.queue=m,c=Ib.bind(null,Qe,m),m.dispatch=c,m=v(!1),w=Wg.bind(null,Qe,!1,m.queue),m=Fn(),b={state:r,dispatch:null,action:i,pending:null},m.queue=b,c=C.bind(null,Qe,b,w,c),b.dispatch=c,m.memoizedState=i,[r,c,!1]}function je(i){var r=Xt();return fe(r,vt,i)}function fe(i,r,c){r=Ou(i,r,ge)[0],i=Dl(ii)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?si(r):r;var m=Xt(),b=m.queue,w=b.dispatch;return c!==m.memoizedState&&(Qe.flags|=2048,Ve(9,De.bind(null,b,c),{destroy:void 0},null)),[r,w,i]}function De(i,r){i.action=r}function ke(i){var r=Xt(),c=vt;if(c!==null)return fe(r,c,i);Xt(),r=r.memoizedState,c=Xt();var m=c.queue.dispatch;return c.memoizedState=i,[r,m,!1]}function Ve(i,r,c,m){return i={tag:i,create:r,inst:c,deps:m,next:null},r=Qe.updateQueue,r===null&&(r=yo(),Qe.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,r.lastEffect=i),i}function rt(){return Xt().memoizedState}function ht(i,r,c,m){var b=Fn();Qe.flags|=i,b.memoizedState=Ve(1|r,c,{destroy:void 0},m===void 0?null:m)}function pt(i,r,c,m){var b=Xt();m=m===void 0?null:m;var w=b.memoizedState.inst;vt!==null&&m!==null&&po(m,vt.memoizedState.deps)?b.memoizedState=Ve(r,c,w,m):(Qe.flags|=i,b.memoizedState=Ve(1|r,c,w,m))}function We(i,r){ht(8390656,8,i,r)}function kn(i,r){pt(2048,8,i,r)}function bn(i,r){return pt(4,2,i,r)}function ur(i,r){return pt(4,4,i,r)}function ga(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Pl(i,r,c){c=c!=null?c.concat([i]):null,pt(4,4,ga.bind(null,r,i),c)}function Fg(){}function Rb(i,r){var c=Xt();r=r===void 0?null:r;var m=c.memoizedState;return r!==null&&po(r,m[1])?m[0]:(c.memoizedState=[i,r],i)}function kb(i,r){var c=Xt();r=r===void 0?null:r;var m=c.memoizedState;if(r!==null&&po(r,m[1]))return m[0];if(m=i(),ma){rs(!0);try{i()}finally{rs(!1)}}return c.memoizedState=[m,r],m}function qg(i,r,c){return c===void 0||(ni&1073741824)!==0?i.memoizedState=r:(i.memoizedState=c,i=D1(),Qe.lanes|=i,_r|=i,c)}function Nb(i,r,c,m){return Zn(c,r)?c:ua.current!==null?(i=qg(i,c,m),Zn(i,r)||(Sn=!0),i):(ni&42)===0?(Sn=!0,i.memoizedState=c):(i=D1(),Qe.lanes|=i,_r|=i,r)}function Db(i,r,c,m,b){var w=we.p;we.p=w!==0&&8>w?w:8;var E=X.T,D={};X.T=D,Wg(i,!1,r,c);try{var H=b(),K=X.S;if(K!==null&&K(D,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var de=Vg(H,m);Eu(i,r,de,Cs(i))}else Eu(i,r,m,Cs(i))}catch(Se){Eu(i,r,{then:function(){},status:"rejected",reason:Se},Cs())}finally{we.p=w,X.T=E}}function xA(){}function $g(i,r,c,m){if(i.tag!==5)throw Error(s(476));var b=Pb(i).queue;Db(i,b,r,Ne,c===null?xA:function(){return Lb(i),c(m)})}function Pb(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:Ne},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Lb(i){var r=Pb(i).next.queue;Eu(i,r,{},Cs())}function Gg(){return qn(Xu)}function Bb(){return Xt().memoizedState}function Ub(){return Xt().memoizedState}function wA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Cs();i=mr(c);var m=gr(r,i,c);m!==null&&(is(m,r,c),Nu(m,r,c)),r={cache:Ml()},i.payload=r;return}r=r.return}}function SA(i,r,c){var m=Cs();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},rf(i)?zb(r,c):(c=mu(i,r,c,m),c!==null&&(is(c,i,m),Vb(c,r,m)))}function Ib(i,r,c){var m=Cs();Eu(i,r,c,m)}function Eu(i,r,c,m){var b={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(rf(i))zb(r,b);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var E=r.lastRenderedState,D=w(E,c);if(b.hasEagerState=!0,b.eagerState=D,Zn(D,E))return yn(i,r,b,0),Et===null&&Ks(),!1}catch{}finally{}if(c=mu(i,r,b,m),c!==null)return is(c,i,m),Vb(c,r,m),!0}return!1}function Wg(i,r,c,m){if(m={lane:2,revertLane:Lp(),action:m,hasEagerState:!1,eagerState:null,next:null},rf(i)){if(r)throw Error(s(479))}else r=mu(i,c,m,2),r!==null&&is(r,i,2)}function rf(i){var r=i.alternate;return i===Qe||r!==null&&r===Qe}function zb(i,r){lr=Rl=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function Vb(i,r,c){if((c&4194176)!==0){var m=r.lanes;m&=i.pendingLanes,c|=m,r.lanes=c,$i(i,c)}}var Mi={readContext:qn,use:ji,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It};Mi.useCacheRefresh=It,Mi.useMemoCache=It,Mi.useHostTransitionStatus=It,Mi.useFormState=It,Mi.useActionState=It,Mi.useOptimistic=It;var bo={readContext:qn,use:ji,useCallback:function(i,r){return Fn().memoizedState=[i,r===void 0?null:r],i},useContext:qn,useEffect:We,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,ht(4194308,4,ga.bind(null,r,i),c)},useLayoutEffect:function(i,r){return ht(4194308,4,i,r)},useInsertionEffect:function(i,r){ht(4,2,i,r)},useMemo:function(i,r){var c=Fn();r=r===void 0?null:r;var m=i();if(ma){rs(!0);try{i()}finally{rs(!1)}}return c.memoizedState=[m,r],m},useReducer:function(i,r,c){var m=Fn();if(c!==void 0){var b=c(r);if(ma){rs(!0);try{c(r)}finally{rs(!1)}}}else b=r;return m.memoizedState=m.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},m.queue=i,i=i.dispatch=SA.bind(null,Qe,i),[m.memoizedState,i]},useRef:function(i){var r=Fn();return i={current:i},r.memoizedState=i},useState:function(i){i=v(i);var r=i.queue,c=Ib.bind(null,Qe,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:Fg,useDeferredValue:function(i,r){var c=Fn();return qg(c,i,r)},useTransition:function(){var i=v(!1);return i=Db.bind(null,Qe,i.queue,!0,!1),Fn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var m=Qe,b=Fn();if(ct){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Et===null)throw Error(s(349));(ut&60)!==0||Mu(m,r,c)}b.memoizedState=c;var w={value:c,getSnapshot:r};return b.queue=w,We(af.bind(null,m,w,i),[i]),m.flags|=2048,Ve(9,sf.bind(null,m,w,c,r),{destroy:void 0},null),c},useId:function(){var i=Fn(),r=Et.identifierPrefix;if(ct){var c=Qs,m=Xs;c=(m&~(1<<32-fn(m)-1)).toString(32)+c,r=":"+r+"R"+c,c=kl++,0<c&&(r+="H"+c.toString(32)),r+=":"}else c=go++,r=":"+r+"r"+c.toString(32)+":";return i.memoizedState=r},useCacheRefresh:function(){return Fn().memoizedState=wA.bind(null,Qe)}};bo.useMemoCache=vo,bo.useHostTransitionStatus=Gg,bo.useFormState=me,bo.useActionState=me,bo.useOptimistic=function(i){var r=Fn();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Wg.bind(null,Qe,!0,c),c.dispatch=r,[i,r]};var hr={readContext:qn,use:ji,useCallback:Rb,useContext:qn,useEffect:kn,useImperativeHandle:Pl,useInsertionEffect:bn,useLayoutEffect:ur,useMemo:kb,useReducer:Dl,useRef:rt,useState:function(){return Dl(ii)},useDebugValue:Fg,useDeferredValue:function(i,r){var c=Xt();return Nb(c,vt.memoizedState,i,r)},useTransition:function(){var i=Dl(ii)[0],r=Xt().memoizedState;return[typeof i=="boolean"?i:si(i),r]},useSyncExternalStore:nf,useId:Bb};hr.useCacheRefresh=Ub,hr.useMemoCache=vo,hr.useHostTransitionStatus=Gg,hr.useFormState=je,hr.useActionState=je,hr.useOptimistic=function(i,r){var c=Xt();return x(c,vt,i,r)};var _o={readContext:qn,use:ji,useCallback:Rb,useContext:qn,useEffect:kn,useImperativeHandle:Pl,useInsertionEffect:bn,useLayoutEffect:ur,useMemo:kb,useReducer:ju,useRef:rt,useState:function(){return ju(ii)},useDebugValue:Fg,useDeferredValue:function(i,r){var c=Xt();return vt===null?qg(c,i,r):Nb(c,vt.memoizedState,i,r)},useTransition:function(){var i=ju(ii)[0],r=Xt().memoizedState;return[typeof i=="boolean"?i:si(i),r]},useSyncExternalStore:nf,useId:Bb};_o.useCacheRefresh=Ub,_o.useMemoCache=vo,_o.useHostTransitionStatus=Gg,_o.useFormState=ke,_o.useActionState=ke,_o.useOptimistic=function(i,r){var c=Xt();return vt!==null?x(c,vt,i,r):(c.baseState=i,[i,c.queue.dispatch])};function Yg(i,r,c,m){r=i.memoizedState,c=c(m,r),c=c==null?r:oe({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Kg={isMounted:function(i){return(i=i._reactInternals)?ce(i)===i:!1},enqueueSetState:function(i,r,c){i=i._reactInternals;var m=Cs(),b=mr(m);b.payload=r,c!=null&&(b.callback=c),r=gr(i,b,m),r!==null&&(is(r,i,m),Nu(r,i,m))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var m=Cs(),b=mr(m);b.tag=1,b.payload=r,c!=null&&(b.callback=c),r=gr(i,b,m),r!==null&&(is(r,i,m),Nu(r,i,m))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Cs(),m=mr(c);m.tag=2,r!=null&&(m.callback=r),r=gr(i,m,c),r!==null&&(is(r,i,c),Nu(r,i,c))}};function Hb(i,r,c,m,b,w,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,w,E):r.prototype&&r.prototype.isPureReactComponent?!Zi(c,m)||!Zi(b,w):!0}function Fb(i,r,c,m){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,m),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,m),r.state!==i&&Kg.enqueueReplaceState(r,r.state,null)}function xo(i,r){var c=r;if("ref"in r){c={};for(var m in r)m!=="ref"&&(c[m]=r[m])}if(i=i.defaultProps){c===r&&(c=oe({},c));for(var b in i)c[b]===void 0&&(c[b]=i[b])}return c}var of=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function qb(i){of(i)}function $b(i){console.error(i)}function Gb(i){of(i)}function lf(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(m){setTimeout(function(){throw m})}}function Wb(i,r,c){try{var m=i.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Xg(i,r,c){return c=mr(c),c.tag=3,c.payload={element:null},c.callback=function(){lf(i,r)},c}function Yb(i){return i=mr(i),i.tag=3,i}function Kb(i,r,c,m){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;i.payload=function(){return b(w)},i.callback=function(){Wb(r,c,m)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Wb(r,c,m),typeof b!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function CA(i,r,c,m,b){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(r=c.alternate,r!==null&&ku(r,c,b,!0),c=ns.current,c!==null){switch(c.tag){case 13:return Rn===null?Rp():c.alternate===null&&Jt===0&&(Jt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,m===Tl?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([m]):r.add(m),Np(i,m,b)),!1;case 22:return c.flags|=65536,m===Tl?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([m]):c.add(m)),Np(i,m,b)),!1}throw Error(s(435,c.tag))}return Np(i,m,b),Rp(),!1}if(ct)return r=ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=b,m!==pu&&(i=Error(s(422),{cause:m}),Js(Vn(i,c)))):(m!==pu&&(r=Error(s(423),{cause:m}),Js(Vn(r,c))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,m=Vn(m,c),b=Xg(i.stateNode,m,b),hp(i,b),Jt!==4&&(Jt=2)),!1;var w=Error(s(520),{cause:m});if(w=Vn(w,c),Vu===null?Vu=[w]:Vu.push(w),Jt!==4&&(Jt=2),r===null)return!0;m=Vn(m,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=b&-b,c.lanes|=i,i=Xg(c.stateNode,m,i),hp(c,i),!1;case 1:if(r=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(xr===null||!xr.has(w))))return c.flags|=65536,b&=-b,c.lanes|=b,b=Yb(b),Kb(b,i,c,m),hp(c,b),!1}c=c.return}while(c!==null);return!1}var Xb=Error(s(461)),Sn=!1;function Nn(i,r,c,m){r.child=i===null?Jd(r,null,c,m):Oi(r,i.child,c,m)}function Qb(i,r,c,m,b){c=c.render;var w=r.ref;if("ref"in m){var E={};for(var D in m)D!=="ref"&&(E[D]=m[D])}else E=m;return So(r),m=wu(i,r,c,E,w,b),D=Cu(),i!==null&&!Sn?(Tu(i,r,b),pa(i,r,b)):(ct&&D&&gu(r),r.flags|=1,Nn(i,r,m,b),r.child)}function Jb(i,r,c,m,b){if(i===null){var w=c.type;return typeof w=="function"&&!bp(w)&&w.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=w,Zb(i,r,w,m,b)):(i=ff(c.type,null,m,r,r.mode,b),i.ref=r.ref,i.return=r,r.child=i)}if(w=i.child,!ap(i,b)){var E=w.memoizedProps;if(c=c.compare,c=c!==null?c:Zi,c(E,m)&&i.ref===r.ref)return pa(i,r,b)}return r.flags|=1,i=br(w,m),i.ref=r.ref,i.return=r,r.child=i}function Zb(i,r,c,m,b){if(i!==null){var w=i.memoizedProps;if(Zi(w,m)&&i.ref===r.ref)if(Sn=!1,r.pendingProps=m=w,ap(i,b))(i.flags&131072)!==0&&(Sn=!0);else return r.lanes=i.lanes,pa(i,r,b)}return Qg(i,r,c,m,b)}function e1(i,r,c){var m=r.pendingProps,b=m.children,w=(r.stateNode._pendingVisibility&2)!==0,E=i!==null?i.memoizedState:null;if(Ru(i,r),m.mode==="hidden"||w){if((r.flags&128)!==0){if(m=E!==null?E.baseLanes|c:c,i!==null){for(b=r.child=i.child,w=0;b!==null;)w=w|b.lanes|b.childLanes,b=b.sibling;r.childLanes=w&~m}else r.childLanes=0,r.child=null;return t1(i,r,m,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&El(r,E!==null?E.cachePool:null),E!==null?vu(r,E):ha(),Zd(r);else return r.lanes=r.childLanes=536870912,t1(i,r,E!==null?E.baseLanes|c:c,c)}else E!==null?(El(r,E.cachePool),vu(r,E),ti(),r.memoizedState=null):(i!==null&&El(r,null),ha(),ti());return Nn(i,r,b,c),r.child}function t1(i,r,c,m){var b=xu();return b=b===null?null:{parent:rn._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},i!==null&&El(r,null),ha(),Zd(r),i!==null&&ku(i,r,m,!0),null}function Ru(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=2097664)}}function Qg(i,r,c,m,b){return So(r),c=wu(i,r,c,m,void 0,b),m=Cu(),i!==null&&!Sn?(Tu(i,r,b),pa(i,r,b)):(ct&&m&&gu(r),r.flags|=1,Nn(i,r,c,b),r.child)}function n1(i,r,c,m,b,w){return So(r),r.updateQueue=null,c=Su(r,m,c,b),Nl(i),m=Cu(),i!==null&&!Sn?(Tu(i,r,w),pa(i,r,w)):(ct&&m&&gu(r),r.flags|=1,Nn(i,r,c,w),r.child)}function s1(i,r,c,m,b){if(So(r),r.stateNode===null){var w=Ti,E=c.contextType;typeof E=="object"&&E!==null&&(w=qn(E)),w=new c(m,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Kg,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=m,w.state=r.memoizedState,w.refs={},cp(r),E=c.contextType,w.context=typeof E=="object"&&E!==null?qn(E):Ti,w.state=r.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Yg(r,c,E,m),w.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(E=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),E!==w.state&&Kg.enqueueReplaceState(w,w.state,null),Pu(r,m,w,b),Du(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),m=!0}else if(i===null){w=r.stateNode;var D=r.memoizedProps,H=xo(c,D);w.props=H;var K=w.context,de=c.contextType;E=Ti,typeof de=="object"&&de!==null&&(E=qn(de));var Se=c.getDerivedStateFromProps;de=typeof Se=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=r.pendingProps!==D,de||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||K!==E)&&Fb(r,w,m,E),fr=!1;var re=r.memoizedState;w.state=re,Pu(r,m,w,b),Du(),K=r.memoizedState,D||re!==K||fr?(typeof Se=="function"&&(Yg(r,c,Se,m),K=r.memoizedState),(H=fr||Hb(r,c,H,m,re,K,E))?(de||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=m,r.memoizedState=K),w.props=m,w.state=K,w.context=E,m=H):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),m=!1)}else{w=r.stateNode,up(i,r),E=r.memoizedProps,de=xo(c,E),w.props=de,Se=r.pendingProps,re=w.context,K=c.contextType,H=Ti,typeof K=="object"&&K!==null&&(H=qn(K)),D=c.getDerivedStateFromProps,(K=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==Se||re!==H)&&Fb(r,w,m,H),fr=!1,re=r.memoizedState,w.state=re,Pu(r,m,w,b),Du();var he=r.memoizedState;E!==Se||re!==he||fr||i!==null&&i.dependencies!==null&&cf(i.dependencies)?(typeof D=="function"&&(Yg(r,c,D,m),he=r.memoizedState),(de=fr||Hb(r,c,de,m,re,he,H)||i!==null&&i.dependencies!==null&&cf(i.dependencies))?(K||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,he,H),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,he,H)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||E===i.memoizedProps&&re===i.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&re===i.memoizedState||(r.flags|=1024),r.memoizedProps=m,r.memoizedState=he),w.props=m,w.state=he,w.context=H,m=de):(typeof w.componentDidUpdate!="function"||E===i.memoizedProps&&re===i.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&re===i.memoizedState||(r.flags|=1024),m=!1)}return w=m,Ru(i,r),m=(r.flags&128)!==0,w||m?(w=r.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,i!==null&&m?(r.child=Oi(r,i.child,null,b),r.child=Oi(r,null,c,b)):Nn(i,r,c,b),r.memoizedState=w.state,i=r.child):i=pa(i,r,b),i}function i1(i,r,c,m){return oa(),r.flags|=256,Nn(i,r,c,m),r.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function Zg(i){return{baseLanes:i,cachePool:tf()}}function ep(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=Ps),i}function a1(i,r,c){var m=r.pendingProps,b=!1,w=(r.flags&128)!==0,E;if((E=w)||(E=i!==null&&i.memoizedState===null?!1:(an.current&2)!==0),E&&(b=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,i===null){if(ct){if(b?ss(r):ti(),ct){var D=vn,H;if(H=D){e:{for(H=D,D=Rs;H.nodeType!==8;){if(!D){D=null;break e}if(H=ri(H.nextSibling),H===null){D=null;break e}}D=H}D!==null?(r.memoizedState={dehydrated:D,treeContext:ia!==null?{id:Xs,overflow:Qs}:null,retryLane:536870912},H=Ds(18,null,null,0),H.stateNode=D,H.return=r,r.child=H,En=r,vn=null,H=!0):H=!1}H||Ai(r)}if(D=r.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return D.data==="$!"?r.lanes=16:r.lanes=536870912,null;gt(r)}return D=m.children,m=m.fallback,b?(ti(),b=r.mode,D=np({mode:"hidden",children:D},b),m=To(m,b,c,null),D.return=r,m.return=r,D.sibling=m,r.child=D,b=r.child,b.memoizedState=Zg(c),b.childLanes=ep(i,E,c),r.memoizedState=Jg,m):(ss(r),tp(r,D))}if(H=i.memoizedState,H!==null&&(D=H.dehydrated,D!==null)){if(w)r.flags&256?(ss(r),r.flags&=-257,r=sp(i,r,c)):r.memoizedState!==null?(ti(),r.child=i.child,r.flags|=128,r=null):(ti(),b=m.fallback,D=r.mode,m=np({mode:"visible",children:m.children},D),b=To(b,D,c,null),b.flags|=2,m.return=r,b.return=r,m.sibling=b,r.child=m,Oi(r,i.child,null,c),m=r.child,m.memoizedState=Zg(c),m.childLanes=ep(i,E,c),r.memoizedState=Jg,r=b);else if(ss(r),D.data==="$!"){if(E=D.nextSibling&&D.nextSibling.dataset,E)var K=E.dgst;E=K,m=Error(s(419)),m.stack="",m.digest=E,Js({value:m,source:null,stack:null}),r=sp(i,r,c)}else if(Sn||ku(i,r,c,!1),E=(c&i.childLanes)!==0,Sn||E){if(E=Et,E!==null){if(m=c&-c,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(E.suspendedLanes|c))!==0?0:m,m!==0&&m!==H.retryLane)throw H.retryLane=m,Es(i,m),is(E,i,m),Xb}D.data==="$?"||Rp(),r=sp(i,r,c)}else D.data==="$?"?(r.flags|=128,r.child=i.child,r=IA.bind(null,i),D._reactRetry=r,r=null):(i=H.treeContext,vn=ri(D.nextSibling),En=r,ct=!0,_s=null,Rs=!1,i!==null&&(ds[es++]=Xs,ds[es++]=Qs,ds[es++]=ia,Xs=i.id,Qs=i.overflow,ia=r),r=tp(r,m.children),r.flags|=4096);return r}return b?(ti(),b=m.fallback,D=r.mode,H=i.child,K=H.sibling,m=br(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&31457280,K!==null?b=br(K,b):(b=To(b,D,c,null),b.flags|=2),b.return=r,m.return=r,m.sibling=b,r.child=m,m=b,b=r.child,D=i.child.memoizedState,D===null?D=Zg(c):(H=D.cachePool,H!==null?(K=rn._currentValue,H=H.parent!==K?{parent:K,pool:K}:H):H=tf(),D={baseLanes:D.baseLanes|c,cachePool:H}),b.memoizedState=D,b.childLanes=ep(i,E,c),r.memoizedState=Jg,m):(ss(r),c=i.child,i=c.sibling,c=br(c,{mode:"visible",children:m.children}),c.return=r,c.sibling=null,i!==null&&(E=r.deletions,E===null?(r.deletions=[i],r.flags|=16):E.push(i)),r.child=c,r.memoizedState=null,c)}function tp(i,r){return r=np({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function np(i,r){return R1(i,r,0,null)}function sp(i,r,c){return Oi(r,i.child,null,c),i=tp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function r1(i,r,c){i.lanes|=r;var m=i.alternate;m!==null&&(m.lanes|=r),op(i.return,r,c)}function ip(i,r,c,m,b){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:b}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=c,w.tailMode=b)}function o1(i,r,c){var m=r.pendingProps,b=m.revealOrder,w=m.tail;if(Nn(i,r,m.children,c),m=an.current,(m&2)!==0)m=m&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&r1(i,c,r);else if(i.tag===19)r1(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(ve(an,m),b){case"forwards":for(c=r.child,b=null;c!==null;)i=c.alternate,i!==null&&jl(i)===null&&(b=c),c=c.sibling;c=b,c===null?(b=r.child,r.child=null):(b=c.sibling,c.sibling=null),ip(r,!1,b,c,w);break;case"backwards":for(c=null,b=r.child,r.child=null;b!==null;){if(i=b.alternate,i!==null&&jl(i)===null){r.child=b;break}i=b.sibling,b.sibling=c,c=b,b=i}ip(r,!0,c,null,w);break;case"together":ip(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function pa(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),_r|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(ku(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=br(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=br(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function ap(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&cf(i)))}function TA(i,r,c){switch(r.tag){case 3:et(r,r.stateNode.containerInfo),dr(r,rn,i.memoizedState.cache),oa();break;case 27:case 5:Le(r);break;case 4:et(r,r.stateNode.containerInfo);break;case 10:dr(r,r.type,r.memoizedProps.value);break;case 13:var m=r.memoizedState;if(m!==null)return m.dehydrated!==null?(ss(r),r.flags|=128,null):(c&r.child.childLanes)!==0?a1(i,r,c):(ss(r),i=pa(i,r,c),i!==null?i.sibling:null);ss(r);break;case 19:var b=(i.flags&128)!==0;if(m=(c&r.childLanes)!==0,m||(ku(i,r,c,!1),m=(c&r.childLanes)!==0),b){if(m)return o1(i,r,c);r.flags|=128}if(b=r.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ve(an,an.current),m)break;return null;case 22:case 23:return r.lanes=0,e1(i,r,c);case 24:dr(r,rn,i.memoizedState.cache)}return pa(i,r,c)}function l1(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)Sn=!0;else{if(!ap(i,c)&&(r.flags&128)===0)return Sn=!1,TA(i,r,c);Sn=(i.flags&131072)!==0}else Sn=!1,ct&&(r.flags&1048576)!==0&&Cl(r,Sl,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var m=r.elementType,b=m._init;if(m=b(m._payload),r.type=m,typeof m=="function")bp(m)?(i=xo(m,i),r.tag=1,r=s1(null,r,m,i,c)):(r.tag=0,r=Qg(null,r,m,i,c));else{if(m!=null){if(b=m.$$typeof,b===O){r.tag=11,r=Qb(null,r,m,i,c);break e}else if(b===N){r.tag=14,r=Jb(null,r,m,i,c);break e}}throw r=J(m)||m,Error(s(306,r,""))}}return r;case 0:return Qg(i,r,r.type,r.pendingProps,c);case 1:return m=r.type,b=xo(m,r.pendingProps),s1(i,r,m,b,c);case 3:e:{if(et(r,r.stateNode.containerInfo),i===null)throw Error(s(387));var w=r.pendingProps;b=r.memoizedState,m=b.element,up(i,r),Pu(r,w,null,c);var E=r.memoizedState;if(w=E.cache,dr(r,rn,w),w!==b.cache&&lp(r,[rn],c,!0),Du(),w=E.element,b.isDehydrated)if(b={element:w,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=i1(i,r,w,c);break e}else if(w!==m){m=Vn(Error(s(424)),r),Js(m),r=i1(i,r,w,c);break e}else for(vn=ri(r.stateNode.containerInfo.firstChild),En=r,ct=!0,_s=null,Rs=!0,c=Jd(r,null,w,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(oa(),w===m){r=pa(i,r,c);break e}Nn(i,r,w,c)}r=r.child}return r;case 26:return Ru(i,r),i===null?(c=h_(r.type,null,r.pendingProps,null))?r.memoizedState=c:ct||(c=r.type,i=r.pendingProps,m=Tf(Pe.current).createElement(c),m[Pt]=r,m[hn]=i,Dn(m,c,i),Ft(m),r.stateNode=m):r.memoizedState=h_(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Le(r),i===null&&ct&&(m=r.stateNode=l_(r.type,r.pendingProps,Pe.current),En=r,Rs=!0,vn=ri(m.firstChild)),m=r.pendingProps.children,i!==null||ct?Nn(i,r,m,c):r.child=Oi(r,null,m,c),Ru(i,r),r.child;case 5:return i===null&&ct&&((b=m=vn)&&(m=tO(m,r.type,r.pendingProps,Rs),m!==null?(r.stateNode=m,En=r,vn=ri(m.firstChild),Rs=!1,b=!0):b=!1),b||Ai(r)),Le(r),b=r.type,w=r.pendingProps,E=i!==null?i.memoizedProps:null,m=w.children,$p(b,w)?m=null:E!==null&&$p(b,E)&&(r.flags|=32),r.memoizedState!==null&&(b=wu(i,r,Hg,null,null,c),Xu._currentValue=b),Ru(i,r),Nn(i,r,m,c),r.child;case 6:return i===null&&ct&&((i=c=vn)&&(c=nO(c,r.pendingProps,Rs),c!==null?(r.stateNode=c,En=r,vn=null,i=!0):i=!1),i||Ai(r)),null;case 13:return a1(i,r,c);case 4:return et(r,r.stateNode.containerInfo),m=r.pendingProps,i===null?r.child=Oi(r,null,m,c):Nn(i,r,m,c),r.child;case 11:return Qb(i,r,r.type,r.pendingProps,c);case 7:return Nn(i,r,r.pendingProps,c),r.child;case 8:return Nn(i,r,r.pendingProps.children,c),r.child;case 12:return Nn(i,r,r.pendingProps.children,c),r.child;case 10:return m=r.pendingProps,dr(r,r.type,m.value),Nn(i,r,m.children,c),r.child;case 9:return b=r.type._context,m=r.pendingProps.children,So(r),b=qn(b),m=m(b),r.flags|=1,Nn(i,r,m,c),r.child;case 14:return Jb(i,r,r.type,r.pendingProps,c);case 15:return Zb(i,r,r.type,r.pendingProps,c);case 19:return o1(i,r,c);case 22:return e1(i,r,c);case 24:return So(r),m=qn(rn),i===null?(b=xu(),b===null&&(b=Et,w=Ml(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=c),b=w),r.memoizedState={parent:m,cache:b},cp(r),dr(r,rn,b)):((i.lanes&c)!==0&&(up(i,r),Pu(r,null,null,c),Du()),b=i.memoizedState,w=r.memoizedState,b.parent!==m?(b={parent:m,cache:m},r.memoizedState=b,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=b),dr(r,rn,m)):(m=w.cache,dr(r,rn,m),m!==b.cache&&lp(r,[rn],c,!0))),Nn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var rp=F(null),wo=null,ya=null;function dr(i,r,c){ve(rp,r._currentValue),r._currentValue=c}function va(i){i._currentValue=rp.current,W(rp)}function op(i,r,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,m!==null&&(m.childLanes|=r)):m!==null&&(m.childLanes&r)!==r&&(m.childLanes|=r),i===c)break;i=i.return}}function lp(i,r,c,m){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var w=b.dependencies;if(w!==null){var E=b.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=b;for(var H=0;H<r.length;H++)if(D.context===r[H]){w.lanes|=c,D=w.alternate,D!==null&&(D.lanes|=c),op(w.return,c,i),m||(E=null);break e}w=D.next}}else if(b.tag===18){if(E=b.return,E===null)throw Error(s(341));E.lanes|=c,w=E.alternate,w!==null&&(w.lanes|=c),op(E,c,i),E=null}else E=b.child;if(E!==null)E.return=b;else for(E=b;E!==null;){if(E===i){E=null;break}if(b=E.sibling,b!==null){b.return=E.return,E=b;break}E=E.return}b=E}}function ku(i,r,c,m){i=null;for(var b=r,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var E=b.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var D=b.type;Zn(b.pendingProps.value,E.value)||(i!==null?i.push(D):i=[D])}}else if(b===Me.current){if(E=b.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Xu):i=[Xu])}b=b.return}i!==null&&lp(r,i,c,m),r.flags|=262144}function cf(i){for(i=i.firstContext;i!==null;){if(!Zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function So(i){wo=i,ya=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function qn(i){return c1(wo,i)}function uf(i,r){return wo===null&&So(i),c1(i,r)}function c1(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},ya===null){if(i===null)throw Error(s(308));ya=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ya=ya.next=r;return c}var fr=!1;function cp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function up(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function mr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function gr(i,r,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Gt&2)!==0){var b=m.pending;return b===null?r.next=r:(r.next=b.next,b.next=r),m.pending=r,r=oo(i),er(i,null,c),r}return yn(i,m,r,c),oo(i)}function Nu(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194176)!==0)){var m=r.lanes;m&=i.pendingLanes,c|=m,r.lanes=c,$i(i,c)}}function hp(i,r){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var b=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?b=w=E:w=w.next=E,c=c.next}while(c!==null);w===null?b=w=r:w=w.next=r}else b=w=r;c={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var dp=!1;function Du(){if(dp){var i=or;if(i!==null)throw i}}function Pu(i,r,c,m){dp=!1;var b=i.updateQueue;fr=!1;var w=b.firstBaseUpdate,E=b.lastBaseUpdate,D=b.shared.pending;if(D!==null){b.shared.pending=null;var H=D,K=H.next;H.next=null,E===null?w=K:E.next=K,E=H;var de=i.alternate;de!==null&&(de=de.updateQueue,D=de.lastBaseUpdate,D!==E&&(D===null?de.firstBaseUpdate=K:D.next=K,de.lastBaseUpdate=H))}if(w!==null){var Se=b.baseState;E=0,de=K=H=null,D=w;do{var re=D.lane&-536870913,he=re!==D.lane;if(he?(ut&re)===re:(m&re)===re){re!==0&&re===rr&&(dp=!0),de!==null&&(de=de.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ze=i,Ke=D;re=r;var Zt=c;switch(Ke.tag){case 1:if(ze=Ke.payload,typeof ze=="function"){Se=ze.call(Zt,Se,re);break e}Se=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ke.payload,re=typeof ze=="function"?ze.call(Zt,Se,re):ze,re==null)break e;Se=oe({},Se,re);break e;case 2:fr=!0}}re=D.callback,re!==null&&(i.flags|=64,he&&(i.flags|=8192),he=b.callbacks,he===null?b.callbacks=[re]:he.push(re))}else he={lane:re,tag:D.tag,payload:D.payload,callback:D.callback,next:null},de===null?(K=de=he,H=Se):de=de.next=he,E|=re;if(D=D.next,D===null){if(D=b.shared.pending,D===null)break;he=D,D=he.next,he.next=null,b.lastBaseUpdate=he,b.shared.pending=null}}while(!0);de===null&&(H=Se),b.baseState=H,b.firstBaseUpdate=K,b.lastBaseUpdate=de,w===null&&(b.shared.lanes=0),_r|=E,i.lanes=E,i.memoizedState=Se}}function u1(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function h1(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)u1(c[i],r)}function Lu(i,r){try{var c=r.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var b=m.next;c=b;do{if((c.tag&i)===i){m=void 0;var w=c.create,E=c.inst;m=w(),E.destroy=m}c=c.next}while(c!==b)}}catch(D){jt(r,r.return,D)}}function pr(i,r,c){try{var m=r.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&i)===i){var E=m.inst,D=E.destroy;if(D!==void 0){E.destroy=void 0,b=r;var H=c;try{D()}catch(K){jt(b,H,K)}}}m=m.next}while(m!==w)}}catch(K){jt(r,r.return,K)}}function d1(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{h1(r,c)}catch(m){jt(i,i.return,m)}}}function f1(i,r,c){c.props=xo(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(m){jt(i,r,m)}}function Co(i,r){try{var c=i.ref;if(c!==null){var m=i.stateNode;switch(i.tag){case 26:case 27:case 5:var b=m;break;default:b=m}typeof c=="function"?i.refCleanup=c(b):c.current=b}}catch(w){jt(i,r,w)}}function xs(i,r){var c=i.ref,m=i.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(b){jt(i,r,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){jt(i,r,b)}else c.current=null}function m1(i){var r=i.type,c=i.memoizedProps,m=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(b){jt(i,i.return,b)}}function g1(i,r,c){try{var m=i.stateNode;XA(m,i.type,c,r),m[hn]=r}catch(b){jt(i,i.return,b)}}function p1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function fp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||p1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mp(i,r,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,r?c.nodeType===8?c.parentNode.insertBefore(i,r):c.insertBefore(i,r):(c.nodeType===8?(r=c.parentNode,r.insertBefore(i,c)):(r=c,r.appendChild(i)),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Cf));else if(m!==4&&m!==27&&(i=i.child,i!==null))for(mp(i,r,c),i=i.sibling;i!==null;)mp(i,r,c),i=i.sibling}function hf(i,r,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(m!==4&&m!==27&&(i=i.child,i!==null))for(hf(i,r,c),i=i.sibling;i!==null;)hf(i,r,c),i=i.sibling}var ba=!1,Qt=!1,gp=!1,y1=typeof WeakSet=="function"?WeakSet:Set,Cn=null,v1=!1;function AA(i,r){if(i=i.containerInfo,Fp=Rf,i=bl(i),lu(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var E=0,D=-1,H=-1,K=0,de=0,Se=i,re=null;t:for(;;){for(var he;Se!==c||b!==0&&Se.nodeType!==3||(D=E+b),Se!==w||m!==0&&Se.nodeType!==3||(H=E+m),Se.nodeType===3&&(E+=Se.nodeValue.length),(he=Se.firstChild)!==null;)re=Se,Se=he;for(;;){if(Se===i)break t;if(re===c&&++K===b&&(D=E),re===w&&++de===m&&(H=E),(he=Se.nextSibling)!==null)break;Se=re,re=Se.parentNode}Se=he}c=D===-1||H===-1?null:{start:D,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(qp={focusedElem:i,selectionRange:c},Rf=!1,Cn=r;Cn!==null;)if(r=Cn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Cn=i;else for(;Cn!==null;){switch(r=Cn,w=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,c=r,b=w.memoizedProps,w=w.memoizedState,m=c.stateNode;try{var ze=xo(c.type,b,c.elementType===c.type);i=m.getSnapshotBeforeUpdate(ze,w),m.__reactInternalSnapshotBeforeUpdate=i}catch(Ke){jt(c,c.return,Ke)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)Yp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Cn=i;break}Cn=r.return}return ze=v1,v1=!1,ze}function b1(i,r,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:xa(i,c),m&4&&Lu(5,c);break;case 1:if(xa(i,c),m&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(D){jt(c,c.return,D)}else{var b=xo(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(b,r,i.__reactInternalSnapshotBeforeUpdate)}catch(D){jt(c,c.return,D)}}m&64&&d1(c),m&512&&Co(c,c.return);break;case 3:if(xa(i,c),m&64&&(m=c.updateQueue,m!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{h1(m,i)}catch(D){jt(c,c.return,D)}}break;case 26:xa(i,c),m&512&&Co(c,c.return);break;case 27:case 5:xa(i,c),r===null&&m&4&&m1(c),m&512&&Co(c,c.return);break;case 12:xa(i,c);break;case 13:xa(i,c),m&4&&w1(i,c);break;case 22:if(b=c.memoizedState!==null||ba,!b){r=r!==null&&r.memoizedState!==null||Qt;var w=ba,E=Qt;ba=b,(Qt=r)&&!E?yr(i,c,(c.subtreeFlags&8772)!==0):xa(i,c),ba=w,Qt=E}m&512&&(c.memoizedProps.mode==="manual"?Co(c,c.return):xs(c,c.return));break;default:xa(i,c)}}function _1(i){var r=i.alternate;r!==null&&(i.alternate=null,_1(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&gn(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dn=null,ws=!1;function _a(i,r,c){for(c=c.child;c!==null;)x1(i,r,c),c=c.sibling}function x1(i,r,c){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(vs,c)}catch{}switch(c.tag){case 26:Qt||xs(c,r),_a(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Qt||xs(c,r);var m=dn,b=ws;for(dn=c.stateNode,_a(i,r,c),c=c.stateNode,r=c.attributes;r.length;)c.removeAttributeNode(r[0]);gn(c),dn=m,ws=b;break;case 5:Qt||xs(c,r);case 6:b=dn;var w=ws;if(dn=null,_a(i,r,c),dn=b,ws=w,dn!==null)if(ws)try{i=dn,m=c.stateNode,i.nodeType===8?i.parentNode.removeChild(m):i.removeChild(m)}catch(E){jt(c,r,E)}else try{dn.removeChild(c.stateNode)}catch(E){jt(c,r,E)}break;case 18:dn!==null&&(ws?(r=dn,c=c.stateNode,r.nodeType===8?Wp(r.parentNode,c):r.nodeType===1&&Wp(r,c),eh(r)):Wp(dn,c.stateNode));break;case 4:m=dn,b=ws,dn=c.stateNode.containerInfo,ws=!0,_a(i,r,c),dn=m,ws=b;break;case 0:case 11:case 14:case 15:Qt||pr(2,c,r),Qt||pr(4,c,r),_a(i,r,c);break;case 1:Qt||(xs(c,r),m=c.stateNode,typeof m.componentWillUnmount=="function"&&f1(c,r,m)),_a(i,r,c);break;case 21:_a(i,r,c);break;case 22:Qt||xs(c,r),Qt=(m=Qt)||c.memoizedState!==null,_a(i,r,c),Qt=m;break;default:_a(i,r,c)}}function w1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{eh(i)}catch(c){jt(r,r.return,c)}}function OA(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new y1),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new y1),r;default:throw Error(s(435,i.tag))}}function pp(i,r){var c=OA(i);r.forEach(function(m){var b=zA.bind(null,i,m);c.has(m)||(c.add(m),m.then(b,b))})}function ks(i,r){var c=r.deletions;if(c!==null)for(var m=0;m<c.length;m++){var b=c[m],w=i,E=r,D=E;e:for(;D!==null;){switch(D.tag){case 27:case 5:dn=D.stateNode,ws=!1;break e;case 3:dn=D.stateNode.containerInfo,ws=!0;break e;case 4:dn=D.stateNode.containerInfo,ws=!0;break e}D=D.return}if(dn===null)throw Error(s(160));x1(w,E,b),dn=null,ws=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)S1(r,i),r=r.sibling}var ai=null;function S1(i,r){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ks(r,i),Ns(i),m&4&&(pr(3,i,i.return),Lu(3,i),pr(5,i,i.return));break;case 1:ks(r,i),Ns(i),m&512&&(Qt||c===null||xs(c,c.return)),m&64&&ba&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var b=ai;if(ks(r,i),Ns(i),m&512&&(Qt||c===null||xs(c,c.return)),m&4){var w=c!==null?c.memoizedState:null;if(m=i.memoizedState,c===null)if(m===null)if(i.stateNode===null){e:{m=i.type,c=i.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[mn]||w[Pt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),Dn(w,m,c),w[Pt]=i,Ft(w),m=w;break e;case"link":var E=m_("link","href",b).get(m+(c.href||""));if(E){for(var D=0;D<E.length;D++)if(w=E[D],w.getAttribute("href")===(c.href==null?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(D,1);break t}}w=b.createElement(m),Dn(w,m,c),b.head.appendChild(w);break;case"meta":if(E=m_("meta","content",b).get(m+(c.content||""))){for(D=0;D<E.length;D++)if(w=E[D],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(D,1);break t}}w=b.createElement(m),Dn(w,m,c),b.head.appendChild(w);break;default:throw Error(s(468,m))}w[Pt]=i,Ft(w),m=w}i.stateNode=m}else g_(b,i.type,i.stateNode);else i.stateNode=f_(b,m,i.memoizedProps);else w!==m?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,m===null?g_(b,i.type,i.stateNode):f_(b,m,i.memoizedProps)):m===null&&i.stateNode!==null&&g1(i,i.memoizedProps,c.memoizedProps)}break;case 27:if(m&4&&i.alternate===null){b=i.stateNode,w=i.memoizedProps;try{for(var H=b.firstChild;H;){var K=H.nextSibling,de=H.nodeName;H[mn]||de==="HEAD"||de==="BODY"||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&H.rel.toLowerCase()==="stylesheet"||b.removeChild(H),H=K}for(var Se=i.type,re=b.attributes;re.length;)b.removeAttributeNode(re[0]);Dn(b,Se,w),b[Pt]=i,b[hn]=w}catch(ze){jt(i,i.return,ze)}}case 5:if(ks(r,i),Ns(i),m&512&&(Qt||c===null||xs(c,c.return)),i.flags&32){b=i.stateNode;try{Ga(b,"")}catch(ze){jt(i,i.return,ze)}}m&4&&i.stateNode!=null&&(b=i.memoizedProps,g1(i,b,c!==null?c.memoizedProps:b)),m&1024&&(gp=!0);break;case 6:if(ks(r,i),Ns(i),m&4){if(i.stateNode===null)throw Error(s(162));m=i.memoizedProps,c=i.stateNode;try{c.nodeValue=m}catch(ze){jt(i,i.return,ze)}}break;case 3:if(jf=null,b=ai,ai=Af(r.containerInfo),ks(r,i),ai=b,Ns(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{eh(r.containerInfo)}catch(ze){jt(i,i.return,ze)}gp&&(gp=!1,C1(i));break;case 4:m=ai,ai=Af(i.stateNode.containerInfo),ks(r,i),Ns(i),ai=m;break;case 12:ks(r,i),Ns(i);break;case 13:ks(r,i),Ns(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Tp=Je()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,pp(i,m)));break;case 22:if(m&512&&(Qt||c===null||xs(c,c.return)),H=i.memoizedState!==null,K=c!==null&&c.memoizedState!==null,de=ba,Se=Qt,ba=de||H,Qt=Se||K,ks(r,i),Qt=Se,ba=de,Ns(i),r=i.stateNode,r._current=i,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,m&8192&&(r._visibility=H?r._visibility&-2:r._visibility|1,H&&(r=ba||Qt,c===null||K||r||Ll(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(c=null,r=i;;){if(r.tag===5||r.tag===26||r.tag===27){if(c===null){K=c=r;try{if(b=K.stateNode,H)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=K.stateNode,D=K.memoizedProps.style;var he=D!=null&&D.hasOwnProperty("display")?D.display:null;E.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(ze){jt(K,K.return,ze)}}}else if(r.tag===6){if(c===null){K=r;try{K.stateNode.nodeValue=H?"":K.memoizedProps}catch(ze){jt(K,K.return,ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}m&4&&(m=i.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,pp(i,c))));break;case 19:ks(r,i),Ns(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,pp(i,m)));break;case 21:break;default:ks(r,i),Ns(i)}}function Ns(i){var r=i.flags;if(r&2){try{if(i.tag!==27){e:{for(var c=i.return;c!==null;){if(p1(c)){var m=c;break e}c=c.return}throw Error(s(160))}switch(m.tag){case 27:var b=m.stateNode,w=fp(i);hf(i,w,b);break;case 5:var E=m.stateNode;m.flags&32&&(Ga(E,""),m.flags&=-33);var D=fp(i);hf(i,D,E);break;case 3:case 4:var H=m.stateNode.containerInfo,K=fp(i);mp(i,K,H);break;default:throw Error(s(161))}}}catch(de){jt(i,i.return,de)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function C1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;C1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function xa(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)b1(i,r.alternate,r),r=r.sibling}function Ll(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:pr(4,r,r.return),Ll(r);break;case 1:xs(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&f1(r,r.return,c),Ll(r);break;case 26:case 27:case 5:xs(r,r.return),Ll(r);break;case 22:xs(r,r.return),r.memoizedState===null&&Ll(r);break;default:Ll(r)}i=i.sibling}}function yr(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var m=r.alternate,b=i,w=r,E=w.flags;switch(w.tag){case 0:case 11:case 15:yr(b,w,c),Lu(4,w);break;case 1:if(yr(b,w,c),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(K){jt(m,m.return,K)}if(m=w,b=m.updateQueue,b!==null){var D=m.stateNode;try{var H=b.shared.hiddenCallbacks;if(H!==null)for(b.shared.hiddenCallbacks=null,b=0;b<H.length;b++)u1(H[b],D)}catch(K){jt(m,m.return,K)}}c&&E&64&&d1(w),Co(w,w.return);break;case 26:case 27:case 5:yr(b,w,c),c&&m===null&&E&4&&m1(w),Co(w,w.return);break;case 12:yr(b,w,c);break;case 13:yr(b,w,c),c&&E&4&&w1(b,w);break;case 22:w.memoizedState===null&&yr(b,w,c),Co(w,w.return);break;default:yr(b,w,c)}r=r.sibling}}function yp(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&fo(c))}function vp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&fo(i))}function vr(i,r,c,m){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)T1(i,r,c,m),r=r.sibling}function T1(i,r,c,m){var b=r.flags;switch(r.tag){case 0:case 11:case 15:vr(i,r,c,m),b&2048&&Lu(9,r);break;case 3:vr(i,r,c,m),b&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&fo(i)));break;case 12:if(b&2048){vr(i,r,c,m),i=r.stateNode;try{var w=r.memoizedProps,E=w.id,D=w.onPostCommit;typeof D=="function"&&D(E,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){jt(r,r.return,H)}}else vr(i,r,c,m);break;case 23:break;case 22:w=r.stateNode,r.memoizedState!==null?w._visibility&4?vr(i,r,c,m):Bu(i,r):w._visibility&4?vr(i,r,c,m):(w._visibility|=4,Bl(i,r,c,m,(r.subtreeFlags&10256)!==0)),b&2048&&yp(r.alternate,r);break;case 24:vr(i,r,c,m),b&2048&&vp(r.alternate,r);break;default:vr(i,r,c,m)}}function Bl(i,r,c,m,b){for(b=b&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var w=i,E=r,D=c,H=m,K=E.flags;switch(E.tag){case 0:case 11:case 15:Bl(w,E,D,H,b),Lu(8,E);break;case 23:break;case 22:var de=E.stateNode;E.memoizedState!==null?de._visibility&4?Bl(w,E,D,H,b):Bu(w,E):(de._visibility|=4,Bl(w,E,D,H,b)),b&&K&2048&&yp(E.alternate,E);break;case 24:Bl(w,E,D,H,b),b&&K&2048&&vp(E.alternate,E);break;default:Bl(w,E,D,H,b)}r=r.sibling}}function Bu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,m=r,b=m.flags;switch(m.tag){case 22:Bu(c,m),b&2048&&yp(m.alternate,m);break;case 24:Bu(c,m),b&2048&&vp(m.alternate,m);break;default:Bu(c,m)}r=r.sibling}}var Uu=8192;function Ul(i){if(i.subtreeFlags&Uu)for(i=i.child;i!==null;)A1(i),i=i.sibling}function A1(i){switch(i.tag){case 26:Ul(i),i.flags&Uu&&i.memoizedState!==null&&gO(ai,i.memoizedState,i.memoizedProps);break;case 5:Ul(i);break;case 3:case 4:var r=ai;ai=Af(i.stateNode.containerInfo),Ul(i),ai=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Uu,Uu=16777216,Ul(i),Uu=r):Ul(i));break;default:Ul(i)}}function O1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Iu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var m=r[c];Cn=m,M1(m,i)}O1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)j1(i),i=i.sibling}function j1(i){switch(i.tag){case 0:case 11:case 15:Iu(i),i.flags&2048&&pr(9,i,i.return);break;case 3:Iu(i);break;case 12:Iu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&4&&(i.return===null||i.return.tag!==13)?(r._visibility&=-5,df(i)):Iu(i);break;default:Iu(i)}}function df(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var m=r[c];Cn=m,M1(m,i)}O1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:pr(8,r,r.return),df(r);break;case 22:c=r.stateNode,c._visibility&4&&(c._visibility&=-5,df(r));break;default:df(r)}i=i.sibling}}function M1(i,r){for(;Cn!==null;){var c=Cn;switch(c.tag){case 0:case 11:case 15:pr(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:fo(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,Cn=m;else e:for(c=i;Cn!==null;){m=Cn;var b=m.sibling,w=m.return;if(_1(m),m===c){Cn=null;break e}if(b!==null){b.return=w,Cn=b;break e}Cn=w}}}function jA(i,r,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(i,r,c,m){return new jA(i,r,c,m)}function bp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function br(i,r){var c=i.alternate;return c===null?(c=Ds(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&31457280,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function E1(i,r){i.flags&=31457282;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ff(i,r,c,m,b,w){var E=0;if(m=i,typeof i=="function")bp(i)&&(E=1);else if(typeof i=="string")E=fO(i,c,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case h:return To(c.children,b,w,r);case g:E=8,b|=24;break;case y:return i=Ds(12,c,r,b|2),i.elementType=y,i.lanes=w,i;case M:return i=Ds(13,c,r,b),i.elementType=M,i.lanes=w,i;case R:return i=Ds(19,c,r,b),i.elementType=R,i.lanes=w,i;case z:return R1(c,b,w,r);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:case T:E=10;break e;case S:E=9;break e;case O:E=11;break e;case N:E=14;break e;case B:E=16,m=null;break e}E=29,c=Error(s(130,i===null?"null":typeof i,"")),m=null}return r=Ds(E,c,r,b),r.elementType=i,r.type=m,r.lanes=w,r}function To(i,r,c,m){return i=Ds(7,i,m,r),i.lanes=c,i}function R1(i,r,c,m){i=Ds(22,i,m,r),i.elementType=z,i.lanes=c;var b={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var w=b._current;if(w===null)throw Error(s(456));if((b._pendingVisibility&2)===0){var E=Es(w,2);E!==null&&(b._pendingVisibility|=2,is(E,w,2))}},attach:function(){var w=b._current;if(w===null)throw Error(s(456));if((b._pendingVisibility&2)!==0){var E=Es(w,2);E!==null&&(b._pendingVisibility&=-3,is(E,w,2))}}};return i.stateNode=b,i}function _p(i,r,c){return i=Ds(6,i,null,r),i.lanes=c,i}function xp(i,r,c){return r=Ds(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}function wa(i){i.flags|=4}function k1(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!p_(r)){if(r=ns.current,r!==null&&((ut&4194176)===ut?Rn!==null:(ut&62914560)!==ut&&(ut&536870912)===0||r!==Rn))throw Zs=Tl,yu;i.flags|=8192}}function mf(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?il():536870912,i.lanes|=r,zl|=r)}function zu(i,r){if(!ct)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function $t(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(r)for(var b=i.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags&31457280,m|=b.flags&31457280,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=m,i.childLanes=c,r}function MA(i,r,c){var m=r.pendingProps;switch(co(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return $t(r),null;case 3:return c=r.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),r.memoizedState.cache!==m&&(r.flags|=2048),va(rn),ue(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ra(r)?wa(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,_s!==null&&(Mp(_s),_s=null))),$t(r),null;case 26:return c=r.memoizedState,i===null?(wa(r),c!==null?($t(r),k1(r,c)):($t(r),r.flags&=-16777217)):c?c!==i.memoizedState?(wa(r),$t(r),k1(r,c)):($t(r),r.flags&=-16777217):(i.memoizedProps!==m&&wa(r),$t(r),r.flags&=-16777217),null;case 27:Ye(r),c=Pe.current;var b=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==m&&wa(r);else{if(!m){if(r.stateNode===null)throw Error(s(166));return $t(r),null}i=se.current,ra(r)?Kd(r):(i=l_(b,m,c),r.stateNode=i,wa(r))}return $t(r),null;case 5:if(Ye(r),c=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==m&&wa(r);else{if(!m){if(r.stateNode===null)throw Error(s(166));return $t(r),null}if(i=se.current,ra(r))Kd(r);else{switch(b=Tf(Pe.current),i){case 1:i=b.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=b.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=b.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=b.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?b.createElement(c,{is:m.is}):b.createElement(c)}}i[Pt]=r,i[hn]=m;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)i.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=i;e:switch(Dn(i,c,m),c){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&wa(r)}}return $t(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==m&&wa(r);else{if(typeof m!="string"&&r.stateNode===null)throw Error(s(166));if(i=Pe.current,ra(r)){if(i=r.stateNode,c=r.memoizedProps,m=null,b=En,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}i[Pt]=r,i=!!(i.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||n_(i.nodeValue,c)),i||Ai(r)}else i=Tf(i).createTextNode(m),i[Pt]=r,r.stateNode=i}return $t(r),null;case 13:if(m=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=ra(r),m!==null&&m.dehydrated!==null){if(i===null){if(!b)throw Error(s(318));if(b=r.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Pt]=r}else oa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),b=!1}else _s!==null&&(Mp(_s),_s=null),b=!0;if(!b)return r.flags&256?(gt(r),r):(gt(r),null)}if(gt(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=m!==null,i=i!==null&&i.memoizedState!==null,c){m=r.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var w=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)}return c!==i&&c&&(r.child.flags|=8192),mf(r,r.updateQueue),$t(r),null;case 4:return ue(),i===null&&zp(r.stateNode.containerInfo),$t(r),null;case 10:return va(r.type),$t(r),null;case 19:if(W(an),b=r.memoizedState,b===null)return $t(r),null;if(m=(r.flags&128)!==0,w=b.rendering,w===null)if(m)zu(b,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(w=jl(i),w!==null){for(r.flags|=128,zu(b,!1),i=w.updateQueue,r.updateQueue=i,mf(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)E1(c,i),c=c.sibling;return ve(an,an.current&1|2),r.child}i=i.sibling}b.tail!==null&&Je()>gf&&(r.flags|=128,m=!0,zu(b,!1),r.lanes=4194304)}else{if(!m)if(i=jl(w),i!==null){if(r.flags|=128,m=!0,i=i.updateQueue,r.updateQueue=i,mf(r,i),zu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!w.alternate&&!ct)return $t(r),null}else 2*Je()-b.renderingStartTime>gf&&c!==536870912&&(r.flags|=128,m=!0,zu(b,!1),r.lanes=4194304);b.isBackwards?(w.sibling=r.child,r.child=w):(i=b.last,i!==null?i.sibling=w:r.child=w,b.last=w)}return b.tail!==null?(r=b.tail,b.rendering=r,b.tail=r.sibling,b.renderingStartTime=Je(),r.sibling=null,i=an.current,ve(an,m?i&1|2:i&1),r):($t(r),null);case 22:case 23:return gt(r),Ol(),m=r.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(r.flags|=8192):m&&(r.flags|=8192),m?(c&536870912)!==0&&(r.flags&128)===0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),c=r.updateQueue,c!==null&&mf(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),m=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),m!==c&&(r.flags|=2048),i!==null&&W(fa),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),va(rn),$t(r),null;case 25:return null}throw Error(s(156,r.tag))}function EA(i,r){switch(co(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return va(rn),ue(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ye(r),null;case 13:if(gt(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));oa()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return W(an),null;case 4:return ue(),null;case 10:return va(r.type),null;case 22:case 23:return gt(r),Ol(),i!==null&&W(fa),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return va(rn),null;case 25:return null;default:return null}}function N1(i,r){switch(co(r),r.tag){case 3:va(rn),ue();break;case 26:case 27:case 5:Ye(r);break;case 4:ue();break;case 13:gt(r);break;case 19:W(an);break;case 10:va(r.type);break;case 22:case 23:gt(r),Ol(),i!==null&&W(fa);break;case 24:va(rn)}}var RA={getCacheForType:function(i){var r=qn(rn),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c}},kA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Et=null,it=null,ut=0,Rt=0,Ss=null,Sa=!1,Il=!1,wp=!1,Ca=0,Jt=0,_r=0,Ao=0,Sp=0,Ps=0,zl=0,Vu=null,Ei=null,Cp=!1,Tp=0,gf=1/0,pf=null,xr=null,yf=!1,Oo=null,Hu=0,Ap=0,Op=null,Fu=0,jp=null;function Cs(){if((Gt&2)!==0&&ut!==0)return ut&-ut;if(X.T!==null){var i=rr;return i!==0?i:Lp()}return yi()}function D1(){Ps===0&&(Ps=(ut&536870912)===0||ct?Jn():536870912);var i=ns.current;return i!==null&&(i.flags|=32),Ps}function is(i,r,c){(i===Et&&Rt===2||i.cancelPendingCommit!==null)&&(Vl(i,0),Ta(i,ut,Ps,!1)),Fs(i,c),((Gt&2)===0||i!==Et)&&(i===Et&&((Gt&2)===0&&(Ao|=c),Jt===4&&Ta(i,ut,Ps,!1)),Ri(i))}function P1(i,r,c){if((Gt&6)!==0)throw Error(s(327));var m=!c&&(r&60)===0&&(r&i.expiredLanes)===0||Ot(i,r),b=m?PA(i,r):kp(i,r,!0),w=m;do{if(b===0){Il&&!m&&Ta(i,r,0,!1);break}else if(b===6)Ta(i,r,0,!Sa);else{if(c=i.current.alternate,w&&!NA(c)){b=kp(i,r,!1),w=!1;continue}if(b===2){if(w=r,i.errorRecoveryDisabledLanes&w)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var D=i;b=Vu;var H=D.current.memoizedState.isDehydrated;if(H&&(Vl(D,E).flags|=256),E=kp(D,E,!1),E!==2){if(wp&&!H){D.errorRecoveryDisabledLanes|=w,Ao|=w,b=4;break e}w=Ei,Ei=b,w!==null&&Mp(w)}b=E}if(w=!1,b!==2)continue}}if(b===1){Vl(i,0),Ta(i,r,0,!0);break}e:{switch(m=i,b){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){Ta(m,r,Ps,!Sa);break e}break;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(s(329))}if(m.finishedWork=c,m.finishedLanes=r,(r&62914560)===r&&(w=Tp+300-Je(),10<w)){if(Ta(m,r,Ps,!Sa),sn(m,0)!==0)break e;m.timeoutHandle=a_(L1.bind(null,m,c,Ei,pf,Cp,r,Ps,Ao,zl,Sa,2,-0,0),w);break e}L1(m,c,Ei,pf,Cp,r,Ps,Ao,zl,Sa,0,-0,0)}}break}while(!0);Ri(i)}function Mp(i){Ei===null?Ei=i:Ei.push.apply(Ei,i)}function L1(i,r,c,m,b,w,E,D,H,K,de,Se,re){var he=r.subtreeFlags;if((he&8192||(he&16785408)===16785408)&&(Ku={stylesheets:null,count:0,unsuspend:mO},A1(r),r=pO(),r!==null)){i.cancelPendingCommit=r(F1.bind(null,i,c,m,b,E,D,H,1,Se,re)),Ta(i,w,E,!K);return}F1(i,c,m,b,E,D,H,de,Se,re)}function NA(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var b=c[m],w=b.getSnapshot;b=b.value;try{if(!Zn(w(),b))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ta(i,r,c,m){r&=~Sp,r&=~Ao,i.suspendedLanes|=r,i.pingedLanes&=~r,m&&(i.warmLanes|=r),m=i.expirationTimes;for(var b=r;0<b;){var w=31-fn(b),E=1<<w;m[w]=-1,b&=~E}c!==0&&qi(i,c,r)}function vf(){return(Gt&6)===0?(qu(0),!1):!0}function Ep(){if(it!==null){if(Rt===0)var i=it.return;else i=it,ya=wo=null,Au(i),ei=null,ho=0,i=it;for(;i!==null;)N1(i.alternate,i),i=i.return;it=null}}function Vl(i,r){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,JA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ep(),Et=i,it=c=br(i.current,null),ut=r,Rt=0,Ss=null,Sa=!1,Il=Ot(i,r),wp=!1,zl=Ps=Sp=Ao=_r=Jt=0,Ei=Vu=null,Cp=!1,(r&8)!==0&&(r|=r&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=r;0<m;){var b=31-fn(m),w=1<<b;r|=i[b],m&=~w}return Ca=r,Ks(),c}function B1(i,r){Qe=null,X.H=Mi,r===la?(r=Al(),Rt=3):r===yu?(r=Al(),Rt=4):Rt=r===Xb?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ss=r,it===null&&(Jt=1,lf(i,Vn(r,i.current)))}function U1(){var i=X.H;return X.H=Mi,i===null?Mi:i}function I1(){var i=X.A;return X.A=RA,i}function Rp(){Jt=4,Sa||(ut&4194176)!==ut&&ns.current!==null||(Il=!0),(_r&134217727)===0&&(Ao&134217727)===0||Et===null||Ta(Et,ut,Ps,!1)}function kp(i,r,c){var m=Gt;Gt|=2;var b=U1(),w=I1();(Et!==i||ut!==r)&&(pf=null,Vl(i,r)),r=!1;var E=Jt;e:do try{if(Rt!==0&&it!==null){var D=it,H=Ss;switch(Rt){case 8:Ep(),E=6;break e;case 3:case 2:case 6:ns.current===null&&(r=!0);var K=Rt;if(Rt=0,Ss=null,Hl(i,D,H,K),c&&Il){E=0;break e}break;default:K=Rt,Rt=0,Ss=null,Hl(i,D,H,K)}}DA(),E=Jt;break}catch(de){B1(i,de)}while(!0);return r&&i.shellSuspendCounter++,ya=wo=null,Gt=m,X.H=b,X.A=w,it===null&&(Et=null,ut=0,Ks()),E}function DA(){for(;it!==null;)z1(it)}function PA(i,r){var c=Gt;Gt|=2;var m=U1(),b=I1();Et!==i||ut!==r?(pf=null,gf=Je()+500,Vl(i,r)):Il=Ot(i,r);e:do try{if(Rt!==0&&it!==null){r=it;var w=Ss;t:switch(Rt){case 1:Rt=0,Ss=null,Hl(i,r,w,1);break;case 2:if(sr(w)){Rt=0,Ss=null,V1(r);break}r=function(){Rt===2&&Et===i&&(Rt=7),Ri(i)},w.then(r,r);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:sr(w)?(Rt=0,Ss=null,V1(r)):(Rt=0,Ss=null,Hl(i,r,w,7));break;case 5:var E=null;switch(it.tag){case 26:E=it.memoizedState;case 5:case 27:var D=it;if(!E||p_(E)){Rt=0,Ss=null;var H=D.sibling;if(H!==null)it=H;else{var K=D.return;K!==null?(it=K,bf(K)):it=null}break t}}Rt=0,Ss=null,Hl(i,r,w,5);break;case 6:Rt=0,Ss=null,Hl(i,r,w,6);break;case 8:Ep(),Jt=6;break e;default:throw Error(s(462))}}LA();break}catch(de){B1(i,de)}while(!0);return ya=wo=null,X.H=m,X.A=b,Gt=c,it!==null?0:(Et=null,ut=0,Ks(),Jt)}function LA(){for(;it!==null&&!Ut();)z1(it)}function z1(i){var r=l1(i.alternate,i,Ca);i.memoizedProps=i.pendingProps,r===null?bf(i):it=r}function V1(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=n1(c,r,r.pendingProps,r.type,void 0,ut);break;case 11:r=n1(c,r,r.pendingProps,r.type.render,r.ref,ut);break;case 5:Au(r);default:N1(c,r),r=it=E1(r,Ca),r=l1(c,r,Ca)}i.memoizedProps=i.pendingProps,r===null?bf(i):it=r}function Hl(i,r,c,m){ya=wo=null,Au(r),ei=null,ho=0;var b=r.return;try{if(CA(i,b,r,c,ut)){Jt=1,lf(i,Vn(c,i.current)),it=null;return}}catch(w){if(b!==null)throw it=b,w;Jt=1,lf(i,Vn(c,i.current)),it=null;return}r.flags&32768?(ct||m===1?i=!0:Il||(ut&536870912)!==0?i=!1:(Sa=i=!0,(m===2||m===3||m===6)&&(m=ns.current,m!==null&&m.tag===13&&(m.flags|=16384))),H1(r,i)):bf(r)}function bf(i){var r=i;do{if((r.flags&32768)!==0){H1(r,Sa);return}i=r.return;var c=MA(r.alternate,r,Ca);if(c!==null){it=c;return}if(r=r.sibling,r!==null){it=r;return}it=r=i}while(r!==null);Jt===0&&(Jt=5)}function H1(i,r){do{var c=EA(i.alternate,i);if(c!==null){c.flags&=32767,it=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){it=i;return}it=i=c}while(i!==null);Jt=6,it=null}function F1(i,r,c,m,b,w,E,D,H,K){var de=X.T,Se=we.p;try{we.p=2,X.T=null,BA(i,r,c,m,Se,b,w,E,D,H,K)}finally{X.T=de,we.p=Se}}function BA(i,r,c,m,b,w,E,D){do Fl();while(Oo!==null);if((Gt&6)!==0)throw Error(s(327));var H=i.finishedWork;if(m=i.finishedLanes,H===null)return null;if(i.finishedWork=null,i.finishedLanes=0,H===i.current)throw Error(s(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var K=H.lanes|H.childLanes;if(K|=fu,al(i,m,K,w,E,D),i===Et&&(it=Et=null,ut=0),(H.subtreeFlags&10256)===0&&(H.flags&10256)===0||yf||(yf=!0,Ap=K,Op=c,VA(Mt,function(){return Fl(),null})),c=(H.flags&15990)!==0,(H.subtreeFlags&15990)!==0||c?(c=X.T,X.T=null,w=we.p,we.p=2,E=Gt,Gt|=4,AA(i,H),S1(H,i),Dg(qp,i.containerInfo),Rf=!!Fp,qp=Fp=null,i.current=H,b1(i,H.alternate,H),jn(),Gt=E,we.p=w,X.T=c):i.current=H,yf?(yf=!1,Oo=i,Hu=m):q1(i,K),K=i.pendingLanes,K===0&&(xr=null),Wr(H.stateNode),Ri(i),r!==null)for(b=i.onRecoverableError,H=0;H<r.length;H++)K=r[H],b(K.value,{componentStack:K.stack});return(Hu&3)!==0&&Fl(),K=i.pendingLanes,(m&4194218)!==0&&(K&42)!==0?i===jp?Fu++:(Fu=0,jp=i):Fu=0,qu(0),null}function q1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,fo(r)))}function Fl(){if(Oo!==null){var i=Oo,r=Ap;Ap=0;var c=qa(Hu),m=X.T,b=we.p;try{if(we.p=32>c?32:c,X.T=null,Oo===null)var w=!1;else{c=Op,Op=null;var E=Oo,D=Hu;if(Oo=null,Hu=0,(Gt&6)!==0)throw Error(s(331));var H=Gt;if(Gt|=4,j1(E.current),T1(E,E.current,D,c),Gt=H,qu(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(vs,E)}catch{}w=!0}return w}finally{we.p=b,X.T=m,q1(i,r)}}return!1}function $1(i,r,c){r=Vn(c,r),r=Xg(i.stateNode,r,2),i=gr(i,r,2),i!==null&&(Fs(i,2),Ri(i))}function jt(i,r,c){if(i.tag===3)$1(i,i,c);else for(;r!==null;){if(r.tag===3){$1(r,i,c);break}else if(r.tag===1){var m=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(xr===null||!xr.has(m))){i=Vn(c,i),c=Yb(2),m=gr(r,c,2),m!==null&&(Kb(c,m,r,i),Fs(m,2),Ri(m));break}}r=r.return}}function Np(i,r,c){var m=i.pingCache;if(m===null){m=i.pingCache=new kA;var b=new Set;m.set(r,b)}else b=m.get(r),b===void 0&&(b=new Set,m.set(r,b));b.has(c)||(wp=!0,b.add(c),i=UA.bind(null,i,r,c),r.then(i,i))}function UA(i,r,c){var m=i.pingCache;m!==null&&m.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Et===i&&(ut&c)===c&&(Jt===4||Jt===3&&(ut&62914560)===ut&&300>Je()-Tp?(Gt&2)===0&&Vl(i,0):Sp|=c,zl===ut&&(zl=0)),Ri(i)}function G1(i,r){r===0&&(r=il()),i=Es(i,r),i!==null&&(Fs(i,r),Ri(i))}function IA(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),G1(i,c)}function zA(i,r){var c=0;switch(i.tag){case 13:var m=i.stateNode,b=i.memoizedState;b!==null&&(c=b.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(r),G1(i,c)}function VA(i,r){return Ge(i,r)}var _f=null,ql=null,Dp=!1,xf=!1,Pp=!1,jo=0;function Ri(i){i!==ql&&i.next===null&&(ql===null?_f=ql=i:ql=ql.next=i),xf=!0,Dp||(Dp=!0,FA(HA))}function qu(i,r){if(!Pp&&xf){Pp=!0;do for(var c=!1,m=_f;m!==null;){if(i!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var E=m.suspendedLanes,D=m.pingedLanes;w=(1<<31-fn(42|i)+1)-1,w&=b&~(E&~D),w=w&201326677?w&201326677|1:w?w|2:0}w!==0&&(c=!0,K1(m,w))}else w=ut,w=sn(m,m===Et?w:0),(w&3)===0||Ot(m,w)||(c=!0,K1(m,w));m=m.next}while(c);Pp=!1}}function HA(){xf=Dp=!1;var i=0;jo!==0&&(QA()&&(i=jo),jo=0);for(var r=Je(),c=null,m=_f;m!==null;){var b=m.next,w=W1(m,r);w===0?(m.next=null,c===null?_f=b:c.next=b,b===null&&(ql=c)):(c=m,(i!==0||(w&3)!==0)&&(xf=!0)),m=b}qu(i)}function W1(i,r){for(var c=i.suspendedLanes,m=i.pingedLanes,b=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var E=31-fn(w),D=1<<E,H=b[E];H===-1?((D&c)===0||(D&m)!==0)&&(b[E]=wt(D,r)):H<=r&&(i.expiredLanes|=D),w&=~D}if(r=Et,c=ut,c=sn(i,i===r?c:0),m=i.callbackNode,c===0||i===r&&Rt===2||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Fe(m),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ot(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(m!==null&&Fe(m),qa(c)){case 2:case 8:c=mt;break;case 32:c=Mt;break;case 268435456:c=Un;break;default:c=Mt}return m=Y1.bind(null,i),c=Ge(c,m),i.callbackPriority=r,i.callbackNode=c,r}return m!==null&&m!==null&&Fe(m),i.callbackPriority=2,i.callbackNode=null,2}function Y1(i,r){var c=i.callbackNode;if(Fl()&&i.callbackNode!==c)return null;var m=ut;return m=sn(i,i===Et?m:0),m===0?null:(P1(i,m,r),W1(i,Je()),i.callbackNode!=null&&i.callbackNode===c?Y1.bind(null,i):null)}function K1(i,r){if(Fl())return null;P1(i,r,!0)}function FA(i){ZA(function(){(Gt&6)!==0?Ge(At,i):i()})}function Lp(){return jo===0&&(jo=Jn()),jo}function X1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Qr(""+i)}function Q1(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function qA(i,r,c,m,b){if(r==="submit"&&c&&c.stateNode===b){var w=X1((b[hn]||null).action),E=m.submitter;E&&(r=(r=E[hn]||null)?X1(r.formAction):E.getAttribute("formAction"),r!==null&&(w=r,E=null));var D=new ml("action","action",null,m,b);i.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(jo!==0){var H=E?Q1(b,E):new FormData(b);$g(c,{pending:!0,data:H,method:b.method,action:w},null,H)}}else typeof w=="function"&&(D.preventDefault(),H=E?Q1(b,E):new FormData(b),$g(c,{pending:!0,data:H,method:b.method,action:w},w,H))},currentTarget:b}]})}}for(var Bp=0;Bp<Wd.length;Bp++){var Up=Wd[Bp],$A=Up.toLowerCase(),GA=Up[0].toUpperCase()+Up.slice(1);pn($A,"on"+GA)}pn(hu,"onAnimationEnd"),pn(du,"onAnimationIteration"),pn($d,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(Pg,"onTransitionRun"),pn(Lg,"onTransitionStart"),pn(wl,"onTransitionCancel"),pn(Ys,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($u));function J1(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],b=m.event;m=m.listeners;e:{var w=void 0;if(r)for(var E=m.length-1;0<=E;E--){var D=m[E],H=D.instance,K=D.currentTarget;if(D=D.listener,H!==w&&b.isPropagationStopped())break e;w=D,b.currentTarget=K;try{w(b)}catch(de){of(de)}b.currentTarget=null,w=H}else for(E=0;E<m.length;E++){if(D=m[E],H=D.instance,K=D.currentTarget,D=D.listener,H!==w&&b.isPropagationStopped())break e;w=D,b.currentTarget=K;try{w(b)}catch(de){of(de)}b.currentTarget=null,w=H}}}}function ot(i,r){var c=r[Kr];c===void 0&&(c=r[Kr]=new Set);var m=i+"__bubble";c.has(m)||(Z1(r,i,2,!1),c.add(m))}function Ip(i,r,c){var m=0;r&&(m|=4),Z1(c,i,m,r)}var wf="_reactListening"+Math.random().toString(36).slice(2);function zp(i){if(!i[wf]){i[wf]=!0,rl.forEach(function(c){c!=="selectionchange"&&(WA.has(c)||Ip(c,!1,i),Ip(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[wf]||(r[wf]=!0,Ip("selectionchange",!1,r))}}function Z1(i,r,c,m){switch(w_(r)){case 2:var b=bO;break;case 8:b=_O;break;default:b=Zp}c=b.bind(null,r,c,i),b=void 0,!hl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(b=!0),m?b!==void 0?i.addEventListener(r,c,{capture:!0,passive:b}):i.addEventListener(r,c,!0):b!==void 0?i.addEventListener(r,c,{passive:b}):i.addEventListener(r,c,!1)}function Vp(i,r,c,m,b){var w=m;if((r&1)===0&&(r&2)===0&&m!==null)e:for(;;){if(m===null)return;var E=m.tag;if(E===3||E===4){var D=m.stateNode.containerInfo;if(D===b||D.nodeType===8&&D.parentNode===b)break;if(E===4)for(E=m.return;E!==null;){var H=E.tag;if((H===3||H===4)&&(H=E.stateNode.containerInfo,H===b||H.nodeType===8&&H.parentNode===b))return;E=E.return}for(;D!==null;){if(E=os(D),E===null)return;if(H=E.tag,H===5||H===6||H===26||H===27){m=w=E;continue e}D=D.parentNode}}m=m.return}Ki(function(){var K=w,de=ul(c),Se=[];e:{var re=Gd.get(i);if(re!==void 0){var he=ml,ze=i;switch(i){case"keypress":if(dl(c)===0)break e;case"keydown":case"keyup":he=wg;break;case"focusin":ze="focus",he=Wc;break;case"focusout":ze="blur",he=Wc;break;case"beforeblur":case"afterblur":he=Wc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Tg;break;case hu:case du:case $d:he=kd;break;case Ys:he=Ld;break;case"scroll":case"scrollend":he=Rd;break;case"wheel":he=Qc;break;case"copy":case"cut":case"paste":he=bg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Xc;break;case"toggle":case"beforetoggle":he=io}var Ke=(r&4)!==0,Zt=!Ke&&(i==="scroll"||i==="scrollend"),Z=Ke?re!==null?re+"Capture":null:re;Ke=[];for(var Y=K,ie;Y!==null;){var pe=Y;if(ie=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ie===null||Z===null||(pe=Ms(Y,Z),pe!=null&&Ke.push(Gu(Y,pe,ie))),Zt)break;Y=Y.return}0<Ke.length&&(re=new he(re,ze,null,c,de),Se.push({event:re,listeners:Ke}))}}if((r&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",re&&c!==Jr&&(ze=c.relatedTarget||c.fromElement)&&(os(ze)||ze[bs]))break e;if((he||re)&&(re=de.window===de?de:(re=de.ownerDocument)?re.defaultView||re.parentWindow:window,he?(ze=c.relatedTarget||c.toElement,he=K,ze=ze?os(ze):null,ze!==null&&(Zt=ce(ze),Ke=ze.tag,ze!==Zt||Ke!==5&&Ke!==27&&Ke!==6)&&(ze=null)):(he=null,ze=K),he!==ze)){if(Ke=no,pe="onMouseLeave",Z="onMouseEnter",Y="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=Xc,pe="onPointerLeave",Z="onPointerEnter",Y="pointer"),Zt=he==null?re:vi(he),ie=ze==null?re:vi(ze),re=new Ke(pe,Y+"leave",he,c,de),re.target=Zt,re.relatedTarget=ie,pe=null,os(de)===K&&(Ke=new Ke(Z,Y+"enter",ze,c,de),Ke.target=ie,Ke.relatedTarget=Zt,pe=Ke),Zt=pe,he&&ze)t:{for(Ke=he,Z=ze,Y=0,ie=Ke;ie;ie=$l(ie))Y++;for(ie=0,pe=Z;pe;pe=$l(pe))ie++;for(;0<Y-ie;)Ke=$l(Ke),Y--;for(;0<ie-Y;)Z=$l(Z),ie--;for(;Y--;){if(Ke===Z||Z!==null&&Ke===Z.alternate)break t;Ke=$l(Ke),Z=$l(Z)}Ke=null}else Ke=null;he!==null&&e_(Se,re,he,Ke,!1),ze!==null&&Zt!==null&&e_(Se,Zt,ze,Ke,!0)}}e:{if(re=K?vi(K):window,he=re.nodeName&&re.nodeName.toLowerCase(),he==="select"||he==="input"&&re.type==="file")var Be=Fd;else if(eu(re))if(nu)Be=Ng;else{Be=kg;var st=qd}else he=re.nodeName,!he||he.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?K&&qc(K.elementType)&&(Be=Fd):Be=ru;if(Be&&(Be=Be(i,K))){tu(Se,Be,c,de);break e}st&&st(i,re,K),i==="focusout"&&K&&re.type==="number"&&K.memoizedProps.value!=null&&Yt(re,"number",re.value)}switch(st=K?vi(K):window,i){case"focusin":(eu(st)||st.contentEditable==="true")&&(ea=st,uu=K,ro=null);break;case"focusout":ro=uu=ea=null;break;case"mousedown":_l=!0;break;case"contextmenu":case"mouseup":case"dragend":_l=!1,Ja(Se,c,de);break;case"selectionchange":if(cu)break;case"keydown":case"keyup":Ja(Se,c,de)}var He;if(Jc)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Qi?Zc(i,c)&&(qe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(qe="onCompositionStart");qe&&(Ud&&c.locale!=="ko"&&(Qi||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Qi&&(He=Ed()):(_i=de,xi="value"in _i?_i.value:_i.textContent,Qi=!0)),st=Sf(K,qe),0<st.length&&(qe=new Yc(qe,i,null,c,de),Se.push({event:qe,listeners:st}),He?qe.data=He:(He=Vd(c),He!==null&&(qe.data=He)))),(He=jg?Mg(i,c):Eg(i,c))&&(qe=Sf(K,"onBeforeInput"),0<qe.length&&(st=new Yc("onBeforeInput","beforeinput",null,c,de),Se.push({event:st,listeners:qe}),st.data=He)),qA(Se,i,K,c,de)}J1(Se,r)})}function Gu(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Sf(i,r){for(var c=r+"Capture",m=[];i!==null;){var b=i,w=b.stateNode;b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Ms(i,c),b!=null&&m.unshift(Gu(i,b,w)),b=Ms(i,r),b!=null&&m.push(Gu(i,b,w))),i=i.return}return m}function $l(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function e_(i,r,c,m,b){for(var w=r._reactName,E=[];c!==null&&c!==m;){var D=c,H=D.alternate,K=D.stateNode;if(D=D.tag,H!==null&&H===m)break;D!==5&&D!==26&&D!==27||K===null||(H=K,b?(K=Ms(c,w),K!=null&&E.unshift(Gu(c,K,H))):b||(K=Ms(c,w),K!=null&&E.push(Gu(c,K,H)))),c=c.return}E.length!==0&&i.push({event:r,listeners:E})}var YA=/\r\n?/g,KA=/\u0000|\uFFFD/g;function t_(i){return(typeof i=="string"?i:""+i).replace(YA,`
`).replace(KA,"")}function n_(i,r){return r=t_(r),t_(i)===r}function Cf(){}function St(i,r,c,m,b,w){switch(c){case"children":typeof m=="string"?r==="body"||r==="textarea"&&m===""||Ga(i,m):(typeof m=="number"||typeof m=="bigint")&&r!=="body"&&Ga(i,""+m);break;case"className":ll(i,"class",m);break;case"tabIndex":ll(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(i,c,m);break;case"style":Fc(i,m,w);break;case"data":if(r!=="object"){ll(i,"data",m);break}case"src":case"href":if(m===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=Qr(""+m),i.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(r!=="input"&&St(i,r,"name",b.name,b,null),St(i,r,"formEncType",b.formEncType,b,null),St(i,r,"formMethod",b.formMethod,b,null),St(i,r,"formTarget",b.formTarget,b,null)):(St(i,r,"encType",b.encType,b,null),St(i,r,"method",b.method,b,null),St(i,r,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(c);break}m=Qr(""+m),i.setAttribute(c,m);break;case"onClick":m!=null&&(i.onclick=Cf);break;case"onScroll":m!=null&&ot("scroll",i);break;case"onScrollEnd":m!=null&&ot("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(c=m.__html,c!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}c=Qr(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""+m):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":m===!0?i.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(c,m):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(c,m):i.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(c):i.setAttribute(c,m);break;case"popover":ot("beforetoggle",i),ot("toggle",i),ol(i,"popover",m);break;case"xlinkActuate":$s(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":$s(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":$s(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":$s(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":$s(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":$s(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":$s(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":$s(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":$s(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ol(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Md.get(c)||c,ol(i,c,m))}}function Hp(i,r,c,m,b,w){switch(c){case"style":Fc(i,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(c=m.__html,c!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof m=="string"?Ga(i,m):(typeof m=="number"||typeof m=="bigint")&&Ga(i,""+m);break;case"onScroll":m!=null&&ot("scroll",i);break;case"onScrollEnd":m!=null&&ot("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Cf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xd.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),r=c.slice(2,b?c.length-7:void 0),w=i[hn]||null,w=w!=null?w[c]:null,typeof w=="function"&&i.removeEventListener(r,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,m,b);break e}c in i?i[c]=m:m===!0?i.setAttribute(c,""):ol(i,c,m)}}}function Dn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",i),ot("load",i);var m=!1,b=!1,w;for(w in c)if(c.hasOwnProperty(w)){var E=c[w];if(E!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:St(i,r,w,E,c,null)}}b&&St(i,r,"srcSet",c.srcSet,c,null),m&&St(i,r,"src",c.src,c,null);return;case"input":ot("invalid",i);var D=w=E=b=null,H=null,K=null;for(m in c)if(c.hasOwnProperty(m)){var de=c[m];if(de!=null)switch(m){case"name":b=de;break;case"type":E=de;break;case"checked":H=de;break;case"defaultChecked":K=de;break;case"value":w=de;break;case"defaultValue":D=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,r));break;default:St(i,r,m,de,c,null)}}Ad(i,w,D,H,K,E,b,!1),Gs(i);return;case"select":ot("invalid",i),m=E=w=null;for(b in c)if(c.hasOwnProperty(b)&&(D=c[b],D!=null))switch(b){case"value":w=D;break;case"defaultValue":E=D;break;case"multiple":m=D;default:St(i,r,b,D,c,null)}r=w,c=E,i.multiple=!!m,r!=null?Ie(i,!!m,r,!1):c!=null&&Ie(i,!!m,c,!0);return;case"textarea":ot("invalid",i),w=b=m=null;for(E in c)if(c.hasOwnProperty(E)&&(D=c[E],D!=null))switch(E){case"value":m=D;break;case"defaultValue":b=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:St(i,r,E,D,c,null)}Mn(i,m,b,w),Gs(i);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(m=c[H],m!=null))switch(H){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:St(i,r,H,m,c,null)}return;case"dialog":ot("cancel",i),ot("close",i);break;case"iframe":case"object":ot("load",i);break;case"video":case"audio":for(m=0;m<$u.length;m++)ot($u[m],i);break;case"image":ot("error",i),ot("load",i);break;case"details":ot("toggle",i);break;case"embed":case"source":case"link":ot("error",i),ot("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in c)if(c.hasOwnProperty(K)&&(m=c[K],m!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:St(i,r,K,m,c,null)}return;default:if(qc(r)){for(de in c)c.hasOwnProperty(de)&&(m=c[de],m!==void 0&&Hp(i,r,de,m,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(m=c[D],m!=null&&St(i,r,D,m,c,null))}function XA(i,r,c,m){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,E=null,D=null,H=null,K=null,de=null;for(he in c){var Se=c[he];if(c.hasOwnProperty(he)&&Se!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":H=Se;default:m.hasOwnProperty(he)||St(i,r,he,null,m,Se)}}for(var re in m){var he=m[re];if(Se=c[re],m.hasOwnProperty(re)&&(he!=null||Se!=null))switch(re){case"type":w=he;break;case"name":b=he;break;case"checked":K=he;break;case"defaultChecked":de=he;break;case"value":E=he;break;case"defaultValue":D=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:he!==Se&&St(i,r,re,he,m,Se)}}Xr(i,E,D,H,K,de,w,b);return;case"select":he=E=D=re=null;for(w in c)if(H=c[w],c.hasOwnProperty(w)&&H!=null)switch(w){case"value":break;case"multiple":he=H;default:m.hasOwnProperty(w)||St(i,r,w,null,m,H)}for(b in m)if(w=m[b],H=c[b],m.hasOwnProperty(b)&&(w!=null||H!=null))switch(b){case"value":re=w;break;case"defaultValue":D=w;break;case"multiple":E=w;default:w!==H&&St(i,r,b,w,m,H)}r=D,c=E,m=he,re!=null?Ie(i,!!c,re,!1):!!m!=!!c&&(r!=null?Ie(i,!!c,r,!0):Ie(i,!!c,c?[]:"",!1));return;case"textarea":he=re=null;for(D in c)if(b=c[D],c.hasOwnProperty(D)&&b!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:St(i,r,D,null,m,b)}for(E in m)if(b=m[E],w=c[E],m.hasOwnProperty(E)&&(b!=null||w!=null))switch(E){case"value":re=b;break;case"defaultValue":he=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==w&&St(i,r,E,b,m,w)}Hc(i,re,he);return;case"option":for(var ze in c)if(re=c[ze],c.hasOwnProperty(ze)&&re!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":i.selected=!1;break;default:St(i,r,ze,null,m,re)}for(H in m)if(re=m[H],he=c[H],m.hasOwnProperty(H)&&re!==he&&(re!=null||he!=null))switch(H){case"selected":i.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:St(i,r,H,re,m,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in c)re=c[Ke],c.hasOwnProperty(Ke)&&re!=null&&!m.hasOwnProperty(Ke)&&St(i,r,Ke,null,m,re);for(K in m)if(re=m[K],he=c[K],m.hasOwnProperty(K)&&re!==he&&(re!=null||he!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,r));break;default:St(i,r,K,re,m,he)}return;default:if(qc(r)){for(var Zt in c)re=c[Zt],c.hasOwnProperty(Zt)&&re!==void 0&&!m.hasOwnProperty(Zt)&&Hp(i,r,Zt,void 0,m,re);for(de in m)re=m[de],he=c[de],!m.hasOwnProperty(de)||re===he||re===void 0&&he===void 0||Hp(i,r,de,re,m,he);return}}for(var Z in c)re=c[Z],c.hasOwnProperty(Z)&&re!=null&&!m.hasOwnProperty(Z)&&St(i,r,Z,null,m,re);for(Se in m)re=m[Se],he=c[Se],!m.hasOwnProperty(Se)||re===he||re==null&&he==null||St(i,r,Se,re,m,he)}var Fp=null,qp=null;function Tf(i){return i.nodeType===9?i:i.ownerDocument}function s_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function $p(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gp=null;function QA(){var i=window.event;return i&&i.type==="popstate"?i===Gp?!1:(Gp=i,!0):(Gp=null,!1)}var a_=typeof setTimeout=="function"?setTimeout:void 0,JA=typeof clearTimeout=="function"?clearTimeout:void 0,r_=typeof Promise=="function"?Promise:void 0,ZA=typeof queueMicrotask=="function"?queueMicrotask:typeof r_<"u"?function(i){return r_.resolve(null).then(i).catch(eO)}:a_;function eO(i){setTimeout(function(){throw i})}function Wp(i,r){var c=r,m=0;do{var b=c.nextSibling;if(i.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(m===0){i.removeChild(b),eh(r);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=b}while(c);eh(r)}function Yp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Yp(c),gn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function tO(i,r,c,m){for(;i.nodeType===1;){var b=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[mn])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==b.rel||i.getAttribute("href")!==(b.href==null?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=ri(i.nextSibling),i===null)break}return null}function nO(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ri(i.nextSibling),i===null))return null;return i}function ri(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}function o_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return i;r--}else c==="/$"&&r++}i=i.previousSibling}return null}function l_(i,r,c){switch(r=Tf(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}var Ls=new Map,c_=new Set;function Af(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Aa=we.d;we.d={f:sO,r:iO,D:aO,C:rO,L:oO,m:lO,X:uO,S:cO,M:hO};function sO(){var i=Aa.f(),r=vf();return i||r}function iO(i){var r=yt(i);r!==null&&r.tag===5&&r.type==="form"?Lb(r):Aa.r(i)}var Gl=typeof document>"u"?null:document;function u_(i,r,c){var m=Gl;if(m&&typeof r=="string"&&r){var b=cs(r);b='link[rel="'+i+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),c_.has(b)||(c_.add(b),i={rel:i,crossOrigin:c,href:r},m.querySelector(b)===null&&(r=m.createElement("link"),Dn(r,"link",i),Ft(r),m.head.appendChild(r)))}}function aO(i){Aa.D(i),u_("dns-prefetch",i,null)}function rO(i,r){Aa.C(i,r),u_("preconnect",i,r)}function oO(i,r,c){Aa.L(i,r,c);var m=Gl;if(m&&i&&r){var b='link[rel="preload"][as="'+cs(r)+'"]';r==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+cs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+cs(c.imageSizes)+'"]')):b+='[href="'+cs(i)+'"]';var w=b;switch(r){case"style":w=Wl(i);break;case"script":w=Yl(i)}Ls.has(w)||(i=oe({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),Ls.set(w,i),m.querySelector(b)!==null||r==="style"&&m.querySelector(Wu(w))||r==="script"&&m.querySelector(Yu(w))||(r=m.createElement("link"),Dn(r,"link",i),Ft(r),m.head.appendChild(r)))}}function lO(i,r){Aa.m(i,r);var c=Gl;if(c&&i){var m=r&&typeof r.as=="string"?r.as:"script",b='link[rel="modulepreload"][as="'+cs(m)+'"][href="'+cs(i)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Yl(i)}if(!Ls.has(w)&&(i=oe({rel:"modulepreload",href:i},r),Ls.set(w,i),c.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Yu(w)))return}m=c.createElement("link"),Dn(m,"link",i),Ft(m),c.head.appendChild(m)}}}function cO(i,r,c){Aa.S(i,r,c);var m=Gl;if(m&&i){var b=$a(m).hoistableStyles,w=Wl(i);r=r||"default";var E=b.get(w);if(!E){var D={loading:0,preload:null};if(E=m.querySelector(Wu(w)))D.loading=5;else{i=oe({rel:"stylesheet",href:i,"data-precedence":r},c),(c=Ls.get(w))&&Kp(i,c);var H=E=m.createElement("link");Ft(H),Dn(H,"link",i),H._p=new Promise(function(K,de){H.onload=K,H.onerror=de}),H.addEventListener("load",function(){D.loading|=1}),H.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Of(E,r,m)}E={type:"stylesheet",instance:E,count:1,state:D},b.set(w,E)}}}function uO(i,r){Aa.X(i,r);var c=Gl;if(c&&i){var m=$a(c).hoistableScripts,b=Yl(i),w=m.get(b);w||(w=c.querySelector(Yu(b)),w||(i=oe({src:i,async:!0},r),(r=Ls.get(b))&&Xp(i,r),w=c.createElement("script"),Ft(w),Dn(w,"link",i),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function hO(i,r){Aa.M(i,r);var c=Gl;if(c&&i){var m=$a(c).hoistableScripts,b=Yl(i),w=m.get(b);w||(w=c.querySelector(Yu(b)),w||(i=oe({src:i,async:!0,type:"module"},r),(r=Ls.get(b))&&Xp(i,r),w=c.createElement("script"),Ft(w),Dn(w,"link",i),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function h_(i,r,c,m){var b=(b=Pe.current)?Af(b):null;if(!b)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Wl(c.href),c=$a(b).hoistableStyles,m=c.get(r),m||(m={type:"style",instance:null,count:0,state:null},c.set(r,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Wl(c.href);var w=$a(b).hoistableStyles,E=w.get(i);if(E||(b=b.ownerDocument||b,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,E),(w=b.querySelector(Wu(i)))&&!w._p&&(E.instance=w,E.state.loading=5),Ls.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ls.set(i,c),w||dO(b,i,c,E.state))),r&&m===null)throw Error(s(528,""));return E}if(r&&m!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Yl(c),c=$a(b).hoistableScripts,m=c.get(r),m||(m={type:"script",instance:null,count:0,state:null},c.set(r,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Wl(i){return'href="'+cs(i)+'"'}function Wu(i){return'link[rel="stylesheet"]['+i+"]"}function d_(i){return oe({},i,{"data-precedence":i.precedence,precedence:null})}function dO(i,r,c,m){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?m.loading=1:(r=i.createElement("link"),m.preload=r,r.addEventListener("load",function(){return m.loading|=1}),r.addEventListener("error",function(){return m.loading|=2}),Dn(r,"link",c),Ft(r),i.head.appendChild(r))}function Yl(i){return'[src="'+cs(i)+'"]'}function Yu(i){return"script[async]"+i}function f_(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var m=i.querySelector('style[data-href~="'+cs(c.href)+'"]');if(m)return r.instance=m,Ft(m),m;var b=oe({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Ft(m),Dn(m,"style",b),Of(m,c.precedence,i),r.instance=m;case"stylesheet":b=Wl(c.href);var w=i.querySelector(Wu(b));if(w)return r.state.loading|=4,r.instance=w,Ft(w),w;m=d_(c),(b=Ls.get(b))&&Kp(m,b),w=(i.ownerDocument||i).createElement("link"),Ft(w);var E=w;return E._p=new Promise(function(D,H){E.onload=D,E.onerror=H}),Dn(w,"link",m),r.state.loading|=4,Of(w,c.precedence,i),r.instance=w;case"script":return w=Yl(c.src),(b=i.querySelector(Yu(w)))?(r.instance=b,Ft(b),b):(m=c,(b=Ls.get(w))&&(m=oe({},c),Xp(m,b)),i=i.ownerDocument||i,b=i.createElement("script"),Ft(b),Dn(b,"link",m),i.head.appendChild(b),r.instance=b);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(m=r.instance,r.state.loading|=4,Of(m,c.precedence,i));return r.instance}function Of(i,r,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,E=0;E<m.length;E++){var D=m[E];if(D.dataset.precedence===r)w=D;else if(w!==b)break}w?w.parentNode.insertBefore(i,w.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function Kp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Xp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var jf=null;function m_(i,r,c){if(jf===null){var m=new Map,b=jf=new Map;b.set(c,m)}else b=jf,m=b.get(c),m||(m=new Map,b.set(c,m));if(m.has(i))return m;for(m.set(i,null),c=c.getElementsByTagName(i),b=0;b<c.length;b++){var w=c[b];if(!(w[mn]||w[Pt]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var E=w.getAttribute(r)||"";E=i+E;var D=m.get(E);D?D.push(w):m.set(E,[w])}}return m}function g_(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function fO(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function p_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ku=null;function mO(){}function gO(i,r,c){if(Ku===null)throw Error(s(475));var m=Ku;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var b=Wl(c.href),w=i.querySelector(Wu(b));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=Mf.bind(m),i.then(m,m)),r.state.loading|=4,r.instance=w,Ft(w);return}w=i.ownerDocument||i,c=d_(c),(b=Ls.get(b))&&Kp(c,b),w=w.createElement("link"),Ft(w);var E=w;E._p=new Promise(function(D,H){E.onload=D,E.onerror=H}),Dn(w,"link",c),r.instance=w}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(m.count++,r=Mf.bind(m),i.addEventListener("load",r),i.addEventListener("error",r))}}function pO(){if(Ku===null)throw Error(s(475));var i=Ku;return i.stylesheets&&i.count===0&&Qp(i,i.stylesheets),0<i.count?function(r){var c=setTimeout(function(){if(i.stylesheets&&Qp(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Mf(){if(this.count--,this.count===0){if(this.stylesheets)Qp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ef=null;function Qp(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ef=new Map,r.forEach(yO,i),Ef=null,Mf.call(i))}function yO(i,r){if(!(r.state.loading&4)){var c=Ef.get(i);if(c)var m=c.get(null);else{c=new Map,Ef.set(i,c);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var E=b[w];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),m=E)}m&&c.set(null,m)}b=r.instance,E=b.getAttribute("data-precedence"),w=c.get(E)||m,w===m&&c.set(null,b),c.set(E,b),this.count++,m=Mf.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),r.state.loading|=4}}var Xu={$$typeof:T,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function vO(i,r,c,m,b,w,E,D){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function y_(i,r,c,m,b,w,E,D,H,K,de,Se){return i=new vO(i,r,c,E,D,H,K,Se),r=1,w===!0&&(r|=24),w=Ds(3,null,null,r),i.current=w,w.stateNode=i,r=Ml(),r.refCount++,i.pooledCache=r,r.refCount++,w.memoizedState={element:m,isDehydrated:c,cache:r},cp(w),i}function v_(i){return i?(i=Ti,i):Ti}function b_(i,r,c,m,b,w){b=v_(b),m.context===null?m.context=b:m.pendingContext=b,m=mr(r),m.payload={element:c},w=w===void 0?null:w,w!==null&&(m.callback=w),c=gr(i,m,r),c!==null&&(is(c,i,r),Nu(c,i,r))}function __(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function Jp(i,r){__(i,r),(i=i.alternate)&&__(i,r)}function x_(i){if(i.tag===13){var r=Es(i,67108864);r!==null&&is(r,i,67108864),Jp(i,67108864)}}var Rf=!0;function bO(i,r,c,m){var b=X.T;X.T=null;var w=we.p;try{we.p=2,Zp(i,r,c,m)}finally{we.p=w,X.T=b}}function _O(i,r,c,m){var b=X.T;X.T=null;var w=we.p;try{we.p=8,Zp(i,r,c,m)}finally{we.p=w,X.T=b}}function Zp(i,r,c,m){if(Rf){var b=ey(m);if(b===null)Vp(i,r,m,kf,c),S_(i,m);else if(wO(b,i,r,c,m))m.stopPropagation();else if(S_(i,m),r&4&&-1<xO.indexOf(i)){for(;b!==null;){var w=yt(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var E=Dt(w.pendingLanes);if(E!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;E;){var H=1<<31-fn(E);D.entanglements[1]|=H,E&=~H}Ri(w),(Gt&6)===0&&(gf=Je()+500,qu(0))}}break;case 13:D=Es(w,2),D!==null&&is(D,w,2),vf(),Jp(w,2)}if(w=ey(m),w===null&&Vp(i,r,m,kf,c),w===b)break;b=w}b!==null&&m.stopPropagation()}else Vp(i,r,m,null,c)}}function ey(i){return i=ul(i),ty(i)}var kf=null;function ty(i){if(kf=null,i=os(i),i!==null){var r=ce(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=_e(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return kf=i,null}function w_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tt()){case At:return 2;case mt:return 8;case Mt:case cn:return 32;case Un:return 268435456;default:return 32}default:return 32}}var ny=!1,wr=null,Sr=null,Cr=null,Qu=new Map,Ju=new Map,Tr=[],xO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S_(i,r){switch(i){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Qu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(r.pointerId)}}function Zu(i,r,c,m,b,w){return i===null||i.nativeEvent!==w?(i={blockedOn:r,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},r!==null&&(r=yt(r),r!==null&&x_(r)),i):(i.eventSystemFlags|=m,r=i.targetContainers,b!==null&&r.indexOf(b)===-1&&r.push(b),i)}function wO(i,r,c,m,b){switch(r){case"focusin":return wr=Zu(wr,i,r,c,m,b),!0;case"dragenter":return Sr=Zu(Sr,i,r,c,m,b),!0;case"mouseover":return Cr=Zu(Cr,i,r,c,m,b),!0;case"pointerover":var w=b.pointerId;return Qu.set(w,Zu(Qu.get(w)||null,i,r,c,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Ju.set(w,Zu(Ju.get(w)||null,i,r,c,m,b)),!0}return!1}function C_(i){var r=os(i.target);if(r!==null){var c=ce(r);if(c!==null){if(r=c.tag,r===13){if(r=_e(c),r!==null){i.blockedOn=r,Yr(i.priority,function(){if(c.tag===13){var m=Cs(),b=Es(c,m);b!==null&&is(b,c,m),Jp(c,m)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Nf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=ey(i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);Jr=m,c.target.dispatchEvent(m),Jr=null}else return r=yt(c),r!==null&&x_(r),i.blockedOn=c,!1;r.shift()}return!0}function T_(i,r,c){Nf(i)&&c.delete(r)}function SO(){ny=!1,wr!==null&&Nf(wr)&&(wr=null),Sr!==null&&Nf(Sr)&&(Sr=null),Cr!==null&&Nf(Cr)&&(Cr=null),Qu.forEach(T_),Ju.forEach(T_)}function Df(i,r){i.blockedOn===r&&(i.blockedOn=null,ny||(ny=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,SO)))}var Pf=null;function A_(i){Pf!==i&&(Pf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pf===i&&(Pf=null);for(var r=0;r<i.length;r+=3){var c=i[r],m=i[r+1],b=i[r+2];if(typeof m!="function"){if(ty(m||c)===null)continue;break}var w=yt(c);w!==null&&(i.splice(r,3),r-=3,$g(w,{pending:!0,data:b,method:c.method,action:m},m,b))}}))}function eh(i){function r(H){return Df(H,i)}wr!==null&&Df(wr,i),Sr!==null&&Df(Sr,i),Cr!==null&&Df(Cr,i),Qu.forEach(r),Ju.forEach(r);for(var c=0;c<Tr.length;c++){var m=Tr[c];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Tr.length&&(c=Tr[0],c.blockedOn===null);)C_(c),c.blockedOn===null&&Tr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var b=c[m],w=c[m+1],E=b[hn]||null;if(typeof w=="function")E||A_(c);else if(E){var D=null;if(w&&w.hasAttribute("formAction")){if(b=w,E=w[hn]||null)D=E.formAction;else if(ty(b)!==null)continue}else D=E.action;typeof D=="function"?c[m+1]=D:(c.splice(m,3),m-=3),A_(c)}}}function sy(i){this._internalRoot=i}Lf.prototype.render=sy.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,m=Cs();b_(c,m,i,r,null,null)},Lf.prototype.unmount=sy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;i.tag===0&&Fl(),b_(i.current,2,null,i,null,null),vf(),r[bs]=null}};function Lf(i){this._internalRoot=i}Lf.prototype.unstable_scheduleHydration=function(i){if(i){var r=yi();i={blockedOn:null,target:i,priority:r};for(var c=0;c<Tr.length&&r!==0&&r<Tr[c].priority;c++);Tr.splice(c,0,i),c===0&&C_(i)}};var O_=e.version;if(O_!=="19.0.0")throw Error(s(527,O_,"19.0.0"));we.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=te(r),i=i!==null?xe(i):null,i=i===null?null:i.stateNode,i};var CO={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:X,findFiberByHostInstance:os,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bf.isDisabled&&Bf.supportsFiber)try{vs=Bf.inject(CO),un=Bf}catch{}}return nh.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,m="",b=qb,w=$b,E=Gb,D=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(b=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(D=r.unstable_transitionCallbacks)),r=y_(i,1,!1,null,null,c,m,b,w,E,D,null),i[bs]=r.current,zp(i.nodeType===8?i.parentNode:i),new sy(r)},nh.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var m=!1,b="",w=qb,E=$b,D=Gb,H=null,K=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(H=c.unstable_transitionCallbacks),c.formState!==void 0&&(K=c.formState)),r=y_(i,1,!0,r,c??null,m,b,w,E,D,H,K),r.context=v_(null),c=r.current,m=Cs(),b=mr(m),b.callback=null,gr(c,b,m),r.current.lanes=m,Fs(r,m),Ri(r),i[bs]=r.current,zp(i),new Lf(r)},nh.version="19.0.0",nh}var B_;function BO(){if(B_)return ry.exports;B_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ry.exports=LO(),ry.exports}var UO=BO(),sh={},U_;function IO(){if(U_)return sh;U_=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.parse=l,sh.serialize=g;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function l(S,T){const O=new o,M=S.length;if(M<2)return O;const R=(T==null?void 0:T.decode)||y;let N=0;do{const B=S.indexOf("=",N);if(B===-1)break;const z=S.indexOf(";",N),P=z===-1?M:z;if(B>P){N=S.lastIndexOf(";",B-1)+1;continue}const U=u(S,N,B),ee=h(S,B,U),ae=S.slice(U,ee);if(O[ae]===void 0){let J=u(S,B+1,P),X=h(S,P,J);const oe=R(S.slice(J,X));O[ae]=oe}N=P+1}while(N<M);return O}function u(S,T,O){do{const M=S.charCodeAt(T);if(M!==32&&M!==9)return T}while(++T<O);return O}function h(S,T,O){for(;T>O;){const M=S.charCodeAt(--T);if(M!==32&&M!==9)return T+1}return O}function g(S,T,O){const M=(O==null?void 0:O.encode)||encodeURIComponent;if(!t.test(S))throw new TypeError(`argument name is invalid: ${S}`);const R=M(T);if(!e.test(R))throw new TypeError(`argument val is invalid: ${T}`);let N=S+"="+R;if(!O)return N;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);N+="; Max-Age="+O.maxAge}if(O.domain){if(!n.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);N+="; Domain="+O.domain}if(O.path){if(!s.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);N+="; Path="+O.path}if(O.expires){if(!_(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);N+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(N+="; HttpOnly"),O.secure&&(N+="; Secure"),O.partitioned&&(N+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":N+="; Priority=Low";break;case"medium":N+="; Priority=Medium";break;case"high":N+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":N+="; SameSite=Strict";break;case"lax":N+="; SameSite=Lax";break;case"none":N+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return N}function y(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function _(S){return a.call(S)==="[object Date]"}return sh}IO();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var I_="popstate";function zO(t={}){function e(s,a){let{pathname:o,search:l,hash:u}=s.location;return Xy("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Hh(a)}return HO(e,n,null,t)}function zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VO(){return Math.random().toString(36).substring(2,10)}function z_(t,e){return{usr:t.state,key:t.key,idx:e}}function Xy(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ec(e):e,state:n,key:e&&e.key||s||VO()}}function Hh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ec(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function HO(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,u="POP",h=null,g=y();g==null&&(g=0,l.replaceState({...l.state,idx:g},""));function y(){return(l.state||{idx:null}).idx}function _(){u="POP";let R=y(),N=R==null?null:R-g;g=R,h&&h({action:u,location:M.location,delta:N})}function S(R,N){u="PUSH";let B=Xy(M.location,R,N);g=y()+1;let z=z_(B,g),P=M.createHref(B);try{l.pushState(z,"",P)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;a.location.assign(P)}o&&h&&h({action:u,location:M.location,delta:1})}function T(R,N){u="REPLACE";let B=Xy(M.location,R,N);g=y();let z=z_(B,g),P=M.createHref(B);l.replaceState(z,"",P),o&&h&&h({action:u,location:M.location,delta:0})}function O(R){let N=a.location.origin!=="null"?a.location.origin:a.location.href,B=typeof R=="string"?R:Hh(R);return B=B.replace(/ $/,"%20"),zt(N,`No window.location.(origin|href) available to create URL for href: ${B}`),new URL(B,N)}let M={get action(){return u},get location(){return t(a,l)},listen(R){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(I_,_),h=R,()=>{a.removeEventListener(I_,_),h=null}},createHref(R){return e(a,R)},createURL:O,encodeLocation(R){let N=O(R);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:S,replace:T,go(R){return l.go(R)}};return M}function ES(t,e,n="/"){return FO(t,e,n,!1)}function FO(t,e,n,s){let a=typeof e=="string"?Ec(e):e,o=Ua(a.pathname||"/",n);if(o==null)return null;let l=RS(t);qO(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let g=tj(o);u=ZO(l[h],g,s)}return u}function RS(t,e=[],n=[],s=""){let a=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(zt(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let g=Pa([s,h.relativePath]),y=n.concat(h);o.children&&o.children.length>0&&(zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),RS(o.children,e,y,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:QO(g,o.index),routesMeta:y})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,l);else for(let h of kS(o.path))a(o,l,h)}),e}function kS(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=kS(s.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...l),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function qO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JO(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var $O=/^:[\w-]+$/,GO=3,WO=2,YO=1,KO=10,XO=-2,V_=t=>t==="*";function QO(t,e){let n=t.split("/"),s=n.length;return n.some(V_)&&(s+=XO),e&&(s+=WO),n.filter(a=>!V_(a)).reduce((a,o)=>a+($O.test(o)?GO:o===""?YO:KO),s)}function JO(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function ZO(t,e,n=!1){let{routesMeta:s}=t,a={},o="/",l=[];for(let u=0;u<s.length;++u){let h=s[u],g=u===s.length-1,y=o==="/"?e:e.slice(o.length)||"/",_=jm({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},y),S=h.route;if(!_&&g&&n&&!s[s.length-1].route.index&&(_=jm({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),l.push({params:a,pathname:Pa([o,_.pathname]),pathnameBase:aj(Pa([o,_.pathnameBase])),route:S}),_.pathnameBase!=="/"&&(o=Pa([o,_.pathnameBase]))}return l}function jm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=ej(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((g,{paramName:y,isOptional:_},S)=>{if(y==="*"){let O=u[S]||"";l=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const T=u[S];return _&&!T?g[y]=void 0:g[y]=(T||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:l,pattern:t}}function ej(t,e=!1,n=!0){hi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function tj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ua(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function nj(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Ec(t):t;return{pathname:n?n.startsWith("/")?n:sj(n,e):e,search:rj(s),hash:oj(a)}}function sj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function uy(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ij(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function l0(t){let e=ij(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function c0(t,e,n,s=!1){let a;typeof t=="string"?a=Ec(t):(a={...t},zt(!a.pathname||!a.pathname.includes("?"),uy("?","pathname","search",a)),zt(!a.pathname||!a.pathname.includes("#"),uy("#","pathname","hash",a)),zt(!a.search||!a.search.includes("#"),uy("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let _=e.length-1;if(!s&&l.startsWith("..")){let S=l.split("/");for(;S[0]==="..";)S.shift(),_-=1;a.pathname=S.join("/")}u=_>=0?e[_]:"/"}let h=nj(a,u),g=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(g||y)&&(h.pathname+="/"),h}var Pa=t=>t.join("/").replace(/\/\/+/g,"/"),aj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var NS=["POST","PUT","PATCH","DELETE"];new Set(NS);var cj=["GET",...NS];new Set(cj);var Rc=k.createContext(null);Rc.displayName="DataRouter";var Km=k.createContext(null);Km.displayName="DataRouterState";var DS=k.createContext({isTransitioning:!1});DS.displayName="ViewTransition";var uj=k.createContext(new Map);uj.displayName="Fetchers";var hj=k.createContext(null);hj.displayName="Await";var fi=k.createContext(null);fi.displayName="Navigation";var ld=k.createContext(null);ld.displayName="Location";var zi=k.createContext({outlet:null,matches:[],isDataRoute:!1});zi.displayName="Route";var u0=k.createContext(null);u0.displayName="RouteError";function dj(t,{relative:e}={}){zt(kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(fi),{hash:a,pathname:o,search:l}=cd(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Pa([n,o])),s.createHref({pathname:u,search:l,hash:a})}function kc(){return k.useContext(ld)!=null}function Vi(){return zt(kc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(ld).location}var PS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LS(t){k.useContext(fi).static||k.useLayoutEffect(t)}function Hi(){let{isDataRoute:t}=k.useContext(zi);return t?Tj():fj()}function fj(){zt(kc(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Rc),{basename:e,navigator:n}=k.useContext(fi),{matches:s}=k.useContext(zi),{pathname:a}=Vi(),o=JSON.stringify(l0(s)),l=k.useRef(!1);return LS(()=>{l.current=!0}),k.useCallback((h,g={})=>{if(hi(l.current,PS),!l.current)return;if(typeof h=="number"){n.go(h);return}let y=c0(h,JSON.parse(o),a,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Pa([e,y.pathname])),(g.replace?n.replace:n.push)(y,g.state,g)},[e,n,o,a,t])}k.createContext(null);function cd(t,{relative:e}={}){let{matches:n}=k.useContext(zi),{pathname:s}=Vi(),a=JSON.stringify(l0(n));return k.useMemo(()=>c0(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function mj(t,e){return BS(t,e)}function BS(t,e,n,s){var B;zt(kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=k.useContext(fi),{matches:l}=k.useContext(zi),u=l[l.length-1],h=u?u.params:{},g=u?u.pathname:"/",y=u?u.pathnameBase:"/",_=u&&u.route;{let z=_&&_.path||"";US(g,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let S=Vi(),T;if(e){let z=typeof e=="string"?Ec(e):e;zt(y==="/"||((B=z.pathname)==null?void 0:B.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=S;let O=T.pathname||"/",M=O;if(y!=="/"){let z=y.replace(/^\//,"").split("/");M="/"+O.replace(/^\//,"").split("/").slice(z.length).join("/")}let R=!o&&n&&n.matches&&n.matches.length>0?n.matches:ES(t,{pathname:M});hi(_||R!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),hi(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=bj(R&&R.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Pa([y,a.encodeLocation?a.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:Pa([y,a.encodeLocation?a.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),l,n,s);return e&&N?k.createElement(ld.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},N):N}function gj(){let t=Cj(),e=lj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:a},n):null,l)}var pj=k.createElement(gj,null),yj=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(zi.Provider,{value:this.props.routeContext},k.createElement(u0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vj({routeContext:t,match:e,children:n}){let s=k.useContext(Rc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(zi.Provider,{value:t},n)}function bj(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);zt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:y,errors:_}=n,S=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!_||_[g.route.id]===void 0);if(g.route.lazy||S){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,g,y)=>{let _,S=!1,T=null,O=null;n&&(_=o&&g.route.id?o[g.route.id]:void 0,T=g.route.errorElement||pj,l&&(u<0&&y===0?(US("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,O=null):u===y&&(S=!0,O=g.route.hydrateFallbackElement||null)));let M=e.concat(a.slice(0,y+1)),R=()=>{let N;return _?N=T:S?N=O:g.route.Component?N=k.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,k.createElement(vj,{match:g,routeContext:{outlet:h,matches:M,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?k.createElement(yj,{location:n.location,revalidation:n.revalidation,component:T,error:_,children:R(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):R()},null)}function h0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _j(t){let e=k.useContext(Rc);return zt(e,h0(t)),e}function xj(t){let e=k.useContext(Km);return zt(e,h0(t)),e}function wj(t){let e=k.useContext(zi);return zt(e,h0(t)),e}function d0(t){let e=wj(t),n=e.matches[e.matches.length-1];return zt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Sj(){return d0("useRouteId")}function Cj(){var s;let t=k.useContext(u0),e=xj("useRouteError"),n=d0("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function Tj(){let{router:t}=_j("useNavigate"),e=d0("useNavigate"),n=k.useRef(!1);return LS(()=>{n.current=!0}),k.useCallback(async(a,o={})=>{hi(n.current,PS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var H_={};function US(t,e,n){!e&&!H_[t]&&(H_[t]=!0,hi(!1,n))}k.memo(Aj);function Aj({routes:t,future:e,state:n}){return BS(t,void 0,n,e)}function dm({to:t,replace:e,state:n,relative:s}){zt(kc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(fi);hi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=k.useContext(zi),{pathname:l}=Vi(),u=Hi(),h=c0(t,l0(o),l,s==="path"),g=JSON.stringify(h);return k.useEffect(()=>{u(JSON.parse(g),{replace:e,state:n,relative:s})},[u,g,s,e,n]),null}function _n(t){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oj({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:o=!1}){zt(!kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Ec(n));let{pathname:h="/",search:g="",hash:y="",state:_=null,key:S="default"}=n,T=k.useMemo(()=>{let O=Ua(h,l);return O==null?null:{location:{pathname:O,search:g,hash:y,state:_,key:S},navigationType:s}},[l,h,g,y,_,S,s]);return hi(T!=null,`<Router basename="${l}"> is not able to match the URL "${h}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:k.createElement(fi.Provider,{value:u},k.createElement(ld.Provider,{children:e,value:T}))}function jj({children:t,location:e}){return mj(Qy(t),e)}function Qy(t,e=[]){let n=[];return k.Children.forEach(t,(s,a)=>{if(!k.isValidElement(s))return;let o=[...e,a];if(s.type===k.Fragment){n.push.apply(n,Qy(s.props.children,o));return}zt(s.type===_n,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Qy(s.props.children,o)),n.push(l)}),n}var fm="get",mm="application/x-www-form-urlencoded";function Xm(t){return t!=null&&typeof t.tagName=="string"}function Mj(t){return Xm(t)&&t.tagName.toLowerCase()==="button"}function Ej(t){return Xm(t)&&t.tagName.toLowerCase()==="form"}function Rj(t){return Xm(t)&&t.tagName.toLowerCase()==="input"}function kj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Nj(t,e){return t.button===0&&(!e||e==="_self")&&!kj(t)}var Uf=null;function Dj(){if(Uf===null)try{new FormData(document.createElement("form"),0),Uf=!1}catch{Uf=!0}return Uf}var Pj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hy(t){return t!=null&&!Pj.has(t)?(hi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mm}"`),null):t}function Lj(t,e){let n,s,a,o,l;if(Ej(t)){let u=t.getAttribute("action");s=u?Ua(u,e):null,n=t.getAttribute("method")||fm,a=hy(t.getAttribute("enctype"))||mm,o=new FormData(t)}else if(Mj(t)||Rj(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||u.getAttribute("action");if(s=h?Ua(h,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||fm,a=hy(t.getAttribute("formenctype"))||hy(u.getAttribute("enctype"))||mm,o=new FormData(u,t),!Dj()){let{name:g,type:y,value:_}=t;if(y==="image"){let S=g?`${g}.`:"";o.append(`${S}x`,"0"),o.append(`${S}y`,"0")}else g&&o.append(g,_)}}else{if(Xm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fm,s=null,a=mm,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:o,body:l}}function f0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Bj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Uj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ij(t,e,n){let s=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await Bj(o,n);return l.links?l.links():[]}return[]}));return Fj(s.flat(1).filter(Uj).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function F_(t,e,n,s,a,o){let l=(h,g)=>n[g]?h.route.id!==n[g].route.id:!0,u=(h,g)=>{var y;return n[g].pathname!==h.pathname||((y=n[g].route.path)==null?void 0:y.endsWith("*"))&&n[g].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,g)=>l(h,g)||u(h,g)):o==="data"?e.filter((h,g)=>{var _;let y=s.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,g)||u(h,g))return!0;if(h.route.shouldRevalidate){let S=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((_=n[0])==null?void 0:_.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function zj(t,e,{includeHydrateFallback:n}={}){return Vj(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function Vj(t){return[...new Set(t)]}function Hj(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function Fj(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let o=JSON.stringify(Hj(a));return n.has(o)||(n.add(o),s.push({key:o,link:a})),s},[])}function qj(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ua(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function IS(){let t=k.useContext(Rc);return f0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $j(){let t=k.useContext(Km);return f0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var m0=k.createContext(void 0);m0.displayName="FrameworkContext";function zS(){let t=k.useContext(m0);return f0(t,"You must render this element inside a <HydratedRouter> element"),t}function Gj(t,e){let n=k.useContext(m0),[s,a]=k.useState(!1),[o,l]=k.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:g,onMouseLeave:y,onTouchStart:_}=e,S=k.useRef(null);k.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let M=N=>{N.forEach(B=>{l(B.isIntersecting)})},R=new IntersectionObserver(M,{threshold:.5});return S.current&&R.observe(S.current),()=>{R.disconnect()}}},[t]),k.useEffect(()=>{if(s){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[s]);let T=()=>{a(!0)},O=()=>{a(!1),l(!1)};return n?t!=="intent"?[o,S,{}]:[o,S,{onFocus:ih(u,T),onBlur:ih(h,O),onMouseEnter:ih(g,T),onMouseLeave:ih(y,O),onTouchStart:ih(_,T)}]:[!1,S,{}]}function ih(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Wj({page:t,...e}){let{router:n}=IS(),s=k.useMemo(()=>ES(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?k.createElement(Kj,{page:t,matches:s,...e}):null}function Yj(t){let{manifest:e,routeModules:n}=zS(),[s,a]=k.useState([]);return k.useEffect(()=>{let o=!1;return Ij(t,e,n).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,n]),s}function Kj({page:t,matches:e,...n}){let s=Vi(),{manifest:a,routeModules:o}=zS(),{basename:l}=IS(),{loaderData:u,matches:h}=$j(),g=k.useMemo(()=>F_(t,e,h,a,s,"data"),[t,e,h,a,s]),y=k.useMemo(()=>F_(t,e,h,a,s,"assets"),[t,e,h,a,s]),_=k.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let O=new Set,M=!1;if(e.forEach(N=>{var z;let B=a.routes[N.route.id];!B||!B.hasLoader||(!g.some(P=>P.route.id===N.route.id)&&N.route.id in u&&((z=o[N.route.id])!=null&&z.shouldRevalidate)||B.hasClientLoader?M=!0:O.add(N.route.id))}),O.size===0)return[];let R=qj(t,l);return M&&O.size>0&&R.searchParams.set("_routes",e.filter(N=>O.has(N.route.id)).map(N=>N.route.id).join(",")),[R.pathname+R.search]},[l,u,s,a,g,e,t,o]),S=k.useMemo(()=>zj(y,a),[y,a]),T=Yj(y);return k.createElement(k.Fragment,null,_.map(O=>k.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),S.map(O=>k.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),T.map(({key:O,link:M})=>k.createElement("link",{key:O,...M})))}function Xj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var VS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VS&&(window.__reactRouterVersion="7.4.0")}catch{}function Qj({basename:t,children:e,window:n}){let s=k.useRef();s.current==null&&(s.current=zO({window:n,v5Compat:!0}));let a=s.current,[o,l]=k.useState({action:a.action,location:a.location}),u=k.useCallback(h=>{k.startTransition(()=>l(h))},[l]);return k.useLayoutEffect(()=>a.listen(u),[a,u]),k.createElement(Oj,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var HS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ps=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:u,target:h,to:g,preventScrollReset:y,viewTransition:_,...S},T){let{basename:O}=k.useContext(fi),M=typeof g=="string"&&HS.test(g),R,N=!1;if(typeof g=="string"&&M&&(R=g,VS))try{let X=new URL(window.location.href),oe=g.startsWith("//")?new URL(X.protocol+g):new URL(g),A=Ua(oe.pathname,O);oe.origin===X.origin&&A!=null?g=A+oe.search+oe.hash:N=!0}catch{hi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=dj(g,{relative:a}),[z,P,U]=Gj(s,S),ee=tM(g,{replace:l,state:u,target:h,preventScrollReset:y,relative:a,viewTransition:_});function ae(X){e&&e(X),X.defaultPrevented||ee(X)}let J=k.createElement("a",{...S,...U,href:R||B,onClick:N||o?e:ae,ref:Xj(T,P),target:h,"data-discover":!M&&n==="render"?"true":void 0});return z&&!M?k.createElement(k.Fragment,null,J,k.createElement(Wj,{page:B})):J});ps.displayName="Link";var Jj=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:h,...g},y){let _=cd(l,{relative:g.relative}),S=Vi(),T=k.useContext(Km),{navigator:O,basename:M}=k.useContext(fi),R=T!=null&&rM(_)&&u===!0,N=O.encodeLocation?O.encodeLocation(_).pathname:_.pathname,B=S.pathname,z=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(B=B.toLowerCase(),z=z?z.toLowerCase():null,N=N.toLowerCase()),z&&M&&(z=Ua(z,M)||z);const P=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let U=B===N||!a&&B.startsWith(N)&&B.charAt(P)==="/",ee=z!=null&&(z===N||!a&&z.startsWith(N)&&z.charAt(N.length)==="/"),ae={isActive:U,isPending:ee,isTransitioning:R},J=U?e:void 0,X;typeof s=="function"?X=s(ae):X=[s,U?"active":null,ee?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let oe=typeof o=="function"?o(ae):o;return k.createElement(ps,{...g,"aria-current":J,className:X,ref:y,style:oe,to:l,viewTransition:u},typeof h=="function"?h(ae):h)});Jj.displayName="NavLink";var Zj=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:o,method:l=fm,action:u,onSubmit:h,relative:g,preventScrollReset:y,viewTransition:_,...S},T)=>{let O=iM(),M=aM(u,{relative:g}),R=l.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&HS.test(u),B=z=>{if(h&&h(z),z.defaultPrevented)return;z.preventDefault();let P=z.nativeEvent.submitter,U=(P==null?void 0:P.getAttribute("formmethod"))||l;O(P||z.currentTarget,{fetcherKey:e,method:U,navigate:n,replace:a,state:o,relative:g,preventScrollReset:y,viewTransition:_})};return k.createElement("form",{ref:T,method:R,action:M,onSubmit:s?h:B,...S,"data-discover":!N&&t==="render"?"true":void 0})});Zj.displayName="Form";function eM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FS(t){let e=k.useContext(Rc);return zt(e,eM(t)),e}function tM(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=Hi(),h=Vi(),g=cd(t,{relative:o});return k.useCallback(y=>{if(Nj(y,e)){y.preventDefault();let _=n!==void 0?n:Hh(h)===Hh(g);u(t,{replace:_,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[h,u,g,n,s,e,t,a,o,l])}var nM=0,sM=()=>`__${String(++nM)}__`;function iM(){let{router:t}=FS("useSubmit"),{basename:e}=k.useContext(fi),n=Sj();return k.useCallback(async(s,a={})=>{let{action:o,method:l,encType:u,formData:h,body:g}=Lj(s,e);if(a.navigate===!1){let y=a.fetcherKey||sM();await t.fetch(y,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:g,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:g,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function aM(t,{relative:e}={}){let{basename:n}=k.useContext(fi),s=k.useContext(zi);zt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...cd(t||".",{relative:e})},l=Vi();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(y=>y==="")){u.delete("index"),h.filter(_=>_).forEach(_=>u.append("index",_));let y=u.toString();o.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Pa([n,o.pathname])),Hh(o)}function rM(t,e={}){let n=k.useContext(DS);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=FS("useViewTransitionState"),a=cd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ua(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=Ua(n.nextLocation.pathname,s)||n.nextLocation.pathname;return jm(a.pathname,l)!=null||jm(a.pathname,o)!=null}new TextEncoder;const oM="modulepreload",lM=function(t){return"/"+t},q_={},wc=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(h=>{if(h=lM(h),h in q_)return;q_[h]=!0;const g=h.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":oM,g||(_.as="script"),_.crossOrigin="",_.href=h,u&&_.setAttribute("nonce",u),document.head.appendChild(_),g)return new Promise((S,T)=>{_.addEventListener("load",S),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},cM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wc(async()=>{const{default:s}=await Promise.resolve().then(()=>Nc);return{default:s}},[]).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class g0 extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class uM extends g0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hM extends g0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class dM extends g0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jy||(Jy={}));var fM=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};class mM{constructor(e,{headers:n={},customFetch:s,region:a=Jy.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=cM(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return fM(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:l}=n;let u={},{region:h}=n;h||(h=this.region),h&&h!=="any"&&(u["x-region"]=h);let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(u["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(u["Content-Type"]="application/json",g=JSON.stringify(l)));const y=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:g}).catch(O=>{throw new uM(O)}),_=y.headers.get("x-relay-error");if(_&&_==="true")throw new hM(y);if(!y.ok)throw new dM(y);let S=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),T;return S==="application/json"?T=yield y.json():S==="application/octet-stream"?T=yield y.blob():S==="text/event-stream"?T=y:S==="multipart/form-data"?T=yield y.formData():T=yield y.text(),{data:T,error:null}}catch(a){return{data:null,error:a}}})}}var An={},Kl={},Xl={},Ql={},Jl={},Zl={},gM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sc=gM();const pM=Sc.fetch,qS=Sc.fetch.bind(Sc),$S=Sc.Headers,yM=Sc.Request,vM=Sc.Response,Nc=Object.freeze(Object.defineProperty({__proto__:null,Headers:$S,Request:yM,Response:vM,default:qS,fetch:pM},Symbol.toStringTag,{value:"Module"})),bM=jO(Nc);var If={},$_;function GS(){if($_)return If;$_=1,Object.defineProperty(If,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return If.default=t,If}var G_;function WS(){if(G_)return Zl;G_=1;var t=Zl&&Zl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Zl,"__esModule",{value:!0});const e=t(bM),n=t(GS());class s{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,_,S;let T=null,O=null,M=null,R=g.status,N=g.statusText;if(g.ok){if(this.method!=="HEAD"){const U=await g.text();U===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?O=U:O=JSON.parse(U))}const z=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),P=(_=g.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");z&&P&&P.length>1&&(M=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(T={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,M=null,R=406,N="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const z=await g.text();try{T=JSON.parse(z),Array.isArray(T)&&g.status===404&&(O=[],T=null,R=200,N="OK")}catch{g.status===404&&z===""?(R=204,N="No Content"):T={message:z}}if(T&&this.isMaybeSingle&&(!((S=T==null?void 0:T.details)===null||S===void 0)&&S.includes("0 rows"))&&(T=null,R=200,N="OK"),T&&this.shouldThrowOnError)throw new n.default(T)}return{error:T,data:O,count:M,status:R,statusText:N}});return this.shouldThrowOnError||(h=h.catch(g=>{var y,_,S;return{error:{message:`${(y=g==null?void 0:g.name)!==null&&y!==void 0?y:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(_=g==null?void 0:g.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(S=g==null?void 0:g.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),h.then(o,l)}returns(){return this}overrideTypes(){return this}}return Zl.default=s,Zl}var W_;function YS(){if(W_)return Jl;W_=1;var t=Jl&&Jl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Jl,"__esModule",{value:!0});const e=t(WS());class n extends e.default{select(a){let o=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:h=u}={}){const g=h?`${h}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${a}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,o,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"offset":`${u}.offset`,g=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(g,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:h=!1,format:g="text"}={}){var y;const _=[a?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),S=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${S}"; options=${_};`,g==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jl.default=n,Jl}var Y_;function p0(){if(Y_)return Ql;Y_=1;var t=Ql&&Ql.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ql,"__esModule",{value:!0});const e=t(YS());class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const g=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${h}fts${g}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return Ql.default=n,Ql}var K_;function KS(){if(K_)return Xl;K_=1;var t=Xl&&Xl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xl,"__esModule",{value:!0});const e=t(p0());class n{constructor(a,{headers:o={},schema:l,fetch:u}){this.url=a,this.headers=o,this.schema=l,this.fetch=u}select(a,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let h=!1;const g=(a??"*").split("").map(y=>/\s/.test(y)&&!h?"":(y==='"'&&(h=!h),y)).join("");return this.url.searchParams.set("select",g),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:l=!0}={}){const u="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(a)){const g=a.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(g.length>0){const y=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:h=!0}={}){const g="POST",y=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&y.push(this.headers.Prefer),u&&y.push(`count=${u}`),h||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(a)){const _=a.reduce((S,T)=>S.concat(Object.keys(T)),[]);if(_.length>0){const S=[...new Set(_)].map(T=>`"${T}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",l=[];return a&&l.push(`count=${a}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Xl.default=n,Xl}var ah={},rh={},X_;function _M(){return X_||(X_=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.version=void 0,rh.version="0.0.0-automated"),rh}var Q_;function xM(){if(Q_)return ah;Q_=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.DEFAULT_HEADERS=void 0;const t=_M();return ah.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ah}var J_;function wM(){if(J_)return Kl;J_=1;var t=Kl&&Kl.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Kl,"__esModule",{value:!0});const e=t(KS()),n=t(p0()),s=xM();class a{constructor(l,{headers:u={},schema:h,fetch:g}={}){this.url=l,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),u),this.schemaName=h,this.fetch=g}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:h=!1,get:g=!1,count:y}={}){let _;const S=new URL(`${this.url}/rpc/${l}`);let T;h||g?(_=h?"HEAD":"GET",Object.entries(u).filter(([M,R])=>R!==void 0).map(([M,R])=>[M,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([M,R])=>{S.searchParams.append(M,R)})):(_="POST",T=u);const O=Object.assign({},this.headers);return y&&(O.Prefer=`count=${y}`),new n.default({method:_,url:S,headers:O,schema:this.schemaName,body:T,fetch:this.fetch,allowEmpty:!1})}}return Kl.default=a,Kl}var Z_;function SM(){if(Z_)return An;Z_=1;var t=An&&An.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(An,"__esModule",{value:!0}),An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const e=t(wM());An.PostgrestClient=e.default;const n=t(KS());An.PostgrestQueryBuilder=n.default;const s=t(p0());An.PostgrestFilterBuilder=s.default;const a=t(YS());An.PostgrestTransformBuilder=a.default;const o=t(WS());An.PostgrestBuilder=o.default;const l=t(GS());return An.PostgrestError=l.default,An.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:l.default},An}var CM=SM();const TM=r0(CM),{PostgrestClient:AM,PostgrestQueryBuilder:FU,PostgrestFilterBuilder:qU,PostgrestTransformBuilder:$U,PostgrestBuilder:GU,PostgrestError:WU}=TM,OM="2.11.2",jM={"X-Client-Info":`realtime-js/${OM}`},MM="1.0.0",XS=1e4,EM=1e3;var vc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vc||(vc={}));var Ts;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ts||(Ts={}));var ci;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ci||(ci={}));var Zy;(function(t){t.websocket="websocket"})(Zy||(Zy={}));var Io;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Io||(Io={}));class RM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=s.decode(e.slice(l,l+a));l=l+a;const h=s.decode(e.slice(l,l+o));l=l+o;const g=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:h,payload:g}}}class QS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(kt||(kt={}));const ex=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((o,l)=>(o[l]=kM(l,t,e,a),o),{})},kM=(t,e,n,s)=>{const a=e.find(u=>u.name===t),o=a==null?void 0:a.type,l=n[t];return o&&!s.includes(o)?JS(o,l):ev(l)},JS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return LM(e,n)}switch(t){case kt.bool:return NM(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return DM(e);case kt.json:case kt.jsonb:return PM(e);case kt.timestamp:return BM(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return ev(e);default:return ev(e)}},ev=t=>t,NM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},DM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},PM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},LM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>JS(e,u))}return t},BM=t=>typeof t=="string"?t.replace(" ","T"):t,ZS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dy{constructor(e,n,s={},a=XS){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tx||(tx={}));class Eh{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eh.syncState(this.state,a,o,l),this.pendingDiffs.forEach(h=>{this.state=Eh.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Eh.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const o=this.cloneDeep(e),l=this.transformState(n),u={},h={};return this.map(o,(g,y)=>{l[g]||(h[g]=y)}),this.map(l,(g,y)=>{const _=o[g];if(_){const S=y.map(R=>R.presence_ref),T=_.map(R=>R.presence_ref),O=y.filter(R=>T.indexOf(R.presence_ref)<0),M=_.filter(R=>S.indexOf(R.presence_ref)<0);O.length>0&&(u[g]=O),M.length>0&&(h[g]=M)}else u[g]=y}),this.syncDiff(o,{joins:u,leaves:h},s,a)}static syncDiff(e,n,s,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(u,h)=>{var g;const y=(g=e[u])!==null&&g!==void 0?g:[];if(e[u]=this.cloneDeep(h),y.length>0){const _=e[u].map(T=>T.presence_ref),S=y.filter(T=>_.indexOf(T.presence_ref)<0);e[u].unshift(...S)}s(u,y,h)}),this.map(l,(u,h)=>{let g=e[u];if(!g)return;const y=h.map(_=>_.presence_ref);g=g.filter(_=>y.indexOf(_.presence_ref)<0),e[u]=g,a(u,g,h),g.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nx||(nx={}));var sx;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(sx||(sx={}));var Ea;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ea||(Ea={}));class y0{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dy(this,ci.join,this.params,this.timeout),this.rejoinTimer=new QS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ci.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Eh(this),this.broadcastEndpointURL=ZS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(y=>e==null?void 0:e(Ea.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Ea.CLOSED));const h={},g={broadcast:o,presence:l,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var _;if(this.socket.setAuth(),y===void 0){e==null||e(Ea.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,T=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,O=[];for(let M=0;M<T;M++){const R=S[M],{filter:{event:N,schema:B,table:z,filter:P}}=R,U=y&&y[M];if(U&&U.event===N&&U.schema===B&&U.table===z&&U.filter===P)O.push(Object.assign(Object.assign({},R),{id:U.id}));else{this.unsubscribe(),e==null||e(Ea.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e(Ea.SUBSCRIBED);return}}).receive("error",y=>{e==null||e(Ea.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ea.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,h;const g=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),g.receive("ok",()=>o("ok")),g.receive("error",()=>o("error")),g.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ts.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ci.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const a=new dy(this,ci.leave,{},e);a.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(e,n,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new dy(this,e,n,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,o;const l=e.toLocaleLowerCase(),{close:u,error:h,leave:g,join:y}=ci;if(s&&[u,h,g,y].indexOf(l)>=0&&s!==this._joinRef())return;let S=this._onMessage(l,n,s);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var O,M,R;return((O=T.filter)===null||O===void 0?void 0:O.event)==="*"||((R=(M=T.filter)===null||M===void 0?void 0:M.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===l}).map(T=>T.callback(S,s)):(o=this.bindings[l])===null||o===void 0||o.filter(T=>{var O,M,R,N,B,z;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in T){const P=T.id,U=(O=T.filter)===null||O===void 0?void 0:O.event;return P&&((M=n.ids)===null||M===void 0?void 0:M.includes(P))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const P=(B=(N=T==null?void 0:T.filter)===null||N===void 0?void 0:N.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return P==="*"||P===((z=n==null?void 0:n.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===l}).map(T=>{if(typeof S=="object"&&"ids"in S){const O=S.data,{schema:M,table:R,commit_timestamp:N,type:B,errors:z}=O;S=Object.assign(Object.assign({},{schema:M,table:R,commit_timestamp:N,eventType:B,new:{},old:{},errors:z}),this._getPayloadRecords(O))}T.callback(S,s)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&y0.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ci.close,{},e)}_onError(e){this._on(ci.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ex(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ex(e.columns,e.old_record)),n}}const UM=()=>{},IM=typeof WebSocket<"u",zM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VM{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=jM,this.params={},this.timeout=XS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=UM,this.conn=null,this.sendBuffer=[],this.serializer=new RM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>wc(async()=>{const{default:h}=await Promise.resolve().then(()=>Nc);return{default:h}},void 0).then(({default:h})=>h(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Zy.websocket}`,this.httpEndpoint=ZS(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,l)=>l(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new QS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(IM){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new HM(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),wc(async()=>{const{default:e}=await import("./browser-QfNpx6yC.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:MM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case vc.connecting:return Io.Connecting;case vc.open:return Io.Open;case vc.closing:return Io.Closing;default:return Io.Closed}}isConnected(){return this.connectionState()===Io.Open}channel(e,n={config:{}}){const s=new y0(`realtime:${e}`,n,this);return this.channels.push(s),s}push(e){const{topic:n,event:s,payload:a,ref:o}=e,l=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${n} ${s} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let s=null;try{s=JSON.parse(atob(n.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=n,this.channels.forEach(a=>{n&&a.updateJoinPayload({access_token:n}),a.joinedOnce&&a._isJoined()&&a._push(ci.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(EM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:a,payload:o,ref:l}=n;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${a} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(a,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ci.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([zM],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class HM{constructor(e,n,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=vc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class v0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function On(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class FM extends v0{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class tv extends v0{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var qM=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};const eC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wc(async()=>{const{default:s}=await Promise.resolve().then(()=>Nc);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},$M=()=>qM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wc(()=>Promise.resolve().then(()=>Nc),void 0)).Response:Response}),nv=t=>{if(Array.isArray(t))return t.map(n=>nv(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=nv(s)}),e};var Xo=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};const fy=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),GM=(t,e,n)=>Xo(void 0,void 0,void 0,function*(){const s=yield $M();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{e(new FM(fy(a),t.status||500))}).catch(a=>{e(new tv(fy(a),a))}):e(new tv(fy(t),t))}),WM=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),n))};function ud(t,e,n,s,a,o){return Xo(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,WM(e,s,a,o)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>GM(h,u,s))})})}function Mm(t,e,n,s){return Xo(this,void 0,void 0,function*(){return ud(t,"GET",e,n,s)})}function Dr(t,e,n,s,a){return Xo(this,void 0,void 0,function*(){return ud(t,"POST",e,s,a,n)})}function YM(t,e,n,s,a){return Xo(this,void 0,void 0,function*(){return ud(t,"PUT",e,s,a,n)})}function KM(t,e,n,s){return Xo(this,void 0,void 0,function*(){return ud(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function tC(t,e,n,s,a){return Xo(this,void 0,void 0,function*(){return ud(t,"DELETE",e,s,a,n)})}var ms=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};const XM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ix={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QM{constructor(e,n={},s,a){this.url=e,this.headers=n,this.bucketId=s,this.fetch=eC(a)}uploadOrUpdate(e,n,s,a){return ms(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},ix),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h))):(o=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const g=this._removeEmptyFolders(n),y=this._getFinalPath(g),_=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),S=yield _.json();return _.ok?{data:{path:g,id:S.Id,fullPath:S.Key},error:null}:{data:null,error:S}}catch(o){if(On(o))return{data:null,error:o};throw o}})}upload(e,n,s){return ms(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return ms(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let h;const g=Object.assign({upsert:ix.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",g.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",g.cacheControl)):(h=s,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const _=yield this.fetch(u.toString(),{method:"PUT",body:h,headers:y}),S=yield _.json();return _.ok?{data:{path:o,fullPath:S.Key},error:null}:{data:null,error:S}}catch(h){if(On(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return ms(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const o=yield Dr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new v0("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}update(e,n,s){return ms(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return ms(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(On(a))return{data:null,error:a};throw a}})}copy(e,n,s){return ms(this,void 0,void 0,function*(){try{return{data:{path:(yield Dr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(On(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return ms(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Dr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(On(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return ms(this,void 0,void 0,function*(){try{const a=yield Dr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(On(a))return{data:null,error:a};throw a}})}download(e,n){return ms(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Mm(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(On(u))return{data:null,error:u};throw u}})}info(e){return ms(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Mm(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:nv(s),error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}exists(e){return ms(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield KM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(On(s)&&s instanceof tv){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&a.push(h);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${g}`)}}}remove(e){return ms(this,void 0,void 0,function*(){try{return{data:yield tC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}list(e,n,s){return ms(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},XM),n),{prefix:e||""});return{data:yield Dr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(On(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const JM="2.7.1",ZM={"X-Client-Info":`storage-js/${JM}`};var ec=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};class eE{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},ZM),n),this.fetch=eC(s)}listBuckets(){return ec(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(On(e))return{data:null,error:e};throw e}})}getBucket(e){return ec(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ec(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return ec(this,void 0,void 0,function*(){try{return{data:yield YM(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(On(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ec(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ec(this,void 0,void 0,function*(){try{return{data:yield tC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(On(n))return{data:null,error:n};throw n}})}}class tE extends eE{constructor(e,n={},s){super(e,n,s)}from(e){return new QM(this.url,this.headers,e,this.fetch)}}const nE="2.49.1";let gh="";typeof Deno<"u"?gh="deno":typeof document<"u"?gh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gh="react-native":gh="node";const sE={"X-Client-Info":`supabase-js-${gh}/${nE}`},iE={headers:sE},aE={schema:"public"},rE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oE={};var lE=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};const cE=t=>{let e;return t?e=t:typeof fetch>"u"?e=qS:e=fetch,(...n)=>e(...n)},uE=()=>typeof Headers>"u"?$S:Headers,hE=(t,e,n)=>{const s=cE(n),a=uE();return(o,l)=>lE(void 0,void 0,void 0,function*(){var u;const h=(u=yield e())!==null&&u!==void 0?u:t;let g=new a(l==null?void 0:l.headers);return g.has("apikey")||g.set("apikey",t),g.has("Authorization")||g.set("Authorization",`Bearer ${h}`),s(o,Object.assign(Object.assign({},l),{headers:g}))})};var dE=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};function fE(t){return t.replace(/\/$/,"")}function mE(t,e){const{db:n,auth:s,realtime:a,global:o}=t,{db:l,auth:u,realtime:h,global:g}=e,y={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},h),a),global:Object.assign(Object.assign({},g),o),accessToken:()=>dE(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}const nC="2.68.0",lc=30*1e3,sv=3,my=sv*lc,gE="http://localhost:9999",pE="supabase.auth.token",yE={"X-Client-Info":`gotrue-js/${nC}`},iv="X-Supabase-Api-Version",sC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function vE(t){return Math.round(Date.now()/1e3)+t}function bE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Di=()=>typeof window<"u"&&typeof document<"u",Mo={tested:!1,writable:!1},Rh=()=>{if(!Di())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mo.tested)return Mo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mo.tested=!0,Mo.writable=!0}catch{Mo.tested=!0,Mo.writable=!1}return Mo.writable};function _E(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const iC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wc(async()=>{const{default:s}=await Promise.resolve().then(()=>Nc);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},xE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",aC=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},zf=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vf=async(t,e)=>{await t.removeItem(e)};function wE(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",s,a,o,l,u,h,g,y=0;for(t=t.replace("-","+").replace("_","/");y<t.length;)l=e.indexOf(t.charAt(y++)),u=e.indexOf(t.charAt(y++)),h=e.indexOf(t.charAt(y++)),g=e.indexOf(t.charAt(y++)),s=l<<2|u>>4,a=(u&15)<<4|h>>2,o=(h&3)<<6|g,n=n+String.fromCharCode(s),h!=64&&a!=0&&(n=n+String.fromCharCode(a)),g!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class Qm{constructor(){this.promise=new Qm.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Qm.promiseConstructor=Promise;function ax(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=n[1];return JSON.parse(wE(s))}async function SE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function CE(t,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){s(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function TE(t){return("0"+t.toString(16)).substr(-2)}function AE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,TE).join("")}async function OE(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}function jE(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ME(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await OE(t);return jE(n)}async function tc(t,e,n=!1){const s=AE();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await aC(t,`${e}-code-verifier`,a);const o=await ME(s);return[o,s===o?"plain":"s256"]}const EE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RE(t){const e=t.headers.get(iv);if(!e||!e.match(EE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class b0 extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class kE extends b0{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function NE(t){return nt(t)&&t.name==="AuthApiError"}class rC extends b0{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Qo extends b0{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class Er extends Qo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function DE(t){return nt(t)&&t.name==="AuthSessionMissingError"}class gy extends Qo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hf extends Qo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ff extends Qo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function PE(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class rx extends Qo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class av extends Qo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function py(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class ox extends Qo{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}var LE=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};const Do=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BE=[502,503,504];async function lx(t){var e;if(!xE(t))throw new av(Do(t),0);if(BE.includes(t.status))throw new av(Do(t),t.status);let n;try{n=await t.json()}catch(o){throw new rC(Do(o),o)}let s;const a=RE(t);if(a&&a.getTime()>=sC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new ox(Do(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Er}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new ox(Do(n),t.status,n.weak_password.reasons);throw new kE(Do(n),t.status||500,s)}const UE=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function lt(t,e,n,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[iv]||(o[iv]=sC["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await IE(t,e,n+u,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function IE(t,e,n,s,a,o){const l=UE(e,s,a,o);let u;try{u=await t(n,Object.assign({},l))}catch(h){throw console.error(h),new av(Do(h),0)}if(u.ok||await lx(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(h){await lx(h)}}function Rr(t){var e;let n=null;FE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=vE(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function cx(t){const e=Rr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Pr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function zE(t){return{data:t,error:null}}function VE(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o}=t,l=LE(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function HE(t){return t}function FE(t){return t.access_token&&t.refresh_token&&t.expires_in}var qE=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};class $E{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=iC(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await lt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await lt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pr})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=qE(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await lt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:VE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(nt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await lt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pr})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,o,l,u,h;try{const g={nextPage:null,lastPage:0,total:0},y=await lt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:HE});if(y.error)throw y.error;const _=await y.json(),S=(l=y.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(h=(u=y.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return T.length>0&&(T.forEach(O=>{const M=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(O.split(";")[1].split("=")[1]);g[`${R}Page`]=M}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(nt(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){try{return await lt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pr})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await lt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Pr})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){try{return await lt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pr})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:n,error:s}=await lt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await lt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}const GE={getItem:t=>Rh()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Rh()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Rh()&&globalThis.localStorage.removeItem(t)}};function ux(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function WE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const nc={debug:!!(globalThis&&Rh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class YE extends oC{}async function KE(t,e,n){nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),nc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new YE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(nc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}WE();const XE={url:gE,storageKey:pE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hx(t,e,n){return await n()}class Fh{constructor(e){var n,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fh.nextInstanceID,Fh.nextInstanceID+=1,this.instanceID>0&&Di()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},XE),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new $E({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=iC(a.fetch),this.lock=a.lock||hx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Di()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=KE:this.lock=hx,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Rh()?this.storage=GE:(this.memoryStorage={},this.storage=ux(this.memoryStorage)):(this.memoryStorage={},this.storage=ux(this.memoryStorage)),Di()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nC}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=_E(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Di()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),PE(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return nt(n)?{error:n}:{error:new rC("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const o=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Rr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,g=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:g,session:h},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,s,a;try{let o;if("email"in e){const{email:y,password:_,options:S}=e;let T=null,O=null;this.flowType==="pkce"&&([T,O]=await tc(this.storage,this.storageKey)),o=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:y,password:_,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:T,code_challenge_method:O},xform:Rr})}else if("phone"in e){const{phone:y,password:_,options:S}=e;o=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Rr})}else throw new Hf("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,g=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:g,session:h},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:cx})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:cx})}else throw new Hf("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new gy}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await zf(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:o,error:l}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Rr});if(await Vf(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new gy}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(nt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:o,nonce:l}=e,u=await lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Rr}),{data:h,error:g}=u;return g?{data:{user:null,session:null},error:g}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new gy}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:g})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,a,o,l;try{if("email"in e){const{email:u,options:h}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await tc(this.storage,this.storageKey));const{error:_}=await lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:u,options:h}=e,{data:g,error:y}=await lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y}}throw new Hf("You must provide either an email or phone number.")}catch(u){if(nt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,s;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:u}=await lt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Rr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,g=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:g,session:h},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,s,a;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await tc(this.storage,this.storageKey)),await lt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:zE})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Er;const{error:a}=await lt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:l}=await lt(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:l,error:u}=await lt(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Hf("You must provide either an email or phone number and a type")}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await zf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<my:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,g,y)=>(!l&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,g,y))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pr}):await this._useSession(async n=>{var s,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Pr})})}catch(n){if(nt(n))return DE(n)&&(await this._removeSession(),await Vf(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Er;const l=a.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await tc(this.storage,this.storageKey));const{data:g,error:y}=await lt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:Pr});if(y)throw y;return l.user=g.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return ax(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Er;const n=Date.now()/1e3;let s=n,a=!0,o=null;const l=ax(e.access_token);if(l.exp&&(s=l.exp,a=s<=n),a){const{session:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(nt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Er;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Di())throw new Ff("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ff(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new rx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ff("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rx("No code detected.");const{data:B,error:z}=await this._exchangeCodeForSession(e.code);if(z)throw z;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:h,token_type:g}=e;if(!o||!u||!l||!g)throw new Ff("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(u);let S=y+_;h&&(S=parseInt(h));const T=S-y;T*1e3<=lc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const O=S-_;y-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,S,y):y-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,S,y);const{data:M,error:R}=await this._getUser(o);if(R)throw R;const N={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:_,expires_at:S,refresh_token:l,token_type:g,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(s){if(nt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await zf(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return{error:o};const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(NE(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Vf(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=bE(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await tc(this.storage,this.storageKey,!0));try{return await lt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:a}=await this._useSession(async o=>{var l,u,h,g,y;const{data:_,error:S}=o;if(S)throw S;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await lt(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return Di()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(nt(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:o,error:l}=n;if(l)throw l;return await lt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await CE(async a=>(a>0&&await SE(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await lt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rr})),(a,o)=>{const l=200*Math.pow(2,a);return o&&py(o)&&Date.now()+l-s<lc})}catch(s){if(this._debug(n,"error",s),nt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Di()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await zf(this.storage,this.storageKey);if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<my;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${my}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),py(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Qm;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Er;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),nt(o)){const l={session:null,error:o};return py(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await aC(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Vf(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Di()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/lc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${lc}ms, refresh threshold is ${sv} ticks`),a<=sv&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Di()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,l]=await tc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;return o?{data:null,error:o}:await lt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:g}=await lt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(e.factorType==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await lt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;return o?{data:null,error:o}:await lt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],a=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(a.access_token);let u=null;l.aal&&(u=l.aal);let h=u;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const y=l.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:y},error:null}}))}}Fh.nextInstanceID=0;const QE=Fh;class JE extends QE{constructor(e){super(e)}}var ZE=function(t,e,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(y){try{g(s.next(y))}catch(_){l(_)}}function h(y){try{g(s.throw(y))}catch(_){l(_)}}function g(y){y.done?o(y.value):a(y.value).then(u,h)}g((s=s.apply(t,e||[])).next())})};class eR{constructor(e,n,s){var a,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=fE(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:aE,realtime:oE,auth:Object.assign(Object.assign({},rE),{storageKey:h}),global:iE},y=mE(s??{},g);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=y.global.headers)!==null&&o!==void 0?o:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(_,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=y.auth)!==null&&l!==void 0?l:{},this.headers,y.global.fetch),this.fetch=hE(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new AM(`${u}/rest/v1`,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),y.accessToken||this._listenForAuthEvents()}get functions(){return new mM(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tE(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return ZE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,storageKey:o,flowType:l,lock:u,debug:h},g,y){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JE({url:this.authUrl,headers:Object.assign(Object.assign({},_),g),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,flowType:l,lock:u,debug:h,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new VM(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tR=(t,e,n)=>new eR(t,e,n),nR="https://oolghmirlqihibejvsux.supabase.co",sR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vbGdobWlybHFpaGliZWp2c3V4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI0NzgzNjcsImV4cCI6MjA1ODA1NDM2N30.1lFnH4urPsz6-uz9YPcbVZ1z887sVWEcaUih6jNL5SY",Oe=tR(nR,sR),lC=k.createContext();function iR({children:t}){var l,u;const[e,n]=k.useState(null),[s,a]=k.useState(!0);k.useEffect(()=>{(async()=>{const{data:{session:y}}=await Oe.auth.getSession();n((y==null?void 0:y.user)||null),a(!1)})();const{data:{subscription:g}}=Oe.auth.onAuthStateChange((y,_)=>{n((_==null?void 0:_.user)||null),a(!1)});return()=>{g.unsubscribe()}},[]);const o={user:e,loading:s,isPatient:((l=e==null?void 0:e.user_metadata)==null?void 0:l.user_type)==="patient",isDoctor:((u=e==null?void 0:e.user_metadata)==null?void 0:u.user_type)==="doctor",signOut:()=>Oe.auth.signOut()};return p.jsx(lC.Provider,{value:o,children:!s&&t})}function Va(){return k.useContext(lC)}function oi({children:t,requiredRole:e}){const{user:n,isPatient:s,isDoctor:a,loading:o}=Va();return o?p.jsx("div",{children:"Loading..."}):n?e==="patient"&&!s?p.jsx(dm,{to:"/unauthorized"}):e==="doctor"&&!a?p.jsx(dm,{to:"/unauthorized"}):t:p.jsx(dm,{to:"/"})}function aR(){const t=Hi(),[e,n]=k.useState(!1),[s,a]=k.useState(""),[o,l]=k.useState(""),[u,h]=k.useState(""),[g,y]=k.useState(""),[_,S]=k.useState(null),[T,O]=k.useState(null),M=async R=>{if(R.preventDefault(),S(null),O(null),!s||!o||!u||!g){S("Please fill in all fields");return}try{n(!0);const{data:N,error:B}=await Oe.auth.signUp({email:s,password:o,options:{data:{full_name:u,phone:g,user_type:"patient"}}});if(B)throw B;O("Registration successful! Redirecting to login..."),a(""),l(""),h(""),y(""),setTimeout(()=>{t("/patient-login")},2e3)}catch(N){S(N.message||"An error occurred during registration")}finally{n(!1)}};return p.jsx("div",{className:"auth-wrapper",children:p.jsxs("div",{className:"auth-container",children:[p.jsxs("div",{className:"auth-header",children:[p.jsx("h2",{children:"Patient Registration"}),p.jsx("p",{className:"auth-subtitle",children:"Create your account to get started"})]}),_&&p.jsxs("div",{className:"error-message",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),p.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),_]}),T&&p.jsxs("div",{className:"success-message",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),p.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),T]}),p.jsxs("form",{className:"auth-form",onSubmit:M,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fullName",children:"Full Name"}),p.jsxs("div",{className:"input-container",children:[p.jsxs("svg",{className:"input-icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),p.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),p.jsx("input",{id:"fullName",type:"text",value:u,onChange:R=>h(R.target.value),placeholder:"Enter your full name"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsxs("div",{className:"input-container",children:[p.jsxs("svg",{className:"input-icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),p.jsx("polyline",{points:"22,6 12,13 2,6"})]}),p.jsx("input",{id:"email",type:"email",value:s,onChange:R=>a(R.target.value),placeholder:"Enter your email"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),p.jsxs("div",{className:"input-container",children:[p.jsx("svg",{className:"input-icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),p.jsx("input",{id:"phoneNumber",type:"tel",value:g,onChange:R=>y(R.target.value),placeholder:"Enter your phone number"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Password"}),p.jsxs("div",{className:"input-container",children:[p.jsxs("svg",{className:"input-icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),p.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),p.jsx("input",{id:"password",type:"password",value:o,onChange:R=>l(R.target.value),placeholder:"Create a password"})]})]}),p.jsx("button",{type:"submit",className:"auth-button",disabled:e,children:e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"spinner"}),"Processing..."]}):p.jsxs(p.Fragment,{children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),p.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),p.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),p.jsx("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),"Register"]})})]}),p.jsxs("p",{className:"auth-link",children:["Already have an account? ",p.jsx("a",{href:"/patient-login",children:"Log in"})]})]})})}function rR(){const t=Hi(),[e,n]=k.useState(!1),[s,a]=k.useState(""),[o,l]=k.useState(""),[u,h]=k.useState(null),[g,y]=k.useState(!1),_=async S=>{if(S.preventDefault(),h(null),!s||!o){h("Please enter both email and password");return}try{n(!0);const{data:T,error:O}=await Oe.auth.signInWithPassword({email:s,password:o});if(O)throw O;if(T.user.user_metadata.user_type!=="patient")throw new Error("This login is only for patients");const{data:M,error:R}=await Oe.from("patients").select("*").eq("user_id",T.user.id).maybeSingle();if(!M){const{error:N}=await Oe.from("patients").insert([{user_id:T.user.id,full_name:T.user.user_metadata.full_name||"Unknown",email:T.user.email,phone_number:T.user.user_metadata.phone||"Not provided"}]);if(N){console.error("Error creating patient record:",N),h("Failed to create patient profile. Please contact support.");return}}t("/patient-dashboard")}catch(T){h(T.message||"Failed to log in")}finally{n(!1)}};return p.jsx("div",{className:"auth-wrapper",children:p.jsxs("div",{className:"auth-container",children:[p.jsxs("div",{className:"auth-header",children:[p.jsx("h2",{children:"Welcome Back"}),p.jsx("p",{className:"auth-subtitle",children:"Sign in to access your patient account"})]}),u&&p.jsxs("div",{className:"error-message",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),p.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),u]}),p.jsxs("form",{onSubmit:_,className:"auth-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email Address"}),p.jsx("div",{className:"input-container",children:p.jsx("input",{id:"email",type:"email",value:s,onChange:S=>a(S.target.value),placeholder:"Enter your email",autoComplete:"email"})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Password"}),p.jsxs("div",{className:"input-container",children:[p.jsx("input",{id:"password",type:g?"text":"password",value:o,onChange:S=>l(S.target.value),placeholder:"Enter your password",autoComplete:"current-password"}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>y(!g),"aria-label":g?"Hide password":"Show password",children:g?p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),p.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),p.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),p.jsx("button",{type:"submit",className:"auth-button",disabled:e,children:e?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"spinner"}),p.jsx("span",{children:"Signing In..."})]}):"Sign In"})]}),p.jsxs("p",{className:"auth-link",children:["Don't have an account? ",p.jsx("a",{href:"/patient-register",children:"Create an account"})]})]})})}function oR(){const t=Hi(),[e,n]=k.useState(!1),[s,a]=k.useState(""),[o,l]=k.useState(""),[u,h]=k.useState(null),g=async y=>{if(y.preventDefault(),h(null),!s||!o){h("Please enter both email and password");return}try{n(!0);const{data:_,error:S}=await Oe.auth.signInWithPassword({email:s,password:o});if(S)throw S;if(_.user.user_metadata.user_type!=="doctor")throw new Error("This login is only for doctors");const{data:T,error:O}=await Oe.from("doctors").select("*").eq("user_id",_.user.id).maybeSingle();if(O||!T)throw new Error("No doctor account found. Please contact the administrator.");t("/doctor-dashboard")}catch(_){h(_.message||"Failed to log in")}finally{n(!1)}};return p.jsx("div",{className:"auth-wrapper",children:p.jsxs("div",{className:"auth-container",children:[p.jsx("h2",{children:"Doctor Login"}),u&&p.jsx("div",{className:"error-message",children:u}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsx("input",{id:"email",type:"email",value:s,onChange:y=>a(y.target.value),placeholder:"Enter your email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Password"}),p.jsx("input",{id:"password",type:"password",value:o,onChange:y=>l(y.target.value),placeholder:"Enter your password"})]}),p.jsx("button",{type:"submit",className:"auth-button",disabled:e,children:e?"Logging in...":"Login"})]}),p.jsxs("div",{className:"auth-note",children:[p.jsx("p",{children:"Doctor accounts are created by administrators only."}),p.jsx("p",{children:"If you need an account, please contact the system administrator."})]})]})})}var cC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dx=Da.createContext&&Da.createContext(cC),lR=["attr","size","title"];function cR(t,e){if(t==null)return{};var n=uR(t,e),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function uR(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Em.apply(this,arguments)}function fx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Rm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fx(Object(n),!0).forEach(function(s){hR(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fx(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function hR(t,e,n){return e=dR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dR(t){var e=fR(t,"string");return typeof e=="symbol"?e:e+""}function fR(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uC(t){return t&&t.map((e,n)=>Da.createElement(e.tag,Rm({key:n},e.attr),uC(e.child)))}function Xe(t){return e=>Da.createElement(mR,Em({attr:Rm({},t.attr)},e),uC(t.child))}function mR(t){var e=n=>{var{attr:s,size:a,title:o}=t,l=cR(t,lR),u=a||n.size||"1em",h;return n.className&&(h=n.className),t.className&&(h=(h?h+" ":"")+t.className),Da.createElement("svg",Em({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:h,style:Rm(Rm({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Da.createElement("title",null,o),t.children)};return dx!==void 0?Da.createElement(dx.Consumer,null,n=>e(n)):e(cC)}function gR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 112c-17.6 0-32 14.4-32 32v72c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V64c0-17.6-14.4-32-32-32s-32 14.4-32 32v152c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V32c0-17.6-14.4-32-32-32s-32 14.4-32 32v184c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V64c0-17.6-14.4-32-32-32S96 46.4 96 64v241l-23.6-32.5c-13-17.9-38-21.8-55.9-8.8s-21.8 38-8.8 55.9l125.6 172.7c9 12.4 23.5 19.8 38.8 19.8h197.6c22.3 0 41.6-15.3 46.7-37l26.5-112.7c3.2-13.7 4.9-28.3 5.1-42.3V144c0-17.6-14.4-32-32-32zM176 416c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm0-96c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm64 128c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm0-96c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm64 32c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm32 64c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm32-128c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function pR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function _0(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function ui(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function yR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function vR(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function gm(t){return Xe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function bR(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function _R(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"},child:[]}]})(t)}function kh(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function xR(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function wR(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 464c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V200.724a48 48 0 0 1 18.387-37.776c24.913-19.529 45.501-35.365 164.2-121.511C199.412 29.17 232.797-.347 256 .003c23.198-.354 56.596 29.172 73.413 41.433 118.687 86.137 139.303 101.995 164.2 121.512A48 48 0 0 1 512 200.724V464zm-65.666-196.605c-2.563-3.728-7.7-4.595-11.339-1.907-22.845 16.873-55.462 40.705-105.582 77.079-16.825 12.266-50.21 41.781-73.413 41.43-23.211.344-56.559-29.143-73.413-41.43-50.114-36.37-82.734-60.204-105.582-77.079-3.639-2.688-8.776-1.821-11.339 1.907l-9.072 13.196a7.998 7.998 0 0 0 1.839 10.967c22.887 16.899 55.454 40.69 105.303 76.868 20.274 14.781 56.524 47.813 92.264 47.573 35.724.242 71.961-32.771 92.263-47.573 49.85-36.179 82.418-59.97 105.303-76.868a7.998 7.998 0 0 0 1.839-10.967l-9.071-13.196z"},child:[]}]})(t)}function x0(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function SR(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function yy(t){return Xe({attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M128 0c35.346 0 64 28.654 64 64s-28.654 64-64 64c-35.346 0-64-28.654-64-64S92.654 0 128 0m119.283 354.179l-48-192A24 24 0 0 0 176 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H80a24 24 0 0 0-23.283 18.179l-48 192C4.935 369.305 16.383 384 32 384h56v104c0 13.255 10.745 24 24 24h32c13.255 0 24-10.745 24-24V384h56c15.591 0 27.071-14.671 23.283-29.821z"},child:[]}]})(t)}function ka(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function CR(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(t)}function mx(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 121.941V128H256V0h6.059a24 24 0 0 1 16.97 7.029l97.941 97.941a24.002 24.002 0 0 1 7.03 16.971zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zm-135.455 16c26.51 0 48 21.49 48 48s-21.49 48-48 48-48-21.49-48-48 21.491-48 48-48zm208 240h-256l.485-48.485L104.545 328c4.686-4.686 11.799-4.201 16.485.485L160.545 368 264.06 264.485c4.686-4.686 12.284-4.686 16.971 0L320.545 304v112z"},child:[]}]})(t)}function ph(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 160v48c0 4.4-3.6 8-8 8h-56v56c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-56h-56c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h56v-56c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v56h56c4.4 0 8 3.6 8 8z"},child:[]}]})(t)}function gx(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(t)}function px(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function TR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function AR(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"},child:[]}]})(t)}function hC(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function yx(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M567.938 243.908L462.25 85.374A48.003 48.003 0 0 0 422.311 64H153.689a48 48 0 0 0-39.938 21.374L8.062 243.908A47.994 47.994 0 0 0 0 270.533V400c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V270.533a47.994 47.994 0 0 0-8.062-26.625zM162.252 128h251.497l85.333 128H376l-32 64H232l-32-64H76.918l85.334-128z"},child:[]}]})(t)}function OR(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm96 304c0 4.4-3.6 8-8 8h-56v56c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-56h-56c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h56v-56c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v56h56c4.4 0 8 3.6 8 8v48zm0-192c0 4.4-3.6 8-8 8H104c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h176c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function vx(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function jR(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function bx(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function MR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function Nh(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function dC(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function zo(t){return Xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function _x(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function ER(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function RR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M277.37 11.98C261.08 4.47 243.11 0 224 0c-53.69 0-99.5 33.13-118.51 80h81.19l90.69-68.02zM342.51 80c-7.9-19.47-20.67-36.2-36.49-49.52L239.99 80h102.52zM224 256c70.69 0 128-57.31 128-128 0-5.48-.95-10.7-1.61-16H97.61c-.67 5.3-1.61 10.52-1.61 16 0 70.69 57.31 128 128 128zM80 299.7V512h128.26l-98.45-221.52A132.835 132.835 0 0 0 80 299.7zM0 464c0 26.51 21.49 48 48 48V320.24C18.88 344.89 0 381.26 0 422.4V464zm256-48h-55.38l42.67 96H256c26.47 0 48-21.53 48-48s-21.53-48-48-48zm57.6-128h-16.71c-22.24 10.18-46.88 16-72.89 16s-50.65-5.82-72.89-16h-7.37l42.67 96H256c44.11 0 80 35.89 80 80 0 18.08-6.26 34.59-16.41 48H400c26.51 0 48-21.49 48-48v-41.6c0-74.23-60.17-134.4-134.4-134.4z"},child:[]}]})(t)}function kR(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function rv(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function NR(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M564 0h-79c-10.7 0-16 12.9-8.5 20.5l16.9 16.9-48.7 48.7C422.5 72.1 396.2 64 368 64c-33.7 0-64.6 11.6-89.2 30.9 14 16.7 25 36 32.1 57.1 14.5-14.8 34.7-24 57.1-24 44.1 0 80 35.9 80 80s-35.9 80-80 80c-22.3 0-42.6-9.2-57.1-24-7.1 21.1-18 40.4-32.1 57.1 24.5 19.4 55.5 30.9 89.2 30.9 79.5 0 144-64.5 144-144 0-28.2-8.1-54.5-22.1-76.7l48.7-48.7 16.9 16.9c2.4 2.4 5.4 3.5 8.4 3.5 6.2 0 12.1-4.8 12.1-12V12c0-6.6-5.4-12-12-12zM144 64C64.5 64 0 128.5 0 208c0 68.5 47.9 125.9 112 140.4V400H76c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h36v36c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12v-36h36c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-36v-51.6c64.1-14.6 112-71.9 112-140.4 0-79.5-64.5-144-144-144zm0 224c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function hd({onSignOut:t,onCollapsedChange:e}){const[n,s]=k.useState(!1),a=Hi(),o=Vi();k.useEffect(()=>{const h=localStorage.getItem("sidebarCollapsed");h!==null&&s(JSON.parse(h))},[]);const l=()=>{const h=!n;s(h),localStorage.setItem("sidebarCollapsed",JSON.stringify(h)),e&&e(h)},u=[{to:"/patient-dashboard",icon:p.jsx(hC,{className:"menu-icon"}),label:"Home"},{to:"/appointments-booking",icon:p.jsx(ui,{className:"menu-icon"}),label:"Appointments"},{to:"/medical-records",icon:p.jsx(ka,{className:"menu-icon"}),label:"Medical Records"},{to:"/profile",icon:p.jsx(rv,{className:"menu-icon"}),label:"Profile"},{to:"/patient-messages",icon:p.jsx(x0,{className:"menu-icon"}),label:"Messages"}];return p.jsxs("nav",{className:`sidebar ${n?"collapsed":""}`,children:[p.jsxs("div",{className:"sidebar-header",children:[p.jsx("div",{className:"logo-container",children:!n&&p.jsx("h1",{className:"logo-text",children:"FemCare"})}),p.jsx("button",{className:"toggle-button",onClick:l,"aria-label":"Toggle Sidebar",children:p.jsx(_0,{})})]}),p.jsx("ul",{className:"sidebar-menu",children:u.map((h,g)=>p.jsx("li",{className:"menu-item",children:p.jsxs(ps,{to:h.to,className:`menu-link ${o.pathname===h.to?"active":""}`,children:[h.icon,p.jsx("span",{className:n?"hidden":"",children:h.label})]})},g))}),p.jsx("div",{className:"menu-item logout-container",children:p.jsxs("button",{onClick:()=>{t(),a("/")},className:"logout-button",children:[p.jsx(dC,{className:"menu-icon"}),p.jsx("span",{className:n?"hidden":"",children:"Sign Out"})]})})]})}function di({isSidebarCollapsed:t}){const e=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return p.jsxs("div",{className:`app-header ${t?"header-collapsed":""}`,children:[p.jsx("div",{className:"header-left",children:p.jsx("h1",{children:"FemCare"})}),p.jsx("div",{className:"header-right",children:p.jsxs("div",{className:"date-info",children:[p.jsx(yR,{className:"calendar-icon"}),p.jsx("span",{className:"current-date",children:e})]})})]})}function DR(){var Te;const{user:t,signOut:e}=Va(),[n,s]=k.useState([]),[a,o]=k.useState([]),[l,u]=k.useState([]),[h,g]=k.useState([]),[y,_]=k.useState([]),[S,T]=k.useState(!0),[O,M]=k.useState(!1),[R,N]=k.useState(window.innerWidth),[B,z]=k.useState(()=>{const le=localStorage.getItem("sidebarCollapsed");return le?JSON.parse(le):!1}),P=async()=>{try{await Oe.auth.signOut()}catch(le){console.error("Error signing out:",le)}};k.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(B))},[B]),k.useEffect(()=>{const le=()=>{N(window.innerWidth),window.innerWidth>768&&M(!1)};return window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),k.useEffect(()=>{const le=[...l.map($=>({...$,type:"message"})),...h.map($=>({id:$.id,from:$.doctor_name||"Medical Staff",subject:`New ${$.result_type} Result`,message:$.description||`Your ${$.result_type} results are now available.`,time:J($.created_at),read:$.is_read,type:"medical_result",result:$}))];le.sort(($,be)=>{const q=$.type==="medical_result"?new Date($.result.created_at):new Date;return(be.type==="medical_result"?new Date(be.result.created_at):new Date)-q}),_(le)},[l,h]),k.useEffect(()=>{async function le(){try{if(!t)return;const{data:$,error:be}=await Oe.from("appointments").select("*, doctors:doctor_id(full_name, specialty, profile_picture_path)").eq("patient_id",t.id).gte("appointment_date",new Date().toISOString().split("T")[0]).order("appointment_date",{ascending:!0}).limit(3);be&&console.error("Error fetching appointments:",be);const{data:q,error:G}=await Oe.from("patients").select("id").eq("user_id",t.id).single();G&&console.error("Error fetching patient data:",G);const ce=q==null?void 0:q.id,{data:_e,error:I}=await Oe.from("medical_records").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(3);I&&console.error("Error fetching medical records:",I);let te=[];if(ce){const{data:xe,error:Ae}=await Oe.from("medical_results").select(`
              *,
              doctors:doctor_id (
                full_name
              )
            `).eq("patient_id",ce).order("created_at",{ascending:!1}).limit(5);Ae?console.error("Error fetching medical results:",Ae):te=(xe==null?void 0:xe.map(we=>{var Ne;return{...we,doctor_name:((Ne=we.doctors)==null?void 0:Ne.full_name)||"Doctor"}}))||[]}console.log("Fetched appointments:",$),s($||[]),o(_e||[]),u([]),g(te)}catch($){console.error("Error fetching dashboard data:",$)}finally{T(!1)}}le()},[t]);const U=async le=>{try{const{data:$,error:be}=await Oe.from("medical_results").update({is_read:!0}).eq("id",le).select();if(be)throw be;g(q=>q.map(G=>G.id===le?{...G,is_read:!0}:G))}catch($){console.error("Error marking result as read:",$)}},ee=()=>{M(!O)};if(S)return p.jsx("div",{className:"dashboard-container flex items-center justify-center min-h-screen",children:p.jsx("div",{className:"loading-spinner"})});const ae=le=>new Date(le).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),J=le=>{const $=new Date,be=new Date(le),q=Math.floor(($-be)/1e3);if(q<60)return"Just now";if(q<3600){const G=Math.floor(q/60);return`${G} minute${G>1?"s":""} ago`}else if(q<86400){const G=Math.floor(q/3600);return`${G} hour${G>1?"s":""} ago`}else if(q<604800){const G=Math.floor(q/86400);return`${G} day${G>1?"s":""} ago`}else return ae(le)},X=le=>le?le.split(" ").map($=>$[0]).join("").toUpperCase():"DR",oe=()=>y.filter(le=>!le.read).length,A=le=>{switch(le==null?void 0:le.toLowerCase()){case"lab":return p.jsx(TR,{});case"imaging":return p.jsx(ph,{});default:return p.jsx(ka,{})}};return p.jsxs("div",{className:"app-container",children:[p.jsx(di,{isSidebarCollapsed:B,menuOpen:O}),p.jsxs("div",{className:"app-layout",children:[p.jsx("div",{className:`sidebar ${B?"collapsed":""} ${O?"mobile-visible":""}`,children:p.jsx(hd,{onSignOut:P,onCollapsedChange:le=>z(le)})}),p.jsxs("div",{className:`dashboard-content ${B?"sidebar-collapsed":""}`,children:[p.jsxs("div",{className:"welcome-section",children:[p.jsxs("h1",{className:"welcome-title",children:["Welcome back, ",((Te=t==null?void 0:t.user_metadata)==null?void 0:Te.full_name)||"Patient","! 👋"]}),p.jsx("p",{className:"welcome-subtitle",children:"Your health journey is our priority. Here's your latest updates."}),p.jsxs("div",{className:"welcome-stats",children:[p.jsxs("div",{className:"welcome-stat",children:[p.jsx("h3",{children:n.length}),p.jsxs("p",{children:["Upcoming",p.jsx("br",{}),"Appointments"]})]}),p.jsxs("div",{className:"welcome-stat",children:[p.jsx("h3",{children:a.length}),p.jsxs("p",{children:["Recent",p.jsx("br",{}),"Records"]})]}),p.jsxs("div",{className:"welcome-stat",children:[p.jsx("h3",{children:oe()}),p.jsxs("p",{children:["Unread",p.jsx("br",{}),"Messages"]})]})]})]}),p.jsxs("div",{className:"dashboard-grid",children:[p.jsxs("div",{className:"dashboard-column",children:[p.jsxs("div",{className:"quick-action-section",children:[p.jsx("h2",{className:"section-title",children:"Quick Actions"}),p.jsxs("div",{className:"quick-action-grid",children:[p.jsx(xx,{icon:p.jsx(ui,{}),title:"Schedule Appointment",description:"Book your next visit",color:"#ec4899",link:"/book-appointment"}),p.jsx(xx,{icon:p.jsx(ka,{}),title:"Medical Records",description:"View your health history",color:"#be185d",link:"/medical-records"})]})]}),p.jsxs("div",{className:"dashboard-card",children:[p.jsxs("div",{className:"dashboard-card-header",children:[p.jsxs("h2",{children:[p.jsx(ka,{className:"card-header-icon"})," Recent Medical Records"]}),p.jsxs("a",{href:"/medical-records",className:"view-all",children:["View All ",p.jsx(gm,{size:12})]})]}),p.jsx("div",{className:"card-content",children:a.length>0?a.map(le=>p.jsxs("div",{className:"record-card",children:[p.jsxs("div",{className:"record-info",children:[p.jsx("h4",{className:"record-name",children:le.file_name}),p.jsxs("div",{className:"record-date",children:[p.jsx(ui,{size:12,className:"record-icon"}),p.jsx("span",{children:new Date(le.created_at).toLocaleDateString()})]})]}),p.jsxs("a",{href:le.public_url,className:"view-button",target:"_blank",rel:"noopener noreferrer",children:[p.jsx(kh,{size:14}),"View"]})]},le.id)):p.jsxs("div",{className:"empty-state",children:[p.jsx(ka,{className:"empty-icon"}),p.jsx("p",{children:"No medical records found"}),p.jsxs("a",{href:"/upload-records",className:"empty-state-button",children:[p.jsx(bx,{size:12})," Upload Records"]})]})})]})]}),p.jsxs("div",{className:"dashboard-column",children:[p.jsxs("div",{className:"dashboard-card upcoming-appointment-card",children:[p.jsxs("div",{className:"dashboard-card-header",children:[p.jsxs("h2",{children:[p.jsx(ui,{className:"card-header-icon"})," Upcoming Appointments"]}),p.jsxs("a",{href:"/appointments",className:"view-all",children:["View All ",p.jsx(gm,{size:12})]})]}),p.jsx("div",{className:"card-content",children:n.length>0?n.map((le,$)=>{var be,q,G,ce;return p.jsxs("div",{className:"appointment-card",children:[p.jsxs("div",{className:"appointment-doctor",children:[p.jsx("div",{className:"card-icon",style:{background:"#be185d"},children:(be=le.doctors)!=null&&be.profile_picture_path?p.jsx("img",{src:le.doctors.profile_picture_path,alt:le.doctors.full_name}):p.jsx("span",{children:X((q=le.doctors)==null?void 0:q.full_name)})}),p.jsxs("div",{children:[p.jsx("h4",{className:"doctor-name",children:((G=le.doctors)==null?void 0:G.full_name)||"Doctor"}),p.jsx("p",{className:"doctor-specialty",children:((ce=le.doctors)==null?void 0:ce.specialty)||"Specialist"})]})]}),p.jsxs("div",{className:"appointment-datetime",children:[p.jsxs("div",{className:"date",children:[p.jsx(ui,{className:"icon"}),p.jsx("span",{children:ae(le.appointment_date)})]}),p.jsxs("div",{className:"time",children:[p.jsx(bR,{className:"icon"}),p.jsx("span",{children:le.start_time})]})]})]},le.id)}):p.jsxs("div",{className:"empty-state",children:[p.jsx(ui,{className:"empty-icon"}),p.jsx("p",{children:"No upcoming appointments"}),p.jsxs("a",{href:"/book-appointment",className:"empty-state-button",children:[p.jsx(bx,{size:12})," Book Appointment"]})]})})]}),p.jsxs("div",{className:"dashboard-card",children:[p.jsxs("div",{className:"dashboard-card-header",children:[p.jsxs("h2",{children:[p.jsx(yx,{className:"card-header-icon"})," Inbox"]}),p.jsxs("a",{href:"/inbox",className:"view-all",children:["View All ",p.jsx(gm,{size:12})]})]}),p.jsx("div",{className:"card-content",children:y.length>0?y.map(le=>p.jsxs("div",{className:`inbox-message ${le.read?"":"unread"}`,onClick:()=>{le.type==="medical_result"&&!le.read&&U(le.id)},children:[p.jsx("div",{className:"inbox-message-icon",children:le.type==="medical_result"?A(le.result.result_type):le.read?p.jsx(wR,{}):p.jsx(x0,{})}),p.jsxs("div",{className:"inbox-message-content",children:[p.jsxs("div",{className:"inbox-message-header",children:[p.jsx("h4",{children:le.from}),p.jsx("span",{className:"inbox-message-time",children:le.time})]}),p.jsxs("h5",{className:"inbox-message-subject",children:[le.subject,le.type==="medical_result"&&!le.read&&p.jsx("span",{className:"new-badge",children:"New"})]}),p.jsx("p",{className:"inbox-message-preview",children:le.message}),le.type==="medical_result"&&p.jsx("div",{className:"inbox-message-actions",children:p.jsxs("a",{href:le.result.file_path,className:"view-result-button",target:"_blank",rel:"noopener noreferrer",onClick:$=>{$.stopPropagation(),le.read||U(le.id)},children:[p.jsx(CR,{size:12}),"View Result"]})})]})]},`${le.type}-${le.id}`)):p.jsxs("div",{className:"empty-state",children:[p.jsx(yx,{className:"empty-icon"}),p.jsx("p",{children:"No messages in your inbox"})]})})]})]})]})]}),p.jsx("div",{className:`mobile-overlay ${O?"visible":""}`,onClick:()=>M(!1)})]}),p.jsx("button",{className:"mobile-sidebar-toggle",onClick:ee,"aria-label":"Toggle sidebar",children:p.jsx(_0,{})})]})}function xx({icon:t,title:e,description:n,color:s,link:a}){return p.jsxs("a",{href:a,className:"quick-action-card",children:[p.jsx("div",{className:"card-icon",style:{background:s},children:t}),p.jsxs("div",{className:"card-content",children:[p.jsx("h3",{className:"card-title",children:e}),p.jsx("p",{className:"card-description",children:n})]})]})}function fC(){var y;const[t,e]=k.useState(null),[n,s]=k.useState(!0),[a,o]=k.useState(!1),[l,u]=k.useState(null);k.useEffect(()=>{h()},[]);async function h(){try{const{data:{user:_}}=await Oe.auth.getUser();if(!_)throw new Error("No user");const{data:S,error:T}=await Oe.from("doctors").select("*").eq("user_id",_.id).single();if(T)throw T;if(e(S),S.profile_picture_path){const{data:{publicUrl:O}}=Oe.storage.from("avatars").getPublicUrl(S.profile_picture_path);u(O)}}catch(_){console.error("Error loading doctor profile:",_)}finally{s(!1)}}async function g(_){try{o(!0);const S=_.target.files[0],T=S.name.split(".").pop(),O=`${(await Oe.auth.getUser()).data.user.id}/${Math.random()}.${T}`,{error:M}=await Oe.storage.from("avatars").upload(O,S);if(M)throw M;const{error:R}=await Oe.from("doctors").update({profile_picture_path:O}).eq("user_id",(await Oe.auth.getUser()).data.user.id);if(R)throw R;const{data:{publicUrl:N}}=Oe.storage.from("avatars").getPublicUrl(O);u(N)}catch(S){console.error("Error uploading avatar:",S)}finally{o(!1)}}return n?p.jsx("div",{children:"Loading..."}):p.jsxs("div",{className:"doctor-profile",children:[p.jsxs("div",{className:"avatar-container",children:[l?p.jsx("img",{src:l,alt:"Doctor avatar",className:"avatar-image"}):p.jsx("div",{className:"avatar-placeholder",children:((y=t==null?void 0:t.full_name)==null?void 0:y.charAt(0))||"?"}),p.jsxs("label",{className:"avatar-upload-label",children:[p.jsx("input",{type:"file",accept:"image/*",onChange:g,disabled:a,style:{display:"none"}}),a?"Uploading...":"Change Picture"]})]}),p.jsxs("div",{className:"doctor-info",children:[p.jsx("h3",{children:t==null?void 0:t.full_name}),p.jsx("p",{children:t==null?void 0:t.specialty})]})]})}function Cc({onSignOut:t,onSidebarToggle:e,isCollapsed:n}){const[s,a]=k.useState(n||!1),o=Hi(),l=Vi();k.useEffect(()=>{n!==void 0&&n!==s&&a(n)},[n]),k.useEffect(()=>{const g=localStorage.getItem("doctorSidebarCollapsed");if(g!==null){const y=JSON.parse(g);a(y),e==null||e(y),document.body.classList.toggle("sidebar-collapsed",y)}},[e]);const u=()=>{const g=!s;a(g),localStorage.setItem("doctorSidebarCollapsed",JSON.stringify(g)),document.body.classList.toggle("sidebar-collapsed",g),e==null||e(g)},h=[{to:"/doctor-dashboard",icon:p.jsx(hC,{className:"menu-icon"}),label:"Dashboard"},{to:"/patient-appointments",icon:p.jsx(ui,{className:"menu-icon"}),label:"Patient Appointments"},{to:"/patient-records",icon:p.jsx(ka,{className:"menu-icon"}),label:"Patient Records"},{to:"/patients-data",icon:p.jsx(RR,{className:"menu-icon"}),label:"Patients"},{to:"/doctor-messages",icon:p.jsx(x0,{className:"menu-icon"}),label:"Messages"}];return p.jsxs("nav",{className:`sidebar ${s?"collapsed":""}`,children:[p.jsxs("div",{className:"sidebar-header",children:[p.jsx("div",{className:"logo-container",children:!s&&p.jsx("h1",{className:"logo-text",children:"FemCare"})}),p.jsx("button",{className:"toggle-button",onClick:u,"aria-label":"Toggle Sidebar",children:p.jsx(_0,{})})]}),!s&&p.jsx(fC,{}),p.jsx("ul",{className:"sidebar-menu",children:h.map((g,y)=>p.jsx("li",{className:"menu-item",children:p.jsxs(ps,{to:g.to,className:`menu-link ${l.pathname===g.to?"active":""}`,children:[g.icon,p.jsx("span",{className:s?"hidden":"",children:g.label})]})},y))}),p.jsx("div",{className:"menu-item logout-container",children:p.jsxs("button",{onClick:()=>{t(),o("/")},className:"logout-button",children:[p.jsx(dC,{className:"menu-icon"}),p.jsx("span",{className:s?"hidden":"",children:"Sign Out"})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dd(t){return t+.5|0}const Lr=(t,e,n)=>Math.max(Math.min(t,n),e);function yh(t){return Lr(dd(t*2.55),0,255)}function Ir(t){return Lr(dd(t*255),0,255)}function Ra(t){return Lr(dd(t/2.55)/100,0,1)}function wx(t){return Lr(dd(t*100),0,100)}const Bs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ov=[..."0123456789ABCDEF"],PR=t=>ov[t&15],LR=t=>ov[(t&240)>>4]+ov[t&15],qf=t=>(t&240)>>4===(t&15),BR=t=>qf(t.r)&&qf(t.g)&&qf(t.b)&&qf(t.a);function UR(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Bs[t[1]]*17,g:255&Bs[t[2]]*17,b:255&Bs[t[3]]*17,a:e===5?Bs[t[4]]*17:255}:(e===7||e===9)&&(n={r:Bs[t[1]]<<4|Bs[t[2]],g:Bs[t[3]]<<4|Bs[t[4]],b:Bs[t[5]]<<4|Bs[t[6]],a:e===9?Bs[t[7]]<<4|Bs[t[8]]:255})),n}const IR=(t,e)=>t<255?e(t):"";function zR(t){var e=BR(t)?PR:LR;return t?"#"+e(t.r)+e(t.g)+e(t.b)+IR(t.a,e):void 0}const VR=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function mC(t,e,n){const s=e*Math.min(n,1-n),a=(o,l=(o+t/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function HR(t,e,n){const s=(a,o=(a+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function FR(t,e,n){const s=mC(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function qR(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function w0(t){const n=t.r/255,s=t.g/255,a=t.b/255,o=Math.max(n,s,a),l=Math.min(n,s,a),u=(o+l)/2;let h,g,y;return o!==l&&(y=o-l,g=u>.5?y/(2-o-l):y/(o+l),h=qR(n,s,a,y,o),h=h*60+.5),[h|0,g||0,u]}function S0(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Ir)}function C0(t,e,n){return S0(mC,t,e,n)}function $R(t,e,n){return S0(FR,t,e,n)}function GR(t,e,n){return S0(HR,t,e,n)}function gC(t){return(t%360+360)%360}function WR(t){const e=VR.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?yh(+e[5]):Ir(+e[5]));const a=gC(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?s=$R(a,o,l):e[1]==="hsv"?s=GR(a,o,l):s=C0(a,o,l),{r:s[0],g:s[1],b:s[2],a:n}}function YR(t,e){var n=w0(t);n[0]=gC(n[0]+e),n=C0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function KR(t){if(!t)return;const e=w0(t),n=e[0],s=wx(e[1]),a=wx(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${Ra(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const Sx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Cx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XR(){const t={},e=Object.keys(Cx),n=Object.keys(Sx);let s,a,o,l,u;for(s=0;s<e.length;s++){for(l=u=e[s],a=0;a<n.length;a++)o=n[a],u=u.replace(o,Sx[o]);o=parseInt(Cx[l],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let $f;function QR(t){$f||($f=XR(),$f.transparent=[0,0,0,0]);const e=$f[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const JR=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZR(t){const e=JR.exec(t);let n=255,s,a,o;if(e){if(e[7]!==s){const l=+e[7];n=e[8]?yh(l):Lr(l*255,0,255)}return s=+e[1],a=+e[3],o=+e[5],s=255&(e[2]?yh(s):Lr(s,0,255)),a=255&(e[4]?yh(a):Lr(a,0,255)),o=255&(e[6]?yh(o):Lr(o,0,255)),{r:s,g:a,b:o,a:n}}}function ek(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ra(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const vy=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,sc=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function tk(t,e,n){const s=sc(Ra(t.r)),a=sc(Ra(t.g)),o=sc(Ra(t.b));return{r:Ir(vy(s+n*(sc(Ra(e.r))-s))),g:Ir(vy(a+n*(sc(Ra(e.g))-a))),b:Ir(vy(o+n*(sc(Ra(e.b))-o))),a:t.a+n*(e.a-t.a)}}function Gf(t,e,n){if(t){let s=w0(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=C0(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function pC(t,e){return t&&Object.assign(e||{},t)}function Tx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ir(t[3]))):(e=pC(t,{r:0,g:0,b:0,a:1}),e.a=Ir(e.a)),e}function nk(t){return t.charAt(0)==="r"?ZR(t):WR(t)}class qh{constructor(e){if(e instanceof qh)return e;const n=typeof e;let s;n==="object"?s=Tx(e):n==="string"&&(s=UR(e)||QR(e)||nk(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=pC(this._rgb);return e&&(e.a=Ra(e.a)),e}set rgb(e){this._rgb=Tx(e)}rgbString(){return this._valid?ek(this._rgb):void 0}hexString(){return this._valid?zR(this._rgb):void 0}hslString(){return this._valid?KR(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let o;const l=n===o?.5:n,u=2*l-1,h=s.a-a.a,g=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;o=1-g,s.r=255&g*s.r+o*a.r+.5,s.g=255&g*s.g+o*a.g+.5,s.b=255&g*s.b+o*a.b+.5,s.a=l*s.a+(1-l)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=tk(this._rgb,e._rgb,n)),this}clone(){return new qh(this.rgb)}alpha(e){return this._rgb.a=Ir(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=dd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gf(this._rgb,2,e),this}darken(e){return Gf(this._rgb,2,-e),this}saturate(e){return Gf(this._rgb,1,e),this}desaturate(e){return Gf(this._rgb,1,-e),this}rotate(e){return YR(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Oa(){}const sk=(()=>{let t=0;return()=>t++})();function bt(t){return t==null}function xn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function dt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Vs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ki(t,e){return Vs(t)?t:e}function at(t,e){return typeof t>"u"?e:t}const ik=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,yC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Bt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function xt(t,e,n,s){let a,o,l;if(xn(t))for(o=t.length,a=0;a<o;a++)e.call(n,t[a],a);else if(dt(t))for(l=Object.keys(t),o=l.length,a=0;a<o;a++)e.call(n,t[l[a]],l[a])}function km(t,e){let n,s,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],o=e[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Nm(t){if(xn(t))return t.map(Nm);if(dt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=Nm(t[n[a]]);return e}return t}function vC(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function ak(t,e,n,s){if(!vC(t))return;const a=e[t],o=n[t];dt(a)&&dt(o)?$h(a,o,s):e[t]=Nm(o)}function $h(t,e,n){const s=xn(e)?e:[e],a=s.length;if(!dt(t))return t;n=n||{};const o=n.merger||ak;let l;for(let u=0;u<a;++u){if(l=s[u],!dt(l))continue;const h=Object.keys(l);for(let g=0,y=h.length;g<y;++g)o(h[g],t,l,n)}return t}function Dh(t,e){return $h(t,e,{merger:rk})}function rk(t,e,n){if(!vC(t))return;const s=e[t],a=n[t];dt(s)&&dt(a)?Dh(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Nm(a))}const Ax={"":t=>t,x:t=>t.x,y:t=>t.y};function ok(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function lk(t){const e=ok(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Yo(t,e){return(Ax[e]||(Ax[e]=lk(e)))(t)}function T0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gh=t=>typeof t<"u",zr=t=>typeof t=="function",Ox=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ck(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const nn=Math.PI,tn=2*nn,uk=tn+nn,Dm=Number.POSITIVE_INFINITY,hk=nn/180,wn=nn/2,Eo=nn/4,jx=nn*2/3,bC=Math.log10,Bi=Math.sign;function Ph(t,e,n){return Math.abs(t-e)<n}function Mx(t){const e=Math.round(t);t=Ph(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(bC(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function dk(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,o)=>a-o).pop(),e}function fk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Wh(t){return!fk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function mk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function gk(t,e,n){let s,a,o;for(s=0,a=t.length;s<a;s++)o=t[s][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Na(t){return t*(nn/180)}function pk(t){return t*(180/nn)}function Ex(t){if(!Vs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function _C(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let o=Math.atan2(s,n);return o<-.5*nn&&(o+=tn),{angle:o,distance:a}}function lv(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yk(t,e){return(t-e+uk)%tn-nn}function kr(t){return(t%tn+tn)%tn}function Yh(t,e,n,s){const a=kr(t),o=kr(e),l=kr(n),u=kr(o-a),h=kr(l-a),g=kr(a-o),y=kr(a-l);return a===o||a===l||s&&o===l||u>h&&g<y}function Kn(t,e,n){return Math.max(e,Math.min(n,t))}function vk(t){return Kn(t,-32768,32767)}function Br(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function A0(t,e,n){n=n||(l=>t[l]<e);let s=t.length-1,a=0,o;for(;s-a>1;)o=a+s>>1,n(o)?a=o:s=o;return{lo:a,hi:s}}const Vo=(t,e,n,s)=>A0(t,n,s?a=>{const o=t[a][e];return o<n||o===n&&t[a+1][e]===n}:a=>t[a][e]<n),bk=(t,e,n)=>A0(t,n,s=>t[s][e]>=n);function _k(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const xC=["push","pop","shift","splice","unshift"];function xk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xC.forEach(n=>{const s="_onData"+T0(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[s]=="function"&&u[s](...o)}),l}})})}function Rx(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(xC.forEach(o=>{delete t[o]}),delete t._chartjs)}function wC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const SC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function CC(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,SC.call(window,()=>{s=!1,t.apply(e,n)}))}}function wk(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const O0=t=>t==="start"?"left":t==="end"?"right":"center",Gn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Sk=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function Ck(t,e,n){const s=e.length;let a=0,o=s;if(t._sorted){const{iScale:l,vScale:u,_parsed:h}=t,g=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,y=l.axis,{min:_,max:S,minDefined:T,maxDefined:O}=l.getUserBounds();if(T){if(a=Math.min(Vo(h,y,_).lo,n?s:Vo(e,y,l.getPixelForValue(_)).lo),g){const M=h.slice(0,a+1).reverse().findIndex(R=>!bt(R[u.axis]));a-=Math.max(0,M)}a=Kn(a,0,s-1)}if(O){let M=Math.max(Vo(h,l.axis,S,!0).hi+1,n?0:Vo(e,y,l.getPixelForValue(S),!0).hi+1);if(g){const R=h.slice(M-1).findIndex(N=>!bt(N[u.axis]));M+=Math.max(0,R)}o=Kn(M,a,s)-a}else o=s-a}return{start:a,count:o}}function Tk(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=a,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,a),o}const Wf=t=>t===0||t===1,kx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*tn/n)),Nx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*tn/n)+1,Lh={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*wn)+1,easeOutSine:t=>Math.sin(t*wn),easeInOutSine:t=>-.5*(Math.cos(nn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Wf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Wf(t)?t:kx(t,.075,.3),easeOutElastic:t=>Wf(t)?t:Nx(t,.075,.3),easeInOutElastic(t){return Wf(t)?t:t<.5?.5*kx(t*2,.1125,.45):.5+.5*Nx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Lh.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Lh.easeInBounce(t*2)*.5:Lh.easeOutBounce(t*2-1)*.5+.5};function j0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Dx(t){return j0(t)?t:new qh(t)}function by(t){return j0(t)?t:new qh(t).saturate(.5).darken(.1).hexString()}const Ak=["x","y","borderWidth","radius","tension"],Ok=["color","borderColor","backgroundColor"];function jk(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Ok},numbers:{type:"number",properties:Ak}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Mk(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Px=new Map;function Ek(t,e){e=e||{};const n=t+JSON.stringify(e);let s=Px.get(n);return s||(s=new Intl.NumberFormat(t,e),Px.set(n,s)),s}function M0(t,e,n){return Ek(e,n).format(t)}const Rk={values(t){return xn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,o=t;if(n.length>1){const g=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(g<1e-4||g>1e15)&&(a="scientific"),o=kk(t,n)}const l=bC(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:a,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),M0(t,s,h)}};function kk(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var TC={formatters:Rk};function Nk(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:TC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ko=Object.create(null),cv=Object.create(null);function Bh(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const o=n[s];t=t[o]||(t[o]=Object.create(null))}return t}function _y(t,e,n){return typeof e=="string"?$h(Bh(t,e),n):$h(Bh(t,""),e)}class Dk{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>by(a.backgroundColor),this.hoverBorderColor=(s,a)=>by(a.borderColor),this.hoverColor=(s,a)=>by(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return _y(this,e,n)}get(e){return Bh(this,e)}describe(e,n){return _y(cv,e,n)}override(e,n){return _y(Ko,e,n)}route(e,n,s,a){const o=Bh(this,e),l=Bh(this,s),u="_"+n;Object.defineProperties(o,{[u]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const h=this[u],g=l[a];return dt(h)?Object.assign({},g,h):at(h,g)},set(h){this[u]=h}}})}apply(e){e.forEach(n=>n(this))}}var ln=new Dk({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[jk,Mk,Nk]);function Pk(t){return!t||bt(t.size)||bt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lx(t,e,n,s,a){let o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>s&&(s=o),s}function Ro(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function Bx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function uv(t,e,n,s){AC(t,e,n,s,null)}function AC(t,e,n,s,a){let o,l,u,h,g,y,_,S;const T=e.pointStyle,O=e.rotation,M=e.radius;let R=(O||0)*hk;if(T&&typeof T=="object"&&(o=T.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(R),t.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),t.restore();return}if(!(isNaN(M)||M<=0)){switch(t.beginPath(),T){default:a?t.ellipse(n,s,a/2,M,0,0,tn):t.arc(n,s,M,0,tn),t.closePath();break;case"triangle":y=a?a/2:M,t.moveTo(n+Math.sin(R)*y,s-Math.cos(R)*M),R+=jx,t.lineTo(n+Math.sin(R)*y,s-Math.cos(R)*M),R+=jx,t.lineTo(n+Math.sin(R)*y,s-Math.cos(R)*M),t.closePath();break;case"rectRounded":g=M*.516,h=M-g,l=Math.cos(R+Eo)*h,_=Math.cos(R+Eo)*(a?a/2-g:h),u=Math.sin(R+Eo)*h,S=Math.sin(R+Eo)*(a?a/2-g:h),t.arc(n-_,s-u,g,R-nn,R-wn),t.arc(n+S,s-l,g,R-wn,R),t.arc(n+_,s+u,g,R,R+wn),t.arc(n-S,s+l,g,R+wn,R+nn),t.closePath();break;case"rect":if(!O){h=Math.SQRT1_2*M,y=a?a/2:h,t.rect(n-y,s-h,2*y,2*h);break}R+=Eo;case"rectRot":_=Math.cos(R)*(a?a/2:M),l=Math.cos(R)*M,u=Math.sin(R)*M,S=Math.sin(R)*(a?a/2:M),t.moveTo(n-_,s-u),t.lineTo(n+S,s-l),t.lineTo(n+_,s+u),t.lineTo(n-S,s+l),t.closePath();break;case"crossRot":R+=Eo;case"cross":_=Math.cos(R)*(a?a/2:M),l=Math.cos(R)*M,u=Math.sin(R)*M,S=Math.sin(R)*(a?a/2:M),t.moveTo(n-_,s-u),t.lineTo(n+_,s+u),t.moveTo(n+S,s-l),t.lineTo(n-S,s+l);break;case"star":_=Math.cos(R)*(a?a/2:M),l=Math.cos(R)*M,u=Math.sin(R)*M,S=Math.sin(R)*(a?a/2:M),t.moveTo(n-_,s-u),t.lineTo(n+_,s+u),t.moveTo(n+S,s-l),t.lineTo(n-S,s+l),R+=Eo,_=Math.cos(R)*(a?a/2:M),l=Math.cos(R)*M,u=Math.sin(R)*M,S=Math.sin(R)*(a?a/2:M),t.moveTo(n-_,s-u),t.lineTo(n+_,s+u),t.moveTo(n+S,s-l),t.lineTo(n-S,s+l);break;case"line":l=a?a/2:Math.cos(R)*M,u=Math.sin(R)*M,t.moveTo(n-l,s-u),t.lineTo(n+l,s+u);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(R)*(a?a/2:M),s+Math.sin(R)*M);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Kh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function E0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function R0(t){t.restore()}function Lk(t,e,n,s,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else a==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Bk(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Uk(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ik(t,e,n,s,a){if(a.strikethrough||a.underline){const o=t.measureText(s),l=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,h=n-o.actualBoundingBoxAscent,g=n+o.actualBoundingBoxDescent,y=a.strikethrough?(h+g)/2:g;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,y),t.lineTo(u,y),t.stroke()}}function zk(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xh(t,e,n,s,a,o={}){const l=xn(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let h,g;for(t.save(),t.font=a.string,Uk(t,o),h=0;h<l.length;++h)g=l[h],o.backdrop&&zk(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),bt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(g,n,s,o.maxWidth)),t.fillText(g,n,s,o.maxWidth),Ik(t,n,s,g,o),s+=Number(a.lineHeight);t.restore()}function Pm(t,e){const{x:n,y:s,w:a,h:o,radius:l}=e;t.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*nn,nn,!0),t.lineTo(n,s+o-l.bottomLeft),t.arc(n+l.bottomLeft,s+o-l.bottomLeft,l.bottomLeft,nn,wn,!0),t.lineTo(n+a-l.bottomRight,s+o),t.arc(n+a-l.bottomRight,s+o-l.bottomRight,l.bottomRight,wn,0,!0),t.lineTo(n+a,s+l.topRight),t.arc(n+a-l.topRight,s+l.topRight,l.topRight,0,-wn,!0),t.lineTo(n+l.topLeft,s)}const Vk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Hk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fk(t,e){const n=(""+t).match(Vk);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const qk=t=>+t||0;function k0(t,e){const n={},s=dt(e),a=s?Object.keys(e):e,o=dt(t)?s?l=>at(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)n[l]=qk(o(l));return n}function OC(t){return k0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function bc(t){return k0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Hs(t){const e=OC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Xn(t,e){t=t||{},e=e||ln.font;let n=at(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=at(t.style,e.style);s&&!(""+s).match(Hk)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:at(t.family,e.family),lineHeight:Fk(at(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:at(t.weight,e.weight),string:""};return a.string=Pk(a),a}function Yf(t,e,n,s){let a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function $k(t,e,n){const{min:s,max:a}=t,o=yC(e,(a-s)/2),l=(u,h)=>n&&u===0?0:u+h;return{min:l(s,-Math.abs(o)),max:l(a,o)}}function Jo(t,e){return Object.assign(Object.create(t),e)}function N0(t,e=[""],n,s,a=()=>t[0]){const o=n||t;typeof s>"u"&&(s=RC("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:a,override:u=>N0([u,...t],e,o,s)};return new Proxy(l,{deleteProperty(u,h){return delete u[h],delete u._keys,delete t[0][h],!0},get(u,h){return MC(u,h,()=>Zk(h,e,t,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,h){return Ix(u).includes(h)},ownKeys(u){return Ix(u)},set(u,h,g){const y=u._storage||(u._storage=a());return u[h]=y[h]=g,delete u._keys,!0}})}function Tc(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:jC(t,s),setContext:o=>Tc(t,o,n,s),override:o=>Tc(t.override(o),e,n,s)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,u){return MC(o,l,()=>Wk(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,u){return t[l]=u,delete o[l],!0}})}function jC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:zr(n)?n:()=>n,isIndexable:zr(s)?s:()=>s}}const Gk=(t,e)=>t?t+T0(e):e,D0=(t,e)=>dt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function MC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function Wk(t,e,n){const{_proxy:s,_context:a,_subProxy:o,_descriptors:l}=t;let u=s[e];return zr(u)&&l.isScriptable(e)&&(u=Yk(e,u,t,n)),xn(u)&&u.length&&(u=Kk(e,u,t,l.isIndexable)),D0(e,u)&&(u=Tc(u,a,o&&o[e],l)),u}function Yk(t,e,n,s){const{_proxy:a,_context:o,_subProxy:l,_stack:u}=n;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let h=e(o,l||s);return u.delete(t),D0(t,h)&&(h=P0(a._scopes,a,t,h)),h}function Kk(t,e,n,s){const{_proxy:a,_context:o,_subProxy:l,_descriptors:u}=n;if(typeof o.index<"u"&&s(t))return e[o.index%e.length];if(dt(e[0])){const h=e,g=a._scopes.filter(y=>y!==h);e=[];for(const y of h){const _=P0(g,a,t,y);e.push(Tc(_,o,l&&l[t],u))}}return e}function EC(t,e,n){return zr(t)?t(e,n):t}const Xk=(t,e)=>t===!0?e:typeof t=="string"?Yo(e,t):void 0;function Qk(t,e,n,s,a){for(const o of e){const l=Xk(n,o);if(l){t.add(l);const u=EC(l._fallback,n,a);if(typeof u<"u"&&u!==n&&u!==s)return u}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function P0(t,e,n,s){const a=e._rootScopes,o=EC(e._fallback,n,s),l=[...t,...a],u=new Set;u.add(s);let h=Ux(u,l,n,o||n,s);return h===null||typeof o<"u"&&o!==n&&(h=Ux(u,l,o,h,s),h===null)?!1:N0(Array.from(u),[""],a,o,()=>Jk(e,n,s))}function Ux(t,e,n,s,a){for(;n;)n=Qk(t,e,n,s,a);return n}function Jk(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return xn(a)&&dt(n)?n:a||{}}function Zk(t,e,n,s){let a;for(const o of e)if(a=RC(Gk(o,t),n),typeof a<"u")return D0(t,a)?P0(n,s,t,a):a}function RC(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function Ix(t){let e=t._keys;return e||(e=t._keys=eN(t._scopes)),e}function eN(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}const tN=Number.EPSILON||1e-14,Ac=(t,e)=>e<t.length&&!t[e].skip&&t[e],kC=t=>t==="x"?"y":"x";function nN(t,e,n,s){const a=t.skip?e:t,o=e,l=n.skip?e:n,u=lv(o,a),h=lv(l,o);let g=u/(u+h),y=h/(u+h);g=isNaN(g)?0:g,y=isNaN(y)?0:y;const _=s*g,S=s*y;return{previous:{x:o.x-_*(l.x-a.x),y:o.y-_*(l.y-a.y)},next:{x:o.x+S*(l.x-a.x),y:o.y+S*(l.y-a.y)}}}function sN(t,e,n){const s=t.length;let a,o,l,u,h,g=Ac(t,0);for(let y=0;y<s-1;++y)if(h=g,g=Ac(t,y+1),!(!h||!g)){if(Ph(e[y],0,tN)){n[y]=n[y+1]=0;continue}a=n[y]/e[y],o=n[y+1]/e[y],u=Math.pow(a,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),n[y]=a*l*e[y],n[y+1]=o*l*e[y])}}function iN(t,e,n="x"){const s=kC(n),a=t.length;let o,l,u,h=Ac(t,0);for(let g=0;g<a;++g){if(l=u,u=h,h=Ac(t,g+1),!u)continue;const y=u[n],_=u[s];l&&(o=(y-l[n])/3,u[`cp1${n}`]=y-o,u[`cp1${s}`]=_-o*e[g]),h&&(o=(h[n]-y)/3,u[`cp2${n}`]=y+o,u[`cp2${s}`]=_+o*e[g])}}function aN(t,e="x"){const n=kC(e),s=t.length,a=Array(s).fill(0),o=Array(s);let l,u,h,g=Ac(t,0);for(l=0;l<s;++l)if(u=h,h=g,g=Ac(t,l+1),!!h){if(g){const y=g[e]-h[e];a[l]=y!==0?(g[n]-h[n])/y:0}o[l]=u?g?Bi(a[l-1])!==Bi(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}sN(t,a,o),iN(t,o,e)}function Kf(t,e,n){return Math.max(Math.min(t,n),e)}function rN(t,e){let n,s,a,o,l,u=Kh(t[0],e);for(n=0,s=t.length;n<s;++n)l=o,o=u,u=n<s-1&&Kh(t[n+1],e),o&&(a=t[n],l&&(a.cp1x=Kf(a.cp1x,e.left,e.right),a.cp1y=Kf(a.cp1y,e.top,e.bottom)),u&&(a.cp2x=Kf(a.cp2x,e.left,e.right),a.cp2y=Kf(a.cp2y,e.top,e.bottom)))}function oN(t,e,n,s,a){let o,l,u,h;if(e.spanGaps&&(t=t.filter(g=>!g.skip)),e.cubicInterpolationMode==="monotone")aN(t,a);else{let g=s?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)u=t[o],h=nN(g,u,t[Math.min(o+1,l-(s?0:1))%l],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,g=u}e.capBezierPoints&&rN(t,n)}function L0(){return typeof window<"u"&&typeof document<"u"}function B0(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lm(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Jm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function lN(t,e){return Jm(t).getPropertyValue(e)}const cN=["top","right","bottom","left"];function qo(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=cN[a];s[o]=parseFloat(t[e+"-"+o+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const uN=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function hN(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:o}=s;let l=!1,u,h;if(uN(a,o,t.target))u=a,h=o;else{const g=e.getBoundingClientRect();u=s.clientX-g.left,h=s.clientY-g.top,l=!0}return{x:u,y:h,box:l}}function Po(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Jm(n),o=a.boxSizing==="border-box",l=qo(a,"padding"),u=qo(a,"border","width"),{x:h,y:g,box:y}=hN(t,n),_=l.left+(y&&u.left),S=l.top+(y&&u.top);let{width:T,height:O}=e;return o&&(T-=l.width+u.width,O-=l.height+u.height),{x:Math.round((h-_)/T*n.width/s),y:Math.round((g-S)/O*n.height/s)}}function dN(t,e,n){let s,a;if(e===void 0||n===void 0){const o=t&&B0(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),u=Jm(o),h=qo(u,"border","width"),g=qo(u,"padding");e=l.width-g.width-h.width,n=l.height-g.height-h.height,s=Lm(u.maxWidth,o,"clientWidth"),a=Lm(u.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:s||Dm,maxHeight:a||Dm}}const Xf=t=>Math.round(t*10)/10;function fN(t,e,n,s){const a=Jm(t),o=qo(a,"margin"),l=Lm(a.maxWidth,t,"clientWidth")||Dm,u=Lm(a.maxHeight,t,"clientHeight")||Dm,h=dN(t,e,n);let{width:g,height:y}=h;if(a.boxSizing==="content-box"){const S=qo(a,"border","width"),T=qo(a,"padding");g-=T.width+S.width,y-=T.height+S.height}return g=Math.max(0,g-o.width),y=Math.max(0,s?g/s:y-o.height),g=Xf(Math.min(g,l,h.maxWidth)),y=Xf(Math.min(y,u,h.maxHeight)),g&&!y&&(y=Xf(g/2)),(e!==void 0||n!==void 0)&&s&&h.height&&y>h.height&&(y=h.height,g=Xf(Math.floor(y*s))),{width:g,height:y}}function zx(t,e,n){const s=e||1,a=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||l.height!==a||l.width!==o?(t.currentDevicePixelRatio=s,l.height=a,l.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const mN=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};L0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Vx(t,e){const n=lN(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Lo(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function gN(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function pN(t,e,n,s){const a={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=Lo(t,a,n),u=Lo(a,o,n),h=Lo(o,e,n),g=Lo(l,u,n),y=Lo(u,h,n);return Lo(g,y,n)}const yN=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},vN=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function _c(t,e,n){return t?yN(e,n):vN()}function NC(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function DC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function PC(t){return t==="angle"?{between:Yh,compare:yk,normalize:kr}:{between:Br,compare:(e,n)=>e-n,normalize:e=>e}}function Hx({start:t,end:e,count:n,loop:s,style:a}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:a}}function bN(t,e,n){const{property:s,start:a,end:o}=n,{between:l,normalize:u}=PC(s),h=e.length;let{start:g,end:y,loop:_}=t,S,T;if(_){for(g+=h,y+=h,S=0,T=h;S<T&&l(u(e[g%h][s]),a,o);++S)g--,y--;g%=h,y%=h}return y<g&&(y+=h),{start:g,end:y,loop:_,style:t.style}}function _N(t,e,n){if(!n)return[t];const{property:s,start:a,end:o}=n,l=e.length,{compare:u,between:h,normalize:g}=PC(s),{start:y,end:_,loop:S,style:T}=bN(t,e,n),O=[];let M=!1,R=null,N,B,z;const P=()=>h(a,z,N)&&u(a,z)!==0,U=()=>u(o,N)===0||h(o,z,N),ee=()=>M||P(),ae=()=>!M||U();for(let J=y,X=y;J<=_;++J)B=e[J%l],!B.skip&&(N=g(B[s]),N!==z&&(M=h(N,a,o),R===null&&ee()&&(R=u(N,a)===0?J:X),R!==null&&ae()&&(O.push(Hx({start:R,end:J,loop:S,count:l,style:T})),R=null),X=J,z=N));return R!==null&&O.push(Hx({start:R,end:_,loop:S,count:l,style:T})),O}function xN(t,e){const n=[],s=t.segments;for(let a=0;a<s.length;a++){const o=_N(s[a],t.points,e);o.length&&n.push(...o)}return n}function wN(t,e,n,s){let a=0,o=e-1;if(n&&!s)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(o+=a);o>a&&t[o%e].skip;)o--;return o%=e,{start:a,end:o}}function SN(t,e,n,s){const a=t.length,o=[];let l=e,u=t[e],h;for(h=e+1;h<=n;++h){const g=t[h%a];g.skip||g.stop?u.skip||(s=!1,o.push({start:e%a,end:(h-1)%a,loop:s}),e=l=g.stop?h:null):(l=h,u.skip&&(e=h)),u=g}return l!==null&&o.push({start:e%a,end:l%a,loop:s}),o}function CN(t,e){const n=t.points,s=t.options.spanGaps,a=n.length;if(!a)return[];const o=!!t._loop,{start:l,end:u}=wN(n,a,o,s);if(s===!0)return Fx(t,[{start:l,end:u,loop:o}],n,e);const h=u<l?u+a:u,g=!!t._fullLoop&&l===0&&u===a-1;return Fx(t,SN(n,l,h,g),n,e)}function Fx(t,e,n,s){return!s||!s.setContext||!n?e:TN(t,e,n,s)}function TN(t,e,n,s){const a=t._chart.getContext(),o=qx(t.options),{_datasetIndex:l,options:{spanGaps:u}}=t,h=n.length,g=[];let y=o,_=e[0].start,S=_;function T(O,M,R,N){const B=u?-1:1;if(O!==M){for(O+=h;n[O%h].skip;)O-=B;for(;n[M%h].skip;)M+=B;O%h!==M%h&&(g.push({start:O%h,end:M%h,loop:R,style:N}),y=N,_=M%h)}}for(const O of e){_=u?_:O.start;let M=n[_%h],R;for(S=_+1;S<=O.end;S++){const N=n[S%h];R=qx(s.setContext(Jo(a,{type:"segment",p0:M,p1:N,p0DataIndex:(S-1)%h,p1DataIndex:S%h,datasetIndex:l}))),AN(R,y)&&T(_,S-1,O.loop,y),M=N,y=R}_<S-1&&T(_,S-1,O.loop,y)}return g}function qx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function AN(t,e){if(!e)return!1;const n=[],s=function(a,o){return j0(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Qf(t,e,n){return t.options.clip?t[n]:e[n]}function ON(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Qf(n,e,"left"),right:Qf(n,e,"right"),top:Qf(s,e,"top"),bottom:Qf(s,e,"bottom")}:e}function jN(t,e){const n=e._clip;if(n.disabled)return!1;const s=ON(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class MN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const o=n.listeners[a],l=n.duration;o.forEach(u=>u({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=SC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const o=s.items;let l=o.length-1,u=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>s.duration&&(s.duration=h._total),h.tick(e),u=!0):(o[l]=o[o.length-1],o.pop());u&&(a.draw(),this._notify(a,s,e,"progress")),o.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ja=new MN;const $x="transparent",EN={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=Dx(t||$x),a=s.valid&&Dx(e||$x);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class RN{constructor(e,n,s,a){const o=n[s];a=Yf([e.to,a,o,e.from]);const l=Yf([e.from,o,a]);this._active=!0,this._fn=e.fn||EN[e.type||typeof l],this._easing=Lh[e.easing]||Lh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],o=s-this._start,l=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Yf([e.to,n,a,e.from]),this._from=Yf([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,o=this._from,l=this._loop,u=this._to;let h;if(this._active=o!==u&&(l||n<s),!this._active){this._target[a]=u,this._notify(!0);return}if(n<0){this._target[a]=o;return}h=n/s%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[a]=this._fn(o,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class LC{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!dt(e))return;const n=Object.keys(ln.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!dt(o))return;const l={};for(const u of n)l[u]=o[u];(xn(o.properties)&&o.properties||[a]).forEach(u=>{(u===a||!s.has(u))&&s.set(u,l)})})}_animateOptions(e,n){const s=n.options,a=NN(e,s);if(!a)return[];const o=this._createAnimations(a,s);return s.$shared&&kN(e.options.$animations,s).then(()=>{e.options=s},()=>{}),o}_createAnimations(e,n){const s=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),u=Date.now();let h;for(h=l.length-1;h>=0;--h){const g=l[h];if(g.charAt(0)==="$")continue;if(g==="options"){a.push(...this._animateOptions(e,n));continue}const y=n[g];let _=o[g];const S=s.get(g);if(_)if(S&&_.active()){_.update(S,y,u);continue}else _.cancel();if(!S||!S.duration){e[g]=y;continue}o[g]=_=new RN(S,e,g,y),a.push(_)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return ja.add(this._chart,s),!0}}function kN(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=t[s[a]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function NN(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Gx(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:s?o:a,end:s?a:o}}function DN(t,e,n){if(n===!1)return!1;const s=Gx(t,n),a=Gx(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function PN(t){let e,n,s,a;return dt(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function BC(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,o;for(a=0,o=s.length;a<o;++a)n.push(s[a].index);return n}function Wx(t,e,n,s={}){const a=t.keys,o=s.mode==="single";let l,u,h,g;if(e===null)return;let y=!1;for(l=0,u=a.length;l<u;++l){if(h=+a[l],h===n){if(y=!0,s.all)continue;break}g=t.values[h],Vs(g)&&(o||e===0||Bi(e)===Bi(g))&&(e+=g)}return!y&&!s.all?0:e}function LN(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",l=Object.keys(t),u=new Array(l.length);let h,g,y;for(h=0,g=l.length;h<g;++h)y=l[h],u[h]={[a]:y,[o]:t[y]};return u}function xy(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function BN(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function UN(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function IN(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function Yx(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const o=t[a.index];if(n&&o>0||!n&&o<0)return a.index}return null}function Kx(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:u}=s,h=o.axis,g=l.axis,y=BN(o,l,s),_=e.length;let S;for(let T=0;T<_;++T){const O=e[T],{[h]:M,[g]:R}=O,N=O._stacks||(O._stacks={});S=N[g]=IN(a,y,M),S[u]=R,S._top=Yx(S,l,!0,s.type),S._bottom=Yx(S,l,!1,s.type);const B=S._visualValues||(S._visualValues={});B[u]=R}}function wy(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function zN(t,e){return Jo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function VN(t,e,n){return Jo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function oh(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const o=a._stacks;if(!o||o[s]===void 0||o[s][n]===void 0)return;delete o[s][n],o[s]._visualValues!==void 0&&o[s]._visualValues[n]!==void 0&&delete o[s]._visualValues[n]}}}const Sy=t=>t==="reset"||t==="none",Xx=(t,e)=>e?t:Object.assign({},t),HN=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:BC(n,!0),values:null};class $o{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=xy(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(_,S,T,O)=>_==="x"?S:_==="r"?O:T,o=n.xAxisID=at(s.xAxisID,wy(e,"x")),l=n.yAxisID=at(s.yAxisID,wy(e,"y")),u=n.rAxisID=at(s.rAxisID,wy(e,"r")),h=n.indexAxis,g=n.iAxisID=a(h,o,l,u),y=n.vAxisID=a(h,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(g),n.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Rx(this._data,this),e._stacked&&oh(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(dt(n)){const a=this._cachedMeta;this._data=LN(n,a)}else if(s!==n){if(s){Rx(s,this);const a=this._cachedMeta;oh(a),a._parsed=[]}n&&Object.isExtensible(n)&&xk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const o=n._stacked;n._stacked=xy(n.vScale,n),n.stack!==s.stack&&(a=!0,oh(n),n.stack=s.stack),this._resyncElements(e),(a||o!==n._stacked)&&(Kx(this,n._parsed),n._stacked=xy(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:o,_stacked:l}=s,u=o.axis;let h=e===0&&n===a.length?!0:s._sorted,g=e>0&&s._parsed[e-1],y,_,S;if(this._parsing===!1)s._parsed=a,s._sorted=!0,S=a;else{xn(a[e])?S=this.parseArrayData(s,a,e,n):dt(a[e])?S=this.parseObjectData(s,a,e,n):S=this.parsePrimitiveData(s,a,e,n);const T=()=>_[u]===null||g&&_[u]<g[u];for(y=0;y<n;++y)s._parsed[y+e]=_=S[y],h&&(T()&&(h=!1),g=_);s._sorted=h}l&&Kx(this,S)}parsePrimitiveData(e,n,s,a){const{iScale:o,vScale:l}=e,u=o.axis,h=l.axis,g=o.getLabels(),y=o===l,_=new Array(a);let S,T,O;for(S=0,T=a;S<T;++S)O=S+s,_[S]={[u]:y||o.parse(g[O],O),[h]:l.parse(n[O],O)};return _}parseArrayData(e,n,s,a){const{xScale:o,yScale:l}=e,u=new Array(a);let h,g,y,_;for(h=0,g=a;h<g;++h)y=h+s,_=n[y],u[h]={x:o.parse(_[0],y),y:l.parse(_[1],y)};return u}parseObjectData(e,n,s,a){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,g=new Array(a);let y,_,S,T;for(y=0,_=a;y<_;++y)S=y+s,T=n[S],g[y]={x:o.parse(Yo(T,u),S),y:l.parse(Yo(T,h),S)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,o=this._cachedMeta,l=n[e.axis],u={keys:BC(a,!0),values:n._stacks[e.axis]._visualValues};return Wx(u,l,o.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const o=s[n.axis];let l=o===null?NaN:o;const u=a&&s._stacks[n.axis];a&&u&&(a.values=u,l=Wx(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,o=s._sorted&&e===s.iScale,l=a.length,u=this._getOtherScale(e),h=HN(n,s,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:_}=UN(u);let S,T;function O(){T=a[S];const M=T[u.axis];return!Vs(T[e.axis])||y>M||_<M}for(S=0;S<l&&!(!O()&&(this.updateRangeFromParsed(g,e,T,h),o));++S);if(o){for(S=l-1;S>=0;--S)if(!O()){this.updateRangeFromParsed(g,e,T,h);break}}return g}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,o,l;for(a=0,o=n.length;a<o;++a)l=n[a][e.axis],Vs(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=PN(at(this.options.clip,DN(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],o=n.chartArea,l=[],u=this._drawStart||0,h=this._drawCount||a.length-u,g=this.options.drawActiveElementsOnTop;let y;for(s.dataset&&s.dataset.draw(e,o,u,h),y=u;y<u+h;++y){const _=a[y];_.hidden||(_.active&&g?l.push(_):_.draw(e,o))}for(y=0;y<l.length;++y)l[y].draw(e,o)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=VN(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=zN(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",o=this._cachedDataOpts,l=e+"-"+n,u=o[l],h=this.enableOptionSharing&&Gh(s);if(u)return Xx(u,h);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,e),_=a?[`${e}Hover`,"hover",e,""]:[e,""],S=g.getOptionScopes(this.getDataset(),y),T=Object.keys(ln.elements[e]),O=()=>this.getContext(s,a,n),M=g.resolveNamedOptions(S,T,O,_);return M.$shared&&(M.$shared=h,o[l]=Object.freeze(Xx(M,h))),M}_resolveAnimations(e,n,s){const a=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let h;if(a.options.animation!==!1){const y=this.chart.config,_=y.datasetAnimationScopeKeys(this._type,n),S=y.getOptionScopes(this.getDataset(),_);h=y.createResolver(S,this.getContext(e,s,n))}const g=new LC(a,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Sy(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,o=this.getSharedOptions(s),l=this.includeOptions(n,o)||o!==a;return this.updateSharedOptions(o,n,s),{sharedOptions:o,includeOptions:l}}updateElement(e,n,s,a){Sy(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!Sy(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const o=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[u,h,g]of this._syncList)this[u](h,g);this._syncList=[];const a=s.length,o=n.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,n,s=!0){const a=this._cachedMeta,o=a.data,l=e+n;let u;const h=g=>{for(g.length+=n,u=g.length-1;u>=l;u--)g[u]=g[u-n]};for(h(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&h(a._parsed),this.parse(e,n),s&&this.updateElements(o,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&oh(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ue($o,"defaults",{}),Ue($o,"datasetElementType",null),Ue($o,"dataElementType",null);function FN(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,o=n.length;a<o;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=wC(s.sort((a,o)=>a-o))}return t._cache.$bar}function qN(t){const e=t.iScale,n=FN(e,t.type);let s=e._length,a,o,l,u;const h=()=>{l===32767||l===-32768||(Gh(u)&&(s=Math.min(s,Math.abs(l-u)||s)),u=l)};for(a=0,o=n.length;a<o;++a)l=e.getPixelForValue(n[a]),h();for(u=void 0,a=0,o=e.ticks.length;a<o;++a)l=e.getPixelForTick(a),h();return s}function $N(t,e,n,s){const a=n.barThickness;let o,l;return bt(a)?(o=e.min*n.categoryPercentage,l=n.barPercentage):(o=a*s,l=1),{chunk:o/s,ratio:l,start:e.pixels[t]-o/2}}function GN(t,e,n,s){const a=e.pixels,o=a[t];let l=t>0?a[t-1]:null,u=t<a.length-1?a[t+1]:null;const h=n.categoryPercentage;l===null&&(l=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-l);const g=o-(o-Math.min(l,u))/2*h;return{chunk:Math.abs(u-l)/2*h/s,ratio:n.barPercentage,start:g}}function WN(t,e,n,s){const a=n.parse(t[0],s),o=n.parse(t[1],s),l=Math.min(a,o),u=Math.max(a,o);let h=l,g=u;Math.abs(l)>Math.abs(u)&&(h=u,g=l),e[n.axis]=g,e._custom={barStart:h,barEnd:g,start:a,end:o,min:l,max:u}}function UC(t,e,n,s){return xn(t)?WN(t,e,n,s):e[n.axis]=n.parse(t,s),e}function Qx(t,e,n,s){const a=t.iScale,o=t.vScale,l=a.getLabels(),u=a===o,h=[];let g,y,_,S;for(g=n,y=n+s;g<y;++g)S=e[g],_={},_[a.axis]=u||a.parse(l[g],g),h.push(UC(S,_,o,g));return h}function Cy(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function YN(t,e,n){return t!==0?Bi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function KN(t){let e,n,s,a,o;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",o="start"):(a="start",o="end"),{start:n,end:s,reverse:e,top:a,bottom:o}}function XN(t,e,n,s){let a=e.borderSkipped;const o={};if(!a){t.borderSkipped=o;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:h,top:g,bottom:y}=KN(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=g:(n._bottom||0)===s?a=y:(o[Jx(y,l,u,h)]=!0,a=g)),o[Jx(a,l,u,h)]=!0,t.borderSkipped=o}function Jx(t,e,n,s){return s?(t=QN(t,e,n),t=Zx(t,n,e)):t=Zx(t,e,n),t}function QN(t,e,n){return t===e?n:t===n?e:t}function Zx(t,e,n){return t==="start"?e:t==="end"?n:t}function JN(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class pm extends $o{parsePrimitiveData(e,n,s,a){return Qx(e,n,s,a)}parseArrayData(e,n,s,a){return Qx(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,g=o.axis==="x"?u:h,y=l.axis==="x"?u:h,_=[];let S,T,O,M;for(S=s,T=s+a;S<T;++S)M=n[S],O={},O[o.axis]=o.parse(Yo(M,g),S),_.push(UC(Yo(M,y),O,l,S));return _}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const o=s._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,o=this.getParsed(e),l=o._custom,u=Cy(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(o[a.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const o=a==="reset",{index:l,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),g=u.isHorizontal(),y=this._getRuler(),{sharedOptions:_,includeOptions:S}=this._getSharedOptions(n,a);for(let T=n;T<n+s;T++){const O=this.getParsed(T),M=o||bt(O[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(T),R=this._calculateBarIndexPixels(T,y),N=(O._stacks||{})[u.axis],B={horizontal:g,base:M.base,enableBorderRadius:!N||Cy(O._custom)||l===N._top||l===N._bottom,x:g?M.head:R.center,y:g?R.center:M.head,height:g?R.size:Math.abs(M.size),width:g?Math.abs(M.size):R.size};S&&(B.options=_||this.resolveDataElementOptions(T,e[T].active?"active":a));const z=B.options||e[T].options;XN(B,z,N,l),JN(B,z,y.ratio),this.updateElement(e[T],T,B,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),o=s.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(n),h=u&&u[s.axis],g=y=>{const _=y._parsed.find(T=>T[s.axis]===h),S=_&&_[y.vScale.axis];if(bt(S)||isNaN(S))return!0};for(const y of a)if(!(n!==void 0&&g(y))&&((o===!1||l.indexOf(y.stack)===-1||o===void 0&&y.stack===void 0)&&l.push(y.stack),y.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const a=this._getStacks(e,s),o=n!==void 0?a.indexOf(n):-1;return o===-1?a.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let o,l;for(o=0,l=n.data.length;o<l;++o)a.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const u=e.barThickness;return{min:u||qN(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:o,minBarLength:l}}=this,u=o||0,h=this.getParsed(e),g=h._custom,y=Cy(g);let _=h[n.axis],S=0,T=s?this.applyStack(n,h,s):_,O,M;T!==_&&(S=T-_,T=_),y&&(_=g.barStart,T=g.barEnd-g.barStart,_!==0&&Bi(_)!==Bi(g.barEnd)&&(S=0),S+=_);const R=!bt(o)&&!y?o:S;let N=n.getPixelForValue(R);if(this.chart.getDataVisibility(e)?O=n.getPixelForValue(S+T):O=N,M=O-N,Math.abs(M)<l){M=YN(M,n,u)*l,_===u&&(N-=M/2);const B=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),P=Math.min(B,z),U=Math.max(B,z);N=Math.max(Math.min(N,U),P),O=N+M,s&&!y&&(h._stacks[n.axis]._visualValues[a]=n.getValueForPixel(O)-n.getValueForPixel(N))}if(N===n.getPixelForValue(u)){const B=Bi(M)*n.getLineWidthForValue(u)/2;N+=B,M-=B}return{size:M,base:N,head:O,center:O+M/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,o=a.skipNull,l=at(a.maxBarThickness,1/0);let u,h;if(n.grouped){const g=o?this._getStackCount(e):n.stackCount,y=a.barThickness==="flex"?GN(e,n,a,g):$N(e,n,a,g),_=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=y.start+y.chunk*_+y.chunk/2,h=Math.min(l,y.chunk*y.ratio)}else u=s.getPixelForValue(this.getParsed(e)[s.axis],e),h=Math.min(l,n.min*n.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let o=0;for(;o<a;++o)this.getParsed(o)[n.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}Ue(pm,"id","bar"),Ue(pm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ue(pm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function ZN(t,e,n){let s=1,a=1,o=0,l=0;if(e<tn){const u=t,h=u+e,g=Math.cos(u),y=Math.sin(u),_=Math.cos(h),S=Math.sin(h),T=(z,P,U)=>Yh(z,u,h,!0)?1:Math.max(P,P*n,U,U*n),O=(z,P,U)=>Yh(z,u,h,!0)?-1:Math.min(P,P*n,U,U*n),M=T(0,g,_),R=T(wn,y,S),N=O(nn,g,_),B=O(nn+wn,y,S);s=(M-N)/2,a=(R-B)/2,o=-(M+N)/2,l=-(R+B)/2}return{ratioX:s,ratioY:a,offsetX:o,offsetY:l}}class vh extends $o{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let o=h=>+s[h];if(dt(s[e])){const{key:h="value"}=this._parsing;o=g=>+Yo(s[g],h)}let l,u;for(l=e,u=e+n;l<u;++l)a._parsed[l]=o(l)}}_getRotation(){return Na(this.options.rotation-90)}_getCircumference(){return Na(this.options.circumference)}_getRotationExtents(){let e=tn,n=-tn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(s.width,s.height)-l)/2,0),h=Math.min(ik(this.options.cutout,u),1),g=this._getRingWeight(this.index),{circumference:y,rotation:_}=this._getRotationExtents(),{ratioX:S,ratioY:T,offsetX:O,offsetY:M}=ZN(_,y,h),R=(s.width-l)/S,N=(s.height-l)/T,B=Math.max(Math.min(R,N)/2,0),z=yC(this.options.radius,B),P=Math.max(z*h,0),U=(z-P)/this._getVisibleDatasetWeightTotal();this.offsetX=O*z,this.offsetY=M*z,a.total=this.calculateTotal(),this.outerRadius=z-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*g,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,o=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/tn)}updateElements(e,n,s,a){const o=a==="reset",l=this.chart,u=l.chartArea,g=l.options.animation,y=(u.left+u.right)/2,_=(u.top+u.bottom)/2,S=o&&g.animateScale,T=S?0:this.innerRadius,O=S?0:this.outerRadius,{sharedOptions:M,includeOptions:R}=this._getSharedOptions(n,a);let N=this._getRotation(),B;for(B=0;B<n;++B)N+=this._circumference(B,o);for(B=n;B<n+s;++B){const z=this._circumference(B,o),P=e[B],U={x:y+this.offsetX,y:_+this.offsetY,startAngle:N,endAngle:N+z,circumference:z,outerRadius:O,innerRadius:T};R&&(U.options=M||this.resolveDataElementOptions(B,P.active?"active":a)),N+=z,this.updateElement(P,B,U,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?tn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],o=M0(n._parsed[e],s.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,o,l,u,h;if(!e){for(a=0,o=s.data.datasets.length;a<o;++a)if(s.isDatasetVisible(a)){l=s.getDatasetMeta(a),e=l.data,u=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)h=u.resolveDataElementOptions(a),h.borderAlign!=="inner"&&(n=Math.max(n,h.borderWidth||0,h.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const o=this.resolveDataElementOptions(s);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(at(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ue(vh,"id","doughnut"),Ue(vh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ue(vh,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ue(vh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:a}}=e.legend.options;return n.labels.map((o,l)=>{const h=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:a,lineWidth:h.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class ym extends $o{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:a=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:h}=Ck(n,a,l);this._drawStart=u,this._drawCount=h,Tk(n)&&(u=0,h=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=a;const g=this.resolveDatasetElementOptions(e);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:g},e),this.updateElements(a,u,h,e)}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:u,_stacked:h,_dataset:g}=this._cachedMeta,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(n,a),S=l.axis,T=u.axis,{spanGaps:O,segment:M}=this.options,R=Wh(O)?O:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||a==="none",B=n+s,z=e.length;let P=n>0&&this.getParsed(n-1);for(let U=0;U<z;++U){const ee=e[U],ae=N?ee:{};if(U<n||U>=B){ae.skip=!0;continue}const J=this.getParsed(U),X=bt(J[T]),oe=ae[S]=l.getPixelForValue(J[S],U),A=ae[T]=o||X?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,J,h):J[T],U);ae.skip=isNaN(oe)||isNaN(A)||X,ae.stop=U>0&&Math.abs(J[S]-P[S])>R,M&&(ae.parsed=J,ae.raw=g.data[U]),_&&(ae.options=y||this.resolveDataElementOptions(U,ee.active?"active":a)),N||this.updateElement(ee,U,ae,a),P=J}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const o=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ue(ym,"id","line"),Ue(ym,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ue(ym,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ko(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class U0{constructor(e){Ue(this,"options");this.options=e||{}}static override(e){Object.assign(U0.prototype,e)}init(){}formats(){return ko()}parse(){return ko()}format(){return ko()}add(){return ko()}diff(){return ko()}startOf(){return ko()}endOf(){return ko()}}var eD={_date:U0};function tD(t,e,n,s){const{controller:a,data:o,_sorted:l}=t,u=a._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&o.length){const g=u._reversePixels?bk:Vo;if(s){if(a._sharedOptions){const y=o[0],_=typeof y.getRange=="function"&&y.getRange(e);if(_){const S=g(o,e,n-_),T=g(o,e,n+_);return{lo:S.lo,hi:T.hi}}}}else{const y=g(o,e,n);if(h){const{vScale:_}=a._cachedMeta,{_parsed:S}=t,T=S.slice(0,y.lo+1).reverse().findIndex(M=>!bt(M[_.axis]));y.lo-=Math.max(0,T);const O=S.slice(y.hi).findIndex(M=>!bt(M[_.axis]));y.hi+=Math.max(0,O)}return y}}return{lo:0,hi:o.length-1}}function Zm(t,e,n,s,a){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let u=0,h=o.length;u<h;++u){const{index:g,data:y}=o[u],{lo:_,hi:S}=tD(o[u],e,l,a);for(let T=_;T<=S;++T){const O=y[T];O.skip||s(O,g,T)}}}function nD(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const o=e?Math.abs(s.x-a.x):0,l=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Ty(t,e,n,s,a){const o=[];return!a&&!t.isPointInArea(e)||Zm(t,n,e,function(u,h,g){!a&&!Kh(u,t.chartArea,0)||u.inRange(e.x,e.y,s)&&o.push({element:u,datasetIndex:h,index:g})},!0),o}function sD(t,e,n,s){let a=[];function o(l,u,h){const{startAngle:g,endAngle:y}=l.getProps(["startAngle","endAngle"],s),{angle:_}=_C(l,{x:e.x,y:e.y});Yh(_,g,y)&&a.push({element:l,datasetIndex:u,index:h})}return Zm(t,n,e,o),a}function iD(t,e,n,s,a,o){let l=[];const u=nD(n);let h=Number.POSITIVE_INFINITY;function g(y,_,S){const T=y.inRange(e.x,e.y,a);if(s&&!T)return;const O=y.getCenterPoint(a);if(!(!!o||t.isPointInArea(O))&&!T)return;const R=u(e,O);R<h?(l=[{element:y,datasetIndex:_,index:S}],h=R):R===h&&l.push({element:y,datasetIndex:_,index:S})}return Zm(t,n,e,g),l}function Ay(t,e,n,s,a,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!s?sD(t,e,n,a):iD(t,e,n,s,a,o)}function ew(t,e,n,s,a){const o=[],l=n==="x"?"inXRange":"inYRange";let u=!1;return Zm(t,n,e,(h,g,y)=>{h[l]&&h[l](e[n],a)&&(o.push({element:h,datasetIndex:g,index:y}),u=u||h.inRange(e.x,e.y,a))}),s&&!u?[]:o}var aD={modes:{index(t,e,n,s){const a=Po(e,t),o=n.axis||"x",l=n.includeInvisible||!1,u=n.intersect?Ty(t,a,o,s,l):Ay(t,a,o,!1,s,l),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(g=>{const y=u[0].index,_=g.data[y];_&&!_.skip&&h.push({element:_,datasetIndex:g.index,index:y})}),h):[]},dataset(t,e,n,s){const a=Po(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let u=n.intersect?Ty(t,a,o,s,l):Ay(t,a,o,!1,s,l);if(u.length>0){const h=u[0].datasetIndex,g=t.getDatasetMeta(h).data;u=[];for(let y=0;y<g.length;++y)u.push({element:g[y],datasetIndex:h,index:y})}return u},point(t,e,n,s){const a=Po(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Ty(t,a,o,s,l)},nearest(t,e,n,s){const a=Po(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Ay(t,a,o,n.intersect,s,l)},x(t,e,n,s){const a=Po(e,t);return ew(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=Po(e,t);return ew(t,a,"y",n.intersect,s)}}};const IC=["left","top","right","bottom"];function lh(t,e){return t.filter(n=>n.pos===e)}function tw(t,e){return t.filter(n=>IC.indexOf(n.pos)===-1&&n.box.axis===e)}function ch(t,e){return t.sort((n,s)=>{const a=e?s:n,o=e?n:s;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function rD(t){const e=[];let n,s,a,o,l,u;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:o,options:{stack:l,stackWeight:u=1}}=a,e.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:u});return e}function oD(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:o}=n;if(!s||!IC.includes(a))continue;const l=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function lD(t,e){const n=oD(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let o,l,u;for(o=0,l=t.length;o<l;++o){u=t[o];const{fullSize:h}=u.box,g=n[u.stack],y=g&&u.stackWeight/g.weight;u.horizontal?(u.width=y?y*s:h&&e.availableWidth,u.height=a):(u.width=s,u.height=y?y*a:h&&e.availableHeight)}return n}function cD(t){const e=rD(t),n=ch(e.filter(g=>g.box.fullSize),!0),s=ch(lh(e,"left"),!0),a=ch(lh(e,"right")),o=ch(lh(e,"top"),!0),l=ch(lh(e,"bottom")),u=tw(e,"x"),h=tw(e,"y");return{fullSize:n,leftAndTop:s.concat(o),rightAndBottom:a.concat(h).concat(l).concat(u),chartArea:lh(e,"chartArea"),vertical:s.concat(a).concat(h),horizontal:o.concat(l).concat(u)}}function nw(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function zC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function uD(t,e,n,s){const{pos:a,box:o}=n,l=t.maxPadding;if(!dt(a)){n.size&&(t[a]-=n.size);const _=s[n.stack]||{size:0,count:1};_.size=Math.max(_.size,n.horizontal?o.height:o.width),n.size=_.size/_.count,t[a]+=n.size}o.getPadding&&zC(l,o.getPadding());const u=Math.max(0,e.outerWidth-nw(l,t,"left","right")),h=Math.max(0,e.outerHeight-nw(l,t,"top","bottom")),g=u!==t.w,y=h!==t.h;return t.w=u,t.h=h,n.horizontal?{same:g,other:y}:{same:y,other:g}}function hD(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function dD(t,e){const n=e.maxPadding;function s(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return s(t?["left","right"]:["top","bottom"])}function bh(t,e,n,s){const a=[];let o,l,u,h,g,y;for(o=0,l=t.length,g=0;o<l;++o){u=t[o],h=u.box,h.update(u.width||e.w,u.height||e.h,dD(u.horizontal,e));const{same:_,other:S}=uD(e,n,u,s);g|=_&&a.length,y=y||S,h.fullSize||a.push(u)}return g&&bh(a,e,n,s)||y}function Jf(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function sw(t,e,n,s){const a=n.padding;let{x:o,y:l}=e;for(const u of t){const h=u.box,g=s[u.stack]||{placed:0,weight:1},y=u.stackWeight/g.weight||1;if(u.horizontal){const _=e.w*y,S=g.size||h.height;Gh(g.start)&&(l=g.start),h.fullSize?Jf(h,a.left,l,n.outerWidth-a.right-a.left,S):Jf(h,e.left+g.placed,l,_,S),g.start=l,g.placed+=_,l=h.bottom}else{const _=e.h*y,S=g.size||h.width;Gh(g.start)&&(o=g.start),h.fullSize?Jf(h,o,a.top,S,n.outerHeight-a.bottom-a.top):Jf(h,o,e.top+g.placed,S,_),g.start=o,g.placed+=_,o=h.right}}e.x=o,e.y=l}var zs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=Hs(t.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(n-a.height,0),u=cD(t.boxes),h=u.vertical,g=u.horizontal;xt(t.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const y=h.reduce((M,R)=>R.box.options&&R.box.options.display===!1?M:M+1,0)||1,_=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/y,hBoxMaxHeight:l/2}),S=Object.assign({},a);zC(S,Hs(s));const T=Object.assign({maxPadding:S,w:o,h:l,x:a.left,y:a.top},a),O=lD(h.concat(g),_);bh(u.fullSize,T,_,O),bh(h,T,_,O),bh(g,T,_,O)&&bh(h,T,_,O),hD(T),sw(u.leftAndTop,T,_,O),T.x+=T.w,T.y+=T.h,sw(u.rightAndBottom,T,_,O),t.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},xt(u.chartArea,M=>{const R=M.box;Object.assign(R,t.chartArea),R.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class VC{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class fD extends VC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const vm="$chartjs",mD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},iw=t=>t===null||t==="";function gD(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[vm]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",iw(a)){const o=Vx(t,"width");o!==void 0&&(t.width=o)}if(iw(s))if(t.style.height==="")t.height=t.width/(e||2);else{const o=Vx(t,"height");o!==void 0&&(t.height=o)}return t}const HC=mN?{passive:!0}:!1;function pD(t,e,n){t&&t.addEventListener(e,n,HC)}function yD(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,HC)}function vD(t,e){const n=mD[t.type]||t.type,{x:s,y:a}=Po(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function Bm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function bD(t,e,n){const s=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||Bm(u.addedNodes,s),l=l&&!Bm(u.removedNodes,s);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function _D(t,e,n){const s=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||Bm(u.removedNodes,s),l=l&&!Bm(u.addedNodes,s);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const Qh=new Map;let aw=0;function FC(){const t=window.devicePixelRatio;t!==aw&&(aw=t,Qh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function xD(t,e){Qh.size||window.addEventListener("resize",FC),Qh.set(t,e)}function wD(t){Qh.delete(t),Qh.size||window.removeEventListener("resize",FC)}function SD(t,e,n){const s=t.canvas,a=s&&B0(s);if(!a)return;const o=CC((u,h)=>{const g=a.clientWidth;n(u,h),g<a.clientWidth&&n()},window),l=new ResizeObserver(u=>{const h=u[0],g=h.contentRect.width,y=h.contentRect.height;g===0&&y===0||o(g,y)});return l.observe(a),xD(t,o),l}function Oy(t,e,n){n&&n.disconnect(),e==="resize"&&wD(t)}function CD(t,e,n){const s=t.canvas,a=CC(o=>{t.ctx!==null&&n(vD(o,t))},t);return pD(s,e,a),a}class TD extends VC{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(gD(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[vm])return!1;const s=n[vm].initial;["height","width"].forEach(o=>{const l=s[o];bt(l)?n.removeAttribute(o):n.setAttribute(o,l)});const a=s.style||{};return Object.keys(a).forEach(o=>{n.style[o]=a[o]}),n.width=n.width,delete n[vm],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),l={attach:bD,detach:_D,resize:SD}[n]||CD;a[n]=l(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:Oy,detach:Oy,resize:Oy}[n]||yD)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return fN(e,n,s,a)}isAttached(e){const n=e&&B0(e);return!!(n&&n.isConnected)}}function AD(t){return!L0()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?fD:TD}var hm;let Ha=(hm=class{constructor(){Ue(this,"x");Ue(this,"y");Ue(this,"active",!1);Ue(this,"options");Ue(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Wh(this.x)&&Wh(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(o=>{a[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),a}},Ue(hm,"defaults",{}),Ue(hm,"defaultRoutes"),hm);function OD(t,e){const n=t.options.ticks,s=jD(t),a=Math.min(n.maxTicksLimit||s,s),o=n.major.enabled?ED(e):[],l=o.length,u=o[0],h=o[l-1],g=[];if(l>a)return RD(e,g,o,l/a),g;const y=MD(o,e,a);if(l>0){let _,S;const T=l>1?Math.round((h-u)/(l-1)):null;for(Zf(e,g,y,bt(T)?0:u-T,u),_=0,S=l-1;_<S;_++)Zf(e,g,y,o[_],o[_+1]);return Zf(e,g,y,h,bt(T)?e.length:h+T),g}return Zf(e,g,y),g}function jD(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function MD(t,e,n){const s=kD(t),a=e.length/n;if(!s)return Math.max(a,1);const o=dk(s);for(let l=0,u=o.length-1;l<u;l++){const h=o[l];if(h>a)return h}return Math.max(a,1)}function ED(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function RD(t,e,n,s){let a=0,o=n[0],l;for(s=Math.ceil(s),l=0;l<t.length;l++)l===o&&(e.push(t[l]),a++,o=n[a*s])}function Zf(t,e,n,s,a){const o=at(s,0),l=Math.min(at(a,t.length),t.length);let u=0,h,g,y;for(n=Math.ceil(n),a&&(h=a-s,n=h/Math.floor(h/n)),y=o;y<0;)u++,y=Math.round(o+u*n);for(g=Math.max(o,0);g<l;g++)g===y&&(e.push(t[g]),u++,y=Math.round(o+u*n))}function kD(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const ND=t=>t==="left"?"right":t==="right"?"left":t,rw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,ow=(t,e)=>Math.min(e||t,t);function lw(t,e){const n=[],s=t.length/e,a=t.length;let o=0;for(;o<a;o+=s)n.push(t[Math.floor(o)]);return n}function DD(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),o=t._startPixel,l=t._endPixel,u=1e-6;let h=t.getPixelForTick(a),g;if(!(n&&(s===1?g=Math.max(h-o,l-h):e===0?g=(t.getPixelForTick(1)-h)/2:g=(h-t.getPixelForTick(a-1))/2,h+=a<e?g:-g,h<o-u||h>l+u)))return h}function PD(t,e){xt(t,n=>{const s=n.gc,a=s.length/2;let o;if(a>e){for(o=0;o<a;++o)delete n.data[s[o]];s.splice(0,a)}})}function uh(t){return t.drawTicks?t.tickLength:0}function cw(t,e){if(!t.display)return 0;const n=Xn(t.font,e),s=Hs(t.padding);return(xn(t.text)?t.text.length:1)*n.lineHeight+s.height}function LD(t,e){return Jo(t,{scale:e,type:"scale"})}function BD(t,e,n){return Jo(t,{tick:n,index:e,type:"tick"})}function UD(t,e,n){let s=O0(t);return(n&&e!=="right"||!n&&e==="right")&&(s=ND(s)),s}function ID(t,e,n,s){const{top:a,left:o,bottom:l,right:u,chart:h}=t,{chartArea:g,scales:y}=h;let _=0,S,T,O;const M=l-a,R=u-o;if(t.isHorizontal()){if(T=Gn(s,o,u),dt(n)){const N=Object.keys(n)[0],B=n[N];O=y[N].getPixelForValue(B)+M-e}else n==="center"?O=(g.bottom+g.top)/2+M-e:O=rw(t,n,e);S=u-o}else{if(dt(n)){const N=Object.keys(n)[0],B=n[N];T=y[N].getPixelForValue(B)-R+e}else n==="center"?T=(g.left+g.right)/2-R+e:T=rw(t,n,e);O=Gn(s,l,a),_=n==="left"?-wn:wn}return{titleX:T,titleY:O,maxWidth:S,rotation:_}}class Dc extends Ha{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=ki(e,Number.POSITIVE_INFINITY),n=ki(n,Number.NEGATIVE_INFINITY),s=ki(s,Number.POSITIVE_INFINITY),a=ki(a,Number.NEGATIVE_INFINITY),{min:ki(e,s),max:ki(n,a),minDefined:Vs(e),maxDefined:Vs(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:n,max:s};const u=this.getMatchingVisibleMetas();for(let h=0,g=u.length;h<g;++h)l=u[h].controller.getMinMax(this,e),a||(n=Math.min(n,l.min)),o||(s=Math.max(s,l.max));return n=o&&n>s?s:n,s=a&&n>s?n:s,{min:ki(n,ki(s,n)),max:ki(s,ki(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$k(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?lw(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=OD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Bt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,o;for(s=0,a=e.length;s<a;s++)o=e[s],o.label=Bt(n.callback,[o.value,s,e],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=ow(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,o=n.maxRotation;let l=a,u,h,g;if(!this._isVisible()||!n.display||a>=o||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const y=this._getLabelSizes(),_=y.widest.width,S=y.highest.height,T=Kn(this.chart.width-_,0,this.maxWidth);u=e.offset?this.maxWidth/s:T/(s-1),_+6>u&&(u=T/(s-(e.offset?.5:1)),h=this.maxHeight-uh(e.grid)-n.padding-cw(e.title,this.chart.options.font),g=Math.sqrt(_*_+S*S),l=pk(Math.min(Math.asin(Kn((y.highest.height+6)/u,-1,1)),Math.asin(Kn(h/g,-1,1))-Math.asin(Kn(S/g,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const h=cw(a,n.options.font);if(u?(e.width=this.maxWidth,e.height=uh(o)+h):(e.height=this.maxHeight,e.width=uh(o)+h),s.display&&this.ticks.length){const{first:g,last:y,widest:_,highest:S}=this._getLabelSizes(),T=s.padding*2,O=Na(this.labelRotation),M=Math.cos(O),R=Math.sin(O);if(u){const N=s.mirror?0:R*_.width+M*S.height;e.height=Math.min(this.maxHeight,e.height+N+T)}else{const N=s.mirror?0:M*_.width+R*S.height;e.width=Math.min(this.maxWidth,e.width+N+T)}this._calculatePadding(g,y,R,M)}}this._handleMargins(),u?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:o,padding:l},position:u}=this.options,h=this.labelRotation!==0,g=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,T=0;h?g?(S=a*e.width,T=s*n.height):(S=s*e.height,T=a*n.width):o==="start"?T=n.width:o==="end"?S=e.width:o!=="inner"&&(S=e.width/2,T=n.width/2),this.paddingLeft=Math.max((S-y+l)*this.width/(this.width-y),0),this.paddingRight=Math.max((T-_+l)*this.width/(this.width-_),0)}else{let y=n.height/2,_=e.height/2;o==="start"?(y=0,_=e.height):o==="end"&&(y=n.height,_=0),this.paddingTop=y+l,this.paddingBottom=_+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)bt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=lw(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:o}=this,l=[],u=[],h=Math.floor(n/ow(n,s));let g=0,y=0,_,S,T,O,M,R,N,B,z,P,U;for(_=0;_<n;_+=h){if(O=e[_].label,M=this._resolveTickFontOptions(_),a.font=R=M.string,N=o[R]=o[R]||{data:{},gc:[]},B=M.lineHeight,z=P=0,!bt(O)&&!xn(O))z=Lx(a,N.data,N.gc,z,O),P=B;else if(xn(O))for(S=0,T=O.length;S<T;++S)U=O[S],!bt(U)&&!xn(U)&&(z=Lx(a,N.data,N.gc,z,U),P+=B);l.push(z),u.push(P),g=Math.max(z,g),y=Math.max(P,y)}PD(o,n);const ee=l.indexOf(g),ae=u.indexOf(y),J=X=>({width:l[X]||0,height:u[X]||0});return{first:J(0),last:J(n-1),widest:J(ee),highest:J(ae),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return vk(this._alignToPixels?Ro(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=BD(this.getContext(),e,s))}return this.$context||(this.$context=LD(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Na(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,u=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*s>u*a?u/s:h/a:h*a<u*s?h/s:u/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:o,position:l,border:u}=a,h=o.offset,g=this.isHorizontal(),_=this.ticks.length+(h?1:0),S=uh(o),T=[],O=u.setContext(this.getContext()),M=O.display?O.width:0,R=M/2,N=function(q){return Ro(s,q,M)};let B,z,P,U,ee,ae,J,X,oe,A,Te,le;if(l==="top")B=N(this.bottom),ae=this.bottom-S,X=B-R,A=N(e.top)+R,le=e.bottom;else if(l==="bottom")B=N(this.top),A=e.top,le=N(e.bottom)-R,ae=B+R,X=this.top+S;else if(l==="left")B=N(this.right),ee=this.right-S,J=B-R,oe=N(e.left)+R,Te=e.right;else if(l==="right")B=N(this.left),oe=e.left,Te=N(e.right)-R,ee=B+R,J=this.left+S;else if(n==="x"){if(l==="center")B=N((e.top+e.bottom)/2+.5);else if(dt(l)){const q=Object.keys(l)[0],G=l[q];B=N(this.chart.scales[q].getPixelForValue(G))}A=e.top,le=e.bottom,ae=B+R,X=ae+S}else if(n==="y"){if(l==="center")B=N((e.left+e.right)/2);else if(dt(l)){const q=Object.keys(l)[0],G=l[q];B=N(this.chart.scales[q].getPixelForValue(G))}ee=B-R,J=ee-S,oe=e.left,Te=e.right}const $=at(a.ticks.maxTicksLimit,_),be=Math.max(1,Math.ceil(_/$));for(z=0;z<_;z+=be){const q=this.getContext(z),G=o.setContext(q),ce=u.setContext(q),_e=G.lineWidth,I=G.color,te=ce.dash||[],xe=ce.dashOffset,Ae=G.tickWidth,we=G.tickColor,Ne=G.tickBorderDash||[],Re=G.tickBorderDashOffset;P=DD(this,z,h),P!==void 0&&(U=Ro(s,P,_e),g?ee=J=oe=Te=U:ae=X=A=le=U,T.push({tx1:ee,ty1:ae,tx2:J,ty2:X,x1:oe,y1:A,x2:Te,y2:le,width:_e,color:I,borderDash:te,borderDashOffset:xe,tickWidth:Ae,tickColor:we,tickBorderDash:Ne,tickBorderDashOffset:Re}))}return this._ticksLength=_,this._borderValue=B,T}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:o}=s,l=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:g,padding:y,mirror:_}=o,S=uh(s.grid),T=S+y,O=_?-y:T,M=-Na(this.labelRotation),R=[];let N,B,z,P,U,ee,ae,J,X,oe,A,Te,le="middle";if(a==="top")ee=this.bottom-O,ae=this._getXAxisLabelAlignment();else if(a==="bottom")ee=this.top+O,ae=this._getXAxisLabelAlignment();else if(a==="left"){const be=this._getYAxisLabelAlignment(S);ae=be.textAlign,U=be.x}else if(a==="right"){const be=this._getYAxisLabelAlignment(S);ae=be.textAlign,U=be.x}else if(n==="x"){if(a==="center")ee=(e.top+e.bottom)/2+T;else if(dt(a)){const be=Object.keys(a)[0],q=a[be];ee=this.chart.scales[be].getPixelForValue(q)+T}ae=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")U=(e.left+e.right)/2-T;else if(dt(a)){const be=Object.keys(a)[0],q=a[be];U=this.chart.scales[be].getPixelForValue(q)}ae=this._getYAxisLabelAlignment(S).textAlign}n==="y"&&(h==="start"?le="top":h==="end"&&(le="bottom"));const $=this._getLabelSizes();for(N=0,B=u.length;N<B;++N){z=u[N],P=z.label;const be=o.setContext(this.getContext(N));J=this.getPixelForTick(N)+o.labelOffset,X=this._resolveTickFontOptions(N),oe=X.lineHeight,A=xn(P)?P.length:1;const q=A/2,G=be.color,ce=be.textStrokeColor,_e=be.textStrokeWidth;let I=ae;l?(U=J,ae==="inner"&&(N===B-1?I=this.options.reverse?"left":"right":N===0?I=this.options.reverse?"right":"left":I="center"),a==="top"?g==="near"||M!==0?Te=-A*oe+oe/2:g==="center"?Te=-$.highest.height/2-q*oe+oe:Te=-$.highest.height+oe/2:g==="near"||M!==0?Te=oe/2:g==="center"?Te=$.highest.height/2-q*oe:Te=$.highest.height-A*oe,_&&(Te*=-1),M!==0&&!be.showLabelBackdrop&&(U+=oe/2*Math.sin(M))):(ee=J,Te=(1-A)*oe/2);let te;if(be.showLabelBackdrop){const xe=Hs(be.backdropPadding),Ae=$.heights[N],we=$.widths[N];let Ne=Te-xe.top,Re=0-xe.left;switch(le){case"middle":Ne-=Ae/2;break;case"bottom":Ne-=Ae;break}switch(ae){case"center":Re-=we/2;break;case"right":Re-=we;break;case"inner":N===B-1?Re-=we:N>0&&(Re-=we/2);break}te={left:Re,top:Ne,width:we+xe.width,height:Ae+xe.height,color:be.backdropColor}}R.push({label:P,font:X,textOffset:Te,options:{rotation:M,color:G,strokeColor:ce,strokeWidth:_e,textAlign:I,textBaseline:le,translation:[U,ee],backdrop:te}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Na(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,h=l.widest.width;let g,y;return n==="left"?a?(y=this.right+o,s==="near"?g="left":s==="center"?(g="center",y+=h/2):(g="right",y+=h)):(y=this.right-u,s==="near"?g="right":s==="center"?(g="center",y-=h/2):(g="left",y=this.left)):n==="right"?a?(y=this.left+o,s==="near"?g="right":s==="center"?(g="center",y-=h/2):(g="left",y-=h)):(y=this.left+u,s==="near"?g="left":s==="center"?(g="center",y+=h/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const u=(h,g,y)=>{!y.width||!y.color||(s.save(),s.lineWidth=y.width,s.strokeStyle=y.color,s.setLineDash(y.borderDash||[]),s.lineDashOffset=y.borderDashOffset,s.beginPath(),s.moveTo(h.x,h.y),s.lineTo(g.x,g.y),s.stroke(),s.restore())};if(n.display)for(o=0,l=a.length;o<l;++o){const h=a[o];n.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),n.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,o=s.setContext(this.getContext()),l=s.display?o.width:0;if(!l)return;const u=a.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let g,y,_,S;this.isHorizontal()?(g=Ro(e,this.left,l)-l/2,y=Ro(e,this.right,u)+u/2,_=S=h):(_=Ro(e,this.top,l)-l/2,S=Ro(e,this.bottom,u)+u/2,g=y=h),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(g,_),n.lineTo(y,S),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&E0(s,a);const o=this.getLabelItems(e);for(const l of o){const u=l.options,h=l.font,g=l.label,y=l.textOffset;Xh(s,g,0,y,h,u)}a&&R0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const o=Xn(s.font),l=Hs(s.padding),u=s.align;let h=o.lineHeight/2;n==="bottom"||n==="center"||dt(n)?(h+=l.bottom,xn(s.text)&&(h+=o.lineHeight*(s.text.length-1))):h+=l.top;const{titleX:g,titleY:y,maxWidth:_,rotation:S}=ID(this,h,n,u);Xh(e,s.text,0,0,o,{color:s.color,maxWidth:_,rotation:S,textAlign:UD(u,n,a),textBaseline:"middle",translation:[g,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=at(e.grid&&e.grid.z,-1),a=at(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Dc.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let o,l;for(o=0,l=n.length;o<l;++o){const u=n[o];u[s]===this.id&&(!e||u.type===e)&&a.push(u)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Xn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class em{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;HD(n)&&(s=this.register(n));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,zD(e,l,s),this.override&&ln.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in ln[a]&&(delete ln[a][s],this.override&&delete Ko[s])}}function zD(t,e,n){const s=$h(Object.create(null),[n?ln.get(n):{},ln.get(e),t.defaults]);ln.set(e,s),t.defaultRoutes&&VD(e,t.defaultRoutes),t.descriptors&&ln.describe(e,t.descriptors)}function VD(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),o=[t].concat(s).join("."),l=e[n].split("."),u=l.pop(),h=l.join(".");ln.route(o,a,h,u)})}function HD(t){return"id"in t&&"defaults"in t}class FD{constructor(){this.controllers=new em($o,"datasets",!0),this.elements=new em(Ha,"elements"),this.plugins=new em(Object,"plugins"),this.scales=new em(Dc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const o=s||this._getRegistryForType(a);s||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):xt(a,l=>{const u=s||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,n,s){const a=T0(e);Bt(s["before"+a],[],s),n[e](s),Bt(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var Li=new FD;class qD{constructor(){this._init=[]}notify(e,n,s,a){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,n,s);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,n,s,a){a=a||{};for(const o of e){const l=o.plugin,u=l[s],h=[n,a,o.options];if(Bt(u,h,l)===!1&&a.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=at(s.options&&s.options.plugins,{}),o=$D(s);return a===!1&&!n?[]:WD(e,o,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(o,l)=>o.filter(u=>!l.some(h=>u.plugin.id===h.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function $D(t){const e={},n=[],s=Object.keys(Li.plugins.items);for(let o=0;o<s.length;o++)n.push(Li.getPlugin(s[o]));const a=t.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function GD(t,e){return!e&&t===!1?null:t===!0?{}:t}function WD(t,{plugins:e,localIds:n},s,a){const o=[],l=t.getContext();for(const u of e){const h=u.id,g=GD(s[h],a);g!==null&&o.push({plugin:u,options:YD(t.config,{plugin:u,local:n[h]},g,l)})}return o}function YD(t,{plugin:e,local:n},s,a){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(s,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hv(t,e){const n=ln.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function KD(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function XD(t,e){return t===e?"_index_":"_value_"}function uw(t){if(t==="x"||t==="y"||t==="r")return t}function QD(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function dv(t,...e){if(uw(t))return t;for(const n of e){const s=n.axis||QD(n.position)||t.length>1&&uw(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function JD(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return hw(t,"x",n[0])||hw(t,"y",n[0])}return{}}function ZD(t,e){const n=Ko[t.type]||{scales:{}},s=e.scales||{},a=hv(t.type,e),o=Object.create(null);return Object.keys(s).forEach(l=>{const u=s[l];if(!dt(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=dv(l,u,JD(l,t),ln.scales[u.type]),g=XD(h,a),y=n.scales||{};o[l]=Dh(Object.create(null),[{axis:h},u,y[h],y[g]])}),t.data.datasets.forEach(l=>{const u=l.type||t.type,h=l.indexAxis||hv(u,e),y=(Ko[u]||{}).scales||{};Object.keys(y).forEach(_=>{const S=KD(_,h),T=l[S+"AxisID"]||S;o[T]=o[T]||Object.create(null),Dh(o[T],[{axis:S},s[T],y[_]])})}),Object.keys(o).forEach(l=>{const u=o[l];Dh(u,[ln.scales[u.type],ln.scale])}),o}function qC(t){const e=t.options||(t.options={});e.plugins=at(e.plugins,{}),e.scales=ZD(t,e)}function $C(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function e6(t){return t=t||{},t.data=$C(t.data),qC(t),t}const dw=new Map,GC=new Set;function tm(t,e){let n=dw.get(t);return n||(n=e(),dw.set(t,n),GC.add(n)),n}const hh=(t,e,n)=>{const s=Yo(e,n);s!==void 0&&t.add(s)};class t6{constructor(e){this._config=e6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$C(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),qC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return tm(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return tm(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return tm(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return tm(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:o}=this,l=this._cachedScopes(e,s),u=l.get(n);if(u)return u;const h=new Set;n.forEach(y=>{e&&(h.add(e),y.forEach(_=>hh(h,e,_))),y.forEach(_=>hh(h,a,_)),y.forEach(_=>hh(h,Ko[o]||{},_)),y.forEach(_=>hh(h,ln,_)),y.forEach(_=>hh(h,cv,_))});const g=Array.from(h);return g.length===0&&g.push(Object.create(null)),GC.has(n)&&l.set(n,g),g}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ko[n]||{},ln.datasets[n]||{},{type:n},ln,cv]}resolveNamedOptions(e,n,s,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=fw(this._resolverCache,e,a);let h=l;if(s6(l,n)){o.$shared=!1,s=zr(s)?s():s;const g=this.createResolver(e,s,u);h=Tc(l,s,g)}for(const g of n)o[g]=h[g];return o}createResolver(e,n,s=[""],a){const{resolver:o}=fw(this._resolverCache,e,s);return dt(n)?Tc(o,n,void 0,a):o}}function fw(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let o=s.get(a);return o||(o={resolver:N0(e,n),subPrefixes:n.filter(u=>!u.toLowerCase().includes("hover"))},s.set(a,o)),o}const n6=t=>dt(t)&&Object.getOwnPropertyNames(t).some(e=>zr(t[e]));function s6(t,e){const{isScriptable:n,isIndexable:s}=jC(t);for(const a of e){const o=n(a),l=s(a),u=(l||o)&&t[a];if(o&&(zr(u)||n6(u))||l&&xn(u))return!0}return!1}var i6="4.4.9";const a6=["top","bottom","left","right","chartArea"];function mw(t,e){return t==="top"||t==="bottom"||a6.indexOf(t)===-1&&e==="x"}function gw(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function pw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Bt(n&&n.onComplete,[t],e)}function r6(t){const e=t.chart,n=e.options.animation;Bt(n&&n.onProgress,[t],e)}function WC(t){return L0()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const bm={},yw=t=>{const e=WC(t);return Object.values(bm).filter(n=>n.canvas===e).pop()};function o6(t,e,n){const s=Object.keys(t);for(const a of s){const o=+a;if(o>=e){const l=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=l)}}}function l6(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var Mr;let eg=(Mr=class{static register(...e){Li.add(...e),vw()}static unregister(...e){Li.remove(...e),vw()}constructor(e,n){const s=this.config=new t6(n),a=WC(e),o=yw(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||AD(a)),this.platform.updateConfig(s);const u=this.platform.acquireContext(a,l.aspectRatio),h=u&&u.canvas,g=h&&h.height,y=h&&h.width;if(this.id=sk(),this.ctx=u,this.canvas=h,this.width=y,this.height=g,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wk(_=>this.update(_),l.resizeDelay||0),this._dataChanges=[],bm[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}ja.listen(this,"complete",pw),ja.listen(this,"progress",r6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:o}=this;return bt(e)?n&&o?o:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Li}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bx(this.canvas,this.ctx),this}stop(){return ja.stop(this),this}resize(e,n){ja.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,n,o),u=s.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,zx(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),Bt(s.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};xt(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((l,u)=>(l[u]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const u=n[l],h=dv(l,u),g=h==="r",y=h==="x";return{options:u,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),xt(o,l=>{const u=l.options,h=u.id,g=dv(h,u),y=at(u.type,l.dtype);(u.position===void 0||mw(u.position,g)!==mw(l.dposition))&&(u.position=l.dposition),a[h]=!0;let _=null;if(h in s&&s[h].type===y)_=s[h];else{const S=Li.getScale(y);_=new S({id:h,type:y,ctx:this.ctx,chart:this}),s[_.id]=_}_.init(u,e)}),xt(a,(l,u)=>{l||delete s[u]}),xt(s,l=>{zs.configure(this,l,l.options),zs.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,o)=>a.index-o.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(gw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const o=n[s];let l=this.getDatasetMeta(s);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=u,l.indexAxis=o.indexAxis||hv(u,this.options),l.order=o.order||0,l.index=s,l.label=""+o.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const h=Li.getController(u),{datasetElementType:g,dataElementType:y}=ln.datasets[u];Object.assign(h,{dataElementType:Li.getElement(y),datasetElementType:g&&Li.getElement(g)}),l.controller=new h(this,s),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){xt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:_}=this.getDatasetMeta(g),S=!a&&o.indexOf(_)===-1;_.buildOrUpdateElements(S),l=Math.max(+_.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),a||xt(o,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(gw("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){xt(this.scales,e=>{zs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Ox(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:o}of n){const l=s==="_removeElements"?-o:o;o6(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=o=>new Set(e.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),a=s(0);for(let o=1;o<n;o++)if(!Ox(a,s(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],xt(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,zr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ja.has(this)?this.attached&&!ja.running(this)&&ja.start(this):(this.draw(),pw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];(!e||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=jN(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&E0(n,a),e.controller.draw(),a&&R0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Kh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const o=aD.modes[n];return typeof o=="function"?o(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(o=>o&&o._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Jo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);Gh(n)?(o.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),l.update(o,{visible:s}),this.update(u=>u.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ja.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bx(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete bm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},a=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};xt(this.options.events,o=>s(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(h,g)=>{n.addEventListener(this,h,g),e[h]=g},a=(h,g)=>{e[h]&&(n.removeEventListener(this,h,g),delete e[h])},o=(h,g)=>{this.canvas&&this.resize(h,g)};let l;const u=()=>{a("attach",u),this.attached=!0,this.resize(),s("resize",o),s("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),s("attach",u)},n.isAttached(this.canvas)?u():l()}unbindEvents(){xt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},xt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let o,l,u,h;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){l=e[u];const g=l&&this.getDatasetMeta(l.datasetIndex).controller;g&&g[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!km(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,o=(h,g)=>h.filter(y=>!g.some(_=>y.datasetIndex===_.datasetIndex&&y.index===_.index)),l=o(n,e),u=s?e:o(e,n);l.length&&this.updateHoverStyle(l,a.mode,!1),u.length&&a.mode&&this.updateHoverStyle(u,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const o=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(o||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:o}=this,l=n,u=this._getActiveElements(e,a,s,l),h=ck(e),g=l6(e,this._lastEvent,s,h);s&&(this._lastEvent=null,Bt(o.onHover,[e,u,this],this),h&&Bt(o.onClick,[e,u,this],this));const y=!km(u,a);return(y||n)&&(this._active=u,this._updateHoverStyles(u,a,n)),this._lastEvent=g,y}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}},Ue(Mr,"defaults",ln),Ue(Mr,"instances",bm),Ue(Mr,"overrides",Ko),Ue(Mr,"registry",Li),Ue(Mr,"version",i6),Ue(Mr,"getChart",yw),Mr);function vw(){return xt(eg.instances,t=>t._plugins.invalidate())}function c6(t,e,n){const{startAngle:s,pixelMargin:a,x:o,y:l,outerRadius:u,innerRadius:h}=e;let g=a/u;t.beginPath(),t.arc(o,l,u,s-g,n+g),h>a?(g=a/h,t.arc(o,l,h,n+g,s-g,!0)):t.arc(o,l,a,n+wn,s-wn),t.closePath(),t.clip()}function u6(t){return k0(t,["outerStart","outerEnd","innerStart","innerEnd"])}function h6(t,e,n,s){const a=u6(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,s*e/2),u=h=>{const g=(n-Math.min(o,h))*s/2;return Kn(h,0,Math.min(o,g))};return{outerStart:u(a.outerStart),outerEnd:u(a.outerEnd),innerStart:Kn(a.innerStart,0,l),innerEnd:Kn(a.innerEnd,0,l)}}function ic(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function Um(t,e,n,s,a,o){const{x:l,y:u,startAngle:h,pixelMargin:g,innerRadius:y}=e,_=Math.max(e.outerRadius+s+n-g,0),S=y>0?y+s+n+g:0;let T=0;const O=a-h;if(s){const be=y>0?y-s:0,q=_>0?_-s:0,G=(be+q)/2,ce=G!==0?O*G/(G+s):O;T=(O-ce)/2}const M=Math.max(.001,O*_-n/nn)/_,R=(O-M)/2,N=h+R+T,B=a-R-T,{outerStart:z,outerEnd:P,innerStart:U,innerEnd:ee}=h6(e,S,_,B-N),ae=_-z,J=_-P,X=N+z/ae,oe=B-P/J,A=S+U,Te=S+ee,le=N+U/A,$=B-ee/Te;if(t.beginPath(),o){const be=(X+oe)/2;if(t.arc(l,u,_,X,be),t.arc(l,u,_,be,oe),P>0){const _e=ic(J,oe,l,u);t.arc(_e.x,_e.y,P,oe,B+wn)}const q=ic(Te,B,l,u);if(t.lineTo(q.x,q.y),ee>0){const _e=ic(Te,$,l,u);t.arc(_e.x,_e.y,ee,B+wn,$+Math.PI)}const G=(B-ee/S+(N+U/S))/2;if(t.arc(l,u,S,B-ee/S,G,!0),t.arc(l,u,S,G,N+U/S,!0),U>0){const _e=ic(A,le,l,u);t.arc(_e.x,_e.y,U,le+Math.PI,N-wn)}const ce=ic(ae,N,l,u);if(t.lineTo(ce.x,ce.y),z>0){const _e=ic(ae,X,l,u);t.arc(_e.x,_e.y,z,N-wn,X)}}else{t.moveTo(l,u);const be=Math.cos(X)*_+l,q=Math.sin(X)*_+u;t.lineTo(be,q);const G=Math.cos(oe)*_+l,ce=Math.sin(oe)*_+u;t.lineTo(G,ce)}t.closePath()}function d6(t,e,n,s,a){const{fullCircles:o,startAngle:l,circumference:u}=e;let h=e.endAngle;if(o){Um(t,e,n,s,h,a);for(let g=0;g<o;++g)t.fill();isNaN(u)||(h=l+(u%tn||tn))}return Um(t,e,n,s,h,a),t.fill(),h}function f6(t,e,n,s,a){const{fullCircles:o,startAngle:l,circumference:u,options:h}=e,{borderWidth:g,borderJoinStyle:y,borderDash:_,borderDashOffset:S}=h,T=h.borderAlign==="inner";if(!g)return;t.setLineDash(_||[]),t.lineDashOffset=S,T?(t.lineWidth=g*2,t.lineJoin=y||"round"):(t.lineWidth=g,t.lineJoin=y||"bevel");let O=e.endAngle;if(o){Um(t,e,n,s,O,a);for(let M=0;M<o;++M)t.stroke();isNaN(u)||(O=l+(u%tn||tn))}T&&c6(t,e,O),o||(Um(t,e,n,s,O,a),t.stroke())}class _h extends Ha{constructor(n){super();Ue(this,"circumference");Ue(this,"endAngle");Ue(this,"fullCircles");Ue(this,"innerRadius");Ue(this,"outerRadius");Ue(this,"pixelMargin");Ue(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,a){const o=this.getProps(["x","y"],a),{angle:l,distance:u}=_C(o,{x:n,y:s}),{startAngle:h,endAngle:g,innerRadius:y,outerRadius:_,circumference:S}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),T=(this.options.spacing+this.options.borderWidth)/2,O=at(S,g-h),M=Yh(l,h,g)&&h!==g,R=O>=tn||M,N=Br(u,y+T,_+T);return R&&N}getCenterPoint(n){const{x:s,y:a,startAngle:o,endAngle:l,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:g,spacing:y}=this.options,_=(o+l)/2,S=(u+h+y+g)/2;return{x:s+Math.cos(_)*S,y:a+Math.sin(_)*S}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:a}=this,o=(s.offset||0)/4,l=(s.spacing||0)/2,u=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=a>tn?Math.floor(a/tn):0,a===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const h=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(h)*o,Math.sin(h)*o);const g=1-Math.sin(Math.min(nn,a||0)),y=o*g;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,d6(n,this,y,l,u),f6(n,this,y,l,u),n.restore()}}Ue(_h,"id","arc"),Ue(_h,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ue(_h,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ue(_h,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function YC(t,e,n=e){t.lineCap=at(n.borderCapStyle,e.borderCapStyle),t.setLineDash(at(n.borderDash,e.borderDash)),t.lineDashOffset=at(n.borderDashOffset,e.borderDashOffset),t.lineJoin=at(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=at(n.borderWidth,e.borderWidth),t.strokeStyle=at(n.borderColor,e.borderColor)}function m6(t,e,n){t.lineTo(n.x,n.y)}function g6(t){return t.stepped?Lk:t.tension||t.cubicInterpolationMode==="monotone"?Bk:m6}function KC(t,e,n={}){const s=t.length,{start:a=0,end:o=s-1}=n,{start:l,end:u}=e,h=Math.max(a,l),g=Math.min(o,u),y=a<l&&o<l||a>u&&o>u;return{count:s,start:h,loop:e.loop,ilen:g<h&&!y?s+g-h:g-h}}function p6(t,e,n,s){const{points:a,options:o}=e,{count:l,start:u,loop:h,ilen:g}=KC(a,n,s),y=g6(o);let{move:_=!0,reverse:S}=s||{},T,O,M;for(T=0;T<=g;++T)O=a[(u+(S?g-T:T))%l],!O.skip&&(_?(t.moveTo(O.x,O.y),_=!1):y(t,M,O,S,o.stepped),M=O);return h&&(O=a[(u+(S?g:0))%l],y(t,M,O,S,o.stepped)),!!h}function y6(t,e,n,s){const a=e.points,{count:o,start:l,ilen:u}=KC(a,n,s),{move:h=!0,reverse:g}=s||{};let y=0,_=0,S,T,O,M,R,N;const B=P=>(l+(g?u-P:P))%o,z=()=>{M!==R&&(t.lineTo(y,R),t.lineTo(y,M),t.lineTo(y,N))};for(h&&(T=a[B(0)],t.moveTo(T.x,T.y)),S=0;S<=u;++S){if(T=a[B(S)],T.skip)continue;const P=T.x,U=T.y,ee=P|0;ee===O?(U<M?M=U:U>R&&(R=U),y=(_*y+P)/++_):(z(),t.lineTo(P,U),O=ee,_=0,M=R=U),N=U}z()}function fv(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?y6:p6}function v6(t){return t.stepped?gN:t.tension||t.cubicInterpolationMode==="monotone"?pN:Lo}function b6(t,e,n,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,s)&&a.closePath()),YC(t,e.options),t.stroke(a)}function _6(t,e,n,s){const{segments:a,options:o}=e,l=fv(e);for(const u of a)YC(t,o,u.style),t.beginPath(),l(t,e,u,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const x6=typeof Path2D=="function";function w6(t,e,n,s){x6&&!e.options.segment?b6(t,e,n,s):_6(t,e,n,s)}class xh extends Ha{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;oN(this._points,s,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=CN(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,a=e[n],o=this.points,l=xN(this,{property:n,start:a,end:a});if(!l.length)return;const u=[],h=v6(s);let g,y;for(g=0,y=l.length;g<y;++g){const{start:_,end:S}=l[g],T=o[_],O=o[S];if(T===O){u.push(T);continue}const M=Math.abs((a-T[n])/(O[n]-T[n])),R=h(T,O,M,s.stepped);R[n]=e[n],u.push(R)}return u.length===1?u[0]:u}pathSegment(e,n,s){return fv(this)(e,this,n,s)}path(e,n,s){const a=this.segments,o=fv(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const u of a)l&=o(e,this,u,{start:n,end:n+s-1});return!!l}draw(e,n,s,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),w6(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ue(xh,"id","line"),Ue(xh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ue(xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ue(xh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bw(t,e,n,s){const a=t.options,{[n]:o}=t.getProps([n],s);return Math.abs(e-o)<a.radius+a.hitRadius}class _m extends Ha{constructor(n){super();Ue(this,"parsed");Ue(this,"skip");Ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,a){const o=this.options,{x:l,y:u}=this.getProps(["x","y"],a);return Math.pow(n-l,2)+Math.pow(s-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(n,s){return bw(this,n,"x",s)}inYRange(n,s){return bw(this,n,"y",s)}getCenterPoint(n){const{x:s,y:a}=this.getProps(["x","y"],n);return{x:s,y:a}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const a=s&&n.borderWidth||0;return(s+a)*2}draw(n,s){const a=this.options;this.skip||a.radius<.1||!Kh(this,s,this.size(a)/2)||(n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.fillStyle=a.backgroundColor,uv(n,a,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ue(_m,"id","point"),Ue(_m,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ue(_m,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function XC(t,e){const{x:n,y:s,base:a,width:o,height:l}=t.getProps(["x","y","base","width","height"],e);let u,h,g,y,_;return t.horizontal?(_=l/2,u=Math.min(n,a),h=Math.max(n,a),g=s-_,y=s+_):(_=o/2,u=n-_,h=n+_,g=Math.min(s,a),y=Math.max(s,a)),{left:u,top:g,right:h,bottom:y}}function Ur(t,e,n,s){return t?0:Kn(e,n,s)}function S6(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,o=OC(s);return{t:Ur(a.top,o.top,0,n),r:Ur(a.right,o.right,0,e),b:Ur(a.bottom,o.bottom,0,n),l:Ur(a.left,o.left,0,e)}}function C6(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,o=bc(a),l=Math.min(e,n),u=t.borderSkipped,h=s||dt(a);return{topLeft:Ur(!h||u.top||u.left,o.topLeft,0,l),topRight:Ur(!h||u.top||u.right,o.topRight,0,l),bottomLeft:Ur(!h||u.bottom||u.left,o.bottomLeft,0,l),bottomRight:Ur(!h||u.bottom||u.right,o.bottomRight,0,l)}}function T6(t){const e=XC(t),n=e.right-e.left,s=e.bottom-e.top,a=S6(t,n/2,s/2),o=C6(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:o},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function jy(t,e,n,s){const a=e===null,o=n===null,u=t&&!(a&&o)&&XC(t,s);return u&&(a||Br(e,u.left,u.right))&&(o||Br(n,u.top,u.bottom))}function A6(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function O6(t,e){t.rect(e.x,e.y,e.w,e.h)}function My(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-s,l=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+o,h:t.h+l,radius:t.radius}}class xm extends Ha{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:o,outer:l}=T6(this),u=A6(l.radius)?Pm:O6;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),u(e,My(l,n,o)),e.clip(),u(e,My(o,-n,l)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),u(e,My(o,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return jy(this,e,n,s)}inXRange(e,n){return jy(this,e,null,n)}inYRange(e,n){return jy(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+a)/2:n,y:o?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ue(xm,"id","bar"),Ue(xm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ue(xm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const _w=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},j6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class xw extends Ha{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Bt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Xn(s.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=_w(s,o);let g,y;n.font=a.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(l,o,u,h)+10):(y=this.maxHeight,g=this._fitCols(l,a,u,h)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],g=this.lineWidths=[0],y=a+u;let _=e;o.textAlign="left",o.textBaseline="middle";let S=-1,T=-y;return this.legendItems.forEach((O,M)=>{const R=s+n/2+o.measureText(O.text).width;(M===0||g[g.length-1]+R+2*u>l)&&(_+=y,g[g.length-(M>0?0:1)]=0,T+=y,S++),h[M]={left:0,top:T,row:S,width:R,height:a},g[g.length-1]+=R+u}),_}_fitCols(e,n,s,a){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],g=this.columnSizes=[],y=l-e;let _=u,S=0,T=0,O=0,M=0;return this.legendItems.forEach((R,N)=>{const{itemWidth:B,itemHeight:z}=M6(s,n,o,R,a);N>0&&T+z+2*u>y&&(_+=S+u,g.push({width:S,height:T}),O+=S+u,M++,S=T=0),h[N]={left:O,top:T,col:M,width:B,height:z},S=Math.max(S,B),T+=z+u}),_+=S,g.push({width:S,height:T}),_}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:o}}=this,l=_c(o,this.left,this.width);if(this.isHorizontal()){let u=0,h=Gn(s,this.left+a,this.right-this.lineWidths[u]);for(const g of n)u!==g.row&&(u=g.row,h=Gn(s,this.left+a,this.right-this.lineWidths[u])),g.top+=this.top+e+a,g.left=l.leftForLtr(l.x(h),g.width),h+=g.width+a}else{let u=0,h=Gn(s,this.top+e+a,this.bottom-this.columnSizes[u].height);for(const g of n)g.col!==u&&(u=g.col,h=Gn(s,this.top+e+a,this.bottom-this.columnSizes[u].height)),g.top=h,g.left+=this.left+a,g.left=l.leftForLtr(l.x(g.left),g.width),h+=g.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;E0(e,this),this._draw(),R0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:o,labels:l}=e,u=ln.color,h=_c(e.rtl,this.left,this.width),g=Xn(l.font),{padding:y}=l,_=g.size,S=_/2;let T;this.drawTitle(),a.textAlign=h.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=g.string;const{boxWidth:O,boxHeight:M,itemHeight:R}=_w(l,_),N=function(ee,ae,J){if(isNaN(O)||O<=0||isNaN(M)||M<0)return;a.save();const X=at(J.lineWidth,1);if(a.fillStyle=at(J.fillStyle,u),a.lineCap=at(J.lineCap,"butt"),a.lineDashOffset=at(J.lineDashOffset,0),a.lineJoin=at(J.lineJoin,"miter"),a.lineWidth=X,a.strokeStyle=at(J.strokeStyle,u),a.setLineDash(at(J.lineDash,[])),l.usePointStyle){const oe={radius:M*Math.SQRT2/2,pointStyle:J.pointStyle,rotation:J.rotation,borderWidth:X},A=h.xPlus(ee,O/2),Te=ae+S;AC(a,oe,A,Te,l.pointStyleWidth&&O)}else{const oe=ae+Math.max((_-M)/2,0),A=h.leftForLtr(ee,O),Te=bc(J.borderRadius);a.beginPath(),Object.values(Te).some(le=>le!==0)?Pm(a,{x:A,y:oe,w:O,h:M,radius:Te}):a.rect(A,oe,O,M),a.fill(),X!==0&&a.stroke()}a.restore()},B=function(ee,ae,J){Xh(a,J.text,ee,ae+R/2,g,{strikethrough:J.hidden,textAlign:h.textAlign(J.textAlign)})},z=this.isHorizontal(),P=this._computeTitleHeight();z?T={x:Gn(o,this.left+y,this.right-s[0]),y:this.top+y+P,line:0}:T={x:this.left+y,y:Gn(o,this.top+P+y,this.bottom-n[0].height),line:0},NC(this.ctx,e.textDirection);const U=R+y;this.legendItems.forEach((ee,ae)=>{a.strokeStyle=ee.fontColor,a.fillStyle=ee.fontColor;const J=a.measureText(ee.text).width,X=h.textAlign(ee.textAlign||(ee.textAlign=l.textAlign)),oe=O+S+J;let A=T.x,Te=T.y;h.setWidth(this.width),z?ae>0&&A+oe+y>this.right&&(Te=T.y+=U,T.line++,A=T.x=Gn(o,this.left+y,this.right-s[T.line])):ae>0&&Te+U>this.bottom&&(A=T.x=A+n[T.line].width+y,T.line++,Te=T.y=Gn(o,this.top+P+y,this.bottom-n[T.line].height));const le=h.x(A);if(N(le,Te,ee),A=Sk(X,A+O+S,z?A+oe:this.right,e.rtl),B(h.x(A),Te,ee),z)T.x+=oe+y;else if(typeof ee.text!="string"){const $=g.lineHeight;T.y+=QC(ee,$)+y}else T.y+=U}),DC(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Xn(n.font),a=Hs(n.padding);if(!n.display)return;const o=_c(e.rtl,this.left,this.width),l=this.ctx,u=n.position,h=s.size/2,g=a.top+h;let y,_=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),y=this.top+g,_=Gn(e.align,_,this.right-S);else{const O=this.columnSizes.reduce((M,R)=>Math.max(M,R.height),0);y=g+Gn(e.align,this.top,this.bottom-O-e.labels.padding-this._computeTitleHeight())}const T=Gn(u,_,_+S);l.textAlign=o.textAlign(O0(u)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,Xh(l,n.text,T,y,s)}_computeTitleHeight(){const e=this.options.title,n=Xn(e.font),s=Hs(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,o;if(Br(e,this.left,this.right)&&Br(n,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(a=o[s],Br(e,a.left,a.left+a.width)&&Br(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!k6(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=j6(a,s);a&&!o&&Bt(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!o&&Bt(n.onHover,[e,s,this],this)}else s&&Bt(n.onClick,[e,s,this],this)}}function M6(t,e,n,s,a){const o=E6(s,t,e,n),l=R6(a,s,e.lineHeight);return{itemWidth:o,itemHeight:l}}function E6(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+s.measureText(a).width}function R6(t,e,n){let s=t;return typeof e.text!="string"&&(s=QC(e,n)),s}function QC(t,e){const n=t.text?t.text.length:0;return e*n}function k6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var N6={id:"legend",_element:xw,start(t,e,n){const s=t.legend=new xw({ctx:t.ctx,options:n,chart:t});zs.configure(t,s,n),zs.addBox(t,s)},stop(t){zs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;zs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const g=h.controller.getStyle(n?0:void 0),y=Hs(g.borderWidth);return{text:e[h.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:s||g.pointStyle,rotation:g.rotation,textAlign:a||g.textAlign,borderRadius:l&&(u||g.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class JC extends Ha{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=xn(s.text)?s.text.length:1;this._padding=Hs(s.padding);const o=a*Xn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:o,options:l}=this,u=l.align;let h=0,g,y,_;return this.isHorizontal()?(y=Gn(u,s,o),_=n+e,g=o-s):(l.position==="left"?(y=s+e,_=Gn(u,a,n),h=nn*-.5):(y=o-e,_=Gn(u,n,a),h=nn*.5),g=a-n),{titleX:y,titleY:_,maxWidth:g,rotation:h}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Xn(n.font),o=s.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:h,rotation:g}=this._drawArgs(o);Xh(e,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:g,textAlign:O0(n.align),textBaseline:"middle",translation:[l,u]})}}function D6(t,e){const n=new JC({ctx:t.ctx,options:e,chart:t});zs.configure(t,n,e),zs.addBox(t,n),t.titleBlock=n}var P6={id:"title",_element:JC,start(t,e,n){D6(t,n)},stop(t){const e=t.titleBlock;zs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;zs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wh={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,o=0;for(e=0,n=t.length;e<n;++e){const u=t[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();s.add(h.x),a+=h.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((u,h)=>u+h)/s.size,y:a/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=t.length;o<l;++o){const h=t[o].element;if(h&&h.hasValue()){const g=h.getCenterPoint(),y=lv(e,g);y<a&&(a=y,u=h)}}if(u){const h=u.tooltipPosition();n=h.x,s=h.y}return{x:n,y:s}}};function Pi(t,e){return e&&(xn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ma(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function L6(t,e){const{element:n,datasetIndex:s,index:a}=e,o=t.getDatasetMeta(s).controller,{label:l,value:u}=o.getLabelAndValue(a);return{chart:t,label:l,parsed:o.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:u,dataset:o.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function ww(t,e){const n=t.chart.ctx,{body:s,footer:a,title:o}=t,{boxWidth:l,boxHeight:u}=e,h=Xn(e.bodyFont),g=Xn(e.titleFont),y=Xn(e.footerFont),_=o.length,S=a.length,T=s.length,O=Hs(e.padding);let M=O.height,R=0,N=s.reduce((P,U)=>P+U.before.length+U.lines.length+U.after.length,0);if(N+=t.beforeBody.length+t.afterBody.length,_&&(M+=_*g.lineHeight+(_-1)*e.titleSpacing+e.titleMarginBottom),N){const P=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;M+=T*P+(N-T)*h.lineHeight+(N-1)*e.bodySpacing}S&&(M+=e.footerMarginTop+S*y.lineHeight+(S-1)*e.footerSpacing);let B=0;const z=function(P){R=Math.max(R,n.measureText(P).width+B)};return n.save(),n.font=g.string,xt(t.title,z),n.font=h.string,xt(t.beforeBody.concat(t.afterBody),z),B=e.displayColors?l+2+e.boxPadding:0,xt(s,P=>{xt(P.before,z),xt(P.lines,z),xt(P.after,z)}),B=0,n.font=y.string,xt(t.footer,z),n.restore(),R+=O.width,{width:R,height:M}}function B6(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function U6(t,e,n,s){const{x:a,width:o}=s,l=n.caretSize+n.caretPadding;if(t==="left"&&a+o+l>e.width||t==="right"&&a-o-l<0)return!0}function I6(t,e,n,s){const{x:a,width:o}=n,{width:l,chartArea:{left:u,right:h}}=t;let g="center";return s==="center"?g=a<=(u+h)/2?"left":"right":a<=o/2?g="left":a>=l-o/2&&(g="right"),U6(g,t,e,n)&&(g="center"),g}function Sw(t,e,n){const s=n.yAlign||e.yAlign||B6(t,n);return{xAlign:n.xAlign||e.xAlign||I6(t,e,n,s),yAlign:s}}function z6(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function V6(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function Cw(t,e,n,s){const{caretSize:a,caretPadding:o,cornerRadius:l}=t,{xAlign:u,yAlign:h}=n,g=a+o,{topLeft:y,topRight:_,bottomLeft:S,bottomRight:T}=bc(l);let O=z6(e,u);const M=V6(e,h,g);return h==="center"?u==="left"?O+=g:u==="right"&&(O-=g):u==="left"?O-=Math.max(y,S)+a:u==="right"&&(O+=Math.max(_,T)+a),{x:Kn(O,0,s.width-e.width),y:Kn(M,0,s.height-e.height)}}function nm(t,e,n){const s=Hs(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function Tw(t){return Pi([],Ma(t))}function H6(t,e,n){return Jo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Aw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ZC={beforeTitle:Oa,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Oa,beforeBody:Oa,beforeLabel:Oa,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Oa,afterBody:Oa,beforeFooter:Oa,footer:Oa,afterFooter:Oa};function gs(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?ZC[e].call(n,s):a}class mv extends Ha{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,o=new LC(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=H6(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=gs(s,"beforeTitle",this,e),o=gs(s,"title",this,e),l=gs(s,"afterTitle",this,e);let u=[];return u=Pi(u,Ma(a)),u=Pi(u,Ma(o)),u=Pi(u,Ma(l)),u}getBeforeBody(e,n){return Tw(gs(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return xt(e,o=>{const l={before:[],lines:[],after:[]},u=Aw(s,o);Pi(l.before,Ma(gs(u,"beforeLabel",this,o))),Pi(l.lines,gs(u,"label",this,o)),Pi(l.after,Ma(gs(u,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,n){return Tw(gs(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=gs(s,"beforeFooter",this,e),o=gs(s,"footer",this,e),l=gs(s,"afterFooter",this,e);let u=[];return u=Pi(u,Ma(a)),u=Pi(u,Ma(o)),u=Pi(u,Ma(l)),u}_createItems(e){const n=this._active,s=this.chart.data,a=[],o=[],l=[];let u=[],h,g;for(h=0,g=n.length;h<g;++h)u.push(L6(this.chart,n[h]));return e.filter&&(u=u.filter((y,_,S)=>e.filter(y,_,S,s))),e.itemSort&&(u=u.sort((y,_)=>e.itemSort(y,_,s))),xt(u,y=>{const _=Aw(e.callbacks,y);a.push(gs(_,"labelColor",this,y)),o.push(gs(_,"labelPointStyle",this,y)),l.push(gs(_,"labelTextColor",this,y))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const u=wh[s.position].call(this,a,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const h=this._size=ww(this,s),g=Object.assign({},u,h),y=Sw(this.chart,s,g),_=Cw(s,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:_.x,y:_.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const o=this.getCaretPosition(e,s,a);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:u}=s,{topLeft:h,topRight:g,bottomLeft:y,bottomRight:_}=bc(u),{x:S,y:T}=e,{width:O,height:M}=n;let R,N,B,z,P,U;return o==="center"?(P=T+M/2,a==="left"?(R=S,N=R-l,z=P+l,U=P-l):(R=S+O,N=R+l,z=P-l,U=P+l),B=R):(a==="left"?N=S+Math.max(h,y)+l:a==="right"?N=S+O-Math.max(g,_)-l:N=this.caretX,o==="top"?(z=T,P=z-l,R=N-l,B=N+l):(z=T+M,P=z+l,R=N+l,B=N-l),U=z),{x1:R,x2:N,x3:B,y1:z,y2:P,y3:U}}drawTitle(e,n,s){const a=this.title,o=a.length;let l,u,h;if(o){const g=_c(s.rtl,this.x,this.width);for(e.x=nm(this,s.titleAlign,s),n.textAlign=g.textAlign(s.titleAlign),n.textBaseline="middle",l=Xn(s.titleFont),u=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,h=0;h<o;++h)n.fillText(a[h],g.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,h+1===o&&(e.y+=s.titleMarginBottom-u)}}_drawColorBox(e,n,s,a,o){const l=this.labelColors[s],u=this.labelPointStyles[s],{boxHeight:h,boxWidth:g}=o,y=Xn(o.bodyFont),_=nm(this,"left",o),S=a.x(_),T=h<y.lineHeight?(y.lineHeight-h)/2:0,O=n.y+T;if(o.usePointStyle){const M={radius:Math.min(g,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},R=a.leftForLtr(S,g)+g/2,N=O+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,uv(e,M,R,N),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,uv(e,M,R,N)}else{e.lineWidth=dt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const M=a.leftForLtr(S,g),R=a.leftForLtr(a.xPlus(S,1),g-2),N=bc(l.borderRadius);Object.values(N).some(B=>B!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Pm(e,{x:M,y:O,w:g,h,radius:N}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Pm(e,{x:R,y:O+1,w:g-2,h:h-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(M,O,g,h),e.strokeRect(M,O,g,h),e.fillStyle=l.backgroundColor,e.fillRect(R,O+1,g-2,h-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:h,boxWidth:g,boxPadding:y}=s,_=Xn(s.bodyFont);let S=_.lineHeight,T=0;const O=_c(s.rtl,this.x,this.width),M=function(J){n.fillText(J,O.x(e.x+T),e.y+S/2),e.y+=S+o},R=O.textAlign(l);let N,B,z,P,U,ee,ae;for(n.textAlign=l,n.textBaseline="middle",n.font=_.string,e.x=nm(this,R,s),n.fillStyle=s.bodyColor,xt(this.beforeBody,M),T=u&&R!=="right"?l==="center"?g/2+y:g+2+y:0,P=0,ee=a.length;P<ee;++P){for(N=a[P],B=this.labelTextColors[P],n.fillStyle=B,xt(N.before,M),z=N.lines,u&&z.length&&(this._drawColorBox(n,e,P,O,s),S=Math.max(_.lineHeight,h)),U=0,ae=z.length;U<ae;++U)M(z[U]),S=_.lineHeight;xt(N.after,M)}T=0,S=_.lineHeight,xt(this.afterBody,M),e.y-=o}drawFooter(e,n,s){const a=this.footer,o=a.length;let l,u;if(o){const h=_c(s.rtl,this.x,this.width);for(e.x=nm(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=h.textAlign(s.footerAlign),n.textBaseline="middle",l=Xn(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(a[u],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:o,yAlign:l}=this,{x:u,y:h}=e,{width:g,height:y}=s,{topLeft:_,topRight:S,bottomLeft:T,bottomRight:O}=bc(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(u+_,h),l==="top"&&this.drawCaret(e,n,s,a),n.lineTo(u+g-S,h),n.quadraticCurveTo(u+g,h,u+g,h+S),l==="center"&&o==="right"&&this.drawCaret(e,n,s,a),n.lineTo(u+g,h+y-O),n.quadraticCurveTo(u+g,h+y,u+g-O,h+y),l==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(u+T,h+y),n.quadraticCurveTo(u,h+y,u,h+y-T),l==="center"&&o==="left"&&this.drawCaret(e,n,s,a),n.lineTo(u,h+_),n.quadraticCurveTo(u,h,u+_,h),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,o=s&&s.y;if(a||o){const l=wh[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=ww(this,e),h=Object.assign({},l,this._size),g=Sw(n,e,h),y=Cw(e,h,g,n);(a._to!==y.x||o._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=Hs(n.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&u&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,a,n),NC(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),DC(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:u,index:h})=>{const g=this.chart.getDatasetMeta(u);if(!g)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:g.data[h],index:h}}),o=!km(s,a),l=this._positionChanged(a,n);(o||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,s),u=this._positionChanged(l,e),h=n||!km(l,o)||u;return h&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),h}_getActiveElements(e,n,s,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:s,caretY:a,options:o}=this,l=wh[o.position].call(this,e,n);return l!==!1&&(s!==l.x||a!==l.y)}}Ue(mv,"positioners",wh);var F6={id:"tooltip",_element:mv,positioners:wh,afterInit(t,e,n){n&&(t.tooltip=new mv({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ZC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const q6=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function $6(t,e,n,s){const a=t.indexOf(e);if(a===-1)return q6(t,e,n,s);const o=t.lastIndexOf(e);return a!==o?n:a}const G6=(t,e)=>t===null?null:Kn(Math.round(t),0,e);function Ow(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class gv extends Dc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:o}of n)s[a]===o&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:$6(s,e,at(n,e),this._addedLabels),G6(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=e;l<=n;l++)a.push({value:l});return a}getLabelForValue(e){return Ow.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ue(gv,"id","category"),Ue(gv,"defaults",{ticks:{callback:Ow}});function W6(t,e){const n=[],{bounds:a,step:o,min:l,max:u,precision:h,count:g,maxTicks:y,maxDigits:_,includeBounds:S}=t,T=o||1,O=y-1,{min:M,max:R}=e,N=!bt(l),B=!bt(u),z=!bt(g),P=(R-M)/(_+1);let U=Mx((R-M)/O/T)*T,ee,ae,J,X;if(U<1e-14&&!N&&!B)return[{value:M},{value:R}];X=Math.ceil(R/U)-Math.floor(M/U),X>O&&(U=Mx(X*U/O/T)*T),bt(h)||(ee=Math.pow(10,h),U=Math.ceil(U*ee)/ee),a==="ticks"?(ae=Math.floor(M/U)*U,J=Math.ceil(R/U)*U):(ae=M,J=R),N&&B&&o&&mk((u-l)/o,U/1e3)?(X=Math.round(Math.min((u-l)/U,y)),U=(u-l)/X,ae=l,J=u):z?(ae=N?l:ae,J=B?u:J,X=g-1,U=(J-ae)/X):(X=(J-ae)/U,Ph(X,Math.round(X),U/1e3)?X=Math.round(X):X=Math.ceil(X));const oe=Math.max(Ex(U),Ex(ae));ee=Math.pow(10,bt(h)?oe:h),ae=Math.round(ae*ee)/ee,J=Math.round(J*ee)/ee;let A=0;for(N&&(S&&ae!==l?(n.push({value:l}),ae<l&&A++,Ph(Math.round((ae+A*U)*ee)/ee,l,jw(l,P,t))&&A++):ae<l&&A++);A<X;++A){const Te=Math.round((ae+A*U)*ee)/ee;if(B&&Te>u)break;n.push({value:Te})}return B&&S&&J!==u?n.length&&Ph(n[n.length-1].value,u,jw(u,P,t))?n[n.length-1].value=u:n.push({value:u}):(!B||J===u)&&n.push({value:J}),n}function jw(t,e,{horizontal:n,minRotation:s}){const a=Na(s),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class Y6 extends Dc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:o}=this;const l=h=>a=n?a:h,u=h=>o=s?o:h;if(e){const h=Bi(a),g=Bi(o);h<0&&g<0?u(0):h>0&&g>0&&l(0)}if(a===o){let h=o===0?1:Math.abs(o*.05);u(o+h),e||l(a-h)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=W6(a,o);return e.bounds==="ticks"&&gk(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return M0(e,this.chart.options.locale,this.options.ticks.format)}}class pv extends Y6{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Vs(e)?e:0,this.max=Vs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Na(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ue(pv,"id","linear"),Ue(pv,"defaults",{ticks:{callback:TC.formatters.numeric}});const tg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ys=Object.keys(tg);function Mw(t,e){return t-e}function Ew(t,e){if(bt(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:o}=t._parseOpts;let l=e;return typeof s=="function"&&(l=s(l)),Vs(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(a&&(l=a==="week"&&(Wh(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,a)),+l)}function Rw(t,e,n,s){const a=ys.length;for(let o=ys.indexOf(t);o<a-1;++o){const l=tg[ys[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(u*l.size))<=s)return ys[o]}return ys[a-1]}function K6(t,e,n,s,a){for(let o=ys.length-1;o>=ys.indexOf(n);o--){const l=ys[o];if(tg[l].common&&t._adapter.diff(a,s,l)>=e-1)return l}return ys[n?ys.indexOf(n):0]}function X6(t){for(let e=ys.indexOf(t)+1,n=ys.length;e<n;++e)if(tg[ys[e]].common)return ys[e]}function kw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=A0(n,e),o=n[s]>=e?n[s]:n[a];t[o]=!0}}function Q6(t,e,n,s){const a=t._adapter,o=+a.startOf(e[0].value,s),l=e[e.length-1].value;let u,h;for(u=o;u<=l;u=+a.add(u,1,s))h=n[u],h>=0&&(e[h].major=!0);return e}function Nw(t,e,n){const s=[],a={},o=e.length;let l,u;for(l=0;l<o;++l)u=e[l],a[u]=l,s.push({value:u,major:!1});return o===0||!n?s:Q6(t,s,a,n)}class Im extends Dc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new eD._date(e.adapters.date);a.init(n),Dh(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Ew(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function h(g){!l&&!isNaN(g.min)&&(a=Math.min(a,g.min)),!u&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!l||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),a=Vs(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),o=Vs(o)&&!isNaN(o)?o:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,u=_k(a,o,l);return this._unit=n.unit||(s.autoSkip?Rw(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):K6(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:X6(this._unit),this.initOffsets(a),e.reverse&&u.reverse(),Nw(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=Kn(n,0,l),s=Kn(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,o=a.time,l=o.unit||Rw(o.minUnit,n,s,this._getLabelCapacity(n)),u=at(a.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,g=Wh(h)||h===!0,y={};let _=n,S,T;if(g&&(_=+e.startOf(_,"isoWeek",h)),_=+e.startOf(_,g?"day":l),e.diff(s,n,l)>1e5*u)throw new Error(n+" and "+s+" are too far apart with stepSize of "+u+" "+l);const O=a.ticks.source==="data"&&this.getDataTimestamps();for(S=_,T=0;S<s;S=+e.add(S,u,l),T++)kw(y,S,O);return(S===s||a.bounds==="ticks"||T===1)&&kw(y,S,O),Object.keys(y).sort(Mw).map(M=>+M)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,o=this._unit,l=n||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,s,a){const o=this.options,l=o.ticks.callback;if(l)return Bt(l,[e,n,s],this);const u=o.time.displayFormats,h=this._unit,g=this._majorUnit,y=h&&u[h],_=g&&u[g],S=s[n],T=g&&_&&S&&S.major;return this._adapter.format(e,a||(T?_:y))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=Na(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(a),l=Math.sin(a),u=this._resolveTickFontOptions(0).size;return{w:s*o+u*l,h:s*l+u*o}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,o=this._tickFormatFunction(e,0,Nw(this,[e],this._majorUnit),a),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(Ew(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wC(e.sort(Mw))}}Ue(Im,"id","time"),Ue(Im,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function sm(t,e,n){let s=0,a=t.length-1,o,l,u,h;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Vo(t,"pos",e)),{pos:o,time:u}=t[s],{pos:l,time:h}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Vo(t,"time",e)),{time:o,pos:u}=t[s],{time:l,pos:h}=t[a]);const g=l-o;return g?u+(h-u)*(e-o)/g:u}class Dw extends Im{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=sm(n,this.min),this._tableRange=sm(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],o=[];let l,u,h,g,y;for(l=0,u=e.length;l<u;++l)g=e[l],g>=n&&g<=s&&a.push(g);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,u=a.length;l<u;++l)y=a[l+1],h=a[l-1],g=a[l],Math.round((y+h)/2)!==g&&o.push({time:g,pos:l/(u-1)});return o}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(sm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return sm(this._table,s*this._tableRange+this._minPos,!0)}}Ue(Dw,"id","timeseries"),Ue(Dw,"defaults",Im.defaults);const e4="label";function Pw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function J6(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function t4(t,e){t.labels=e}function n4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e4;const s=[];t.datasets=e.map(a=>{const o=t.datasets.find(l=>l[n]===a[n]);return!o||!a.data||s.includes(o)?{...a}:(s.push(o),Object.assign(o,a),o)})}function Z6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e4;const n={labels:[],datasets:[]};return t4(n,t.labels),n4(n,t.datasets,e),n}function e3(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:h,plugins:g=[],fallbackContent:y,updateMode:_,...S}=t,T=k.useRef(null),O=k.useRef(null),M=()=>{T.current&&(O.current=new eg(T.current,{type:l,data:Z6(u,o),options:h&&{...h},plugins:g}),Pw(e,O.current))},R=()=>{Pw(e,null),O.current&&(O.current.destroy(),O.current=null)};return k.useEffect(()=>{!a&&O.current&&h&&J6(O.current,h)},[a,h]),k.useEffect(()=>{!a&&O.current&&t4(O.current.config.data,u.labels)},[a,u.labels]),k.useEffect(()=>{!a&&O.current&&u.datasets&&n4(O.current.config.data,u.datasets,o)},[a,u.datasets]),k.useEffect(()=>{O.current&&(a?(R(),setTimeout(M)):O.current.update(_))},[a,h,u.labels,u.datasets,_]),k.useEffect(()=>{O.current&&(R(),setTimeout(M))},[l]),k.useEffect(()=>(M(),()=>R()),[]),Da.createElement("canvas",{ref:T,role:"img",height:n,width:s,...S},y)}const t3=k.forwardRef(e3);function I0(t,e){return eg.register(e),k.forwardRef((n,s)=>Da.createElement(t3,{...n,ref:s,type:t}))}const n3=I0("line",ym),Lw=I0("bar",pm),s3=I0("doughnut",vh);eg.register(gv,pv,_m,xh,xm,_h,P6,F6,N6);function i3(){var I;const{user:t,signOut:e}=Va(),[n,s]=k.useState(!0),[a,o]=k.useState(!1),[l,u]=k.useState([]),[h,g]=k.useState(null),[y,_]=k.useState([]),[S,T]=k.useState({totalPatients:0,todayAppointments:0,completedAppointments:0,pendingAppointments:0}),[O,M]=k.useState({pending:0,confirmed:0,cancelled:0,completed:0}),[R,N]=k.useState([]),[B,z]=k.useState(null),[P,U]=k.useState({under18:0,"18-25":0,"26-35":0,"36-45":0,over45:0}),[ee,ae]=k.useState([]),[J,X]=k.useState(0),[oe,A]=k.useState(0),[Te,le]=k.useState({labels:[],data:[]});k.useEffect(()=>{const te=localStorage.getItem("doctorSidebarCollapsed");if(te!==null){const xe=JSON.parse(te);o(xe),document.body.classList.toggle("sidebar-collapsed",xe)}},[]);const $=te=>{o(te),localStorage.setItem("doctorSidebarCollapsed",JSON.stringify(te)),document.body.classList.toggle("sidebar-collapsed",te)};k.useEffect(()=>{async function te(){try{s(!0);const xe=new Date().toISOString().split("T")[0],{data:Ae,error:we}=await Oe.from("doctors").select("*").eq("user_id",t.id).single();if(we)throw we;g(Ae);const{data:Ne,error:Re}=await Oe.from("appointments").select(`
            *,
            patients (
              full_name,
              phone_number,
              email
            )
          `).eq("doctor_id",t.id).eq("appointment_date",xe).order("start_time",{ascending:!0});if(Re)throw Re;_(Ne);const{data:ye,error:F}=await Oe.from("patients").select("*, date_of_birth, gynecological_conditions");if(F)throw F;u(ye);const W={under18:0,"18-25":0,"26-35":0,"36-45":0,over45:0},ve={};ye.forEach(Je=>{if(Je.date_of_birth){const Tt=new Date(Je.date_of_birth),At=Math.floor((new Date-Tt)/(365.25*24*60*60*1e3));At<18?W.under18++:At>=18&&At<=25?W["18-25"]++:At>=26&&At<=35?W["26-35"]++:At>=36&&At<=45?W["36-45"]++:W.over45++}Je.gynecological_conditions&&Je.gynecological_conditions.split(",").map(At=>At.trim()).forEach(At=>{At&&(ve[At]=(ve[At]||0)+1)})}),U(W);const se=Object.entries(ve).sort((Je,Tt)=>Tt[1]-Je[1]).slice(0,5).map(([Je,Tt])=>({name:Je,count:Tt}));ae(se);const{data:Ce,error:Pe}=await Oe.from("appointments").select("status, start_time, end_time, appointment_date").eq("doctor_id",t.id);if(Pe)throw Pe;const Me=Ce.reduce((Je,Tt)=>(Je[Tt.status]=(Je[Tt.status]||0)+1,Je),{});M({pending:Me.pending||0,confirmed:Me.confirmed||0,cancelled:Me.cancelled||0,completed:Me.completed||0}),T({totalPatients:ye.length,todayAppointments:Ne.length,completedAppointments:Me.completed||0,pendingAppointments:Me.pending||0});const et=(Me.completed||0)+(Me.pending||0)+(Me.confirmed||0),ue=et>0?Math.round((Me.completed||0)/et*100):0;X(ue);let Le=0,Ye=0;Ce.forEach(Je=>{if(Je.start_time&&Je.end_time){const Tt=new Date(`2000-01-01T${Je.start_time}`),mt=(new Date(`2000-01-01T${Je.end_time}`)-Tt)/(1e3*60);mt>0&&(Le+=mt,Ye++)}});const Ct=Ye>0?Math.round(Le/Ye):0;A(Ct);const Ge=[],Fe=[];for(let Je=5;Je>=0;Je--){const Tt=new Date;Tt.setMonth(Tt.getMonth()-Je);const At=Tt.toLocaleString("default",{month:"short"}),mt=`${Tt.getFullYear()}-${String(Tt.getMonth()+1).padStart(2,"0")}`;Ge.push(At);const Mt=Ce.filter(cn=>cn.appointment_date.substring(0,7)===mt).length;Fe.push(Mt)}le({labels:Ge,data:Fe});const{data:Ut,error:jn}=await Oe.from("appointments").select(`
            *,
            patients (
              full_name
            )
          `).eq("doctor_id",t.id).order("created_at",{ascending:!1}).limit(5);if(jn)throw jn;N(Ut)}catch(xe){console.error("Error fetching data:",xe),z(xe.message)}finally{s(!1)}}t&&te()},[t]);const be={pending:"#FFA500",confirmed:"#4CAF50",cancelled:"#F44336",completed:"#2196F3"},q={labels:["Pending","Confirmed","Cancelled","Completed"],datasets:[{data:[O.pending,O.confirmed,O.cancelled,O.completed],backgroundColor:Object.values(be),borderWidth:1}]},G={labels:["Under 18","18-25","26-35","36-45","Over 45"],datasets:[{label:"Number of Patients",data:[P.under18,P["18-25"],P["26-35"],P["36-45"],P.over45],backgroundColor:["#FFB6C1","#FF69B4","#C71585","#DB7093","#FF1493"],borderWidth:1}]},ce={labels:ee.map(te=>te.name),datasets:[{label:"Number of Patients",data:ee.map(te=>te.count),backgroundColor:"#FF69B4",borderColor:"#C71585",borderWidth:1}]},_e={labels:Te.labels,datasets:[{label:"Appointments",data:Te.data,borderColor:"#1976D2",backgroundColor:"rgba(25, 118, 210, 0.2)",tension:.4,fill:!0}]};return n?p.jsx("div",{className:"loading",children:"Loading dashboard..."}):p.jsxs("div",{className:`app-container ${a?"sidebar-collapsed":""}`,children:[p.jsx(Cc,{onSignOut:e,onSidebarToggle:$,isCollapsed:a}),p.jsxs("div",{className:`main-content ${a?"content-expanded":""}`,children:[p.jsx(di,{isSidebarCollapsed:a}),p.jsxs("div",{className:"dashboard-container",children:[B&&p.jsx("div",{className:"error-message",children:B}),p.jsx("div",{className:"dashboard-header",children:p.jsxs("div",{className:"dashboard-header-content",children:[p.jsx("div",{className:"header-decoration"}),p.jsx("div",{className:"header-decoration-2"}),p.jsxs("div",{className:"doctor-welcome",children:[p.jsxs("h1",{children:["Welcome back, ",(h==null?void 0:h.full_name)||((I=t==null?void 0:t.user_metadata)==null?void 0:I.full_name)||"Doctor"]}),(h==null?void 0:h.specialty)&&p.jsx("p",{className:"specialty",children:h.specialty})]})]})}),p.jsxs("div",{className:"stats-grid",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Total Patients"}),p.jsx("p",{className:"stat-number",children:S.totalPatients})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Today's Appointments"}),p.jsx("p",{className:"stat-number",children:S.todayAppointments})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Completion Rate"}),p.jsxs("p",{className:"stat-number",children:[J,"%"]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Avg. Duration"}),p.jsxs("p",{className:"stat-number",children:[oe," min"]})]})]}),p.jsxs("div",{className:"dashboard-grid",children:[p.jsxs("div",{className:"grid-item today-appointments",children:[p.jsx("h2",{children:"Today's Appointments"}),y.length===0?p.jsx("p",{className:"no-data",children:"No appointments scheduled for today"}):p.jsx("div",{className:"appointments-list",children:y.map(te=>p.jsxs("div",{className:"appointment-card",children:[p.jsx("div",{className:"appointment-time",children:new Date(`2000-01-01T${te.start_time}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),p.jsxs("div",{className:"appointment-details",children:[p.jsx("h4",{children:te.patients.full_name}),p.jsx("p",{children:te.reason}),p.jsx("span",{className:`status-badge ${te.status}`,children:te.status})]}),p.jsxs("div",{className:"appointment-actions",children:[p.jsx("button",{className:"action-btn",children:"View"}),p.jsx("button",{className:"action-btn",children:"Update"})]})]},te.id))})]}),p.jsxs("div",{className:"grid-item appointment-stats",children:[p.jsx("h2",{children:"Appointment Status Distribution"}),p.jsx("div",{className:"chart-container",children:p.jsx(s3,{data:q,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]}),p.jsxs("div",{className:"grid-item recent-activity",children:[p.jsx("h2",{children:"Recent Activity"}),p.jsx("div",{className:"activity-list",children:R.map(te=>p.jsxs("div",{className:"activity-item",children:[p.jsx("div",{className:"activity-icon",children:p.jsx("i",{className:"fas fa-calendar-check"})}),p.jsxs("div",{className:"activity-details",children:[p.jsxs("p",{children:["Appointment with ",te.patients.full_name,p.jsx("span",{className:`status-badge ${te.status}`,children:te.status})]}),p.jsx("small",{children:new Date(te.created_at).toLocaleDateString()})]})]},te.id))})]}),p.jsxs("div",{className:"grid-item patient-age-distribution",children:[p.jsx("h2",{children:"Patient Age Distribution"}),p.jsx("div",{className:"chart-container",children:p.jsx(Lw,{data:G,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Patient Age Groups"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Patients"}}}}})})]}),p.jsxs("div",{className:"grid-item common-conditions",children:[p.jsx("h2",{children:"Common Gynecological Conditions"}),ee.length===0?p.jsx("p",{className:"no-data",children:"No condition data available"}):p.jsx("div",{className:"chart-container",children:p.jsx(Lw,{data:ce,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,title:{display:!0,text:"Number of Patients"}}}}})})]}),p.jsxs("div",{className:"grid-item monthly-trend",children:[p.jsx("h2",{children:"Monthly Appointment Trends"}),p.jsx("div",{className:"chart-container",children:p.jsx(n3,{data:_e,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Appointments - Last 6 Months"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Appointments"}}}}})})]})]})]})]})]})}function a3(){return p.jsxs("div",{className:"error-container",children:[p.jsx("h1",{children:"Unauthorized Access"}),p.jsx("p",{children:"You do not have permission to access this page."}),p.jsx("a",{href:"/",className:"button",children:"Back to Home"})]})}function r3(){const{user:t,isPatient:e,isDoctor:n}=Va();return p.jsxs("div",{className:"home-container",children:[p.jsx("h1",{children:"Medical Portal"}),t?p.jsxs("div",{className:"welcome-container",children:[p.jsx("h2",{children:"Welcome Back!"}),e&&p.jsx(ps,{to:"/patient-dashboard",className:"auth-button",children:"Go to Patient Dashboard"}),n&&p.jsx(ps,{to:"/doctor-dashboard",className:"auth-button",children:"Go to Doctor Dashboard"})]}):p.jsxs("div",{className:"auth-options",children:[p.jsxs("div",{className:"auth-option",children:[p.jsx("h2",{children:"For Patients"}),p.jsx("p",{children:"Access your medical records, appointments, and more."}),p.jsxs("div",{className:"auth-buttons",children:[p.jsx(ps,{to:"/patient-login",className:"auth-button",children:"Patient Login"}),p.jsx(ps,{to:"/patient-register",className:"auth-button secondary",children:"Register as Patient"})]})]}),p.jsxs("div",{className:"auth-option",children:[p.jsx("h2",{children:"For Doctors"}),p.jsx("p",{children:"Access patient information, schedules, and medical records."}),p.jsx(ps,{to:"/doctor-login",className:"auth-button",children:"Doctor Login"})]})]}),p.jsx("div",{className:"bubble"}),p.jsx("div",{className:"bubble"}),p.jsx("div",{className:"bubble"}),p.jsx("div",{className:"bubble"}),p.jsx("div",{className:"bubble"}),p.jsx("div",{className:"bubble"})]})}function o3(){const{user:t,isPatient:e,isDoctor:n}=Va();return p.jsxs("div",{className:"home-container",children:[p.jsx("h1",{children:"FemCare Medical Portal"}),p.jsx("div",{className:"description-container",children:p.jsx("p",{children:"FemCare is dedicated to providing high-quality healthcare solutions for women, ensuring accessible, efficient, and patient-centered medical services."})}),p.jsxs("div",{className:"mission-vision-container",children:[p.jsxs("div",{className:"mission",children:[p.jsx("h2",{children:"Our Mission"}),p.jsx("p",{children:"To empower women's health by offering comprehensive and accessible medical services, fostering a compassionate and innovative healthcare environment."})]}),p.jsxs("div",{className:"vision",children:[p.jsx("h2",{children:"Our Vision"}),p.jsx("p",{children:"To be the leading healthcare platform dedicated to women's wellness, integrating technology and professional care for a healthier future."})]})]}),t?p.jsxs("div",{className:"welcome-container",children:[p.jsx("h2",{children:"Welcome Back!"}),e&&p.jsx(ps,{to:"/patient-dashboard",className:"auth-button",children:"Go to Patient Dashboard"}),n&&p.jsx(ps,{to:"/doctor-dashboard",className:"auth-button",children:"Go to Doctor Dashboard"})]}):p.jsxs("div",{className:"auth-options",children:[p.jsxs("div",{className:"auth-option",children:[p.jsx("h2",{children:"For Patients"}),p.jsx("p",{children:"Access your medical records, appointments, and more."}),p.jsxs("div",{className:"auth-buttons",children:[p.jsx(ps,{to:"/patient-login",className:"auth-button",children:"Patient Login"}),p.jsx(ps,{to:"/patient-register",className:"auth-button secondary",children:"Register as Patient"})]})]}),p.jsxs("div",{className:"auth-option",children:[p.jsx("h2",{children:"For Doctors"}),p.jsx("p",{children:"Access patient information, schedules, and medical records."}),p.jsx(ps,{to:"/doctor-login",className:"auth-button",children:"Doctor Login"})]})]})]})}const s4=6048e5,l3=864e5,c3=6e4,Bw=Symbol.for("constructDateFrom");function Ia(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Bw in t?t[Bw](e):t instanceof Date?new t.constructor(e):new Date(e)}function Bn(t,e){return Ia(e||t,t)}function u3(t,e,n){const s=Bn(t,n==null?void 0:n.in);return isNaN(e)?Ia(t,NaN):(s.setDate(s.getDate()+e),s)}let h3={};function ng(){return h3}function Jh(t,e){var u,h,g,y;const n=ng(),s=(e==null?void 0:e.weekStartsOn)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((y=(g=n.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,a=Bn(t,e==null?void 0:e.in),o=a.getDay(),l=(o<s?7:0)+o-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function zm(t,e){return Jh(t,{...e,weekStartsOn:1})}function i4(t,e){const n=Bn(t,e==null?void 0:e.in),s=n.getFullYear(),a=Ia(n,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const o=zm(a),l=Ia(n,0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);const u=zm(l);return n.getTime()>=o.getTime()?s+1:n.getTime()>=u.getTime()?s:s-1}function Uw(t){const e=Bn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function d3(t,...e){const n=Ia.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function yv(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function f3(t,e,n){const[s,a]=d3(n==null?void 0:n.in,t,e),o=yv(s),l=yv(a),u=+o-Uw(o),h=+l-Uw(l);return Math.round((u-h)/l3)}function m3(t,e){const n=i4(t,e),s=Ia(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),zm(s)}function g3(t,e,n){const s=Bn(t,n==null?void 0:n.in);return s.setTime(s.getTime()+e*c3),s}function Iw(t,e,n){return u3(t,e*7,n)}function p3(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function y3(t){return!(!p3(t)&&typeof t!="number"||isNaN(+Bn(t)))}function v3(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const b3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_3=(t,e,n)=>{let s;const a=b3[t];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Ey(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const x3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},w3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},S3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},C3={date:Ey({formats:x3,defaultWidth:"full"}),time:Ey({formats:w3,defaultWidth:"full"}),dateTime:Ey({formats:S3,defaultWidth:"full"})},T3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},A3=(t,e,n,s)=>T3[t];function dh(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):l;a=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[u]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(e):e;return a[o]}}const O3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},j3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},M3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},E3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},R3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},k3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},N3=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},D3={ordinalNumber:N3,era:dh({values:O3,defaultWidth:"wide"}),quarter:dh({values:j3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:dh({values:M3,defaultWidth:"wide"}),day:dh({values:E3,defaultWidth:"wide"}),dayPeriod:dh({values:R3,defaultWidth:"wide",formattingValues:k3,defaultFormattingWidth:"wide"})};function fh(t){return(e,n={})=>{const s=n.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const l=o[0],u=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(u)?L3(u,_=>_.test(l)):P3(u,_=>_.test(l));let g;g=t.valueCallback?t.valueCallback(h):h,g=n.valueCallback?n.valueCallback(g):g;const y=e.slice(l.length);return{value:g,rest:y}}}function P3(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function L3(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function B3(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const a=s[0],o=e.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(a.length);return{value:l,rest:u}}}const U3=/^(\d+)(th|st|nd|rd)?/i,I3=/\d+/i,z3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},V3={any:[/^b/i,/^(a|c)/i]},H3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},F3={any:[/1/i,/2/i,/3/i,/4/i]},q3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},G3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},W3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Y3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},K3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},X3={ordinalNumber:B3({matchPattern:U3,parsePattern:I3,valueCallback:t=>parseInt(t,10)}),era:fh({matchPatterns:z3,defaultMatchWidth:"wide",parsePatterns:V3,defaultParseWidth:"any"}),quarter:fh({matchPatterns:H3,defaultMatchWidth:"wide",parsePatterns:F3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fh({matchPatterns:q3,defaultMatchWidth:"wide",parsePatterns:$3,defaultParseWidth:"any"}),day:fh({matchPatterns:G3,defaultMatchWidth:"wide",parsePatterns:W3,defaultParseWidth:"any"}),dayPeriod:fh({matchPatterns:Y3,defaultMatchWidth:"any",parsePatterns:K3,defaultParseWidth:"any"})},Q3={code:"en-US",formatDistance:_3,formatLong:C3,formatRelative:A3,localize:D3,match:X3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function J3(t,e){const n=Bn(t,e==null?void 0:e.in);return f3(n,v3(n))+1}function Z3(t,e){const n=Bn(t,e==null?void 0:e.in),s=+zm(n)-+m3(n);return Math.round(s/s4)+1}function a4(t,e){var y,_,S,T;const n=Bn(t,e==null?void 0:e.in),s=n.getFullYear(),a=ng(),o=(e==null?void 0:e.firstWeekContainsDate)??((_=(y=e==null?void 0:e.locale)==null?void 0:y.options)==null?void 0:_.firstWeekContainsDate)??a.firstWeekContainsDate??((T=(S=a.locale)==null?void 0:S.options)==null?void 0:T.firstWeekContainsDate)??1,l=Ia((e==null?void 0:e.in)||t,0);l.setFullYear(s+1,0,o),l.setHours(0,0,0,0);const u=Jh(l,e),h=Ia((e==null?void 0:e.in)||t,0);h.setFullYear(s,0,o),h.setHours(0,0,0,0);const g=Jh(h,e);return+n>=+u?s+1:+n>=+g?s:s-1}function eP(t,e){var u,h,g,y;const n=ng(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((y=(g=n.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,a=a4(t,e),o=Ia((e==null?void 0:e.in)||t,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),Jh(o,e)}function tP(t,e){const n=Bn(t,e==null?void 0:e.in),s=+Jh(n,e)-+eP(n,e);return Math.round(s/s4)+1}function _t(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const jr={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return _t(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):_t(n+1,2)},d(t,e){return _t(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return _t(t.getHours()%12||12,e.length)},H(t,e){return _t(t.getHours(),e.length)},m(t,e){return _t(t.getMinutes(),e.length)},s(t,e){return _t(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return _t(a,e.length)}},ac={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zw={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return jr.y(t,e)},Y:function(t,e,n,s){const a=a4(t,s),o=a>0?a:1-a;if(e==="YY"){const l=o%100;return _t(l,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):_t(o,e.length)},R:function(t,e){const n=i4(t);return _t(n,e.length)},u:function(t,e){const n=t.getFullYear();return _t(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return _t(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return _t(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return jr.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return _t(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const a=tP(t,s);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):_t(a,e.length)},I:function(t,e,n){const s=Z3(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):_t(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):jr.d(t,e)},D:function(t,e,n){const s=J3(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):_t(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const a=t.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return _t(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const a=t.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return _t(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return _t(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let a;switch(s===12?a=ac.noon:s===0?a=ac.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let a;switch(s>=17?a=ac.evening:s>=12?a=ac.afternoon:s>=4?a=ac.morning:a=ac.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return jr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):jr.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):_t(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):_t(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):jr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):jr.s(t,e)},S:function(t,e){return jr.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Hw(s);case"XXXX":case"XX":return Bo(s);case"XXXXX":case"XXX":default:return Bo(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return Hw(s);case"xxxx":case"xx":return Bo(s);case"xxxxx":case"xxx":default:return Bo(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Vw(s,":");case"OOOO":default:return"GMT"+Bo(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Vw(s,":");case"zzzz":default:return"GMT"+Bo(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return _t(s,e.length)},T:function(t,e,n){return _t(+t,e.length)}};function Vw(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),a=Math.trunc(s/60),o=s%60;return o===0?n+String(a):n+String(a)+e+_t(o,2)}function Hw(t,e){return t%60===0?(t>0?"-":"+")+_t(Math.abs(t)/60,2):Bo(t,e)}function Bo(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),a=_t(Math.trunc(s/60),2),o=_t(s%60,2);return n+a+e+o}const Fw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},r4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},nP=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return Fw(t,e);let o;switch(s){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Fw(s,e)).replace("{{time}}",r4(a,e))},sP={p:r4,P:nP},iP=/^D+$/,aP=/^Y+$/,rP=["D","DD","YY","YYYY"];function oP(t){return iP.test(t)}function lP(t){return aP.test(t)}function cP(t,e,n){const s=uP(t,e,n);if(console.warn(s),rP.includes(t))throw new RangeError(s)}function uP(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fP=/^'([^]*?)'?$/,mP=/''/g,gP=/[a-zA-Z]/;function Yn(t,e,n){var y,_,S,T;const s=ng(),a=s.locale??Q3,o=s.firstWeekContainsDate??((_=(y=s.locale)==null?void 0:y.options)==null?void 0:_.firstWeekContainsDate)??1,l=s.weekStartsOn??((T=(S=s.locale)==null?void 0:S.options)==null?void 0:T.weekStartsOn)??0,u=Bn(t,n==null?void 0:n.in);if(!y3(u))throw new RangeError("Invalid time value");let h=e.match(dP).map(O=>{const M=O[0];if(M==="p"||M==="P"){const R=sP[M];return R(O,a.formatLong)}return O}).join("").match(hP).map(O=>{if(O==="''")return{isToken:!1,value:"'"};const M=O[0];if(M==="'")return{isToken:!1,value:pP(O)};if(zw[M])return{isToken:!0,value:O};if(M.match(gP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:O}});a.localize.preprocessor&&(h=a.localize.preprocessor(u,h));const g={firstWeekContainsDate:o,weekStartsOn:l,locale:a};return h.map(O=>{if(!O.isToken)return O.value;const M=O.value;(lP(M)||oP(M))&&cP(M,e,String(t));const R=zw[M[0]];return R(u,M,a.localize,g)}).join("")}function pP(t){const e=t.match(fP);return e?e[1].replace(mP,"'"):t}function qw(t,e){return+Bn(t)>+Bn(e)}function yP(t,e){return+Bn(t)<+Bn(e)}function vP(){var be,q,G,ce,_e,I,te,xe,Ae,we,Ne,Re,ye;const[t,e]=k.useState([]),[n,s]=k.useState([]),[a,o]=k.useState(!0),[l,u]=k.useState(!1),[h,g]=k.useState(null),[y,_]=k.useState(""),[S,T]=k.useState(!1),[O,M]=k.useState(null),[R,N]=k.useState("grid"),{user:B}=Va();k.useEffect(()=>{const F=localStorage.getItem("doctorSidebarCollapsed");F!==null&&u(JSON.parse(F));const W=localStorage.getItem("appointmentsViewMode");W&&N(W)},[]),k.useEffect(()=>{localStorage.setItem("appointmentsViewMode",R)},[R]),k.useEffect(()=>{async function F(){try{o(!0);const{data:W,error:ve}=await Oe.from("appointments").select(`
            *,
            patients:patient_id (
              full_name,
              email,
              profile_picture_path,
              date_of_birth,
              phone_number,
              known_allergies,
              current_medications,
              last_menstrual_period,
              pregnancies_count,
              live_births_count,
              last_pap_smear,
              last_pap_smear_result
            )
          `).eq("doctor_id",B.id).order("appointment_date",{ascending:!0}).order("start_time",{ascending:!0});if(ve)throw ve;e(W),s(W),W&&W.length>0&&g(W[0])}catch(W){console.error("Error fetching appointments:",W.message)}finally{o(!1)}}B&&F()},[B]),k.useEffect(()=>{if(y==="")s(t);else{const F=t.filter(W=>{var ue;const ve=((ue=W.patients)==null?void 0:ue.full_name.toLowerCase())||"",se=W.appointment_date?Yn(new Date(W.appointment_date),"MMMM d, yyyy").toLowerCase():"",Ce=y.toLowerCase(),Pe=W.reason?W.reason.toLowerCase():"",Me=W.appointment_category?W.appointment_category.toLowerCase():"",et=W.appointment_type?W.appointment_type.toLowerCase():"";return ve.includes(Ce)||se.includes(Ce)||Pe.includes(Ce)||Me.includes(Ce)||et.includes(Ce)});s(F),F.length>0?g(F[0]):g(null)}},[y,t]);const z=async(F,W)=>{T(!0),M(null);try{const{data:ve,error:se}=await Oe.from("appointments").update({status:W}).eq("id",F).select(`
          *,
          patients:patient_id (
            full_name,
            email,
            profile_picture_path,
            date_of_birth,
            phone_number,
            known_allergies,
            current_medications,
            last_menstrual_period,
            pregnancies_count,
            live_births_count,
            last_pap_smear,
            last_pap_smear_result
          )
        `).single();if(se)throw se;const Ce=t.map(Pe=>Pe.id===F?ve:Pe);e(Ce),s(y===""?Ce:Ce.filter(Pe=>{var Ge;const Me=((Ge=Pe.patients)==null?void 0:Ge.full_name.toLowerCase())||"",et=Pe.appointment_date?Yn(new Date(Pe.appointment_date),"MMMM d, yyyy").toLowerCase():"",ue=y.toLowerCase(),Le=Pe.reason?Pe.reason.toLowerCase():"",Ye=Pe.appointment_category?Pe.appointment_category.toLowerCase():"",Ct=Pe.appointment_type?Pe.appointment_type.toLowerCase():"";return Me.includes(ue)||et.includes(ue)||Le.includes(ue)||Ye.includes(ue)||Ct.includes(ue)})),g(ve)}catch(ve){console.error("Error updating appointment status:",ve.message),M("Failed to update appointment status. Please try again.")}finally{T(!1)}},P=F=>{u(F)},U=()=>{},ee=F=>{if(!F)return null;try{const{data:W}=Oe.storage.from("avatars").getPublicUrl(F);return(W==null?void 0:W.publicUrl)||null}catch(W){return console.error("Error getting avatar URL:",W),null}},ae=F=>{g(F)},J=F=>{_(F.target.value)},X=F=>`status-badge ${F}`,oe=()=>{N(F=>F==="grid"?"list":"grid")},A=F=>{const W={};return F.forEach(ve=>{const se=ve.appointment_date;W[se]||(W[se]=[]),W[se].push(ve)}),W},Te=(F,W)=>`${Yn(new Date(`2000-01-01T${F}`),"h:mm a")} - ${Yn(new Date(`2000-01-01T${W}`),"h:mm a")}`,le=A(n),$=F=>{if(!F)return"category-default";const W=F.toLowerCase();return W.includes("prenatal")||W.includes("pregnancy")?"category-prenatal":W.includes("annual")||W.includes("routine")||W.includes("checkup")?"category-annual":W.includes("emergency")||W.includes("urgent")?"category-emergency":W.includes("follow")||W.includes("review")?"category-followup":W.includes("procedure")||W.includes("surgery")?"category-procedure":"category-default"};return a?p.jsxs("div",{className:`appointments-container ${l?"sidebar-collapsed":""}`,children:[p.jsx(Cc,{onSignOut:U,onSidebarToggle:P,isCollapsed:l}),p.jsx(di,{isSidebarCollapsed:l}),p.jsx("div",{className:"appointments-content",children:p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("div",{className:"loading-text",children:"Loading appointments..."})]})})]}):p.jsxs("div",{className:`appointments-container ${l?"sidebar-collapsed":""}`,children:[p.jsx(Cc,{onSignOut:U,onSidebarToggle:P,isCollapsed:l}),p.jsx(di,{isSidebarCollapsed:l}),p.jsxs("div",{className:"appointments-content",children:[p.jsxs("div",{className:"appointments-header",children:[p.jsxs("div",{className:"header-left",children:[p.jsx("h1",{className:"appointments-title",children:"Patient Appointments"}),p.jsxs("div",{className:"appointment-count",children:[n.length," ",n.length===1?"appointment":"appointments"," found"]})]}),p.jsxs("div",{className:"header-right",children:[p.jsxs("div",{className:"search-container",children:[p.jsx("input",{type:"text",placeholder:"Search by patient name, date, or reason...",value:y,onChange:J,className:"search-input"}),p.jsx("span",{className:"search-icon",children:"🔍"})]}),p.jsx("button",{className:"view-toggle-btn",onClick:oe,title:R==="grid"?"Switch to list view":"Switch to grid view",children:R==="grid"?"≡":"◫"})]})]}),p.jsxs("div",{className:"appointments-layout",children:[p.jsx("div",{className:"appointments-box-container",children:Object.keys(le).length>0?p.jsx("div",{className:R==="grid"?"appointments-grid":"appointments-list",children:Object.keys(le).sort().map(F=>p.jsxs("div",{className:"appointment-date-group",children:[p.jsx("div",{className:"appointment-date-header",children:Yn(new Date(F),"EEEE, MMMM d, yyyy")}),p.jsx("div",{className:R==="grid"?"appointment-cards-grid":"appointment-cards-list",children:le[F].map(W=>{var ve,se,Ce;return p.jsx("div",{className:`appointment-card ${(h==null?void 0:h.id)===W.id?"selected":""} ${W.status}`,onClick:()=>ae(W),children:p.jsx("div",{className:"appointment-card-content",children:p.jsxs("div",{className:"appointment-header",children:[p.jsx("div",{className:"avatar-container",children:(ve=W.patients)!=null&&ve.profile_picture_path?p.jsx("img",{src:ee(W.patients.profile_picture_path),alt:W.patients.full_name,className:"avatar-image"}):p.jsx("div",{className:"avatar-placeholder",children:p.jsx("span",{className:"avatar-initial",children:(se=W.patients)==null?void 0:se.full_name.charAt(0)})})}),p.jsxs("div",{className:"appointment-info",children:[p.jsxs("div",{className:"appointment-info-header",children:[p.jsx("h3",{className:"patient-name",children:(Ce=W.patients)==null?void 0:Ce.full_name}),p.jsx("span",{className:X(W.status),children:W.status.charAt(0).toUpperCase()+W.status.slice(1)})]}),p.jsxs("div",{className:"appointment-time",children:[p.jsx("span",{className:"time-slot",children:Te(W.start_time,W.end_time)}),W.reason&&R==="list"&&p.jsx("div",{className:"appointment-reason",children:W.reason.length>60?`${W.reason.substring(0,60)}...`:W.reason})]}),W.appointment_category&&R==="list"&&p.jsx("div",{className:`appointment-category-tag ${$(W.appointment_category)}`,children:W.appointment_category})]})]})})},W.id)})})]},F))}):p.jsxs("div",{className:"no-appointments",children:[p.jsx("div",{className:"no-appointments-icon",children:"📅"}),p.jsx("h3",{children:y?"No appointments found matching your search":"No appointments found"}),p.jsx("p",{children:y?"Try using different search terms":"You don't have any upcoming appointments"})]})}),p.jsx("div",{className:`appointment-details-container ${h?"show":""}`,children:h?p.jsxs("div",{className:"appointment-details",children:[p.jsxs("div",{className:"details-header",children:[p.jsx("h2",{children:"Patient Information"}),p.jsx("button",{className:"close-details",onClick:()=>g(null),"aria-label":"Close details",children:"×"})]}),p.jsxs("div",{className:"patient-details-card",children:[p.jsxs("div",{className:"patient-header",children:[p.jsx("div",{className:"large-avatar",children:(be=h.patients)!=null&&be.profile_picture_path?p.jsx("img",{src:ee(h.patients.profile_picture_path),alt:h.patients.full_name,className:"large-avatar-image",onError:F=>{var W;F.target.onerror=null,F.target.src='data:image/svg+xml;charset=UTF-8,%3csvg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"%3e%3ccircle cx="60" cy="60" r="60" fill="%23FF69B4" opacity="0.2"/%3e%3ctext x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="48" font-weight="bold" fill="%23FF69B4"%3e'+((W=h.patients)==null?void 0:W.full_name.charAt(0).toUpperCase())+"%3c/text%3e%3c/svg%3e"},style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):p.jsx("div",{className:"large-avatar-placeholder",children:p.jsx("span",{className:"large-avatar-initial",children:(q=h.patients)==null?void 0:q.full_name.charAt(0).toUpperCase()})})}),p.jsxs("div",{className:"patient-main-info",children:[p.jsx("h3",{children:(G=h.patients)==null?void 0:G.full_name}),p.jsxs("div",{className:"patient-contact-info",children:[p.jsxs("div",{className:"contact-info-item",children:[p.jsx("span",{className:"contact-icon",children:"✉️"}),p.jsx("span",{children:(ce=h.patients)==null?void 0:ce.email})]}),p.jsxs("div",{className:"contact-info-item",children:[p.jsx("span",{className:"contact-icon",children:"📱"}),p.jsx("span",{children:(_e=h.patients)==null?void 0:_e.phone_number})]}),p.jsxs("div",{className:"contact-info-item",children:[p.jsx("span",{className:"contact-icon",children:"🎂"}),p.jsx("span",{children:(I=h.patients)!=null&&I.date_of_birth?Yn(new Date(h.patients.date_of_birth),"MMMM d, yyyy"):"Not provided"})]})]})]})]}),p.jsxs("div",{className:"appointment-details-section",children:[p.jsxs("h4",{className:"section-title",children:[p.jsx("span",{className:"section-icon",children:"📅"}),"Appointment Details"]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Date"}),p.jsx("span",{className:"detail-value highlight",children:Yn(new Date(h.appointment_date),"EEEE, MMMM d, yyyy")})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Time"}),p.jsx("span",{className:"detail-value highlight",children:Te(h.start_time,h.end_time)})]}),(h.appointment_category||h.appointment_type)&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Category"}),p.jsx("span",{className:`detail-value category-tag ${$(h.appointment_category)}`,children:h.appointment_category||"Not specified"})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Type"}),p.jsx("span",{className:"detail-value type-tag",children:h.appointment_type||"Not specified"})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status"}),p.jsxs("div",{className:"status-update-container",children:[p.jsxs("select",{className:`status-select status-${h.status}`,value:h.status,onChange:F=>z(h.id,F.target.value),disabled:S,children:[p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"confirmed",children:"Confirmed"}),p.jsx("option",{value:"completed",children:"Completed"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]}),p.jsx("span",{className:X(h.status),children:h.status.charAt(0).toUpperCase()+h.status.slice(1)}),S&&p.jsx("div",{className:"status-updating-indicator"})]})]}),O&&p.jsx("div",{className:"error-message",children:O})]}),h.reason&&p.jsxs("div",{className:"reason-section",children:[p.jsxs("h4",{className:"section-title",children:[p.jsx("span",{className:"section-icon",children:"📝"}),"Reason for Visit"]}),p.jsx("div",{className:"reason-content",children:h.reason})]}),p.jsxs("div",{className:"medical-info-section",children:[p.jsxs("h4",{className:"section-title",children:[p.jsx("span",{className:"section-icon",children:"🩺"}),"Medical Information"]}),p.jsxs("div",{className:"medical-info-grid",children:[p.jsxs("div",{className:"info-card",children:[p.jsx("h5",{className:"info-card-title",children:"Allergies"}),p.jsx("div",{className:"info-card-content",children:((te=h.patients)==null?void 0:te.known_allergies)||"None reported"})]}),p.jsxs("div",{className:"info-card",children:[p.jsx("h5",{className:"info-card-title",children:"Medications"}),p.jsx("div",{className:"info-card-content",children:((xe=h.patients)==null?void 0:xe.current_medications)||"None reported"})]}),p.jsxs("div",{className:"info-card",children:[p.jsx("h5",{className:"info-card-title",children:"Last Menstrual Period"}),p.jsx("div",{className:"info-card-content",children:(Ae=h.patients)!=null&&Ae.last_menstrual_period?Yn(new Date(h.patients.last_menstrual_period),"MMMM d, yyyy"):"Not provided"})]}),p.jsxs("div",{className:"info-card",children:[p.jsx("h5",{className:"info-card-title",children:"Pregnancies / Live Births"}),p.jsxs("div",{className:"info-card-content",children:[((we=h.patients)==null?void 0:we.pregnancies_count)||"0"," / ",((Ne=h.patients)==null?void 0:Ne.live_births_count)||"0"]})]}),p.jsxs("div",{className:"info-card",children:[p.jsx("h5",{className:"info-card-title",children:"Last Pap Smear"}),p.jsx("div",{className:"info-card-content",children:(Re=h.patients)!=null&&Re.last_pap_smear?Yn(new Date(h.patients.last_pap_smear),"MMMM d, yyyy"):"Not provided"})]}),p.jsxs("div",{className:"info-card",children:[p.jsx("h5",{className:"info-card-title",children:"Pap Smear Result"}),p.jsx("div",{className:"info-card-content",children:((ye=h.patients)==null?void 0:ye.last_pap_smear_result)||"Not provided"})]})]})]})]})]}):p.jsxs("div",{className:"no-selection-message",children:[p.jsx("div",{className:"no-selection-icon",children:"👆"}),p.jsx("h3",{children:"No appointment selected"}),p.jsx("p",{children:"Select an appointment from the list to view details"})]})})]})]})]})}const bP=t=>{if(!t)return null;try{const{data:e}=Oe.storage.from("avatars").getPublicUrl(t);return(e==null?void 0:e.publicUrl)||null}catch(e){return console.error("Error getting avatar URL:",e),null}};function _P(){const[t,e]=k.useState([]),[n,s]=k.useState([]),[a,o]=k.useState(""),[l,u]=k.useState(!0),[h,g]=k.useState(null),[y,_]=k.useState(null),[S,T]=k.useState(!1),[O,M]=k.useState(window.innerWidth<768),[R,N]=k.useState(!0),[B,z]=k.useState(""),[P,U]=k.useState([]),ee=Hi(),ae=q=>{T(q),document.body.classList.toggle("sidebar-collapsed",q)},J=async()=>{try{const{error:q}=await Oe.auth.signOut();if(q)throw q;ee("/")}catch(q){console.error("Error signing out:",q),alert("Error signing out")}};k.useEffect(()=>{const q=()=>{const G=window.innerWidth<768;M(G),G||N(!0)};return window.addEventListener("resize",q),q(),document.documentElement.style.height="100%",document.body.style.height="100%",document.body.style.overflow="hidden",()=>{window.removeEventListener("resize",q),document.documentElement.style.height="",document.body.style.height="",document.body.style.overflow=""}},[]),k.useEffect(()=>{async function q(){try{u(!0);const{data:G,error:ce}=await Oe.from("patients").select(`
            *,
            profile_picture_path
          `);if(ce)throw ce;const _e=[];for(const I of G){const{data:te,error:xe}=await Oe.from("medical_records").select("*").eq("user_id",I.user_id);if(xe)throw xe;_e.push({...I,records:te||[]})}e(_e),s(_e)}catch(G){console.error("Error fetching patient data:",G),g("Failed to load patient data. Please try again later.")}finally{u(!1)}}q()},[]);const X=q=>{const G=q.target.value.toLowerCase();if(o(G),G.trim()==="")s(t);else{const ce=t.filter(_e=>_e.full_name.toLowerCase().includes(G)||_e.email.toLowerCase().includes(G)||_e.phone_number&&_e.phone_number.toLowerCase().includes(G));s(ce)}},oe=q=>{const G=q.target.value.toLowerCase();if(z(G),!!y)if(G.trim()==="")U(y.records);else{const ce=y.records.filter(_e=>_e.file_name.toLowerCase().includes(G)||_e.file_type.toLowerCase().includes(G));U(ce)}},A=()=>{z(""),y&&U(y.records)},Te=q=>{_(q),O&&N(!1)},le=()=>{N(!0)},$=async(q,G)=>{try{const{data:ce,error:_e}=await Oe.storage.from("records").download(q);if(_e)throw _e;const I=URL.createObjectURL(ce),te=document.createElement("a");te.href=I,te.download=G,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(I)}catch(ce){console.error("Error downloading file:",ce),alert("Failed to download file")}},be=()=>{o(""),s(t)};return k.useEffect(()=>{y&&U(y.records)},[y]),p.jsxs("div",{className:`layout ${S?"sidebar-collapsed":""}`,children:[p.jsx(Cc,{onSignOut:J,onSidebarToggle:ae,isCollapsed:S}),p.jsxs("div",{className:"main-container",children:[p.jsx(di,{isSidebarCollapsed:S}),p.jsxs("div",{className:"content",children:[p.jsxs("div",{className:"content-header",children:[p.jsx("h1",{children:"Patient Records"}),O&&y&&!R&&p.jsxs("button",{className:"back-button",onClick:le,children:[p.jsx(pR,{}),p.jsx("span",{children:"Back to List"})]})]}),l&&p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"spinner"}),p.jsx("p",{className:"loading-text",children:"Loading patients data..."})]}),h&&p.jsxs("div",{className:"error-message",children:[p.jsx(SR,{className:"error-icon"}),h]}),!l&&!h&&t.length===0&&p.jsxs("div",{className:"empty-state",children:[p.jsx(ph,{className:"empty-icon"}),p.jsx("p",{className:"no-data",children:"No patients found."})]}),!l&&!h&&t.length>0&&p.jsxs("div",{className:"two-panel-layout",children:[(R||!O)&&p.jsxs("div",{className:"patients-list-container",children:[p.jsxs("h2",{className:"panel-title",children:[p.jsx(rv,{}),p.jsx("span",{children:"Patients"})]}),p.jsx("div",{className:"search-container",children:p.jsxs("div",{className:"search-input-wrapper",children:[p.jsx(Nh,{className:"search-icon"}),p.jsx("input",{type:"text",className:"search-input",placeholder:"Search patients...",value:a,onChange:X,"aria-label":"Search patients"}),a&&p.jsx("button",{className:"clear-search",onClick:be,"aria-label":"Clear search",children:"×"})]})}),p.jsx("div",{className:"patients-scroll-container",children:n.length===0?p.jsx("div",{className:"no-search-results",children:p.jsx("p",{children:"No patients match your search."})}):n.map(q=>p.jsxs("div",{className:`patient-list-item ${(y==null?void 0:y.id)===q.id?"selected":""}`,onClick:()=>Te(q),children:[p.jsxs("div",{className:"patient-list-info",children:[p.jsx("div",{className:"patient-list-avatar",children:q.profile_picture_path?p.jsx("img",{src:bP(q.profile_picture_path),alt:q.full_name,className:"avatar-image"}):p.jsx("div",{className:"avatar-placeholder",children:p.jsx("span",{className:"avatar-initial",children:q.full_name.charAt(0)})})}),p.jsxs("div",{className:"patient-info-text",children:[p.jsx("h3",{children:q.full_name}),p.jsx("p",{children:q.email}),p.jsxs("p",{className:"phone-number",children:[p.jsx(vx,{}),p.jsx("span",{children:q.phone_number||"No phone number"})]})]})]}),p.jsxs("div",{className:"patient-list-meta",children:[p.jsxs("span",{className:"record-badge",children:[p.jsx(ka,{}),p.jsxs("span",{children:[q.records.length," record(s)"]})]}),p.jsx(gm,{className:"chevron-right"})]})]},q.id))})]}),(!O||O&&y&&!R)&&p.jsx("div",{className:"patient-details-container",children:y?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"details-header",children:[p.jsxs("h2",{className:"panel-title",children:[p.jsx(ph,{}),p.jsxs("span",{children:[y.full_name,"'s Records"]})]}),p.jsxs("div",{className:"patient-summary",children:[p.jsxs("p",{children:[p.jsx(rv,{}),p.jsx("span",{children:y.email}),y.phone_number&&p.jsxs(p.Fragment,{children:[" • ",p.jsx(vx,{}),p.jsx("span",{children:y.phone_number})]})]}),p.jsxs("span",{className:"dob-label",children:[p.jsx(ui,{}),p.jsxs("span",{children:["DOB: ",y.date_of_birth?new Date(y.date_of_birth).toLocaleDateString():"Not provided"]})]})]})]}),p.jsxs("div",{className:"details-content",children:[p.jsxs("div",{className:"medical-summary",children:[p.jsxs("h3",{children:[p.jsx(OR,{}),p.jsx("span",{children:"Patient Overview"})]}),p.jsxs("div",{className:"medical-grid",children:[p.jsxs("div",{className:"medical-item",children:[p.jsxs("span",{className:"medical-label",children:[p.jsx(yy,{}),p.jsx("span",{children:"Pregnancies"})]}),p.jsx("span",{className:"medical-value",children:y.pregnancies_count||0})]}),p.jsxs("div",{className:"medical-item",children:[p.jsxs("span",{className:"medical-label",children:[p.jsx(yy,{}),p.jsx("span",{children:"Live Births"})]}),p.jsx("span",{className:"medical-value",children:y.live_births_count||0})]}),p.jsxs("div",{className:"medical-item",children:[p.jsxs("span",{className:"medical-label",children:[p.jsx(ui,{}),p.jsx("span",{children:"Last Menstrual Period"})]}),p.jsx("span",{className:"medical-value",children:y.last_menstrual_period?new Date(y.last_menstrual_period).toLocaleDateString():"Not provided"})]}),p.jsxs("div",{className:"medical-item",children:[p.jsxs("span",{className:"medical-label",children:[p.jsx(ui,{}),p.jsx("span",{children:"Last Pap Smear"})]}),p.jsx("span",{className:"medical-value",children:y.last_pap_smear?new Date(y.last_pap_smear).toLocaleDateString():"Not provided"})]})]}),p.jsxs("div",{className:"medical-notes",children:[p.jsxs("div",{className:"note-item",children:[p.jsxs("h4",{children:[p.jsx(gR,{}),p.jsx("span",{children:"Allergies"})]}),p.jsx("p",{children:y.known_allergies||"None reported"})]}),p.jsxs("div",{className:"note-item",children:[p.jsxs("h4",{children:[p.jsx(jR,{}),p.jsx("span",{children:"Current Medications"})]}),p.jsx("p",{children:y.current_medications||"None reported"})]}),p.jsxs("div",{className:"note-item",children:[p.jsxs("h4",{children:[p.jsx(yy,{}),p.jsx("span",{children:"Gynecological Conditions"})]}),p.jsx("p",{children:y.gynecological_conditions||"None reported"})]})]})]}),p.jsxs("div",{className:"records-container",children:[p.jsxs("div",{className:"records-header",children:[p.jsxs("h3",{children:[p.jsx(ka,{}),p.jsx("span",{children:"Medical Records"})]}),p.jsx("div",{className:"search-container",children:p.jsxs("div",{className:"search-input-wrapper",children:[p.jsx(Nh,{className:"search-icon"}),p.jsx("input",{type:"text",className:"search-input",placeholder:"Search records...",value:B,onChange:oe,"aria-label":"Search records"}),B&&p.jsx("button",{className:"clear-search",onClick:A,"aria-label":"Clear search",children:"×"})]})})]}),y.records.length===0?p.jsxs("div",{className:"empty-records",children:[p.jsx(ph,{className:"empty-icon-small"}),p.jsx("p",{className:"no-records",children:"No records available"})]}):P.length===0?p.jsx("div",{className:"empty-records",children:p.jsx("p",{className:"no-records",children:"No records match your search."})}):p.jsx("div",{className:"table-container",children:p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"File Name"}),p.jsx("th",{className:"hide-on-mobile",children:"Type"}),p.jsx("th",{className:"hide-on-mobile",children:"Size"}),p.jsx("th",{children:"Date"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:P.map(q=>p.jsxs("tr",{children:[p.jsx("td",{children:q.file_name}),p.jsx("td",{className:"hide-on-mobile",children:q.file_type}),p.jsx("td",{className:"hide-on-mobile",children:xP(q.file_size)}),p.jsx("td",{children:new Date(q.created_at).toLocaleDateString()}),p.jsx("td",{children:p.jsxs("button",{className:"download-button",onClick:()=>$(q.file_path,q.file_name),"aria-label":"Download record",children:[p.jsx(kh,{className:"download-icon"}),p.jsx("span",{className:"hide-on-small",children:"Download"})]})})]},q.id))})]})})]})]})]}):p.jsxs("div",{className:"no-selection",children:[p.jsx(ph,{className:"no-selection-icon"}),p.jsx("p",{children:"Select a patient to view their medical records"})]})})]})]})]})]})}function xP(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+n[s]}function wP(){const[t,e]=k.useState([]),[n,s]=k.useState([]),[a,o]=k.useState(""),[l,u]=k.useState(null),[h,g]=k.useState(!0),[y,_]=k.useState(null),[S,T]=k.useState(!1),[O,M]=k.useState(!1),[R,N]=k.useState(!1),[B,z]=k.useState({key:"full_name",direction:"ascending"});k.useEffect(()=>{P();const q=localStorage.getItem("doctorSidebarCollapsed");q!==null&&T(JSON.parse(q))},[]),k.useEffect(()=>{if(a.trim()==="")s(t);else{const q=a.toLowerCase(),G=t.filter(ce=>{var _e,I,te;return((_e=ce.full_name)==null?void 0:_e.toLowerCase().includes(q))||((I=ce.email)==null?void 0:I.toLowerCase().includes(q))||((te=ce.phone_number)==null?void 0:te.toLowerCase().includes(q))||ce.date_of_birth&&new Date(ce.date_of_birth).toLocaleDateString().includes(a)});s(G)}},[a,t]);const P=async()=>{try{const{data:q,error:G}=await Oe.from("patients").select(`
          id,
          user_id,
          full_name,
          email,
          phone_number,
          date_of_birth,
          pregnancies_count,
          live_births_count,
          last_menstrual_period,
          known_allergies,
          current_medications,
          gynecological_conditions,
          last_pap_smear,
          last_pap_smear_result,
          profile_picture_path
        `);if(G)throw G;e(q),s(q)}catch(q){_(q.message)}finally{g(!1)}},U=q=>{o(q.target.value)},ee=()=>{o("")},ae=q=>{u(q),N(!0),M(!1)},J=()=>{N(!1)},X=()=>{console.log("Sign out clicked")},oe=q=>{T(q),localStorage.setItem("doctorSidebarCollapsed",JSON.stringify(q))},A=()=>{M(!O)},Te=()=>{M(!1)},le=q=>{let G="ascending";B.key===q&&B.direction==="ascending"&&(G="descending"),z({key:q,direction:G})},$=q=>B.key?[...q].sort((G,ce)=>{if(G[B.key]===null)return 1;if(ce[B.key]===null)return-1;if(B.key==="date_of_birth"){const _e=G[B.key]?new Date(G[B.key]):null,I=ce[B.key]?new Date(ce[B.key]):null;return _e?I?B.direction==="ascending"?_e-I:I-_e:-1:1}return B.direction==="ascending"?G[B.key].toString().localeCompare(ce[B.key].toString()):ce[B.key].toString().localeCompare(G[B.key].toString())}):q,be=q=>q?Oe.storage.from("avatars").getPublicUrl(q).data.publicUrl:null;return h?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading patient data..."})]}):y?p.jsxs("div",{className:"error-container",children:[p.jsx("h2",{children:"Error Loading Data"}),p.jsx("p",{children:y})]}):p.jsxs("div",{className:"app-container",children:[p.jsx(Cc,{onSignOut:X,onSidebarToggle:oe,isCollapsed:S,isMobileOpen:O}),O&&p.jsx("div",{className:"mobile-menu-backdrop",onClick:Te}),p.jsxs("div",{className:`main-content ${S?"content-expanded":""}`,children:[p.jsx(di,{isSidebarCollapsed:S,onMobileMenuToggle:A}),p.jsxs("div",{className:"content fade-in",children:[p.jsx(SP,{patients:$(n),onSelectPatient:ae,searchTerm:a,onSearchChange:U,onClearSearch:ee,totalPatients:t.length,requestSort:le,sortConfig:B}),l&&p.jsx(CP,{patient:l,isOpen:R,onClose:J,getAvatarUrl:be})]})]})]})}function SP({patients:t,onSelectPatient:e,searchTerm:n,onSearchChange:s,onClearSearch:a,totalPatients:o,requestSort:l,sortConfig:u}){const h=g=>u.key!==g?"":u.direction==="ascending"?" ↑":" ↓";return p.jsxs("div",{className:"patients-table-container",children:[p.jsxs("div",{className:"table-header-section",children:[p.jsx("h1",{children:"Patients Data"}),p.jsx("div",{className:"table-actions"})]}),p.jsxs("div",{className:"search-container",children:[p.jsxs("div",{className:"search-input-wrapper",children:[p.jsx("input",{type:"text",placeholder:"Search patients by name, email or phone...",value:n,onChange:s,className:"search-input"}),n&&p.jsx("button",{className:"clear-search-btn",onClick:a,children:"×"})]}),p.jsx("div",{className:"search-results-count",children:t.length===o?`Showing all ${o} patients`:`Found ${t.length} of ${o} patients`})]}),p.jsx("div",{className:"table-wrapper",children:p.jsxs("table",{className:"patients-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{onClick:()=>l("full_name"),className:"sortable-header",children:["Name ",h("full_name")]}),p.jsxs("th",{onClick:()=>l("email"),className:"sortable-header",children:["Email ",h("email")]}),p.jsxs("th",{onClick:()=>l("phone_number"),className:"sortable-header",children:["Phone ",h("phone_number")]}),p.jsxs("th",{onClick:()=>l("date_of_birth"),className:"sortable-header",children:["Date of Birth ",h("date_of_birth")]}),p.jsx("th",{children:"Action"})]})}),p.jsx("tbody",{children:t.length>0?t.map(g=>p.jsxs("tr",{className:"patient-row",children:[p.jsx("td",{children:g.full_name}),p.jsx("td",{children:g.email}),p.jsx("td",{children:g.phone_number}),p.jsx("td",{children:g.date_of_birth?new Date(g.date_of_birth).toLocaleDateString():"Not recorded"}),p.jsx("td",{children:p.jsx("button",{onClick:()=>e(g),className:"view-details-btn",children:"View Details"})})]},g.id)):p.jsx("tr",{children:p.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No patients found"})})})]})}),p.jsxs("div",{className:"pagination-controls",children:[p.jsx("button",{className:"pagination-btn",disabled:!0,children:"Previous"}),p.jsxs("div",{className:"pagination-pages",children:[p.jsx("button",{className:"page-number active",children:"1"}),p.jsx("button",{className:"page-number",children:"2"}),p.jsx("button",{className:"page-number",children:"3"})]}),p.jsx("button",{className:"pagination-btn",children:"Next"})]})]})}function CP({patient:t,isOpen:e,onClose:n,getAvatarUrl:s}){const[a,o]=k.useState(!1),[l,u]=k.useState("medical"),[h,g]=k.useState(!1),[y,_]=k.useState([]),[S,T]=k.useState([]),[O,M]=k.useState(0),[R,N]=k.useState(!1),[B,z]=k.useState(""),[P,U]=k.useState("Laboratory Test"),[ee,ae]=k.useState([]),[J,X]=k.useState(!1),[oe,A]=k.useState(null);k.useEffect(()=>{e&&l==="results"&&Te()},[e,l,t==null?void 0:t.id]),k.useEffect(()=>{o(!1)},[t]);const Te=async()=>{if(t!=null&&t.id){X(!0);try{const{data:ye,error:F}=await Oe.from("medical_results").select("*").eq("patient_id",t.id).order("created_at",{ascending:!1});if(F)throw F;ae(ye||[])}catch(ye){console.error("Error fetching results:",ye)}finally{X(!1)}}},le=ye=>{ye.preventDefault(),ye.stopPropagation(),ye.type==="dragenter"||ye.type==="dragover"?g(!0):ye.type==="dragleave"&&g(!1)},$=ye=>{ye.preventDefault(),ye.stopPropagation(),g(!1);const F=[...ye.dataTransfer.files];q(F)},be=ye=>{const F=[...ye.target.files];q(F)},q=ye=>{const F=ye.filter(ve=>ve.size<=10485760);F.length!==ye.length&&alert("Some files were skipped because they exceed the 10MB size limit."),_(F);const W=F.map(ve=>ve.type.startsWith("image/")?URL.createObjectURL(ve):null);T(W)},G=async()=>{if(y.length===0){alert("Please select at least one file to upload");return}if(!P){alert("Please select a result type");return}N(!0),M(0),A(null);try{const{data:{user:ye}}=await Oe.auth.getUser();if(!ye)throw new Error("Not authenticated");const{data:F,error:W}=await Oe.from("doctors").select("id").eq("user_id",ye.id).single();if(W)throw W;if(!F)throw new Error("Doctor record not found");const ve=F.id;for(let se=0;se<y.length;se++){const Ce=y[se],Pe=Ce.name.split(".").pop(),Me=`${Date.now()}_${Math.random().toString(36).substring(2,15)}.${Pe}`,et=`${t.user_id}/${Me}`,{error:ue}=await Oe.storage.from("medical-results").upload(et,Ce);if(ue)throw ue;const{error:Le}=await Oe.from("medical_results").insert({patient_id:t.id,doctor_id:ve,file_name:Ce.name,file_path:et,file_type:Ce.type,file_size:Ce.size,description:B,result_type:P});if(Le)throw Le;M(Math.round((se+1)/y.length*100))}_([]),T([]),z(""),Te(),alert(`Successfully uploaded ${y.length} files for ${t.full_name}`)}catch(ye){console.error("Error uploading files:",ye),A(`Upload failed: ${ye.message||"Unknown error"}`)}finally{N(!1)}},ce=()=>{_([]),T([]),z("")},_e=ye=>ye.startsWith("image/")?"🖼️":ye.includes("pdf")?"📄":ye.includes("word")||ye.includes("doc")?"📝":"📎",I=ye=>new Date(ye).toLocaleString(),te=ye=>ye<1024?ye+" B":ye<1048576?(ye/1024).toFixed(1)+" KB":(ye/1048576).toFixed(1)+" MB",xe=async ye=>{try{const{data:F,error:W}=await Oe.storage.from("medical-results").createSignedUrl(ye,60);if(W)throw W;return F.signedUrl}catch(F){return console.error("Error getting file URL:",F),null}},Ae=async ye=>{const F=await xe(ye.file_path);F?window.open(F,"_blank"):alert("Could not access file. Please try again later.")};if(!e)return null;const we=ye=>{ye.target.className==="modal-backdrop"&&n()},Ne=ye=>ye.split(" ").map(F=>F[0]).join("").toUpperCase().substring(0,2),Re=()=>{console.error("Avatar image failed to load"),o(!0)};return p.jsx("div",{className:"modal-backdrop",onClick:we,children:p.jsxs("div",{className:"modal-content",children:[p.jsx("div",{className:"modal-header",children:p.jsx("button",{onClick:n,className:"modal-close-btn",children:"×"})}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"patient-profile-header",children:[p.jsx("div",{className:"patient-avatar-container",children:t.profile_picture_path&&!a?p.jsx("img",{src:s(t.profile_picture_path),alt:`${t.full_name}'s avatar`,className:"patient-avatar",onError:Re}):p.jsx("div",{className:"patient-avatar-fallback",children:Ne(t.full_name)})}),p.jsxs("div",{className:"patient-basic-info",children:[p.jsx("h2",{children:t.full_name}),p.jsxs("div",{className:"patient-contact",children:[p.jsxs("div",{className:"contact-item",children:[p.jsx("i",{className:"contact-icon",children:"✉️"}),p.jsx("span",{children:t.email})]}),p.jsxs("div",{className:"contact-item",children:[p.jsx("i",{className:"contact-icon",children:"📞"}),p.jsx("span",{children:t.phone_number})]}),p.jsxs("div",{className:"contact-item",children:[p.jsx("i",{className:"contact-icon",children:"🎂"}),p.jsx("span",{children:t.date_of_birth?new Date(t.date_of_birth).toLocaleDateString():"Not recorded"})]})]})]})]}),p.jsxs("div",{className:"patient-tabs",children:[p.jsxs("div",{className:"tabs-header",children:[p.jsx("div",{className:`tab ${l==="medical"?"active":""}`,onClick:()=>u("medical"),children:"Medical Profile"}),p.jsx("div",{className:`tab ${l==="results"?"active":""}`,onClick:()=>u("results"),children:"Results"})]}),p.jsx("div",{className:"tab-content",children:l==="medical"?p.jsxs("div",{className:"detail-grid-landscape",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("h3",{children:"Reproductive History"}),p.jsxs("div",{className:"detail-card-content",children:[p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-value",children:t.pregnancies_count||0}),p.jsx("span",{className:"stat-label",children:"Pregnancies"})]}),p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-value",children:t.live_births_count||0}),p.jsx("span",{className:"stat-label",children:"Live Births"})]}),p.jsxs("div",{className:"detail-info",children:[p.jsx("span",{className:"info-label",children:"Last Period:"}),p.jsx("span",{className:"info-value",children:t.last_menstrual_period?new Date(t.last_menstrual_period).toLocaleDateString():"Not recorded"})]})]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("h3",{children:"Screening History"}),p.jsxs("div",{className:"detail-card-content",children:[p.jsxs("div",{className:"detail-info",children:[p.jsx("span",{className:"info-label",children:"Last Pap Smear:"}),p.jsx("span",{className:"info-value",children:t.last_pap_smear?new Date(t.last_pap_smear).toLocaleDateString():"Not recorded"})]}),p.jsxs("div",{className:"detail-info",children:[p.jsx("span",{className:"info-label",children:"Result:"}),p.jsx("span",{className:"info-value result-tag",children:t.last_pap_smear_result||"Not recorded"})]})]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("h3",{children:"Allergies & Medications"}),p.jsxs("div",{className:"detail-card-content scrollable",children:[p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Known Allergies"}),p.jsx("p",{children:t.known_allergies||"No known allergies"})]}),p.jsxs("div",{className:"detail-section",children:[p.jsx("h4",{children:"Current Medications"}),p.jsx("p",{children:t.current_medications||"No current medications"})]})]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("h3",{children:"Gynecological Conditions"}),p.jsx("div",{className:"detail-card-content scrollable",children:p.jsx("p",{children:t.gynecological_conditions||"No conditions recorded"})})]})]}):p.jsxs("div",{className:"detail-grid-landscape",children:[p.jsxs("div",{className:"detail-item full-width",children:[p.jsx("h3",{children:"Upload Results"}),p.jsxs("div",{className:"detail-card-content results-container",children:[p.jsxs("div",{className:"upload-form",children:[p.jsxs("div",{className:"form-row",children:[p.jsx("label",{htmlFor:"result-type",children:"Result Type:"}),p.jsxs("select",{id:"result-type",value:P,onChange:ye=>U(ye.target.value),className:"form-select",children:[p.jsx("option",{value:"Laboratory Test",children:"Laboratory Test"}),p.jsx("option",{value:"Imaging",children:"Imaging"}),p.jsx("option",{value:"Ultrasound",children:"Ultrasound"}),p.jsx("option",{value:"Pap Smear",children:"Pap Smear"}),p.jsx("option",{value:"Biopsy",children:"Biopsy"}),p.jsx("option",{value:"Other",children:"Other"})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsx("label",{htmlFor:"result-description",children:"Description:"}),p.jsx("textarea",{id:"result-description",value:B,onChange:ye=>z(ye.target.value),placeholder:"Enter brief description of the result",className:"form-textarea"})]})]}),p.jsxs("div",{className:"results-grid",children:[p.jsxs("div",{className:`drop-zone ${h?"drag-active":""}`,onDragEnter:le,onDragLeave:le,onDragOver:le,onDrop:$,children:[p.jsx("input",{type:"file",multiple:!0,onChange:be,accept:"image/*,.pdf,.doc,.docx",id:"file-input",style:{display:"none"}}),p.jsx("label",{htmlFor:"file-input",className:"drop-zone-label",children:p.jsxs("div",{className:"drop-zone-content",children:[p.jsx("span",{className:"upload-icon",children:"📁"}),p.jsx("p",{children:"Drag & Drop files here or click to browse"}),p.jsx("p",{className:"file-types",children:"Supported files: Images, PDF, DOC"})]})})]}),p.jsx("div",{className:"preview-zone",children:R?p.jsxs("div",{className:"upload-progress",children:[p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${O}%`}})}),p.jsxs("p",{children:["Uploading... ",O,"%"]}),oe&&p.jsx("div",{className:"upload-error",children:oe})]}):y.length>0?p.jsxs("div",{className:"preview-content",children:[p.jsxs("h4",{children:["Selected Files (",y.length,")"]}),p.jsx("div",{className:"preview-grid",children:y.map((ye,F)=>p.jsxs("div",{className:"preview-item",children:[S[F]?p.jsx("img",{src:S[F],alt:`Preview ${F}`}):p.jsx("div",{className:"file-icon",children:ye.name.split(".").pop().toUpperCase()}),p.jsx("p",{className:"file-name",children:ye.name}),p.jsx("p",{className:"file-size",children:te(ye.size)})]},F))}),p.jsxs("div",{className:"preview-actions",children:[p.jsx("button",{className:"action-btn primary",onClick:G,disabled:R,children:"Upload Files"}),p.jsx("button",{className:"action-btn secondary",onClick:ce,disabled:R,children:"Cancel"})]})]}):p.jsxs("div",{className:"no-files-message",children:[p.jsx("p",{children:"No files selected"}),p.jsx("p",{children:"Selected files will appear here"})]})})]})]})]}),p.jsxs("div",{className:"detail-item full-width",children:[p.jsx("h3",{children:"Patient Results"}),p.jsx("div",{className:"detail-card-content",children:J?p.jsx("div",{className:"loading-spinner-small"}):ee.length>0?p.jsx("div",{className:"results-list",children:p.jsxs("table",{className:"results-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Type"}),p.jsx("th",{children:"Description"}),p.jsx("th",{children:"File"}),p.jsx("th",{children:"Date"}),p.jsx("th",{children:"Action"})]})}),p.jsx("tbody",{children:ee.map(ye=>p.jsxs("tr",{children:[p.jsx("td",{children:ye.result_type}),p.jsx("td",{children:ye.description||"No description"}),p.jsx("td",{children:p.jsxs("div",{className:"file-cell",children:[p.jsx("span",{className:"file-icon-small",children:_e(ye.file_type)}),p.jsx("span",{className:"file-name-small",children:ye.file_name})]})}),p.jsx("td",{children:I(ye.created_at)}),p.jsx("td",{children:p.jsx("button",{className:"view-result-btn",onClick:()=>Ae(ye),children:"View"})})]},ye.id))})]})}):p.jsx("div",{className:"no-results-message",children:p.jsx("p",{children:"No results found for this patient"})})})]})]})})]})]})]})})}function TP(){const{user:t}=Va(),[e,n]=k.useState(()=>{const ae=localStorage.getItem("sidebarCollapsed");return ae?JSON.parse(ae):!1}),[s,a]=k.useState({full_name:"",date_of_birth:"",phone_number:"",profile_picture:null,last_menstrual_period:"",pregnancies_count:0,live_births_count:0,known_allergies:"",current_medications:"",gynecological_conditions:"",last_pap_smear:"",last_pap_smear_result:""}),[o,l]=k.useState(!1),[u,h]=k.useState(s),[g,y]=k.useState(null),[_,S]=k.useState(!0),[T,O]=k.useState(null),[M,R]=k.useState(!1);k.useEffect(()=>{t&&B()},[t]),k.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(e))},[e]);const N=ae=>{n(ae)},B=async()=>{try{S(!0);const{data:ae,error:J}=await Oe.from("patients").select("*").eq("user_id",t.id).single();if(J)throw J;if(ae){const X={...s,...ae};if(a(X),h(X),ae.profile_picture_path){const{data:{publicUrl:oe}}=Oe.storage.from("avatars").getPublicUrl(ae.profile_picture_path);a(A=>({...A,profile_picture:oe})),h(A=>({...A,profile_picture:oe}))}}}catch(ae){O("Error fetching profile data"),console.error("Error:",ae)}finally{S(!1)}},z=ae=>{const{name:J,value:X}=ae.target;h(oe=>({...oe,[J]:X}))},P=async ae=>{const J=ae.target.files[0];if(J)try{S(!0);const X=J.name.split(".").pop(),oe=`${t.id}/${Date.now()}.${X}`,{error:A,data:Te}=await Oe.storage.from("avatars").upload(oe,J,{upsert:!0,cacheControl:"3600"});if(A)throw A;const{data:{publicUrl:le}}=Oe.storage.from("avatars").getPublicUrl(oe),{error:$}=await Oe.from("patients").update({profile_picture_path:oe}).eq("user_id",t.id);if($)throw $;h(be=>({...be,profile_picture:le})),y(URL.createObjectURL(J))}catch(X){O("Error uploading image"),console.error("Error:",X)}finally{S(!1)}},U=async ae=>{ae.preventDefault();try{S(!0),O(null);const{error:J}=await Oe.from("patients").update({full_name:u.full_name,date_of_birth:u.date_of_birth,phone_number:u.phone_number,last_menstrual_period:u.last_menstrual_period,pregnancies_count:u.pregnancies_count,live_births_count:u.live_births_count,known_allergies:u.known_allergies,current_medications:u.current_medications,gynecological_conditions:u.gynecological_conditions,last_pap_smear:u.last_pap_smear,last_pap_smear_result:u.last_pap_smear_result}).eq("user_id",t.id);if(J)throw J;a(u),l(!1)}catch(J){O("Error updating profile"),console.error("Error:",J)}finally{S(!1)}},ee=()=>{R(!M)};return _?p.jsxs("div",{className:"fullscreen-loader",children:[p.jsx("div",{className:"loader-spinner"}),p.jsx("p",{children:"Loading profile..."})]}):p.jsxs("div",{className:"app-container",children:[p.jsx(di,{isSidebarCollapsed:e}),p.jsxs("div",{className:"app-layout",children:[p.jsx("div",{className:`sidebar ${e?"collapsed":""} ${M?"mobile-visible":""}`,children:p.jsx(hd,{onCollapsedChange:N})}),p.jsx("div",{className:"main-content",children:p.jsxs("div",{className:"profile-main",children:[T&&p.jsxs("div",{className:"error-message",children:[p.jsx(zo,{className:"error-icon"}),T]}),p.jsx("div",{className:"profile-header-container",children:p.jsxs("div",{className:"profile-header",children:[p.jsx("div",{className:"profile-picture-section",children:p.jsxs("div",{className:"profile-picture-container",children:[p.jsx("img",{src:g||u.profile_picture||"/default-avatar.png",alt:"Profile",className:"profile-picture"}),o&&p.jsxs("div",{className:"profile-picture-upload",children:[p.jsxs("label",{htmlFor:"profilePicture",className:"upload-label",children:[p.jsx(vR,{className:"camera-icon"}),p.jsx("span",{children:"Change Photo"})]}),p.jsx("input",{type:"file",id:"profilePicture",name:"profilePicture",accept:"image/*",onChange:P,className:"hidden-input"})]})]})}),p.jsxs("div",{className:"profile-title-section",children:[p.jsx("h1",{children:"Patient Profile"}),p.jsx("h2",{className:"patient-name",children:s.full_name||"No Name Provided"})]})]})}),p.jsxs("form",{onSubmit:U,className:"profile-grid custom-scrollbar",children:[p.jsxs("div",{className:"profile-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx(kR,{className:"section-icon"}),p.jsx("h2",{children:"Basic Information"})]}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"full_name",children:"Full Name"}),o?p.jsx("input",{type:"text",id:"full_name",name:"full_name",value:u.full_name,onChange:z,placeholder:"Enter your full name"}):p.jsx("p",{children:s.full_name||"Not provided"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"date_of_birth",children:"Date of Birth"}),o?p.jsx("input",{type:"date",id:"date_of_birth",name:"date_of_birth",value:u.date_of_birth,onChange:z}):p.jsx("p",{children:s.date_of_birth||"Not provided"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"phone_number",children:"Phone Number"}),o?p.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:u.phone_number,onChange:z,placeholder:"Enter your phone number"}):p.jsx("p",{children:s.phone_number||"Not provided"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"last_menstrual_period",children:"Last Menstrual Period"}),o?p.jsx("input",{type:"date",id:"last_menstrual_period",name:"last_menstrual_period",value:u.last_menstrual_period,onChange:z}):p.jsx("p",{children:s.last_menstrual_period||"Not provided"})]})]})]}),p.jsxs("div",{className:"profile-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx(NR,{className:"section-icon"}),p.jsx("h2",{children:"Medical History"})]}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"pregnancies_count",children:"Number of Pregnancies"}),o?p.jsx("input",{type:"number",id:"pregnancies_count",name:"pregnancies_count",value:u.pregnancies_count,onChange:z,min:"0"}):p.jsx("p",{children:s.pregnancies_count})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"live_births_count",children:"Number of Live Births"}),o?p.jsx("input",{type:"number",id:"live_births_count",name:"live_births_count",value:u.live_births_count,onChange:z,min:"0"}):p.jsx("p",{children:s.live_births_count})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"known_allergies",children:"Known Allergies"}),o?p.jsx("textarea",{id:"known_allergies",name:"known_allergies",value:u.known_allergies,onChange:z,placeholder:"List any known allergies"}):p.jsx("p",{children:s.known_allergies||"None reported"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"current_medications",children:"Current Medications"}),o?p.jsx("textarea",{id:"current_medications",name:"current_medications",value:u.current_medications,onChange:z,placeholder:"List any current medications"}):p.jsx("p",{children:s.current_medications||"None reported"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"gynecological_conditions",children:"Gynecological Conditions"}),o?p.jsx("textarea",{id:"gynecological_conditions",name:"gynecological_conditions",value:u.gynecological_conditions,onChange:z,placeholder:"List any gynecological conditions"}):p.jsx("p",{children:s.gynecological_conditions||"None reported"})]})]})]}),p.jsxs("div",{className:"profile-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx(ui,{className:"section-icon"}),p.jsx("h2",{children:"Screening History"})]}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"last_pap_smear",children:"Last Pap Smear Date"}),o?p.jsx("input",{type:"date",id:"last_pap_smear",name:"last_pap_smear",value:u.last_pap_smear,onChange:z}):p.jsx("p",{children:s.last_pap_smear||"Not provided"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"last_pap_smear_result",children:"Last Pap Smear Result"}),o?p.jsx("input",{type:"text",id:"last_pap_smear_result",name:"last_pap_smear_result",value:u.last_pap_smear_result,onChange:z,placeholder:"Enter test result"}):p.jsx("p",{children:s.last_pap_smear_result||"Not provided"})]})]})]})]}),p.jsx("div",{className:`form-actions ${o?"editing":""}`,children:o?p.jsxs(p.Fragment,{children:[p.jsxs("button",{type:"button",className:"save-button",onClick:U,disabled:_,children:[p.jsx(MR,{})," ",_?"Saving...":"Save Changes"]}),p.jsxs("button",{type:"button",className:"cancel-button",onClick:()=>{h(s),l(!1),y(null)},disabled:_,children:[p.jsx(zo,{})," Cancel"]})]}):p.jsxs("button",{type:"button",className:"edit-profile-button",onClick:()=>l(!0),disabled:_,children:[p.jsx(xR,{})," Edit Profile"]})})]})})]}),p.jsx("button",{className:"mobile-sidebar-toggle",onClick:ee,"aria-label":"Toggle sidebar",children:"≡"})]})}const z0=k.createContext({});function V0(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const H0=typeof window<"u",o4=H0?k.useLayoutEffect:k.useEffect,sg=k.createContext(null),F0=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class AP extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=s instanceof HTMLElement&&s.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OP({children:t,isPresent:e,anchorX:n}){const s=k.useId(),a=k.useRef(null),o=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(F0);return k.useInsertionEffect(()=>{const{width:u,height:h,top:g,left:y,right:_}=o.current;if(e||!a.current||!u||!h)return;const S=n==="left"?`left: ${y}`:`right: ${_}`;a.current.dataset.motionPopId=s;const T=document.createElement("style");return l&&(T.nonce=l),document.head.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${S}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(T)}},[e]),p.jsx(AP,{isPresent:e,childRef:a,sizeRef:o,children:k.cloneElement(t,{ref:a})})}const jP=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const h=V0(MP),g=k.useId(),y=k.useCallback(S=>{h.set(S,!0);for(const T of h.values())if(!T)return;s&&s()},[h,s]),_=k.useMemo(()=>({id:g,initial:e,isPresent:n,custom:a,onExitComplete:y,register:S=>(h.set(S,!1),()=>h.delete(S))}),o?[Math.random(),y]:[n,y]);return k.useMemo(()=>{h.forEach((S,T)=>h.set(T,!1))},[n]),k.useEffect(()=>{!n&&!h.size&&s&&s()},[n]),l==="popLayout"&&(t=p.jsx(OP,{isPresent:n,anchorX:u,children:t})),p.jsx(sg.Provider,{value:_,children:t})};function MP(){return new Map}function l4(t=!0){const e=k.useContext(sg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,o=k.useId();k.useEffect(()=>{if(t)return a(o)},[t]);const l=k.useCallback(()=>t&&s&&s(o),[o,s,t]);return!n&&s?[!1,l]:[!0]}const im=t=>t.key||"";function $w(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const EP=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[h,g]=l4(l),y=k.useMemo(()=>$w(t),[t]),_=l&&!h?[]:y.map(im),S=k.useRef(!0),T=k.useRef(y),O=V0(()=>new Map),[M,R]=k.useState(y),[N,B]=k.useState(y);o4(()=>{S.current=!1,T.current=y;for(let U=0;U<N.length;U++){const ee=im(N[U]);_.includes(ee)?O.delete(ee):O.get(ee)!==!0&&O.set(ee,!1)}},[N,_.length,_.join("-")]);const z=[];if(y!==M){let U=[...y];for(let ee=0;ee<N.length;ee++){const ae=N[ee],J=im(ae);_.includes(J)||(U.splice(ee,0,ae),z.push(ae))}return o==="wait"&&z.length&&(U=z),B($w(U)),R(y),null}const{forceRender:P}=k.useContext(z0);return p.jsx(p.Fragment,{children:N.map(U=>{const ee=im(U),ae=l&&!h?!1:y===N||_.includes(ee),J=()=>{if(O.has(ee))O.set(ee,!0);else return;let X=!0;O.forEach(oe=>{oe||(X=!1)}),X&&(P==null||P(),B(T.current),l&&(g==null||g()),s&&s())};return p.jsx(jP,{isPresent:ae,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:o,onExitComplete:ae?void 0:J,anchorX:u,children:U},ee)})})};function q0(t,e){t.indexOf(e)===-1&&t.push(e)}function $0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const As=t=>t;let c4=As;const RP={useManualTiming:!1};function G0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Oc=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class W0{constructor(){this.subscriptions=[]}add(e){return q0(this.subscriptions,e),()=>$0(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const La=t=>t*1e3,Ba=t=>t/1e3;function u4(t,e){return e?t*(1e3/e):0}const kP=G0(()=>window.ScrollTimeline!==void 0);class NP{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(a=>{if(kP()&&a.attachTimeline)return a.attachTimeline(e);if(typeof n=="function")return n(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class DP extends NP{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Y0(t,e){return t?t[e]||t.default||t:void 0}const vv=2e4;function h4(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<vv;)e+=n,s=t.next(e);return e>=vv?1/0:e}function K0(t){return typeof t=="function"}function Gw(t,e){t.timeline=e,t.onfinish=null}const X0=t=>Array.isArray(t)&&typeof t[0]=="number",PP={linearEasing:void 0};function LP(t,e){const n=G0(t);return()=>{var s;return(s=PP[e])!==null&&s!==void 0?s:n()}}const Vm=LP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),d4=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let o=0;o<a;o++)s+=t(Oc(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function f4(t){return!!(typeof t=="function"&&Vm()||!t||typeof t=="string"&&(t in bv||Vm())||X0(t)||Array.isArray(t)&&t.every(f4))}const Sh=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,bv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sh([0,.65,.55,1]),circOut:Sh([.55,0,1,.45]),backIn:Sh([.31,.01,.66,-.59]),backOut:Sh([.33,1.53,.69,.99])};function m4(t,e){if(t)return typeof t=="function"&&Vm()?d4(t,e):X0(t)?Sh(t):Array.isArray(t)?t.map(n=>m4(n,e)||bv.easeOut):bv[t]}const am=["read","resolveKeyframes","update","preRender","render","postRender"],Ww={value:null};function BP(t,e){let n=new Set,s=new Set,a=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},h=0;function g(_){l.has(_)&&(y.schedule(_),t()),h++,_(u)}const y={schedule:(_,S=!1,T=!1)=>{const M=T&&a?n:s;return S&&l.add(_),M.has(_)||M.add(_),_},cancel:_=>{s.delete(_),l.delete(_)},process:_=>{if(u=_,a){o=!0;return}a=!0,[n,s]=[s,n],n.forEach(g),e&&Ww.value&&Ww.value.frameloop[e].push(h),h=0,n.clear(),a=!1,o&&(o=!1,y.process(_))}};return y}const UP=40;function g4(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=am.reduce((N,B)=>(N[B]=BP(o,e?B:void 0),N),{}),{read:u,resolveKeyframes:h,update:g,preRender:y,render:_,postRender:S}=l,T=()=>{const N=performance.now();n=!1,a.delta=s?1e3/60:Math.max(Math.min(N-a.timestamp,UP),1),a.timestamp=N,a.isProcessing=!0,u.process(a),h.process(a),g.process(a),y.process(a),_.process(a),S.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(T))},O=()=>{n=!0,s=!0,a.isProcessing||t(T)};return{schedule:am.reduce((N,B)=>{const z=l[B];return N[B]=(P,U=!1,ee=!1)=>(n||O(),z.schedule(P,U,ee)),N},{}),cancel:N=>{for(let B=0;B<am.length;B++)l[am[B]].cancel(N)},state:a,steps:l}}const{schedule:Nt,cancel:Vr,state:Pn,steps:Ry}=g4(typeof requestAnimationFrame<"u"?requestAnimationFrame:As,!0),{schedule:Q0}=g4(queueMicrotask,!1);let wm;function IP(){wm=void 0}const Ui={now:()=>(wm===void 0&&Ui.set(Pn.isProcessing||RP.useManualTiming?Pn.timestamp:performance.now()),wm),set:t=>{wm=t,queueMicrotask(IP)}},li={x:!1,y:!1};function p4(){return li.x||li.y}function zP(t){return t==="x"||t==="y"?li[t]?null:(li[t]=!0,()=>{li[t]=!1}):li.x||li.y?null:(li.x=li.y=!0,()=>{li.x=li.y=!1})}function VP(t,e,n){var s;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function y4(t,e){const n=VP(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function Yw(t){return!(t.pointerType==="touch"||p4())}function HP(t,e,n={}){const[s,a,o]=y4(t,n),l=u=>{if(!Yw(u))return;const{target:h}=u,g=e(h,u);if(typeof g!="function"||!h)return;const y=_=>{Yw(_)&&(g(_),h.removeEventListener("pointerleave",y))};h.addEventListener("pointerleave",y,a)};return s.forEach(u=>{u.addEventListener("pointerenter",l,a)}),o}function Kw(t,e){const n=`${e}PointerCapture`;if(t.target instanceof Element&&n in t.target&&t.pointerId!==void 0)try{t.target[n](t.pointerId)}catch{}}const v4=(t,e)=>e?t===e?!0:v4(t,e.parentElement):!1,J0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qP(t){return FP.has(t.tagName)||t.tabIndex!==-1}const Ch=new WeakSet;function Xw(t){return e=>{e.key==="Enter"&&t(e)}}function ky(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $P=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Xw(()=>{if(Ch.has(n))return;ky(n,"down");const a=Xw(()=>{ky(n,"up")}),o=()=>ky(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Qw(t){return J0(t)&&!p4()}function GP(t,e,n={}){const[s,a,o]=y4(t,n),l=u=>{const h=u.currentTarget;if(!h||!Qw(u)||Ch.has(h))return;Ch.add(h),Kw(u,"set");const g=e(h,u),y=(T,O)=>{h.removeEventListener("pointerup",_),h.removeEventListener("pointercancel",S),Kw(T,"release"),!(!Qw(T)||!Ch.has(h))&&(Ch.delete(h),typeof g=="function"&&g(T,{success:O}))},_=T=>{(T.isTrusted?WP(T,h instanceof Element?h.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?y(T,!1):y(T,!(h instanceof Element)||v4(h,T.target))},S=T=>{y(T,!1)};h.addEventListener("pointerup",_,a),h.addEventListener("pointercancel",S,a),h.addEventListener("lostpointercapture",S,a)};return s.forEach(u=>{u=n.useGlobalTarget?window:u;let h=!1;u instanceof HTMLElement&&(h=!0,!qP(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0)),u.addEventListener("pointerdown",l,a),h&&u.addEventListener("focus",g=>$P(g,a),a)}),o}function WP(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}const Jw=30,YP=t=>!isNaN(parseFloat(t));class KP{constructor(e,n={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=Ui.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ui.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new W0);const s=this.events[e].add(n);return e==="change"?()=>{s(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Jw);return u4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zh(t,e){return new KP(t,e)}const b4=k.createContext({strict:!1}),Zw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jc={};for(const t in Zw)jc[t]={isEnabled:e=>Zw[t].some(n=>!!e[n])};function XP(t){for(const e in t)jc[e]={...jc[e],...t[e]}}const QP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||QP.has(t)}let _4=t=>!Hm(t);function JP(t){t&&(_4=e=>e.startsWith("on")?!Hm(e):t(e))}try{JP(require("@emotion/is-prop-valid").default)}catch{}function ZP(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(_4(a)||n===!0&&Hm(a)||!e&&!Hm(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function e8(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const ig=k.createContext({});function ag(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ed(t){return typeof t=="string"||Array.isArray(t)}const Z0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eb=["initial",...Z0];function rg(t){return ag(t.animate)||eb.some(e=>ed(t[e]))}function x4(t){return!!(rg(t)||t.variants)}function t8(t,e){if(rg(t)){const{initial:n,animate:s}=t;return{initial:n===!1||ed(n)?n:void 0,animate:ed(s)?s:void 0}}return t.inherit!==!1?e:{}}function n8(t){const{initial:e,animate:n}=t8(t,k.useContext(ig));return k.useMemo(()=>({initial:e,animate:n}),[e2(e),e2(n)])}function e2(t){return Array.isArray(t)?t.join(" "):t}const s8=Symbol.for("motionComponentSymbol");function hc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function i8(t,e,n){return k.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):hc(n)&&(n.current=s))},[e])}const tb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),a8="framerAppearId",w4="data-"+tb(a8),S4=k.createContext({});function r8(t,e,n,s,a){var o,l;const{visualElement:u}=k.useContext(ig),h=k.useContext(b4),g=k.useContext(sg),y=k.useContext(F0).reducedMotion,_=k.useRef(null);s=s||h.renderer,!_.current&&s&&(_.current=s(t,{visualState:e,parent:u,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y}));const S=_.current,T=k.useContext(S4);S&&!S.projection&&a&&(S.type==="html"||S.type==="svg")&&o8(_.current,n,a,T);const O=k.useRef(!1);k.useInsertionEffect(()=>{S&&O.current&&S.update(n,g)});const M=n[w4],R=k.useRef(!!M&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,M))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,M)));return o4(()=>{S&&(O.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),Q0.render(S.render),R.current&&S.animationState&&S.animationState.animateChanges())}),k.useEffect(()=>{S&&(!R.current&&S.animationState&&S.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)===null||N===void 0||N.call(window,M)}),R.current=!1))}),S}function o8(t,e,n,s){const{layoutId:a,layout:o,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:C4(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||u&&hc(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:h,layoutRoot:g})}function C4(t){if(t)return t.options.allowProjection!==!1?t.projection:C4(t.parent)}function l8({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:a}){var o,l;t&&XP(t);function u(g,y){let _;const S={...k.useContext(F0),...g,layoutId:c8(g)},{isStatic:T}=S,O=n8(g),M=s(g,T);if(!T&&H0){u8();const R=h8(S);_=R.MeasureLayout,O.visualElement=r8(a,M,S,e,R.ProjectionNode)}return p.jsxs(ig.Provider,{value:O,children:[_&&O.visualElement?p.jsx(_,{visualElement:O.visualElement,...S}):null,n(a,g,i8(M,O.visualElement,y),M,T,O.visualElement)]})}u.displayName=`motion.${typeof a=="string"?a:`create(${(l=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&l!==void 0?l:""})`}`;const h=k.forwardRef(u);return h[s8]=a,h}function c8({layoutId:t}){const e=k.useContext(z0).id;return e&&t!==void 0?e+"-"+t:t}function u8(t,e){k.useContext(b4).strict}function h8(t){const{drag:e,layout:n}=jc;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const T4=t=>e=>typeof e=="string"&&e.startsWith(t),nb=T4("--"),d8=T4("var(--"),sb=t=>d8(t)?f8.test(t.split("/*")[0].trim()):!1,f8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,td={};function m8(t){for(const e in t)td[e]=t[e],nb(e)&&(td[e].isCSSVariable=!0)}const Pc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zo=new Set(Pc);function A4(t,{layout:e,layoutId:n}){return Zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!td[t]||t==="opacity")}const Qn=t=>!!(t&&t.getVelocity),O4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,za=(t,e,n)=>n>e?e:n<t?t:n,Lc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nd={...Lc,transform:t=>za(0,1,t)},rm={...Lc,default:1},fd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Nr=fd("deg"),Ii=fd("%"),$e=fd("px"),g8=fd("vh"),p8=fd("vw"),t2={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},y8={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,backgroundPositionX:$e,backgroundPositionY:$e},v8={rotate:Nr,rotateX:Nr,rotateY:Nr,rotateZ:Nr,scale:rm,scaleX:rm,scaleY:rm,scaleZ:rm,skew:Nr,skewX:Nr,skewY:Nr,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:nd,originX:t2,originY:t2,originZ:$e},n2={...Lc,transform:Math.round},ib={...y8,...v8,zIndex:n2,size:$e,fillOpacity:nd,strokeOpacity:nd,numOctaves:n2},b8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_8=Pc.length;function x8(t,e,n){let s="",a=!0;for(let o=0;o<_8;o++){const l=Pc[o],u=t[l];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(l.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const g=O4(u,ib[l]);if(!h){a=!1;const y=b8[l]||l;s+=`${y}(${g}) `}n&&(e[l]=g)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function ab(t,e,n){const{style:s,vars:a,transformOrigin:o}=t;let l=!1,u=!1;for(const h in e){const g=e[h];if(Zo.has(h)){l=!0;continue}else if(nb(h)){a[h]=g;continue}else{const y=O4(g,ib[h]);h.startsWith("origin")?(u=!0,o[h]=y):s[h]=y}}if(e.transform||(l||n?s.transform=x8(e,t.transform,n):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:g="50%",originZ:y=0}=o;s.transformOrigin=`${h} ${g} ${y}`}}const rb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function j4(t,e,n){for(const s in e)!Qn(e[s])&&!A4(s,n)&&(t[s]=e[s])}function w8({transformTemplate:t},e){return k.useMemo(()=>{const n=rb();return ab(n,e,t),Object.assign({},n.vars,n.style)},[e])}function S8(t,e){const n=t.style||{},s={};return j4(s,n,t),Object.assign(s,w8(t,e)),s}function C8(t,e){const n={},s=S8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const T8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ob(t){return typeof t!="string"||t.includes("-")?!1:!!(T8.indexOf(t)>-1||/[A-Z]/u.test(t))}const A8={offset:"stroke-dashoffset",array:"stroke-dasharray"},O8={offset:"strokeDashoffset",array:"strokeDasharray"};function j8(t,e,n=1,s=0,a=!0){t.pathLength=1;const o=a?A8:O8;t[o.offset]=$e.transform(-s);const l=$e.transform(e),u=$e.transform(n);t[o.array]=`${l} ${u}`}function s2(t,e,n){return typeof t=="string"?t:$e.transform(e+n*t)}function M8(t,e,n){const s=s2(e,t.x,t.width),a=s2(n,t.y,t.height);return`${s} ${a}`}function lb(t,{attrX:e,attrY:n,attrScale:s,originX:a,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...g},y,_){if(ab(t,g,_),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:S,style:T,dimensions:O}=t;S.transform&&(O&&(T.transform=S.transform),delete S.transform),O&&(a!==void 0||o!==void 0||T.transform)&&(T.transformOrigin=M8(O,a!==void 0?a:.5,o!==void 0?o:.5)),e!==void 0&&(S.x=e),n!==void 0&&(S.y=n),s!==void 0&&(S.scale=s),l!==void 0&&j8(S,l,u,h,!1)}const M4=()=>({...rb(),attrs:{}}),cb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function E8(t,e,n,s){const a=k.useMemo(()=>{const o=M4();return lb(o,e,cb(s),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};j4(o,t.style,t),a.style={...o,...a.style}}return a}function R8(t=!1){return(n,s,a,{latestValues:o},l)=>{const h=(ob(n)?E8:C8)(s,o,l,n),g=ZP(s,typeof n=="string",t),y=n!==k.Fragment?{...g,...h,ref:a}:{},{children:_}=s,S=k.useMemo(()=>Qn(_)?_.get():_,[_]);return k.createElement(n,{...y,children:S})}}function i2(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function ub(t,e,n,s){if(typeof e=="function"){const[a,o]=i2(s);e=e(n!==void 0?n:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=i2(s);e=e(n!==void 0?n:t.custom,a,o)}return e}const _v=t=>Array.isArray(t),k8=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),N8=t=>_v(t)?t[t.length-1]||0:t;function Sm(t){const e=Qn(t)?t.get():t;return k8(e)?e.toValue():e}function D8({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,a,o){const l={latestValues:P8(s,a,o,t),renderState:e()};return n&&(l.onMount=u=>n({props:s,current:u,...l}),l.onUpdate=u=>n(u)),l}const E4=t=>(e,n)=>{const s=k.useContext(ig),a=k.useContext(sg),o=()=>D8(t,e,s,a);return n?o():V0(o)};function P8(t,e,n,s){const a={},o=s(t,{});for(const S in o)a[S]=Sm(o[S]);let{initial:l,animate:u}=t;const h=rg(t),g=x4(t);e&&g&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let y=n?n.initial===!1:!1;y=y||l===!1;const _=y?u:l;if(_&&typeof _!="boolean"&&!ag(_)){const S=Array.isArray(_)?_:[_];for(let T=0;T<S.length;T++){const O=ub(t,S[T]);if(O){const{transitionEnd:M,transition:R,...N}=O;for(const B in N){let z=N[B];if(Array.isArray(z)){const P=y?z.length-1:0;z=z[P]}z!==null&&(a[B]=z)}for(const B in M)a[B]=M[B]}}}return a}function hb(t,e,n){var s;const{style:a}=t,o={};for(const l in a)(Qn(a[l])||e.style&&Qn(e.style[l])||A4(l,t)||((s=n==null?void 0:n.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[l]=a[l]);return o}const L8={useVisualState:E4({scrapeMotionValuesFromProps:hb,createRenderState:rb})};function R4(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function k4(t,{style:e,vars:n},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const o in n)t.style.setProperty(o,n[o])}const N4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function D4(t,e,n,s){k4(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(N4.has(a)?a:tb(a),e.attrs[a])}function P4(t,e,n){const s=hb(t,e,n);for(const a in t)if(Qn(t[a])||Qn(e[a])){const o=Pc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=t[a]}return s}const a2=["x","y","width","height","cx","cy","r"],B8={useVisualState:E4({scrapeMotionValuesFromProps:P4,createRenderState:M4,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:a})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in a)if(Zo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<a2.length;u++){const h=a2[u];t[h]!==e[h]&&(l=!0)}l&&Nt.read(()=>{R4(n,s),Nt.render(()=>{lb(s,a,cb(n.tagName),t.transformTemplate),D4(n,s)})})}})};function U8(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...ob(s)?B8:L8,preloadedFeatures:t,useRender:R8(a),createVisualElement:e,Component:s};return l8(l)}}function sd(t,e,n){const s=t.getProps();return ub(s,e,n!==void 0?n:s.custom,t)}const L4=new Set(["width","height","top","left","right","bottom",...Pc]);function I8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zh(n))}function z8(t,e){const n=sd(t,e);let{transitionEnd:s={},transition:a={},...o}=n||{};o={...o,...s};for(const l in o){const u=N8(o[l]);I8(t,l,u)}}function V8(t){return!!(Qn(t)&&t.add)}function xv(t,e){const n=t.getValue("willChange");if(V8(n))return n.add(e)}function B4(t){return t.props[w4]}const U4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,H8=1e-7,F8=12;function q8(t,e,n,s,a){let o,l,u=0;do l=e+(n-e)/2,o=U4(l,s,a)-t,o>0?n=l:e=l;while(Math.abs(o)>H8&&++u<F8);return l}function md(t,e,n,s){if(t===e&&n===s)return As;const a=o=>q8(o,0,1,t,n);return o=>o===0||o===1?o:U4(a(o),e,s)}const I4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,z4=t=>e=>1-t(1-e),V4=md(.33,1.53,.69,.99),db=z4(V4),H4=I4(db),F4=t=>(t*=2)<1?.5*db(t):.5*(2-Math.pow(2,-10*(t-1))),fb=t=>1-Math.sin(Math.acos(t)),q4=z4(fb),$4=I4(fb),G4=t=>/^0[^.\s]+$/u.test(t);function $8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||G4(t):!0}const Uh=t=>Math.round(t*1e5)/1e5,mb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G8(t){return t==null}const W8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gb=(t,e)=>n=>!!(typeof n=="string"&&W8.test(n)&&n.startsWith(t)||e&&!G8(n)&&Object.prototype.hasOwnProperty.call(n,e)),W4=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,o,l,u]=s.match(mb);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Y8=t=>za(0,255,t),Ny={...Lc,transform:t=>Math.round(Y8(t))},Ho={test:gb("rgb","red"),parse:W4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Ny.transform(t)+", "+Ny.transform(e)+", "+Ny.transform(n)+", "+Uh(nd.transform(s))+")"};function K8(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const wv={test:gb("#"),parse:K8,transform:Ho.transform},dc={test:gb("hsl","hue"),parse:W4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Ii.transform(Uh(e))+", "+Ii.transform(Uh(n))+", "+Uh(nd.transform(s))+")"},Wn={test:t=>Ho.test(t)||wv.test(t)||dc.test(t),parse:t=>Ho.test(t)?Ho.parse(t):dc.test(t)?dc.parse(t):wv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ho.transform(t):dc.transform(t)},X8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q8(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(mb))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(X8))===null||n===void 0?void 0:n.length)||0)>0}const Y4="number",K4="color",J8="var",Z8="var(",r2="${}",e5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function id(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let o=0;const u=e.replace(e5,h=>(Wn.test(h)?(s.color.push(o),a.push(K4),n.push(Wn.parse(h))):h.startsWith(Z8)?(s.var.push(o),a.push(J8),n.push(h)):(s.number.push(o),a.push(Y4),n.push(parseFloat(h))),++o,r2)).split(r2);return{values:n,split:u,indexes:s,types:a}}function X4(t){return id(t).values}function Q4(t){const{split:e,types:n}=id(t),s=e.length;return a=>{let o="";for(let l=0;l<s;l++)if(o+=e[l],a[l]!==void 0){const u=n[l];u===Y4?o+=Uh(a[l]):u===K4?o+=Wn.transform(a[l]):o+=a[l]}return o}}const t5=t=>typeof t=="number"?0:t;function n5(t){const e=X4(t);return Q4(t)(e.map(t5))}const Hr={test:Q8,parse:X4,createTransformer:Q4,getAnimatableNone:n5},s5=new Set(["brightness","contrast","saturate","opacity"]);function i5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(mb)||[];if(!s)return t;const a=n.replace(s,"");let o=s5.has(e)?1:0;return s!==n&&(o*=100),e+"("+o+a+")"}const a5=/\b([a-z-]*)\(.*?\)/gu,Sv={...Hr,getAnimatableNone:t=>{const e=t.match(a5);return e?e.map(i5).join(" "):t}},r5={...ib,color:Wn,backgroundColor:Wn,outlineColor:Wn,fill:Wn,stroke:Wn,borderColor:Wn,borderTopColor:Wn,borderRightColor:Wn,borderBottomColor:Wn,borderLeftColor:Wn,filter:Sv,WebkitFilter:Sv},J4=t=>r5[t];function Z4(t,e){let n=J4(t);return n!==Sv&&(n=Hr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const o5=new Set(["auto","none","0"]);function l5(t,e,n){let s=0,a;for(;s<t.length&&!a;){const o=t[s];typeof o=="string"&&!o5.has(o)&&id(o).values.length&&(a=t[s]),s++}if(a&&n)for(const o of e)t[o]=Z4(n,a)}const Fo=t=>t*180/Math.PI,Cv=t=>{const e=Fo(Math.atan2(t[1],t[0]));return Tv(e)},c5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Cv,rotateZ:Cv,skewX:t=>Fo(Math.atan(t[1])),skewY:t=>Fo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Tv=t=>(t=t%360,t<0&&(t+=360),t),o2=Cv,l2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),c2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),u5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:l2,scaleY:c2,scale:t=>(l2(t)+c2(t))/2,rotateX:t=>Tv(Fo(Math.atan2(t[6],t[5]))),rotateY:t=>Tv(Fo(Math.atan2(-t[2],t[0]))),rotateZ:o2,rotate:o2,skewX:t=>Fo(Math.atan(t[4])),skewY:t=>Fo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function u2(t){return t.includes("scale")?1:0}function Av(t,e){if(!t||t==="none")return u2(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=u5,a=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=c5,a=u}if(!a)return u2(e);const o=s[e],l=a[1].split(",").map(d5);return typeof o=="function"?o(l):l[o]}const h5=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Av(n,e)};function d5(t){return parseFloat(t.trim())}const h2=t=>t===Lc||t===$e,f5=new Set(["x","y","z"]),m5=Pc.filter(t=>!f5.has(t));function g5(t){const e=[];return m5.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Mc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Av(e,"x"),y:(t,{transform:e})=>Av(e,"y")};Mc.translateX=Mc.x;Mc.translateY=Mc.y;const Go=new Set;let Ov=!1,jv=!1;function eT(){if(jv){const t=Array.from(Go).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=g5(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([o,l])=>{var u;(u=s.getValue(o))===null||u===void 0||u.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}jv=!1,Ov=!1,Go.forEach(t=>t.complete()),Go.clear()}function tT(){Go.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jv=!0)})}function p5(){tT(),eT()}class pb{constructor(e,n,s,a,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Go.add(this),Ov||(Ov=!0,Nt.read(tT),Nt.resolveKeyframes(eT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=a==null?void 0:a.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const h=s.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),a&&l===void 0&&a.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Go.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Go.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const nT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),y5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function v5(t){const e=y5.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function sT(t,e,n=1){const[s,a]=v5(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const l=o.trim();return nT(l)?parseFloat(l):l}return sb(a)?sT(a,e,n+1):a}const iT=t=>e=>e.test(t),b5={test:t=>t==="auto",parse:t=>t},aT=[Lc,$e,Ii,Nr,p8,g8,b5],d2=t=>aT.find(iT(t));class rT extends pb{constructor(e,n,s,a,o){super(e,n,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let g=e[h];if(typeof g=="string"&&(g=g.trim(),sb(g))){const y=sT(g,n.current);y!==void 0&&(e[h]=y),h===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!L4.has(s)||e.length!==2)return;const[a,o]=e,l=d2(a),u=d2(o);if(l!==u)if(h2(l)&&h2(u))for(let h=0;h<e.length;h++){const g=e[h];typeof g=="string"&&(e[h]=parseFloat(g))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)$8(e[a])&&s.push(a);s.length&&l5(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=a.length-1,u=a[l];a[l]=Mc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,g])=>{n.getValue(h).set(g)}),this.resolveNoneKeyframes()}}const f2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Hr.test(t)||t==="0")&&!t.startsWith("url("));function _5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function x5(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=f2(a,e),u=f2(o,e);return!l||!u?!1:_5(t)||(n==="spring"||K0(n))&&s}const w5=t=>t!==null;function og(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(w5),o=e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const S5=40;class oT{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ui.now(),this.options={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>S5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&p5(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ui.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:l,onComplete:u,onUpdate:h,isGenerator:g}=this.options;if(!g&&!x5(e,s,a,o))if(l)this.options.duration=0;else{h&&h(og(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,n);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Wt=(t,e,n)=>t+(e-t)*n;function Dy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function C5({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,o=0,l=0;if(!e)a=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;a=Dy(h,u,t+1/3),o=Dy(h,u,t),l=Dy(h,u,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function Fm(t,e){return n=>n>0?e:t}const Py=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},T5=[wv,Ho,dc],A5=t=>T5.find(e=>e.test(t));function m2(t){const e=A5(t);if(!e)return!1;let n=e.parse(t);return e===dc&&(n=C5(n)),n}const g2=(t,e)=>{const n=m2(t),s=m2(e);if(!n||!s)return Fm(t,e);const a={...n};return o=>(a.red=Py(n.red,s.red,o),a.green=Py(n.green,s.green,o),a.blue=Py(n.blue,s.blue,o),a.alpha=Wt(n.alpha,s.alpha,o),Ho.transform(a))},O5=(t,e)=>n=>e(t(n)),gd=(...t)=>t.reduce(O5),Mv=new Set(["none","hidden"]);function j5(t,e){return Mv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function M5(t,e){return n=>Wt(t,e,n)}function yb(t){return typeof t=="number"?M5:typeof t=="string"?sb(t)?Fm:Wn.test(t)?g2:k5:Array.isArray(t)?lT:typeof t=="object"?Wn.test(t)?g2:E5:Fm}function lT(t,e){const n=[...t],s=n.length,a=t.map((o,l)=>yb(o)(o,e[l]));return o=>{for(let l=0;l<s;l++)n[l]=a[l](o);return n}}function E5(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=yb(t[a])(t[a],e[a]));return a=>{for(const o in s)n[o]=s[o](a);return n}}function R5(t,e){var n;const s=[],a={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][a[l]],h=(n=t.values[u])!==null&&n!==void 0?n:0;s[o]=h,a[l]++}return s}const k5=(t,e)=>{const n=Hr.createTransformer(e),s=id(t),a=id(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?Mv.has(t)&&!a.values.length||Mv.has(e)&&!s.values.length?j5(t,e):gd(lT(R5(s,a),a.values),n):Fm(t,e)};function cT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Wt(t,e,n):yb(t)(t,e)}const N5=5;function uT(t,e,n){const s=Math.max(e-N5,0);return u4(n-t(s),e-s)}const en={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},p2=.001;function D5({duration:t=en.duration,bounce:e=en.bounce,velocity:n=en.velocity,mass:s=en.mass}){let a,o,l=1-e;l=za(en.minDamping,en.maxDamping,l),t=za(en.minDuration,en.maxDuration,Ba(t)),l<1?(a=g=>{const y=g*l,_=y*t,S=y-n,T=Ev(g,l),O=Math.exp(-_);return p2-S/T*O},o=g=>{const _=g*l*t,S=_*n+n,T=Math.pow(l,2)*Math.pow(g,2)*t,O=Math.exp(-_),M=Ev(Math.pow(g,2),l);return(-a(g)+p2>0?-1:1)*((S-T)*O)/M}):(a=g=>{const y=Math.exp(-g*t),_=(g-n)*t+1;return-.001+y*_},o=g=>{const y=Math.exp(-g*t),_=(n-g)*(t*t);return y*_});const u=5/t,h=L5(a,o,u);if(t=La(t),isNaN(h))return{stiffness:en.stiffness,damping:en.damping,duration:t};{const g=Math.pow(h,2)*s;return{stiffness:g,damping:l*2*Math.sqrt(s*g),duration:t}}}const P5=12;function L5(t,e,n){let s=n;for(let a=1;a<P5;a++)s=s-t(s)/e(s);return s}function Ev(t,e){return t*Math.sqrt(1-e*e)}const B5=["duration","bounce"],U5=["stiffness","damping","mass"];function y2(t,e){return e.some(n=>t[n]!==void 0)}function I5(t){let e={velocity:en.velocity,stiffness:en.stiffness,damping:en.damping,mass:en.mass,isResolvedFromDuration:!1,...t};if(!y2(t,U5)&&y2(t,B5))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,o=2*za(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:en.mass,stiffness:a,damping:o}}else{const n=D5(t);e={...e,...n,mass:en.mass},e.isResolvedFromDuration=!0}return e}function hT(t=en.visualDuration,e=en.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:g,mass:y,duration:_,velocity:S,isResolvedFromDuration:T}=I5({...n,velocity:-Ba(n.velocity||0)}),O=S||0,M=g/(2*Math.sqrt(h*y)),R=l-o,N=Ba(Math.sqrt(h/y)),B=Math.abs(R)<5;s||(s=B?en.restSpeed.granular:en.restSpeed.default),a||(a=B?en.restDelta.granular:en.restDelta.default);let z;if(M<1){const U=Ev(N,M);z=ee=>{const ae=Math.exp(-M*N*ee);return l-ae*((O+M*N*R)/U*Math.sin(U*ee)+R*Math.cos(U*ee))}}else if(M===1)z=U=>l-Math.exp(-N*U)*(R+(O+N*R)*U);else{const U=N*Math.sqrt(M*M-1);z=ee=>{const ae=Math.exp(-M*N*ee),J=Math.min(U*ee,300);return l-ae*((O+M*N*R)*Math.sinh(J)+U*R*Math.cosh(J))/U}}const P={calculatedDuration:T&&_||null,next:U=>{const ee=z(U);if(T)u.done=U>=_;else{let ae=0;M<1&&(ae=U===0?La(O):uT(z,U,ee));const J=Math.abs(ae)<=s,X=Math.abs(l-ee)<=a;u.done=J&&X}return u.value=u.done?l:ee,u},toString:()=>{const U=Math.min(h4(P),vv),ee=d4(ae=>P.next(U*ae).value,U,30);return U+"ms "+ee}};return P}function v2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:h,restDelta:g=.5,restSpeed:y}){const _=t[0],S={done:!1,value:_},T=J=>u!==void 0&&J<u||h!==void 0&&J>h,O=J=>u===void 0?h:h===void 0||Math.abs(u-J)<Math.abs(h-J)?u:h;let M=n*e;const R=_+M,N=l===void 0?R:l(R);N!==R&&(M=N-_);const B=J=>-M*Math.exp(-J/s),z=J=>N+B(J),P=J=>{const X=B(J),oe=z(J);S.done=Math.abs(X)<=g,S.value=S.done?N:oe};let U,ee;const ae=J=>{T(S.value)&&(U=J,ee=hT({keyframes:[S.value,O(S.value)],velocity:uT(z,J,S.value),damping:a,stiffness:o,restDelta:g,restSpeed:y}))};return ae(0),{calculatedDuration:null,next:J=>{let X=!1;return!ee&&U===void 0&&(X=!0,P(J),ae(J)),U!==void 0&&J>=U?ee.next(J-U):(!X&&P(J),S)}}}const z5=md(.42,0,1,1),V5=md(0,0,.58,1),dT=md(.42,0,.58,1),H5=t=>Array.isArray(t)&&typeof t[0]!="number",F5={linear:As,easeIn:z5,easeInOut:dT,easeOut:V5,circIn:fb,circInOut:$4,circOut:q4,backIn:db,backInOut:H4,backOut:V4,anticipate:F4},b2=t=>{if(X0(t)){c4(t.length===4);const[e,n,s,a]=t;return md(e,n,s,a)}else if(typeof t=="string")return F5[t];return t};function q5(t,e,n){const s=[],a=n||cT,o=t.length-1;for(let l=0;l<o;l++){let u=a(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||As:e;u=gd(h,u)}s.push(u)}return s}function $5(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const o=t.length;if(c4(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=q5(e,s,a),h=u.length,g=y=>{if(l&&y<t[0])return e[0];let _=0;if(h>1)for(;_<t.length-2&&!(y<t[_+1]);_++);const S=Oc(t[_],t[_+1],y);return u[_](S)};return n?y=>g(za(t[0],t[o-1],y)):g}function G5(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=Oc(0,e,s);t.push(Wt(n,1,a))}}function W5(t){const e=[0];return G5(e,t.length-1),e}function Y5(t,e){return t.map(n=>n*e)}function K5(t,e){return t.map(()=>e||dT).splice(0,t.length-1)}function qm({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=H5(s)?s.map(b2):b2(s),o={done:!1,value:e[0]},l=Y5(n&&n.length===e.length?n:W5(e),t),u=$5(l,e,{ease:Array.isArray(a)?a:K5(e,a)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const X5=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Nt.update(e,!0),stop:()=>Vr(e),now:()=>Pn.isProcessing?Pn.timestamp:Ui.now()}},Q5={decay:v2,inertia:v2,tween:qm,keyframes:qm,spring:hT},J5=t=>t/100;class vb extends oT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:s,element:a,keyframes:o}=this.options,l=(a==null?void 0:a.KeyframeResolver)||pb,u=(h,g)=>this.onKeyframesResolved(h,g);this.resolver=new l(o,u,n,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=this.options,u=K0(n)?n:Q5[n]||qm;let h,g;u!==qm&&typeof e[0]!="number"&&(h=gd(J5,cT(e[0],e[1])),e=[0,100]);const y=u({...this.options,keyframes:e});o==="mirror"&&(g=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),y.calculatedDuration===null&&(y.calculatedDuration=h4(y));const{calculatedDuration:_}=y,S=_+a,T=S*(s+1)-a;return{generator:y,mirroredGenerator:g,mapPercentToKeyframes:h,calculatedDuration:_,resolvedDuration:S,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:J}=this.options;return{done:!0,value:J[J.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:g,totalDuration:y,resolvedDuration:_}=s;if(this.startTime===null)return o.next(0);const{delay:S,repeat:T,repeatType:O,repeatDelay:M,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const N=this.currentTime-S*(this.speed>=0?1:-1),B=this.speed>=0?N<0:N>y;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let z=this.currentTime,P=o;if(T){const J=Math.min(this.currentTime,y)/_;let X=Math.floor(J),oe=J%1;!oe&&J>=1&&(oe=1),oe===1&&X--,X=Math.min(X,T+1),!!(X%2)&&(O==="reverse"?(oe=1-oe,M&&(oe-=M/_)):O==="mirror"&&(P=l)),z=za(0,1,oe)*_}const U=B?{done:!1,value:h[0]}:P.next(z);u&&(U.value=u(U.value));let{done:ee}=U;!B&&g!==null&&(ee=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const ae=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return ae&&a!==void 0&&(U.value=og(h,this.options,a)),R&&R(U.value),ae&&this.finish(),U}get duration(){const{resolved:e}=this;return e?Ba(e.calculatedDuration):0}get time(){return Ba(this.currentTime)}set time(e){e=La(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ba(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=X5,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Z5=new Set(["opacity","clipPath","filter","transform"]);function eL(t,e,n,{delay:s=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:h}={}){const g={[e]:n};h&&(g.offset=h);const y=m4(u,a);return Array.isArray(y)&&(g.easing=y),t.animate(g,{delay:s,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const tL=G0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$m=10,nL=2e4;function sL(t){return K0(t.type)||t.type==="spring"||!f4(t.ease)}function iL(t,e){const n=new vb({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const a=[];let o=0;for(;!s.done&&o<nL;)s=n.sample(o),a.push(s.value),o+=$m;return{times:void 0,keyframes:a,duration:o-$m,ease:"linear"}}const fT={anticipate:F4,backInOut:H4,circInOut:$4};function aL(t){return t in fT}class _2 extends oT{constructor(e){super(e);const{name:n,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new rT(o,(l,u)=>this.onKeyframesResolved(l,u),n,s,a),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:a,ease:o,type:l,motionValue:u,name:h,startTime:g}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&Vm()&&aL(o)&&(o=fT[o]),sL(this.options)){const{onComplete:_,onUpdate:S,motionValue:T,element:O,...M}=this.options,R=iL(e,M);e=R.keyframes,e.length===1&&(e[1]=e[0]),s=R.duration,a=R.times,o=R.ease,l="keyframes"}const y=eL(u.owner.current,h,e,{...this.options,duration:s,times:a,ease:o});return y.startTime=g??this.calcStartTime(),this.pendingTimeline?(Gw(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:_}=this.options;u.set(og(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:s,times:a,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ba(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ba(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=La(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return As;const{animation:s}=n;Gw(s,e)}return As}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:a,type:o,ease:l,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:g,onUpdate:y,onComplete:_,element:S,...T}=this.options,O=new vb({...T,keyframes:s,duration:a,type:o,ease:l,times:u,isGenerator:!0}),M=La(this.time);g.setWithVelocity(O.sample(M-$m).value,O.sample(M).value,$m)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:a,repeatType:o,damping:l,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:g}=n.owner.getProps();return tL()&&s&&Z5.has(s)&&!h&&!g&&!a&&o!=="mirror"&&l!==0&&u!=="inertia"}}const rL={type:"spring",stiffness:500,damping:25,restSpeed:10},oL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lL={type:"keyframes",duration:.8},cL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uL=(t,{keyframes:e})=>e.length>2?lL:Zo.has(t)?t.startsWith("scale")?oL(e[1]):rL:cL;function hL({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:u,from:h,elapsed:g,...y}){return!!Object.keys(y).length}const bb=(t,e,n,s={},a,o)=>l=>{const u=Y0(s,t)||{},h=u.delay||s.delay||0;let{elapsed:g=0}=s;g=g-La(h);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-g,onUpdate:S=>{e.set(S),u.onUpdate&&u.onUpdate(S)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:a};hL(u)||(y={...y,...uL(t,y)}),y.duration&&(y.duration=La(y.duration)),y.repeatDelay&&(y.repeatDelay=La(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let _=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(_=!0)),y.allowFlatten=!u.type&&!u.ease,_&&!o&&e.get()!==void 0){const S=og(y.keyframes,u);if(S!==void 0)return Nt.update(()=>{y.onUpdate(S),y.onComplete()}),new DP([])}return!o&&_2.supports(y)?new _2(y):new vb(y)};function dL({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function mT(t,e,{delay:n=0,transitionOverride:s,type:a}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:u,...h}=e;s&&(l=s);const g=[],y=a&&t.animationState&&t.animationState.getState()[a];for(const _ in h){const S=t.getValue(_,(o=t.latestValues[_])!==null&&o!==void 0?o:null),T=h[_];if(T===void 0||y&&dL(y,_))continue;const O={delay:n,...Y0(l||{},_)};let M=!1;if(window.MotionHandoffAnimation){const N=B4(t);if(N){const B=window.MotionHandoffAnimation(N,_,Nt);B!==null&&(O.startTime=B,M=!0)}}xv(t,_),S.start(bb(_,S,T,t.shouldReduceMotion&&L4.has(_)?{type:!1}:O,t,M));const R=S.animation;R&&g.push(R)}return u&&Promise.all(g).then(()=>{Nt.update(()=>{u&&z8(t,u)})}),g}function Rv(t,e,n={}){var s;const a=sd(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(o=n.transitionOverride);const l=a?()=>Promise.all(mT(t,a,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:y=0,staggerChildren:_,staggerDirection:S}=o;return fL(t,e,y+g,_,S,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[g,y]=h==="beforeChildren"?[l,u]:[u,l];return g().then(()=>y())}else return Promise.all([l(),u(n.delay)])}function fL(t,e,n=0,s=0,a=1,o){const l=[],u=(t.variantChildren.size-1)*s,h=a===1?(g=0)=>g*s:(g=0)=>u-g*s;return Array.from(t.variantChildren).sort(mL).forEach((g,y)=>{g.notify("AnimationStart",e),l.push(Rv(g,e,{...o,delay:n+h(y)}).then(()=>g.notify("AnimationComplete",e)))}),Promise.all(l)}function mL(t,e){return t.sortNodePosition(e)}function gL(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(o=>Rv(t,o,n));s=Promise.all(a)}else if(typeof e=="string")s=Rv(t,e,n);else{const a=typeof e=="function"?sd(t,e,n.custom):e;s=Promise.all(mT(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function gT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const pL=eb.length;function pT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?pT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<pL;n++){const s=eb[n],a=t.props[s];(ed(a)||a===!1)&&(e[s]=a)}return e}const yL=[...Z0].reverse(),vL=Z0.length;function bL(t){return e=>Promise.all(e.map(({animation:n,options:s})=>gL(t,n,s)))}function _L(t){let e=bL(t),n=x2(),s=!0;const a=h=>(g,y)=>{var _;const S=sd(t,y,h==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(S){const{transition:T,transitionEnd:O,...M}=S;g={...g,...M,...O}}return g};function o(h){e=h(t)}function l(h){const{props:g}=t,y=pT(t.parent)||{},_=[],S=new Set;let T={},O=1/0;for(let R=0;R<vL;R++){const N=yL[R],B=n[N],z=g[N]!==void 0?g[N]:y[N],P=ed(z),U=N===h?B.isActive:null;U===!1&&(O=R);let ee=z===y[N]&&z!==g[N]&&P;if(ee&&s&&t.manuallyAnimateOnMount&&(ee=!1),B.protectedKeys={...T},!B.isActive&&U===null||!z&&!B.prevProp||ag(z)||typeof z=="boolean")continue;const ae=xL(B.prevProp,z);let J=ae||N===h&&B.isActive&&!ee&&P||R>O&&P,X=!1;const oe=Array.isArray(z)?z:[z];let A=oe.reduce(a(N),{});U===!1&&(A={});const{prevResolvedValues:Te={}}=B,le={...Te,...A},$=G=>{J=!0,S.has(G)&&(X=!0,S.delete(G)),B.needsAnimating[G]=!0;const ce=t.getValue(G);ce&&(ce.liveStyle=!1)};for(const G in le){const ce=A[G],_e=Te[G];if(T.hasOwnProperty(G))continue;let I=!1;_v(ce)&&_v(_e)?I=!gT(ce,_e):I=ce!==_e,I?ce!=null?$(G):S.add(G):ce!==void 0&&S.has(G)?$(G):B.protectedKeys[G]=!0}B.prevProp=z,B.prevResolvedValues=A,B.isActive&&(T={...T,...A}),s&&t.blockInitialAnimation&&(J=!1),J&&(!(ee&&ae)||X)&&_.push(...oe.map(G=>({animation:G,options:{type:N}})))}if(S.size){const R={};if(typeof g.initial!="boolean"){const N=sd(t,Array.isArray(g.initial)?g.initial[0]:g.initial);N&&N.transition&&(R.transition=N.transition)}S.forEach(N=>{const B=t.getBaseTarget(N),z=t.getValue(N);z&&(z.liveStyle=!0),R[N]=B??null}),_.push({animation:R})}let M=!!_.length;return s&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(M=!1),s=!1,M?e(_):Promise.resolve()}function u(h,g){var y;if(n[h].isActive===g)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(S=>{var T;return(T=S.animationState)===null||T===void 0?void 0:T.setActive(h,g)}),n[h].isActive=g;const _=l(h);for(const S in n)n[S].protectedKeys={};return _}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=x2(),s=!0}}}function xL(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gT(e,t):!1}function No(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x2(){return{animate:No(!0),whileInView:No(),whileHover:No(),whileTap:No(),whileDrag:No(),whileFocus:No(),exit:No()}}class Fr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wL extends Fr{constructor(e){super(e),e.animationState||(e.animationState=_L(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ag(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let SL=0;class CL extends Fr{constructor(){super(...arguments),this.id=SL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TL={animation:{Feature:wL},exit:{Feature:CL}};function ad(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function pd(t){return{point:{x:t.pageX,y:t.pageY}}}const AL=t=>e=>J0(e)&&t(e,pd(e));function Ih(t,e,n,s){return ad(t,e,AL(n),s)}function yT({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function OL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function jL(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}const vT=1e-4,ML=1-vT,EL=1+vT,bT=.01,RL=0-bT,kL=0+bT;function as(t){return t.max-t.min}function NL(t,e,n){return Math.abs(t-e)<=n}function w2(t,e,n,s=.5){t.origin=s,t.originPoint=Wt(e.min,e.max,t.origin),t.scale=as(n)/as(e),t.translate=Wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ML&&t.scale<=EL||isNaN(t.scale))&&(t.scale=1),(t.translate>=RL&&t.translate<=kL||isNaN(t.translate))&&(t.translate=0)}function zh(t,e,n,s){w2(t.x,e.x,n.x,s?s.originX:void 0),w2(t.y,e.y,n.y,s?s.originY:void 0)}function S2(t,e,n){t.min=n.min+e.min,t.max=t.min+as(e)}function DL(t,e,n){S2(t.x,e.x,n.x),S2(t.y,e.y,n.y)}function C2(t,e,n){t.min=e.min-n.min,t.max=t.min+as(e)}function Vh(t,e,n){C2(t.x,e.x,n.x),C2(t.y,e.y,n.y)}const T2=()=>({translate:0,scale:1,origin:0,originPoint:0}),fc=()=>({x:T2(),y:T2()}),A2=()=>({min:0,max:0}),on=()=>({x:A2(),y:A2()});function Is(t){return[t("x"),t("y")]}function Ly(t){return t===void 0||t===1}function kv({scale:t,scaleX:e,scaleY:n}){return!Ly(t)||!Ly(e)||!Ly(n)}function Uo(t){return kv(t)||_T(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _T(t){return O2(t.x)||O2(t.y)}function O2(t){return t&&t!=="0%"}function Gm(t,e,n){const s=t-n,a=e*s;return n+a}function j2(t,e,n,s,a){return a!==void 0&&(t=Gm(t,a,s)),Gm(t,n,s)+e}function Nv(t,e=0,n=1,s,a){t.min=j2(t.min,e,n,s,a),t.max=j2(t.max,e,n,s,a)}function xT(t,{x:e,y:n}){Nv(t.x,e.translate,e.scale,e.originPoint),Nv(t.y,n.translate,n.scale,n.originPoint)}const M2=.999999999999,E2=1.0000000000001;function PL(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let o,l;for(let u=0;u<a;u++){o=n[u],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&gc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,xT(t,l)),s&&Uo(o.latestValues)&&gc(t,o.latestValues))}e.x<E2&&e.x>M2&&(e.x=1),e.y<E2&&e.y>M2&&(e.y=1)}function mc(t,e){t.min=t.min+e,t.max=t.max+e}function R2(t,e,n,s,a=.5){const o=Wt(t.min,t.max,a);Nv(t,e,n,o,s)}function gc(t,e){R2(t.x,e.x,e.scaleX,e.scale,e.originX),R2(t.y,e.y,e.scaleY,e.scale,e.originY)}function wT(t,e){return yT(jL(t.getBoundingClientRect(),e))}function LL(t,e,n){const s=wT(t,n),{scroll:a}=e;return a&&(mc(s.x,a.offset.x),mc(s.y,a.offset.y)),s}const ST=({current:t})=>t?t.ownerDocument.defaultView:null,k2=(t,e)=>Math.abs(t-e);function BL(t,e){const n=k2(t.x,e.x),s=k2(t.y,e.y);return Math.sqrt(n**2+s**2)}class CT{constructor(e,n,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Uy(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,T=BL(_.offset,{x:0,y:0})>=3;if(!S&&!T)return;const{point:O}=_,{timestamp:M}=Pn;this.history.push({...O,timestamp:M});const{onStart:R,onMove:N}=this.handlers;S||(R&&R(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=By(S,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:T,onSessionEnd:O,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Uy(_.type==="pointercancel"?this.lastMoveEventInfo:By(S,this.transformPagePoint),this.history);this.startEvent&&T&&T(_,R),O&&O(_,R)},!J0(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=a||window;const l=pd(e),u=By(l,this.transformPagePoint),{point:h}=u,{timestamp:g}=Pn;this.history=[{...h,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,Uy(u,this.history)),this.removeListeners=gd(Ih(this.contextWindow,"pointermove",this.handlePointerMove),Ih(this.contextWindow,"pointerup",this.handlePointerUp),Ih(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vr(this.updatePoint)}}function By(t,e){return e?{point:e(t.point)}:t}function N2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Uy({point:t},e){return{point:t,delta:N2(t,TT(e)),offset:N2(t,UL(e)),velocity:IL(e,.1)}}function UL(t){return t[0]}function TT(t){return t[t.length-1]}function IL(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=TT(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>La(e)));)n--;if(!s)return{x:0,y:0};const o=Ba(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function zL(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Wt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Wt(n,t,s.max):Math.min(t,n)),t}function D2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function VL(t,{top:e,left:n,bottom:s,right:a}){return{x:D2(t.x,n,a),y:D2(t.y,e,s)}}function P2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function HL(t,e){return{x:P2(t.x,e.x),y:P2(t.y,e.y)}}function FL(t,e){let n=.5;const s=as(t),a=as(e);return a>s?n=Oc(e.min,e.max-s,t.min):s>a&&(n=Oc(t.min,t.max-a,e.min)),za(0,1,n)}function qL(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Dv=.35;function $L(t=Dv){return t===!1?t=0:t===!0&&(t=Dv),{x:L2(t,"left","right"),y:L2(t,"top","bottom")}}function L2(t,e,n){return{min:B2(t,e),max:B2(t,n)}}function B2(t,e){return typeof t=="number"?t:t[e]||0}const GL=new WeakMap;class WL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=on(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pd(y).point)},o=(y,_)=>{const{drag:S,dragPropagation:T,onDragStart:O}=this.getProps();if(S&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zP(S),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Is(R=>{let N=this.getAxisMotionValue(R).get()||0;if(Ii.test(N)){const{projection:B}=this.visualElement;if(B&&B.layout){const z=B.layout.layoutBox[R];z&&(N=as(z)*(parseFloat(N)/100))}}this.originPoint[R]=N}),O&&Nt.postRender(()=>O(y,_)),xv(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},l=(y,_)=>{const{dragPropagation:S,dragDirectionLock:T,onDirectionLock:O,onDrag:M}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:R}=_;if(T&&this.currentDirection===null){this.currentDirection=YL(R),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",_.point,R),this.updateAxis("y",_.point,R),this.visualElement.render(),M&&M(y,_)},u=(y,_)=>this.stop(y,_),h=()=>Is(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new CT(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:ST(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Nt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!om(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=zL(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&hc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=VL(a.layoutBox,n):this.constraints=!1,this.elastic=$L(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Is(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=qL(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!hc(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=LL(s,a.root,this.visualElement.getTransformPagePoint());let l=HL(a.layout.layoutBox,o);if(n){const u=n(OL(l));this.hasMutatedConstraints=!!u,u&&(l=yT(u))}return l}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},g=Is(y=>{if(!om(y,n,this.currentDirection))return;let _=h&&h[y]||{};l&&(_={min:0,max:0});const S=a?200:1e6,T=a?40:1e7,O={type:"inertia",velocity:s?e[y]:0,bounceStiffness:S,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(y,O)});return Promise.all(g).then(u)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return xv(this.visualElement,e),s.start(bb(e,s,0,n,this.visualElement,!1))}stopAnimation(){Is(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Is(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Is(n=>{const{drag:s}=this.getProps();if(!om(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(n);if(a&&a.layout){const{min:l,max:u}=a.layout.layoutBox[n];o.set(e[n]-Wt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!hc(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Is(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();a[l]=FL({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Is(l=>{if(!om(l,e,null))return;const u=this.getAxisMotionValue(l),{min:h,max:g}=this.constraints[l];u.set(Wt(h,g,a[l]))})}addListeners(){if(!this.visualElement.current)return;GL.set(this.visualElement,this);const e=this.visualElement.current,n=Ih(e,"pointerdown",h=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();hc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Nt.read(s);const l=ad(window,"resize",()=>this.scalePositionWithinConstraints()),u=a.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g})=>{this.isDragging&&g&&(Is(y=>{const _=this.getAxisMotionValue(y);_&&(this.originPoint[y]+=h[y].translate,_.set(_.get()+h[y].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=Dv,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function om(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function YL(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KL extends Fr{constructor(e){super(e),this.removeGroupControls=As,this.removeListeners=As,this.controls=new WL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||As}unmount(){this.removeGroupControls(),this.removeListeners()}}const U2=t=>(e,n)=>{t&&Nt.postRender(()=>t(e,n))};class XL extends Fr{constructor(){super(...arguments),this.removePointerDownListener=As}onPointerDown(e){this.session=new CT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ST(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:U2(e),onStart:U2(n),onMove:s,onEnd:(o,l)=>{delete this.session,a&&Nt.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=Ih(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function I2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const mh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if($e.test(t))t=parseFloat(t);else return t;const n=I2(t,e.target.x),s=I2(t,e.target.y);return`${n}% ${s}%`}},QL={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=Hr.parse(t);if(a.length>5)return s;const o=Hr.createTransformer(t),l=typeof a[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;a[0+l]/=u,a[1+l]/=h;const g=Wt(u,h,.5);return typeof a[2+l]=="number"&&(a[2+l]/=g),typeof a[3+l]=="number"&&(a[3+l]/=g),o(a)}};class JL extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=e;m8(ZL),o&&(n.group&&n.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Cm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,a||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Nt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Q0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AT(t){const[e,n]=l4(),s=k.useContext(z0);return p.jsx(JL,{...t,layoutGroup:s,switchLayoutGroup:k.useContext(S4),isPresent:e,safeToRemove:n})}const ZL={borderRadius:{...mh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mh,borderTopRightRadius:mh,borderBottomLeftRadius:mh,borderBottomRightRadius:mh,boxShadow:QL};function e7(t,e,n){const s=Qn(t)?t:Zh(t);return s.start(bb("",s,e,n)),s.animation}function t7(t){return t instanceof SVGElement&&t.tagName!=="svg"}const n7=(t,e)=>t.depth-e.depth;class s7{constructor(){this.children=[],this.isDirty=!1}add(e){q0(this.children,e),this.isDirty=!0}remove(e){$0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(n7),this.isDirty=!1,this.children.forEach(e)}}function i7(t,e){const n=Ui.now(),s=({timestamp:a})=>{const o=a-n;o>=e&&(Vr(s),t(o-e))};return Nt.read(s,!0),()=>Vr(s)}const OT=["TopLeft","TopRight","BottomLeft","BottomRight"],a7=OT.length,z2=t=>typeof t=="string"?parseFloat(t):t,V2=t=>typeof t=="number"||$e.test(t);function r7(t,e,n,s,a,o){a?(t.opacity=Wt(0,n.opacity!==void 0?n.opacity:1,o7(s)),t.opacityExit=Wt(e.opacity!==void 0?e.opacity:1,0,l7(s))):o&&(t.opacity=Wt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let l=0;l<a7;l++){const u=`border${OT[l]}Radius`;let h=H2(e,u),g=H2(n,u);if(h===void 0&&g===void 0)continue;h||(h=0),g||(g=0),h===0||g===0||V2(h)===V2(g)?(t[u]=Math.max(Wt(z2(h),z2(g),s),0),(Ii.test(g)||Ii.test(h))&&(t[u]+="%")):t[u]=g}(e.rotate||n.rotate)&&(t.rotate=Wt(e.rotate||0,n.rotate||0,s))}function H2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const o7=jT(0,.5,q4),l7=jT(.5,.95,As);function jT(t,e,n){return s=>s<t?0:s>e?1:n(Oc(t,e,s))}function F2(t,e){t.min=e.min,t.max=e.max}function Us(t,e){F2(t.x,e.x),F2(t.y,e.y)}function q2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function $2(t,e,n,s,a){return t-=e,t=Gm(t,1/n,s),a!==void 0&&(t=Gm(t,1/a,s)),t}function c7(t,e=0,n=1,s=.5,a,o=t,l=t){if(Ii.test(e)&&(e=parseFloat(e),e=Wt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=Wt(o.min,o.max,s);t===o&&(u-=e),t.min=$2(t.min,e,n,u,a),t.max=$2(t.max,e,n,u,a)}function G2(t,e,[n,s,a],o,l){c7(t,e[n],e[s],e[a],e.scale,o,l)}const u7=["x","scaleX","originX"],h7=["y","scaleY","originY"];function W2(t,e,n,s){G2(t.x,e,u7,n?n.x:void 0,s?s.x:void 0),G2(t.y,e,h7,n?n.y:void 0,s?s.y:void 0)}function Y2(t){return t.translate===0&&t.scale===1}function MT(t){return Y2(t.x)&&Y2(t.y)}function K2(t,e){return t.min===e.min&&t.max===e.max}function d7(t,e){return K2(t.x,e.x)&&K2(t.y,e.y)}function X2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ET(t,e){return X2(t.x,e.x)&&X2(t.y,e.y)}function Q2(t){return as(t.x)/as(t.y)}function J2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class f7{constructor(){this.members=[]}add(e){q0(this.members,e),e.scheduleRender()}remove(e){if($0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function m7(t,e,n){let s="";const a=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((a||o||l)&&(s=`translate3d(${a}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:y,rotateX:_,rotateY:S,skewX:T,skewY:O}=n;g&&(s=`perspective(${g}px) ${s}`),y&&(s+=`rotate(${y}deg) `),_&&(s+=`rotateX(${_}deg) `),S&&(s+=`rotateY(${S}deg) `),T&&(s+=`skewX(${T}deg) `),O&&(s+=`skewY(${O}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(s+=`scale(${u}, ${h})`),s||"none"}const Iy=["","X","Y","Z"],g7={visibility:"hidden"},Z2=1e3;let p7=0;function zy(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function RT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=B4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Nt,!(a||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&RT(s)}function kT({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},u=e==null?void 0:e()){this.id=p7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(b7),this.nodes.forEach(C7),this.nodes.forEach(T7),this.nodes.forEach(_7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new s7)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new W0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t7(l),this.instance=l;const{layoutId:h,layout:g,visualElement:y}=this.options;if(y&&!y.current&&y.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(g||h)&&(this.isLayoutDirty=!0),t){let _;const S=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=i7(S,250),Cm.hasAnimatedSinceResize&&(Cm.hasAnimatedSinceResize=!1,this.nodes.forEach(tS))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&y&&(h||g)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:S,hasRelativeLayoutChanged:T,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||y.getDefaultTransition()||E7,{onLayoutAnimationStart:R,onLayoutAnimationComplete:N}=y.getProps(),B=!this.targetLayout||!ET(this.targetLayout,O),z=!S&&T;if(this.options.layoutRoot||this.resumeFrom||z||S&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,z);const P={...Y0(M,"layout"),onPlay:R,onComplete:N};(y.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else S||tS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const _=this.path[y];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eS);return}this.isUpdating||this.nodes.forEach(w7),this.isUpdating=!1,this.nodes.forEach(S7),this.nodes.forEach(y7),this.nodes.forEach(v7),this.clearAllSnapshots();const u=Ui.now();Pn.delta=za(0,1e3/60,u-Pn.timestamp),Pn.timestamp=u,Pn.isProcessing=!0,Ry.update.process(Pn),Ry.preRender.process(Pn),Ry.render.process(Pn),Pn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Q0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x7),this.sharedNodes.forEach(O7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!as(this.snapshot.measuredBox.x)&&!as(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=on(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!MT(this.projectionDelta),h=this.getTransformTemplate(),g=h?h(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;l&&(u||Uo(this.latestValues)||y)&&(a(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),R7(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return on();const h=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(k7))){const{scroll:y}=this.root;y&&(mc(h.x,y.offset.x),mc(h.y,y.offset.y))}return h}removeElementScroll(l){var u;const h=on();if(Us(h,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let g=0;g<this.path.length;g++){const y=this.path[g],{scroll:_,options:S}=y;y!==this.root&&_&&S.layoutScroll&&(_.wasRoot&&Us(h,l),mc(h.x,_.offset.x),mc(h.y,_.offset.y))}return h}applyTransform(l,u=!1){const h=on();Us(h,l);for(let g=0;g<this.path.length;g++){const y=this.path[g];!u&&y.options.layoutScroll&&y.scroll&&y!==y.root&&gc(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Uo(y.latestValues)&&gc(h,y.latestValues)}return Uo(this.latestValues)&&gc(h,this.latestValues),h}removeTransform(l){const u=on();Us(u,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];if(!g.instance||!Uo(g.latestValues))continue;kv(g.latestValues)&&g.updateSnapshot();const y=on(),_=g.measurePageBox();Us(y,_),W2(u,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return Uo(this.latestValues)&&W2(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==h;if(!(l||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:S}=this.options;if(!(!this.layout||!(_||S))){if(this.resolvedRelativeTargetAt=Pn.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),Vh(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=on(),this.targetWithTransforms=on()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Us(this.target,this.layout.layoutBox),xT(this.target,this.targetDelta)):Us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),Vh(this.relativeTargetOrigin,this.target,T.target),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kv(this.parent.latestValues)||_T(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let g=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(g=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Pn.timestamp&&(g=!1),g)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;Us(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,T=this.treeScale.y;PL(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=on());const{target:O}=u;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(q2(this.prevProjectionDelta.x,this.projectionDelta.x),q2(this.prevProjectionDelta.y,this.projectionDelta.y)),zh(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==T||!J2(this.projectionDelta.x,this.prevProjectionDelta.x)||!J2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fc(),this.projectionDelta=fc(),this.projectionDeltaWithTransform=fc()}setAnimationOrigin(l,u=!1){const h=this.snapshot,g=h?h.latestValues:{},y={...this.latestValues},_=fc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const S=on(),T=h?h.source:void 0,O=this.layout?this.layout.source:void 0,M=T!==O,R=this.getStack(),N=!R||R.members.length<=1,B=!!(M&&!N&&this.options.crossfade===!0&&!this.path.some(M7));this.animationProgress=0;let z;this.mixTargetDelta=P=>{const U=P/1e3;nS(_.x,l.x,U),nS(_.y,l.y,U),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vh(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),j7(this.relativeTarget,this.relativeTargetOrigin,S,U),z&&d7(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=on()),Us(z,this.relativeTarget)),M&&(this.animationValues=y,r7(y,g,this.latestValues,U,B,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{Cm.hasAnimatedSinceResize=!0,this.currentAnimation=e7(0,Z2,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Z2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:g,latestValues:y}=l;if(!(!u||!h||!g)){if(this!==l&&this.layout&&g&&NT(this.options.animationType,this.layout.layoutBox,g.layoutBox)){h=this.target||on();const _=as(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+_;const S=as(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+S}Us(u,h),gc(u,y),zh(this.projectionDeltaWithTransform,this.layoutCorrected,u,y)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new f7),this.sharedNodes.get(l).add(u);const g=u.options.initialPromotionConfig;u.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const g=this.getStack();g&&g.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const g={};h.z&&zy("z",l,g,this.animationValues);for(let y=0;y<Iy.length;y++)zy(`rotate${Iy[y]}`,l,g,this.animationValues),zy(`skew${Iy[y]}`,l,g,this.animationValues);l.render();for(const y in g)l.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);l.scheduleRender()}getProjectionStyles(l){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return g7;const g={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=Sm(l==null?void 0:l.pointerEvents)||"",g.transform=y?y(this.latestValues,""):"none",g;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=Sm(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(M.transform=y?y({},""):"none",this.hasProjected=!1),M}const S=_.animationValues||_.latestValues;this.applyTransformsToTarget(),g.transform=m7(this.projectionDeltaWithTransform,this.treeScale,S),y&&(g.transform=y(S,g.transform));const{x:T,y:O}=this.projectionDelta;g.transformOrigin=`${T.origin*100}% ${O.origin*100}% 0`,_.animationValues?g.opacity=_===this?(h=(u=S.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:g.opacity=_===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const M in td){if(S[M]===void 0)continue;const{correct:R,applyTo:N,isCSSVariable:B}=td[M],z=g.transform==="none"?S[M]:R(S[M],_);if(N){const P=N.length;for(let U=0;U<P;U++)g[N[U]]=z}else B?this.options.visualElement.renderState.vars[M]=z:g[M]=z}return this.options.layoutId&&(g.pointerEvents=_===this?Sm(l==null?void 0:l.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(eS),this.root.sharedNodes.clear()}}}function y7(t){t.updateLayout()}function v7(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?Is(_=>{const S=l?n.measuredBox[_]:n.layoutBox[_],T=as(S);S.min=s[_].min,S.max=S.min+T}):NT(o,n.layoutBox,s)&&Is(_=>{const S=l?n.measuredBox[_]:n.layoutBox[_],T=as(s[_]);S.max=S.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+T)});const u=fc();zh(u,s,n.layoutBox);const h=fc();l?zh(h,t.applyTransform(a,!0),n.measuredBox):zh(h,s,n.layoutBox);const g=!MT(u);let y=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:S,layout:T}=_;if(S&&T){const O=on();Vh(O,n.layoutBox,S.layoutBox);const M=on();Vh(M,s,T.layoutBox),ET(O,M)||(y=!0),_.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=O,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:g,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function b7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function x7(t){t.clearSnapshot()}function eS(t){t.clearMeasurements()}function w7(t){t.isLayoutDirty=!1}function S7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function C7(t){t.resolveTargetDelta()}function T7(t){t.calcProjection()}function A7(t){t.resetSkewAndRotation()}function O7(t){t.removeLeadSnapshot()}function nS(t,e,n){t.translate=Wt(e.translate,0,n),t.scale=Wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sS(t,e,n,s){t.min=Wt(e.min,n.min,s),t.max=Wt(e.max,n.max,s)}function j7(t,e,n,s){sS(t.x,e.x,n.x,s),sS(t.y,e.y,n.y,s)}function M7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const E7={duration:.45,ease:[.4,0,.1,1]},iS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),aS=iS("applewebkit/")&&!iS("chrome/")?Math.round:As;function rS(t){t.min=aS(t.min),t.max=aS(t.max)}function R7(t){rS(t.x),rS(t.y)}function NT(t,e,n){return t==="position"||t==="preserve-aspect"&&!NL(Q2(e),Q2(n),.2)}function k7(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const N7=kT({attachResizeListener:(t,e)=>ad(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vy={current:void 0},DT=kT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vy.current){const t=new N7({});t.mount(window),t.setOptions({layoutScroll:!0}),Vy.current=t}return Vy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),D7={pan:{Feature:XL},drag:{Feature:KL,ProjectionNode:DT,MeasureLayout:AT}};function oS(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,o=s[a];o&&Nt.postRender(()=>o(e,pd(e)))}class P7 extends Fr{mount(){const{current:e}=this.node;e&&(this.unmount=HP(e,(n,s)=>(oS(this.node,s,"Start"),a=>oS(this.node,a,"End"))))}unmount(){}}class L7 extends Fr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gd(ad(this.node.current,"focus",()=>this.onFocus()),ad(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lS(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),o=s[a];o&&Nt.postRender(()=>o(e,pd(e)))}class B7 extends Fr{mount(){const{current:e}=this.node;e&&(this.unmount=GP(e,(n,s)=>(lS(this.node,s,"Start"),(a,{success:o})=>lS(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Pv=new WeakMap,Hy=new WeakMap,U7=t=>{const e=Pv.get(t.target);e&&e(t)},I7=t=>{t.forEach(U7)};function z7({root:t,...e}){const n=t||document;Hy.has(n)||Hy.set(n,{});const s=Hy.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(I7,{root:t,...e})),s[a]}function V7(t,e,n){const s=z7(e);return Pv.set(t,n),s.observe(t),()=>{Pv.delete(t),s.unobserve(t)}}const H7={some:0,all:1};class F7 extends Fr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:H7[a]},u=h=>{const{isIntersecting:g}=h;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:_}=this.node.getProps(),S=g?y:_;S&&S(h)};return V7(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(q7(e,n))&&this.startObserver()}unmount(){}}function q7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $7={inView:{Feature:F7},tap:{Feature:B7},focus:{Feature:L7},hover:{Feature:P7}},G7={layout:{ProjectionNode:DT,MeasureLayout:AT}},Lv={current:null},PT={current:!1};function W7(){if(PT.current=!0,!!H0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Lv.current=t.matches;t.addListener(e),e()}else Lv.current=!1}const Y7=[...aT,Wn,Hr],K7=t=>Y7.find(iT(t)),X7=new WeakMap;function Q7(t,e,n){for(const s in e){const a=e[s],o=n[s];if(Qn(a))t.addValue(s,a);else if(Qn(o))t.addValue(s,Zh(a,{owner:t}));else if(o!==a)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(s);t.addValue(s,Zh(l!==void 0?l:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const cS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class J7{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=Ui.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,Nt.render(this.render,!1,!0))};const{latestValues:h,renderState:g,onUpdate:y}=l;this.onUpdate=y,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=rg(n),this.isVariantNode=x4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...S}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in S){const O=S[T];h[T]!==void 0&&Qn(O)&&O.set(h[T],!1)}}mount(e){this.current=e,X7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),PT.current||W7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Vr(this.notifyUpdate),Vr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Zo.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jc){const n=jc[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):on()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<cS.length;s++){const a=cS[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=e[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=Q7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Zh(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(nT(a)||G4(a))?a=parseFloat(a):!K7(a)&&Hr.test(n)&&(a=Z4(e,n)),this.setBaseTarget(e,Qn(a)?a.get():a)),Qn(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=ub(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(a=l[e])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Qn(o)?o:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new W0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class LT extends J7{constructor(){super(...arguments),this.KeyframeResolver=rT}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Z7(t){return window.getComputedStyle(t)}class eB extends LT{constructor(){super(...arguments),this.type="html",this.renderInstance=k4}readValueFromInstance(e,n){if(Zo.has(n))return h5(e,n);{const s=Z7(e),a=(nb(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wT(e,n)}build(e,n,s){ab(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return hb(e,n,s)}}class tB extends LT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=on,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&R4(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zo.has(n)){const s=J4(n);return s&&s.default||0}return n=N4.has(n)?n:tb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return P4(e,n,s)}onBindTransform(){this.current&&!this.renderState.dimensions&&Nt.postRender(this.updateDimensions)}build(e,n,s){lb(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,a){D4(e,n,s,a)}mount(e){this.isSVGTag=cb(e.tagName),super.mount(e)}}const nB=(t,e)=>ob(t)?new tB(e):new eB(e,{allowProjection:t!==k.Fragment}),sB=U8({...TL,...$7,...D7,...G7},nB),rc=e8(sB);function iB(){const{user:t,signOut:e}=Va(),[n,s]=k.useState([]),[a,o]=k.useState([]),[l,u]=k.useState(!1),[h,g]=k.useState(""),[y,_]=k.useState(""),[S,T]=k.useState(!1),[O,M]=k.useState(!1),[R,N]=k.useState(""),[B,z]=k.useState(""),[P,U]=k.useState(!0),[ee,ae]=k.useState(()=>{const se=localStorage.getItem("sidebarCollapsed");return se?JSON.parse(se):!1}),[J,X]=k.useState(!1),[oe,A]=k.useState(!1),Te=k.useRef(null),le=se=>{ae(se)},$=()=>{A(!oe)},be=(se,Ce="success")=>{N(se),z(Ce),M(!0),setTimeout(()=>M(!1),5e3)};k.useEffect(()=>{t&&q()},[t]),k.useEffect(()=>{if(y.trim()==="")o(n);else{const se=n.filter(Ce=>Ce.file_name.toLowerCase().includes(y.toLowerCase()));o(se)}},[y,n]);const q=async()=>{try{U(!0);const{data:se,error:Ce}=await Oe.from("medical_records").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(Ce)throw Ce;s(se||[]),o(se||[])}catch(se){console.error("Error fetching medical records:",se.message),be("Failed to load medical records","error")}finally{U(!1)}},G=async se=>{try{u(!0),g("");const Ce=se.target.files[0];if(!Ce)return;const Pe=`${t.id}/${Date.now()}_${Ce.name}`,{error:Me}=await Oe.storage.from("records").upload(Pe,Ce);if(Me)throw Me;const{data:{publicUrl:et}}=Oe.storage.from("records").getPublicUrl(Pe),{error:ue}=await Oe.from("medical_records").insert({user_id:t.id,file_name:Ce.name,file_type:Ce.type,file_size:Ce.size,file_path:Pe,public_url:et});if(ue)throw ue;be("File uploaded successfully!"),q()}catch(Ce){console.error("Error uploading file:",Ce.message),be("Failed to upload file: "+Ce.message,"error")}finally{u(!1),se.target&&(se.target.value="")}},ce=async(se,Ce)=>{try{const{data:Pe,error:Me}=await Oe.storage.from("records").download(se);if(Me)throw Me;const et=URL.createObjectURL(Pe),ue=document.createElement("a");ue.href=et,ue.download=Ce,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),be(`Downloaded ${Ce} successfully`)}catch(Pe){console.error("Error downloading file:",Pe.message),be("Failed to download file: "+Pe.message,"error")}},_e=async(se,Ce,Pe)=>{if(window.confirm(`Are you sure you want to delete "${Pe}"?`))try{const{error:Me}=await Oe.storage.from("records").remove([Ce]);if(Me)throw Me;const{error:et}=await Oe.from("medical_records").delete().eq("id",se);if(et)throw et;be("File deleted successfully"),q()}catch(Me){console.error("Error deleting file:",Me.message),be("Failed to delete file: "+Me.message,"error")}},I=se=>se<1024?se+" bytes":se<1048576?(se/1024).toFixed(1)+" KB":(se/1048576).toFixed(1)+" MB",te=se=>new Date(se).toLocaleString(),xe=se=>se.includes("pdf")?p.jsx(gx,{}):se.includes("image")?p.jsx(mx,{}):se.includes("word")||se.includes("doc")?p.jsx(px,{}):p.jsx(ka,{}),Ae=se=>se.includes("pdf")?"file-badge-pdf":se.includes("image")?"file-badge-image":se.includes("word")||se.includes("doc")?"file-badge-doc":"file-badge-default",we=se=>se.includes("pdf")?"file-icon-pdf":se.includes("image")?"file-icon-image":se.includes("word")||se.includes("doc")?"file-icon-doc":"file-icon-default",Ne=k.useCallback(se=>{se.preventDefault(),se.stopPropagation(),se.type==="dragenter"||se.type==="dragover"?T(!0):se.type==="dragleave"&&T(!1)},[]),Re=k.useCallback(se=>{se.preventDefault(),se.stopPropagation(),T(!1);const Ce=se.dataTransfer.files[0];Ce&&G({target:{files:[Ce]}})},[]),ye=()=>{_("")},F=()=>{X(!J),J||_("")},W=()=>{Te.current.click()},ve=()=>{e()};return k.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(ee))},[ee]),p.jsxs("div",{className:"app-container",children:[p.jsx(di,{isSidebarCollapsed:ee}),p.jsxs("div",{className:"app-layout",children:[p.jsx("div",{className:`sidebar ${ee?"collapsed":""} ${oe?"mobile-visible":""}`,children:p.jsx(hd,{onCollapsedChange:le,onSignOut:ve})}),p.jsx("div",{className:"main-content",children:p.jsx("div",{className:"profile-main",children:p.jsxs("div",{className:"content-container",children:[p.jsx(rc.div,{className:"page-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:p.jsx("div",{className:"header-content",children:p.jsx("div",{className:"header-actions"})})}),p.jsxs("div",{className:"mobile-search-bar",children:[p.jsxs("div",{className:`search-container ${J?"active":""}`,children:[p.jsx(Nh,{className:"search-icon"}),p.jsx("input",{type:"text",placeholder:"Search your records...",value:y,onChange:se=>_(se.target.value)}),y&&p.jsx("button",{onClick:ye,className:"clear-search",children:p.jsx(zo,{})})]}),p.jsx("button",{className:"search-toggle",onClick:F,children:J?p.jsx(zo,{}):p.jsx(Nh,{})})]}),p.jsxs("div",{className:"records-grid",children:[p.jsx(rc.div,{className:"upload-section",whileHover:{scale:1.005},transition:{type:"spring",stiffness:300},children:p.jsx("div",{className:"upload-container",children:p.jsxs("div",{className:`dropzone ${S?"active":""}`,onDragEnter:Ne,onDragLeave:Ne,onDragOver:Ne,onDrop:Re,onClick:W,children:[p.jsx("input",{type:"file",ref:Te,onChange:G,disabled:l,className:"hidden-input"}),p.jsxs("div",{className:"dropzone-content",children:[p.jsx(ER,{className:`upload-icon ${S?"bouncing":""}`}),p.jsx("h3",{children:"Drag & drop files here"}),p.jsx("p",{children:"or click to browse files"}),p.jsxs("div",{className:"file-types",children:[p.jsx("div",{className:"file-type-icon",children:p.jsx(gx,{title:"PDF"})}),p.jsx("div",{className:"file-type-icon",children:p.jsx(px,{title:"DOC"})}),p.jsx("div",{className:"file-type-icon",children:p.jsx(mx,{title:"Images"})})]})]})]})})}),p.jsx(rc.div,{className:"files-section",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:p.jsxs("div",{className:"files-container",children:[p.jsx("div",{className:"files-header",children:p.jsxs("div",{className:"desktop-search-bar",children:[p.jsx(Nh,{className:"search-icon"}),p.jsx("input",{type:"text",placeholder:"Search your records...",value:y,onChange:se=>_(se.target.value)}),y&&p.jsx("button",{onClick:ye,className:"clear-search",children:p.jsx(zo,{})})]})}),P?p.jsx("div",{className:"loading-skeleton",children:[...Array(3)].map((se,Ce)=>p.jsxs("div",{className:"skeleton-row",children:[p.jsx("div",{className:"skeleton-cell w-40"}),p.jsx("div",{className:"skeleton-cell w-20"}),p.jsx("div",{className:"skeleton-cell w-20"}),p.jsx("div",{className:"skeleton-cell w-30"})]},Ce))}):a.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(AR,{className:"empty-icon"}),p.jsx("h3",{children:y?"No matching records":"No records yet"}),p.jsx("p",{children:y?`We couldn't find any files matching "${y}"`:"Upload your first medical record to get started"}),p.jsx("button",{onClick:y?ye:W,className:"action-button primary",children:y?"Clear Search":"Upload First Record"})]}):p.jsxs("div",{className:"files-table",children:[p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"th-file",children:"File Name"}),p.jsx("th",{className:"th-type",children:"Type"}),p.jsx("th",{className:"th-size",children:"Size"}),p.jsx("th",{className:"th-date",children:"Uploaded"}),p.jsx("th",{className:"th-actions",children:"Actions"})]})}),p.jsx("tbody",{children:a.map((se,Ce)=>p.jsxs(rc.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ce*.05},className:"file-row",children:[p.jsx("td",{className:"td-file",children:p.jsxs("div",{className:"file-info",children:[p.jsx("div",{className:`file-icon ${we(se.file_type)}`,children:xe(se.file_type)}),p.jsx("span",{className:"file-name",children:se.file_name})]})}),p.jsx("td",{className:"td-type",children:p.jsx("span",{className:`file-badge ${Ae(se.file_type)}`,children:se.file_type.split("/")[1].toUpperCase()})}),p.jsx("td",{className:"td-size",children:I(se.file_size)}),p.jsx("td",{className:"td-date",children:te(se.created_at)}),p.jsx("td",{className:"td-actions",children:p.jsxs("div",{className:"file-actions",children:[p.jsx("button",{onClick:()=>ce(se.file_path,se.file_name),className:"action-button download",title:"Download",children:p.jsx(kh,{})}),p.jsx("button",{onClick:()=>_e(se.id,se.file_path,se.file_name),className:"action-button delete",title:"Delete",children:p.jsx(_x,{})})]})})]},se.id))})]}),p.jsx("div",{className:"mobile-files-view",children:a.map((se,Ce)=>p.jsxs(rc.div,{className:"file-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ce*.05},children:[p.jsxs("div",{className:"file-card-header",children:[p.jsx("div",{className:`file-icon ${we(se.file_type)}`,children:xe(se.file_type)}),p.jsxs("div",{className:"file-card-info",children:[p.jsx("h4",{className:"file-name",children:se.file_name}),p.jsxs("div",{className:"file-meta",children:[p.jsx("span",{className:`file-badge ${Ae(se.file_type)}`,children:se.file_type.split("/")[1].toUpperCase()}),p.jsx("span",{className:"file-size",children:I(se.file_size)})]})]})]}),p.jsxs("div",{className:"file-card-footer",children:[p.jsxs("div",{className:"file-date",children:[p.jsx("span",{className:"date-label",children:"Uploaded:"}),te(se.created_at)]}),p.jsxs("div",{className:"file-actions",children:[p.jsx("button",{onClick:()=>ce(se.file_path,se.file_name),className:"action-button download",title:"Download",children:p.jsx(kh,{})}),p.jsx("button",{onClick:()=>_e(se.id,se.file_path,se.file_name),className:"action-button delete",title:"Delete",children:p.jsx(_x,{})})]})]})]},se.id))})]})]})})]}),p.jsx(EP,{children:O&&p.jsx(rc.div,{className:`toast-notification ${B}`,initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},children:p.jsxs("div",{className:"toast-content",children:[B==="error"?p.jsx(zo,{}):p.jsx(kh,{}),p.jsx("span",{children:R}),p.jsx("button",{onClick:()=>M(!1),className:"toast-close",children:p.jsx(zo,{})})]})})}),p.jsx("button",{className:"mobile-upload-fab",onClick:W,disabled:l,children:p.jsx(_R,{})})]})})})]}),p.jsx("button",{className:"mobile-sidebar-toggle",onClick:$,"aria-label":"Toggle sidebar",children:"≡"})]})}function BT(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=BT(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function lg(){for(var t,e,n=0,s="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=BT(t))&&(s&&(s+=" "),s+=e);return s}var Fy,uS;function aB(){if(uS)return Fy;uS=1;const t=(h,g,y,_)=>{if(y==="length"||y==="prototype"||y==="arguments"||y==="caller")return;const S=Object.getOwnPropertyDescriptor(h,y),T=Object.getOwnPropertyDescriptor(g,y);!e(S,T)&&_||Object.defineProperty(h,y,T)},e=function(h,g){return h===void 0||h.configurable||h.writable===g.writable&&h.enumerable===g.enumerable&&h.configurable===g.configurable&&(h.writable||h.value===g.value)},n=(h,g)=>{const y=Object.getPrototypeOf(g);y!==Object.getPrototypeOf(h)&&Object.setPrototypeOf(h,y)},s=(h,g)=>`/* Wrapped ${h}*/
${g}`,a=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),o=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),l=(h,g,y)=>{const _=y===""?"":`with ${y.trim()}() `,S=s.bind(null,_,g.toString());Object.defineProperty(S,"name",o),Object.defineProperty(h,"toString",{...a,value:S})};return Fy=(h,g,{ignoreNonConfigurable:y=!1}={})=>{const{name:_}=h;for(const S of Reflect.ownKeys(g))t(h,g,S,y);return n(h,g),l(h,g,_),h},Fy}var Th={exports:{}},qy,hS;function rB(){return hS||(hS=1,qy=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t}),qy}var lm=Th.exports,dS;function oB(){return dS||(dS=1,function(t,e){var n=lm&&lm.__awaiter||function(l,u,h,g){return new(h||(h=Promise))(function(y,_){function S(M){try{O(g.next(M))}catch(R){_(R)}}function T(M){try{O(g.throw(M))}catch(R){_(R)}}function O(M){M.done?y(M.value):new h(function(R){R(M.value)}).then(S,T)}O((g=g.apply(l,u||[])).next())})},s=lm&&lm.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(rB());function o(l,u="maxAge"){let h,g,y;const _=()=>n(this,void 0,void 0,function*(){if(h!==void 0)return;const O=M=>n(this,void 0,void 0,function*(){y=a.default();const R=M[1][u]-Date.now();if(R<=0){l.delete(M[0]),y.resolve();return}return h=M[0],g=setTimeout(()=>{l.delete(M[0]),y&&y.resolve()},R),typeof g.unref=="function"&&g.unref(),y.promise});try{for(const M of l)yield O(M)}catch{}h=void 0}),S=()=>{h=void 0,g!==void 0&&(clearTimeout(g),g=void 0),y!==void 0&&(y.reject(void 0),y=void 0)},T=l.set.bind(l);return l.set=(O,M)=>{l.has(O)&&l.delete(O);const R=T(O,M);return h&&h===O&&S(),_(),R},_(),l}e.default=o,t.exports=o,t.exports.default=o}(Th,Th.exports)),Th.exports}var $y,fS;function lB(){if(fS)return $y;fS=1;const t=aB(),e=oB(),n=new WeakMap,s=new WeakMap,a=(o,{cacheKey:l,cache:u=new Map,maxAge:h}={})=>{typeof h=="number"&&e(u);const g=function(...y){const _=l?l(y):y[0],S=u.get(_);if(S)return S.data;const T=o.apply(this,y);return u.set(_,{data:T,maxAge:h?Date.now()+h:Number.POSITIVE_INFINITY}),T};return t(g,o,{ignoreNonConfigurable:!0}),s.set(g,u),g};return a.decorator=(o={})=>(l,u,h)=>{const g=l[u];if(typeof g!="function")throw new TypeError("The decorated value must be a function");delete h.value,delete h.writable,h.get=function(){if(!n.has(this)){const y=a(g,o);return n.set(this,y),y}return n.get(this)}},a.clear=o=>{const l=s.get(o);if(!l)throw new TypeError("Can't clear a function that was not memoized!");if(typeof l.clear!="function")throw new TypeError("The cache Map can't be cleared!");l.clear()},$y=a,$y}var cB=lB();const UT=r0(cB);function uB(t){return typeof t=="string"}function hB(t,e,n){return n.indexOf(t)===e}function dB(t){return t.toLowerCase()===t}function mS(t){return t.indexOf(",")===-1?t:t.split(",")}function Bv(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return Bv(n)}if(t.indexOf("@")!==-1){var s=t.split("@")[0],n=s===void 0?"":s;return Bv(n)}if(t.indexOf("-")===-1||!dB(t))return t;var a=t.split("-"),o=a[0],l=a[1],u=l===void 0?"":l;return"".concat(o,"-").concat(u.toUpperCase())}function fB(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,s=n===void 0?!0:n,a=e.fallbackLocale,o=a===void 0?"en-US":a,l=[];if(typeof navigator<"u"){for(var u=navigator.languages||[],h=[],g=0,y=u;g<y.length;g++){var _=y[g];h=h.concat(mS(_))}var S=navigator.language,T=S&&mS(S);l=l.concat(h,T)}return s&&l.push(o),l.filter(uB).map(Bv).filter(hB)}var mB=UT(fB,{cacheKey:JSON.stringify});function gB(t){return mB(t)[0]||null}var IT=UT(gB,{cacheKey:JSON.stringify});function Fa(t,e,n){return function(a,o){o===void 0&&(o=n);var l=t(a)+o;return e(l)}}function yd(t){return function(n){return new Date(t(n).getTime()-1)}}function vd(t,e){return function(s){return[t(s),e(s)]}}function Vt(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function qr(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function cg(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function Bc(t){var e=Vt(t),n=e+(-e+1)%100,s=new Date;return s.setFullYear(n,0,1),s.setHours(0,0,0,0),s}var pB=Fa(Vt,Bc,-100),zT=Fa(Vt,Bc,100),_b=yd(zT),yB=Fa(Vt,_b,-100),VT=vd(Bc,_b);function $r(t){var e=Vt(t),n=e+(-e+1)%10,s=new Date;return s.setFullYear(n,0,1),s.setHours(0,0,0,0),s}var HT=Fa(Vt,$r,-10),xb=Fa(Vt,$r,10),ug=yd(xb),FT=Fa(Vt,ug,-10),qT=vd($r,ug);function Uc(t){var e=Vt(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var $T=Fa(Vt,Uc,-1),wb=Fa(Vt,Uc,1),hg=yd(wb),GT=Fa(Vt,hg,-1),vB=vd(Uc,hg);function Sb(t,e){return function(s,a){a===void 0&&(a=e);var o=Vt(s),l=qr(s)+a,u=new Date;return u.setFullYear(o,l,1),u.setHours(0,0,0,0),t(u)}}function el(t){var e=Vt(t),n=qr(t),s=new Date;return s.setFullYear(e,n,1),s.setHours(0,0,0,0),s}var WT=Sb(el,-1),Cb=Sb(el,1),bd=yd(Cb),YT=Sb(bd,-1),bB=vd(el,bd);function _B(t,e){return function(s,a){a===void 0&&(a=e);var o=Vt(s),l=qr(s),u=cg(s)+a,h=new Date;return h.setFullYear(o,l,u),h.setHours(0,0,0,0),t(h)}}function _d(t){var e=Vt(t),n=qr(t),s=cg(t),a=new Date;return a.setFullYear(e,n,s),a.setHours(0,0,0,0),a}var xB=_B(_d,1),Tb=yd(xB),wB=vd(_d,Tb);function KT(t){return cg(bd(t))}var Ln={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},SB={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Ab=[0,1,2,3,4,5,6],Gy=new Map;function CB(t){return function(n,s){var a=n||IT();Gy.has(a)||Gy.set(a,new Map);var o=Gy.get(a);return o.has(t)||o.set(t,new Intl.DateTimeFormat(a||void 0,t).format),o.get(t)(s)}}function TB(t){var e=new Date(t);return new Date(e.setHours(12))}function tl(t){return function(e,n){return CB(t)(e,TB(n))}}var AB={day:"numeric"},OB={day:"numeric",month:"long",year:"numeric"},jB={month:"long"},MB={month:"long",year:"numeric"},EB={weekday:"short"},RB={weekday:"long"},kB={year:"numeric"},NB=tl(AB),DB=tl(OB),PB=tl(jB),XT=tl(MB),LB=tl(EB),BB=tl(RB),dg=tl(kB),UB=Ab[0],IB=Ab[5],gS=Ab[6];function rd(t,e){e===void 0&&(e=Ln.ISO_8601);var n=t.getDay();switch(e){case Ln.ISO_8601:return(n+6)%7;case Ln.ISLAMIC:return(n+1)%7;case Ln.HEBREW:case Ln.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function zB(t){var e=Bc(t);return Vt(e)}function VB(t){var e=$r(t);return Vt(e)}function Uv(t,e){e===void 0&&(e=Ln.ISO_8601);var n=Vt(t),s=qr(t),a=t.getDate()-rd(t,e);return new Date(n,s,a)}function HB(t,e){e===void 0&&(e=Ln.ISO_8601);var n=e===Ln.GREGORY?Ln.GREGORY:Ln.ISO_8601,s=Uv(t,e),a=Vt(t)+1,o,l;do o=new Date(a,0,n===Ln.ISO_8601?4:1),l=Uv(o,e),a-=1;while(t<l);return Math.round((s.getTime()-l.getTime())/(864e5*7))+1}function Wo(t,e){switch(t){case"century":return Bc(e);case"decade":return $r(e);case"year":return Uc(e);case"month":return el(e);case"day":return _d(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function FB(t,e){switch(t){case"century":return pB(e);case"decade":return HT(e);case"year":return $T(e);case"month":return WT(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function QT(t,e){switch(t){case"century":return zT(e);case"decade":return xb(e);case"year":return wb(e);case"month":return Cb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function qB(t,e){switch(t){case"decade":return HT(e,-100);case"year":return $T(e,-10);case"month":return WT(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function $B(t,e){switch(t){case"decade":return xb(e,100);case"year":return wb(e,10);case"month":return Cb(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function JT(t,e){switch(t){case"century":return _b(e);case"decade":return ug(e);case"year":return hg(e);case"month":return bd(e);case"day":return Tb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function GB(t,e){switch(t){case"century":return yB(e);case"decade":return FT(e);case"year":return GT(e);case"month":return YT(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function WB(t,e){switch(t){case"decade":return FT(e,-100);case"year":return GT(e,-10);case"month":return YT(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function pS(t,e){switch(t){case"century":return VT(e);case"decade":return qT(e);case"year":return vB(e);case"month":return bB(e);case"day":return wB(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function YB(t,e,n){var s=[e,n].sort(function(a,o){return a.getTime()-o.getTime()});return[Wo(t,s[0]),JT(t,s[1])]}function ZT(t,e,n){return n.map(function(s){return(e||dg)(t,s)}).join(" – ")}function KB(t,e,n){return ZT(t,e,VT(n))}function eA(t,e,n){return ZT(t,e,qT(n))}function XB(t){return t.getDay()===new Date().getDay()}function tA(t,e){e===void 0&&(e=Ln.ISO_8601);var n=t.getDay();switch(e){case Ln.ISLAMIC:case Ln.HEBREW:return n===IB||n===gS;case Ln.ISO_8601:case Ln.GREGORY:return n===gS||n===UB;default:throw new Error("Unsupported calendar type.")}}var Ni="react-calendar__navigation";function QB(t){var e=t.activeStartDate,n=t.drillUp,s=t.formatMonthYear,a=s===void 0?XT:s,o=t.formatYear,l=o===void 0?dg:o,u=t.locale,h=t.maxDate,g=t.minDate,y=t.navigationAriaLabel,_=y===void 0?"":y,S=t.navigationAriaLive,T=t.navigationLabel,O=t.next2AriaLabel,M=O===void 0?"":O,R=t.next2Label,N=R===void 0?"»":R,B=t.nextAriaLabel,z=B===void 0?"":B,P=t.nextLabel,U=P===void 0?"›":P,ee=t.prev2AriaLabel,ae=ee===void 0?"":ee,J=t.prev2Label,X=J===void 0?"«":J,oe=t.prevAriaLabel,A=oe===void 0?"":oe,Te=t.prevLabel,le=Te===void 0?"‹":Te,$=t.setActiveStartDate,be=t.showDoubleView,q=t.view,G=t.views,ce=G.indexOf(q)>0,_e=q!=="century",I=FB(q,e),te=_e?qB(q,e):void 0,xe=QT(q,e),Ae=_e?$B(q,e):void 0,we=function(){if(I.getFullYear()<0)return!0;var Me=GB(q,e);return g&&g>=Me}(),Ne=_e&&function(){if(te.getFullYear()<0)return!0;var Me=WB(q,e);return g&&g>=Me}(),Re=h&&h<xe,ye=_e&&h&&h<Ae;function F(){$(I,"prev")}function W(){$(te,"prev2")}function ve(){$(xe,"next")}function se(){$(Ae,"next2")}function Ce(Me){var et=function(){switch(q){case"century":return KB(u,l,Me);case"decade":return eA(u,l,Me);case"year":return l(u,Me);case"month":return a(u,Me);default:throw new Error("Invalid view: ".concat(q,"."))}}();return T?T({date:Me,label:et,locale:u||IT()||void 0,view:q}):et}function Pe(){var Me="".concat(Ni,"__label");return p.jsxs("button",{"aria-label":_,"aria-live":S,className:Me,disabled:!ce,onClick:n,style:{flexGrow:1},type:"button",children:[p.jsx("span",{className:"".concat(Me,"__labelText ").concat(Me,"__labelText--from"),children:Ce(e)}),be?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"".concat(Me,"__divider"),children:" – "}),p.jsx("span",{className:"".concat(Me,"__labelText ").concat(Me,"__labelText--to"),children:Ce(xe)})]}):null]})}return p.jsxs("div",{className:Ni,children:[X!==null&&_e?p.jsx("button",{"aria-label":ae,className:"".concat(Ni,"__arrow ").concat(Ni,"__prev2-button"),disabled:Ne,onClick:W,type:"button",children:X}):null,le!==null&&p.jsx("button",{"aria-label":A,className:"".concat(Ni,"__arrow ").concat(Ni,"__prev-button"),disabled:we,onClick:F,type:"button",children:le}),Pe(),U!==null&&p.jsx("button",{"aria-label":z,className:"".concat(Ni,"__arrow ").concat(Ni,"__next-button"),disabled:Re,onClick:ve,type:"button",children:U}),N!==null&&_e?p.jsx("button",{"aria-label":M,className:"".concat(Ni,"__arrow ").concat(Ni,"__next2-button"),disabled:ye,onClick:se,type:"button",children:N}):null]})}var pc=function(){return pc=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},pc.apply(this,arguments)},JB=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};function yS(t){return"".concat(t,"%")}function Ob(t){var e=t.children,n=t.className,s=t.count,a=t.direction,o=t.offset,l=t.style,u=t.wrap,h=JB(t,["children","className","count","direction","offset","style","wrap"]);return p.jsx("div",pc({className:n,style:pc({display:"flex",flexDirection:a,flexWrap:u?"wrap":"nowrap"},l)},h,{children:k.Children.map(e,function(g,y){var _=o&&y===0?yS(100*o/s):null;return k.cloneElement(g,pc(pc({},g.props),{style:{flexBasis:yS(100/s),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:_,marginInlineStart:_,marginInlineEnd:0}}))})}))}function ZB(t,e,n){return e&&e>t?e:n&&n<t?n:t}function od(t,e){return e[0]<=t&&e[1]>=t}function eU(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function nA(t,e){return od(t[0],e)||od(t[1],e)}function vS(t,e,n){var s=nA(e,t),a=[];if(s){a.push(n);var o=od(t[0],e),l=od(t[1],e);o&&a.push("".concat(n,"Start")),l&&a.push("".concat(n,"End")),o&&l&&a.push("".concat(n,"BothEnds"))}return a}function tU(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function nU(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,s=t.hover,a="react-calendar__tile",o=[a];if(!n)return o;var l=new Date,u=function(){if(Array.isArray(n))return n;var T=t.dateType;if(!T)throw new Error("dateType is required when date is not an array of two dates");return pS(T,n)}();if(od(l,u)&&o.push("".concat(a,"--now")),!e||!tU(e))return o;var h=function(){if(Array.isArray(e))return e;var T=t.valueType;if(!T)throw new Error("valueType is required when value is not an array of two dates");return pS(T,e)}();eU(h,u)?o.push("".concat(a,"--active")):nA(h,u)&&o.push("".concat(a,"--hasActive"));var g=vS(h,u,"".concat(a,"--range"));o.push.apply(o,g);var y=Array.isArray(e)?e:[e];if(s&&y.length===1){var _=s>h[0]?[h[0],s]:[s,h[0]],S=vS(_,u,"".concat(a,"--hover"));o.push.apply(o,S)}return o}function fg(t){for(var e=t.className,n=t.count,s=n===void 0?3:n,a=t.dateTransform,o=t.dateType,l=t.end,u=t.hover,h=t.offset,g=t.renderTile,y=t.start,_=t.step,S=_===void 0?1:_,T=t.value,O=t.valueType,M=[],R=y;R<=l;R+=S){var N=a(R);M.push(g({classes:nU({date:N,dateType:o,hover:u,value:T,valueType:O}),date:N}))}return p.jsx(Ob,{className:e,count:s,offset:h,wrap:!0,children:M})}function mg(t){var e=t.activeStartDate,n=t.children,s=t.classes,a=t.date,o=t.formatAbbr,l=t.locale,u=t.maxDate,h=t.maxDateTransform,g=t.minDate,y=t.minDateTransform,_=t.onClick,S=t.onMouseOver,T=t.style,O=t.tileClassName,M=t.tileContent,R=t.tileDisabled,N=t.view,B=k.useMemo(function(){var P={activeStartDate:e,date:a,view:N};return typeof O=="function"?O(P):O},[e,a,O,N]),z=k.useMemo(function(){var P={activeStartDate:e,date:a,view:N};return typeof M=="function"?M(P):M},[e,a,M,N]);return p.jsxs("button",{className:lg(s,B),disabled:g&&y(g)>a||u&&h(u)<a||(R==null?void 0:R({activeStartDate:e,date:a,view:N})),onClick:_?function(P){return _(a,P)}:void 0,onFocus:S?function(){return S(a)}:void 0,onMouseOver:S?function(){return S(a)}:void 0,style:T,type:"button",children:[o?p.jsx("abbr",{"aria-label":o(l,a),children:n}):n,z]})}var Iv=function(){return Iv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Iv.apply(this,arguments)},sU=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n},bS="react-calendar__century-view__decades__decade";function iU(t){var e=t.classes,n=e===void 0?[]:e,s=t.currentCentury,a=t.formatYear,o=a===void 0?dg:a,l=sU(t,["classes","currentCentury","formatYear"]),u=l.date,h=l.locale,g=[];return n&&g.push.apply(g,n),g.push(bS),Bc(u).getFullYear()!==s&&g.push("".concat(bS,"--neighboringCentury")),p.jsx(mg,Iv({},l,{classes:g,maxDateTransform:ug,minDateTransform:$r,view:"century",children:eA(h,o,u)}))}var zv=function(){return zv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},zv.apply(this,arguments)},_S=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};function aU(t){var e=t.activeStartDate,n=t.hover,s=t.showNeighboringCentury,a=t.value,o=t.valueType,l=_S(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),u=zB(e),h=u+(s?119:99);return p.jsx(fg,{className:"react-calendar__century-view__decades",dateTransform:$r,dateType:"decade",end:h,hover:n,renderTile:function(g){var y=g.date,_=_S(g,["date"]);return p.jsx(iU,zv({},l,_,{activeStartDate:e,currentCentury:u,date:y}),y.getTime())},start:u,step:10,value:a,valueType:o})}var Vv=function(){return Vv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Vv.apply(this,arguments)};function rU(t){function e(){return p.jsx(aU,Vv({},t))}return p.jsx("div",{className:"react-calendar__century-view",children:e()})}var Hv=function(){return Hv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Hv.apply(this,arguments)},oU=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n},xS="react-calendar__decade-view__years__year";function lU(t){var e=t.classes,n=e===void 0?[]:e,s=t.currentDecade,a=t.formatYear,o=a===void 0?dg:a,l=oU(t,["classes","currentDecade","formatYear"]),u=l.date,h=l.locale,g=[];return n&&g.push.apply(g,n),g.push(xS),$r(u).getFullYear()!==s&&g.push("".concat(xS,"--neighboringDecade")),p.jsx(mg,Hv({},l,{classes:g,maxDateTransform:hg,minDateTransform:Uc,view:"decade",children:o(h,u)}))}var Fv=function(){return Fv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Fv.apply(this,arguments)},wS=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};function cU(t){var e=t.activeStartDate,n=t.hover,s=t.showNeighboringDecade,a=t.value,o=t.valueType,l=wS(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),u=VB(e),h=u+(s?11:9);return p.jsx(fg,{className:"react-calendar__decade-view__years",dateTransform:Uc,dateType:"year",end:h,hover:n,renderTile:function(g){var y=g.date,_=wS(g,["date"]);return p.jsx(lU,Fv({},l,_,{activeStartDate:e,currentDecade:u,date:y}),y.getTime())},start:u,value:a,valueType:o})}var qv=function(){return qv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},qv.apply(this,arguments)};function uU(t){function e(){return p.jsx(cU,qv({},t))}return p.jsx("div",{className:"react-calendar__decade-view",children:e()})}var $v=function(){return $v=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$v.apply(this,arguments)},hU=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n},SS=function(t,e,n){if(n||arguments.length===2)for(var s=0,a=e.length,o;s<a;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||Array.prototype.slice.call(e))},dU="react-calendar__year-view__months__month";function fU(t){var e=t.classes,n=e===void 0?[]:e,s=t.formatMonth,a=s===void 0?PB:s,o=t.formatMonthYear,l=o===void 0?XT:o,u=hU(t,["classes","formatMonth","formatMonthYear"]),h=u.date,g=u.locale;return p.jsx(mg,$v({},u,{classes:SS(SS([],n,!0),[dU],!1),formatAbbr:l,maxDateTransform:bd,minDateTransform:el,view:"year",children:a(g,h)}))}var Gv=function(){return Gv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Gv.apply(this,arguments)},CS=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};function mU(t){var e=t.activeStartDate,n=t.hover,s=t.value,a=t.valueType,o=CS(t,["activeStartDate","hover","value","valueType"]),l=0,u=11,h=Vt(e);return p.jsx(fg,{className:"react-calendar__year-view__months",dateTransform:function(g){var y=new Date;return y.setFullYear(h,g,1),el(y)},dateType:"month",end:u,hover:n,renderTile:function(g){var y=g.date,_=CS(g,["date"]);return p.jsx(fU,Gv({},o,_,{activeStartDate:e,date:y}),y.getTime())},start:l,value:s,valueType:a})}var Wv=function(){return Wv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Wv.apply(this,arguments)};function gU(t){function e(){return p.jsx(mU,Wv({},t))}return p.jsx("div",{className:"react-calendar__year-view",children:e()})}var Yv=function(){return Yv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Yv.apply(this,arguments)},pU=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n},Wy="react-calendar__month-view__days__day";function yU(t){var e=t.calendarType,n=t.classes,s=n===void 0?[]:n,a=t.currentMonthIndex,o=t.formatDay,l=o===void 0?NB:o,u=t.formatLongDate,h=u===void 0?DB:u,g=pU(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),y=g.date,_=g.locale,S=[];return s&&S.push.apply(S,s),S.push(Wy),tA(y,e)&&S.push("".concat(Wy,"--weekend")),y.getMonth()!==a&&S.push("".concat(Wy,"--neighboringMonth")),p.jsx(mg,Yv({},g,{classes:S,formatAbbr:h,maxDateTransform:Tb,minDateTransform:_d,view:"month",children:l(_,y)}))}var Kv=function(){return Kv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Kv.apply(this,arguments)},TS=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};function vU(t){var e=t.activeStartDate,n=t.calendarType,s=t.hover,a=t.showFixedNumberOfWeeks,o=t.showNeighboringMonth,l=t.value,u=t.valueType,h=TS(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),g=Vt(e),y=qr(e),_=a||o,S=rd(e,n),T=_?0:S,O=(_?-S:0)+1,M=function(){if(a)return O+6*7-1;var R=KT(e);if(o){var N=new Date;N.setFullYear(g,y,R),N.setHours(0,0,0,0);var B=7-rd(N,n)-1;return R+B}return R}();return p.jsx(fg,{className:"react-calendar__month-view__days",count:7,dateTransform:function(R){var N=new Date;return N.setFullYear(g,y,R),_d(N)},dateType:"day",hover:s,end:M,renderTile:function(R){var N=R.date,B=TS(R,["date"]);return p.jsx(yU,Kv({},h,B,{activeStartDate:e,calendarType:n,currentMonthIndex:y,date:N}),N.getTime())},offset:T,start:O,value:l,valueType:u})}var sA="react-calendar__month-view__weekdays",Yy="".concat(sA,"__weekday");function bU(t){for(var e=t.calendarType,n=t.formatShortWeekday,s=n===void 0?LB:n,a=t.formatWeekday,o=a===void 0?BB:a,l=t.locale,u=t.onMouseLeave,h=new Date,g=el(h),y=Vt(g),_=qr(g),S=[],T=1;T<=7;T+=1){var O=new Date(y,_,T-rd(g,e)),M=o(l,O);S.push(p.jsx("div",{className:lg(Yy,XB(O)&&"".concat(Yy,"--current"),tA(O,e)&&"".concat(Yy,"--weekend")),children:p.jsx("abbr",{"aria-label":M,title:M,children:s(l,O).replace(".","")})},T))}return p.jsx(Ob,{className:sA,count:7,onFocus:u,onMouseOver:u,children:S})}var Wm=function(){return Wm=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Wm.apply(this,arguments)},AS=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n},OS="react-calendar__tile";function _U(t){var e=t.onClickWeekNumber,n=t.weekNumber,s=p.jsx("span",{children:n});if(e){var a=t.date,o=t.onClickWeekNumber,l=t.weekNumber,u=AS(t,["date","onClickWeekNumber","weekNumber"]);return p.jsx("button",Wm({},u,{className:OS,onClick:function(h){return o(l,a,h)},type:"button",children:s}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var u=AS(t,["date","onClickWeekNumber","weekNumber"]);return p.jsx("div",Wm({},u,{className:OS,children:s}))}}function xU(t){var e=t.activeStartDate,n=t.calendarType,s=t.onClickWeekNumber,a=t.onMouseLeave,o=t.showFixedNumberOfWeeks,l=function(){if(o)return 6;var g=KT(e),y=rd(e,n),_=g-(7-y);return 1+Math.ceil(_/7)}(),u=function(){for(var g=Vt(e),y=qr(e),_=cg(e),S=[],T=0;T<l;T+=1)S.push(Uv(new Date(g,y,_+T*7),n));return S}(),h=u.map(function(g){return HB(g,n)});return p.jsx(Ob,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(g,y){var _=u[y];if(!_)throw new Error("date is not defined");return p.jsx(_U,{date:_,onClickWeekNumber:s,weekNumber:g},g)})})}var Xv=function(){return Xv=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Xv.apply(this,arguments)},wU=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};function SU(t){if(t)for(var e=0,n=Object.entries(SB);e<n.length;e++){var s=n[e],a=s[0],o=s[1];if(o.includes(t))return a}return Ln.ISO_8601}function CU(t){var e=t.activeStartDate,n=t.locale,s=t.onMouseLeave,a=t.showFixedNumberOfWeeks,o=t.calendarType,l=o===void 0?SU(n):o,u=t.formatShortWeekday,h=t.formatWeekday,g=t.onClickWeekNumber,y=t.showWeekNumbers,_=wU(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function S(){return p.jsx(bU,{calendarType:l,formatShortWeekday:u,formatWeekday:h,locale:n,onMouseLeave:s})}function T(){return y?p.jsx(xU,{activeStartDate:e,calendarType:l,onClickWeekNumber:g,onMouseLeave:s,showFixedNumberOfWeeks:a}):null}function O(){return p.jsx(vU,Xv({calendarType:l},_))}var M="react-calendar__month-view";return p.jsx("div",{className:lg(M,y?"".concat(M,"--weekNumbers"):""),children:p.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[T(),p.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[S(),O()]})]})})}var yc=function(){return yc=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},yc.apply(this,arguments)},cm="react-calendar",Tm=["century","decade","year","month"],TU=["decade","year","month","day"],jb=new Date;jb.setFullYear(1,0,1);jb.setHours(0,0,0,0);var AU=new Date(864e13);function Ah(t){return t instanceof Date?t:new Date(t)}function iA(t,e){return Tm.slice(Tm.indexOf(t),Tm.indexOf(e)+1)}function OU(t,e,n){var s=iA(e,n);return s.indexOf(t)!==-1}function Mb(t,e,n){return t&&OU(t,e,n)?t:n}function aA(t){var e=Tm.indexOf(t);return TU[e]}function jU(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var s=Ah(n);if(Number.isNaN(s.getTime()))throw new Error("Invalid date: ".concat(t));return s}function rA(t,e){var n=t.value,s=t.minDate,a=t.maxDate,o=t.maxDetail,l=jU(n,e);if(!l)return null;var u=aA(o),h=function(){switch(e){case 0:return Wo(u,l);case 1:return JT(u,l);default:throw new Error("Invalid index value: ".concat(e))}}();return ZB(h,s,a)}var Eb=function(t){return rA(t,0)},oA=function(t){return rA(t,1)},MU=function(t){return[Eb,oA].map(function(e){return e(t)})};function lA(t){var e=t.maxDate,n=t.maxDetail,s=t.minDate,a=t.minDetail,o=t.value,l=t.view,u=Mb(l,a,n),h=Eb({value:o,minDate:s,maxDate:e,maxDetail:n})||new Date;return Wo(u,h)}function EU(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,s=t.defaultValue,a=t.defaultView,o=t.maxDate,l=t.maxDetail,u=t.minDate,h=t.minDetail,g=t.value,y=t.view,_=Mb(y,h,l),S=e||n;return S?Wo(_,S):lA({maxDate:o,maxDetail:l,minDate:u,minDetail:h,value:g||s,view:y||a})}function Ky(t){return t&&(!Array.isArray(t)||t.length===1)}function um(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var RU=k.forwardRef(function(e,n){var s=e.activeStartDate,a=e.allowPartialRange,o=e.calendarType,l=e.className,u=e.defaultActiveStartDate,h=e.defaultValue,g=e.defaultView,y=e.formatDay,_=e.formatLongDate,S=e.formatMonth,T=e.formatMonthYear,O=e.formatShortWeekday,M=e.formatWeekday,R=e.formatYear,N=e.goToRangeStartOnSelect,B=N===void 0?!0:N,z=e.inputRef,P=e.locale,U=e.maxDate,ee=U===void 0?AU:U,ae=e.maxDetail,J=ae===void 0?"month":ae,X=e.minDate,oe=X===void 0?jb:X,A=e.minDetail,Te=A===void 0?"century":A,le=e.navigationAriaLabel,$=e.navigationAriaLive,be=e.navigationLabel,q=e.next2AriaLabel,G=e.next2Label,ce=e.nextAriaLabel,_e=e.nextLabel,I=e.onActiveStartDateChange,te=e.onChange,xe=e.onClickDay,Ae=e.onClickDecade,we=e.onClickMonth,Ne=e.onClickWeekNumber,Re=e.onClickYear,ye=e.onDrillDown,F=e.onDrillUp,W=e.onViewChange,ve=e.prev2AriaLabel,se=e.prev2Label,Ce=e.prevAriaLabel,Pe=e.prevLabel,Me=e.returnValue,et=Me===void 0?"start":Me,ue=e.selectRange,Le=e.showDoubleView,Ye=e.showFixedNumberOfWeeks,Ct=e.showNavigation,Ge=Ct===void 0?!0:Ct,Fe=e.showNeighboringCentury,Ut=e.showNeighboringDecade,jn=e.showNeighboringMonth,Je=jn===void 0?!0:jn,Tt=e.showWeekNumbers,At=e.tileClassName,mt=e.tileContent,Mt=e.tileDisabled,cn=e.value,Un=e.view,Gr=k.useState(u),nl=Gr[0],vs=Gr[1],un=k.useState(null),Wr=un[0],rs=un[1],fn=k.useState(Array.isArray(h)?h.map(function(tt){return tt!==null?Ah(tt):null}):h!=null?Ah(h):null),mi=fn[0],sl=fn[1],Fi=k.useState(g),Ht=Fi[0],gi=Fi[1],Dt=s||nl||EU({activeStartDate:s,defaultActiveStartDate:u,defaultValue:h,defaultView:g,maxDate:ee,maxDetail:J,minDate:oe,minDetail:Te,value:cn,view:Un}),sn=function(){var tt=function(){return ue&&Ky(mi)?mi:cn!==void 0?cn:mi}();return tt?Array.isArray(tt)?tt.map(function(Ee){return Ee!==null?Ah(Ee):null}):tt!==null?Ah(tt):null:null}(),Ot=aA(J),wt=Mb(Un||Ht,Te,J),Jn=iA(Te,J),il=ue?Wr:null,pi=Jn.indexOf(wt)<Jn.length-1,Fs=Jn.indexOf(wt)>0,al=k.useCallback(function(tt){var Ee=function(){switch(et){case"start":return Eb;case"end":return oA;case"range":return MU;default:throw new Error("Invalid returnValue.")}}();return Ee({maxDate:ee,maxDetail:J,minDate:oe,value:tt})},[ee,J,oe,et]),qi=k.useCallback(function(tt,Ee){vs(tt);var Lt={action:Ee,activeStartDate:tt,value:sn,view:wt};I&&!um(Dt,tt)&&I(Lt)},[Dt,I,sn,wt]),$i=k.useCallback(function(tt,Ee){var Lt=function(){switch(wt){case"century":return Ae;case"decade":return Re;case"year":return we;case"month":return xe;default:throw new Error("Invalid view: ".concat(wt,"."))}}();Lt&&Lt(tt,Ee)},[xe,Ae,we,Re,wt]),qa=k.useCallback(function(tt,Ee){if(pi){$i(tt,Ee);var Lt=Jn[Jn.indexOf(wt)+1];if(!Lt)throw new Error("Attempted to drill down from the lowest view.");vs(tt),gi(Lt);var mn={action:"drillDown",activeStartDate:tt,value:sn,view:Lt};I&&!um(Dt,tt)&&I(mn),W&&wt!==Lt&&W(mn),ye&&ye(mn)}},[Dt,pi,I,$i,ye,W,sn,wt,Jn]),yi=k.useCallback(function(){if(Fs){var tt=Jn[Jn.indexOf(wt)-1];if(!tt)throw new Error("Attempted to drill up from the highest view.");var Ee=Wo(tt,Dt);vs(Ee),gi(tt);var Lt={action:"drillUp",activeStartDate:Ee,value:sn,view:tt};I&&!um(Dt,Ee)&&I(Lt),W&&wt!==tt&&W(Lt),F&&F(Lt)}},[Dt,Fs,I,F,W,sn,wt,Jn]),Yr=k.useCallback(function(tt,Ee){var Lt=sn;$i(tt,Ee);var mn=ue&&!Ky(Lt),gn;if(ue)if(mn)gn=Wo(Ot,tt);else{if(!Lt)throw new Error("previousValue is required");if(Array.isArray(Lt))throw new Error("previousValue must not be an array");gn=YB(Ot,Lt,tt)}else gn=al(tt);var os=!ue||mn||B?lA({maxDate:ee,maxDetail:J,minDate:oe,minDetail:Te,value:gn,view:wt}):null;Ee.persist(),vs(os),sl(gn);var yt={action:"onChange",activeStartDate:os,value:gn,view:wt};if(I&&!um(Dt,os)&&I(yt),te)if(ue){var vi=Ky(gn);if(!vi)te(gn||null,Ee);else if(a){if(Array.isArray(gn))throw new Error("value must not be an array");te([gn||null,null],Ee)}}else te(gn||null,Ee)},[Dt,a,al,B,ee,J,oe,Te,I,te,$i,ue,sn,Ot,wt]);function Os(tt){rs(tt)}function Pt(){rs(null)}k.useImperativeHandle(n,function(){return{activeStartDate:Dt,drillDown:qa,drillUp:yi,onChange:Yr,setActiveStartDate:qi,value:sn,view:wt}},[Dt,qa,yi,Yr,qi,sn,wt]);function hn(tt){var Ee=tt?QT(wt,Dt):Wo(wt,Dt),Lt=pi?qa:Yr,mn={activeStartDate:Ee,hover:il,locale:P,maxDate:ee,minDate:oe,onClick:Lt,onMouseOver:ue?Os:void 0,tileClassName:At,tileContent:mt,tileDisabled:Mt,value:sn,valueType:Ot};switch(wt){case"century":return p.jsx(rU,yc({formatYear:R,showNeighboringCentury:Fe},mn));case"decade":return p.jsx(uU,yc({formatYear:R,showNeighboringDecade:Ut},mn));case"year":return p.jsx(gU,yc({formatMonth:S,formatMonthYear:T},mn));case"month":return p.jsx(CU,yc({calendarType:o,formatDay:y,formatLongDate:_,formatShortWeekday:O,formatWeekday:M,onClickWeekNumber:Ne,onMouseLeave:ue?Pt:void 0,showFixedNumberOfWeeks:typeof Ye<"u"?Ye:Le,showNeighboringMonth:Je,showWeekNumbers:Tt},mn));default:throw new Error("Invalid view: ".concat(wt,"."))}}function bs(){return Ge?p.jsx(QB,{activeStartDate:Dt,drillUp:yi,formatMonthYear:T,formatYear:R,locale:P,maxDate:ee,minDate:oe,navigationAriaLabel:le,navigationAriaLive:$,navigationLabel:be,next2AriaLabel:q,next2Label:G,nextAriaLabel:ce,nextLabel:_e,prev2AriaLabel:ve,prev2Label:se,prevAriaLabel:Ce,prevLabel:Pe,setActiveStartDate:qi,showDoubleView:Le,view:wt,views:Jn}):null}var Kr=Array.isArray(sn)?sn:[sn];return p.jsxs("div",{className:lg(cm,ue&&Kr.length===1&&"".concat(cm,"--selectRange"),Le&&"".concat(cm,"--doubleView"),l),ref:z,children:[bs(),p.jsxs("div",{className:"".concat(cm,"__viewContainer"),onBlur:ue?Pt:void 0,onMouseLeave:ue?Pt:void 0,children:[hn(),Le?hn(!0):null]})]})});const jS={"Routine Check-Ups & Screenings":["Annual pelvic exam","Pap smear","Breast exam","HPV screening","STI testing"],"Birth Control & Family Planning":["Contraceptive counseling","Birth control prescriptions","IUD insertion/removal","Implant insertion/removal","Emergency contraception"],"Pregnancy-Related Appointments":["Preconception counseling","Prenatal care","Ultrasound appointments","Genetic screening and testing","Labor and delivery planning","Postpartum check-up"],"Menstrual and Hormonal Issues":["Irregular periods","Painful or heavy menstruation","PMS or PMDD management","Perimenopause and menopause care","Hormone therapy"],"Gynecological Concerns":["Vaginal infections","Urinary tract infections (UTIs)","Pelvic pain","Endometriosis","Polycystic ovary syndrome (PCOS)","Ovarian cysts or fibroids"],"Fertility & Infertility Services":["Fertility evaluation","Ovulation tracking","Referral for assisted reproductive technologies"],"Surgeries & Procedures":["Colposcopy","Endometrial biopsy","Laparoscopy","D&C (dilation and curettage)","Hysteroscopy","Hysterectomy consultations"],"Sexual Health & Counseling":["Sexual dysfunction","Pain during intercourse","Libido issues","LGBTQ+ reproductive health counseling"]};function kU(){const{user:t}=Va(),[e,n]=k.useState([]),[s,a]=k.useState(null),[o,l]=k.useState(""),[u,h]=k.useState(null),[g,y]=k.useState({morning:[],afternoon:[]}),[_,S]=k.useState(""),[T,O]=k.useState(!1),[M,R]=k.useState(!1),[N,B]=k.useState(null),[z,P]=k.useState(!1),[U,ee]=k.useState(new Date),[ae,J]=k.useState([]),[X,oe]=k.useState(()=>{const ue=localStorage.getItem("sidebarCollapsed");return ue?JSON.parse(ue):!1}),[A,Te]=k.useState(!1),[le,$]=k.useState({}),[be,q]=k.useState(null),[G,ce]=k.useState(""),[_e,I]=k.useState(""),[te,xe]=k.useState([]),Ae={morning:[{start:"08:00",end:"09:00",label:"8:00-9:00 AM"},{start:"09:00",end:"10:00",label:"9:00-10:00 AM"},{start:"10:00",end:"11:00",label:"10:00-11:00 AM"},{start:"11:00",end:"12:00",label:"11:00-12:00 PM"}],afternoon:[{start:"13:00",end:"14:00",label:"1:00-2:00 PM"},{start:"14:00",end:"15:00",label:"2:00-3:00 PM"},{start:"15:00",end:"16:00",label:"3:00-4:00 PM"},{start:"16:00",end:"17:00",label:"4:00-5:00 PM"}]};k.useEffect(()=>{G?(xe(jS[G]||[]),I("")):(xe([]),I(""))},[G]),k.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(X))},[X]);const we=async()=>{try{await Oe.auth.signOut()}catch(ue){console.error("Error signing out:",ue)}};k.useEffect(()=>{Re(),Ne()},[t]),k.useEffect(()=>{s&&o?ye():y({morning:[],afternoon:[]})},[s,o]),k.useEffect(()=>{let ue;return(()=>{s&&o&&ye(),ue=setInterval(()=>{s&&o&&ye(!0)},1e4),q(ue)})(),()=>{ue&&clearInterval(ue)}},[s,o]);const Ne=async()=>{if(t!=null&&t.id)try{const ue=new Date().toISOString().split("T")[0],{data:Le,error:Ye}=await Oe.from("appointments").select(`
          *,
          doctors:doctor_id (
            full_name,
            specialty
          )
        `).eq("patient_id",t.id).gte("appointment_date",ue).order("appointment_date",{ascending:!0}).order("start_time",{ascending:!0}).limit(5);if(Ye)throw Ye;J(Le||[])}catch(ue){console.error("Error fetching upcoming appointments:",ue),J([])}},Re=async()=>{try{const{data:ue,error:Le}=await Oe.from("doctors").select("user_id, full_name, specialty").order("full_name");if(Le)throw Le;n(ue||[])}catch(ue){B("Error fetching doctors: "+ue.message)}},ye=async(ue=!1)=>{if(!s||!o){y({morning:[],afternoon:[]});return}ue||R(!0),B(null);try{const Le=new Date(o),Ye=Le.getDay();if(Ye===0||Ye===6){B("Appointments are not available on weekends"),y({morning:[],afternoon:[]});return}const Ct=yv(new Date);if(yP(Le,Ct)){B("Cannot book appointments for past dates"),y({morning:[],afternoon:[]});return}const Ge=Iw(Ct,2);if(qw(Le,Ge)){B("Cannot book appointments more than 2 weeks in advance"),y({morning:[],afternoon:[]});return}const{data:Fe,error:Ut}=await Oe.from("appointments").select("start_time, end_time, status").eq("doctor_id",s).eq("appointment_date",o).in("status",["pending","confirmed"]);if(Ut)throw Ut;const jn=new Date,Je=Yn(Le,"yyyy-MM-dd")===Yn(jn,"yyyy-MM-dd"),Tt=(At,mt)=>At.filter(Mt=>{if(mt==null?void 0:mt.some(Un=>Mt.start===Un.start_time&&Mt.end===Un.end_time&&["pending","confirmed"].includes(Un.status)))return!1;if(Je){const Un=new Date(`${o}T${Mt.start}`);return qw(Un,g3(jn,30))}return!0});y({morning:Tt(Ae.morning,Fe),afternoon:Tt(Ae.afternoon,Fe)}),u&&(Fe!=null&&Fe.some(mt=>u.start===mt.start_time&&u.end===mt.end_time))&&(h(null),ue||B("The selected time slot is no longer available"))}catch(Le){console.error("Error:",Le),B("Error fetching available slots: "+Le.message),y({morning:[],afternoon:[]})}finally{ue||R(!1)}},F=async ue=>{if(ue.preventDefault(),!W())return;const Le=[...Ae.morning,...Ae.afternoon].find(Ge=>Ge.start===u.start&&Ge.end===u.end),Ye=e.find(Ge=>Ge.user_id===s);if(window.confirm(`Confirm ${_e} appointment with Dr. ${Ye==null?void 0:Ye.full_name} on ${Yn(new Date(o),"MMMM d, yyyy")} at ${Le.label}?`)){O(!0),B(null),$(Ge=>({...Ge,[`${Le.start}-${Le.end}`]:!0}));try{const{data:Ge,error:Fe}=await Oe.from("appointments").select("id").eq("doctor_id",s).eq("appointment_date",o).eq("start_time",Le.start).eq("end_time",Le.end).in("status",["pending","confirmed"]);if(Fe)throw Fe;if(Ge&&Ge.length>0)throw new Error("This time slot has just been booked. Please select another slot.");const{error:Ut}=await Oe.from("appointments").insert([{patient_id:t.id,doctor_id:s,appointment_date:o,start_time:Le.start,end_time:Le.end,reason:_.trim(),status:"pending",appointment_category:G,appointment_type:_e,created_at:new Date().toISOString()}]);if(Ut)throw Ut;P(!0),Ne(),await ye(),h(null),S(""),setTimeout(()=>P(!1),5e3)}catch(Ge){Ge.message.includes("no_overlapping_appointments")?B("This time slot is already booked"):B("Error booking appointment: "+Ge.message)}finally{O(!1),$(Ge=>({...Ge,[`${Le.start}-${Le.end}`]:!1}))}}},W=()=>s?o?u?_.trim()?G?_e?!0:(B("Please select an appointment type"),!1):(B("Please select an appointment category"),!1):(B("Please provide a reason for the visit"),!1):(B("Please select a time slot"),!1):(B("Please select a date"),!1):(B("Please select a doctor"),!1),ve=()=>ae.length===0?null:p.jsxs("div",{className:"upcoming-appointments",children:[p.jsx("h3",{className:"section-title",children:"Your Upcoming Appointments"}),p.jsx("div",{className:"appointments-list",children:ae.map(ue=>{var Le,Ye,Ct;return p.jsxs("div",{className:"appointment-card",children:[p.jsx("div",{className:"appointment-date",children:Yn(new Date(ue.appointment_date),"MMM d, yyyy")}),p.jsxs("div",{className:"appointment-time",children:[(Le=ue.start_time)==null?void 0:Le.slice(0,5)," - ",(Ye=ue.end_time)==null?void 0:Ye.slice(0,5)]}),p.jsx("div",{className:"appointment-doctor",children:(Ct=ue.doctors)==null?void 0:Ct.full_name}),p.jsx("div",{className:"appointment-type",children:ue.appointment_type||"General consultation"}),p.jsx("div",{className:"appointment-status",children:ue.status})]},ue.id)})})]}),se=()=>{var Ye,Ct;if(!s||!o)return null;if(M)return p.jsx("div",{className:"loading-message",children:"Loading available slots..."});const ue=!((Ye=g.morning)!=null&&Ye.length),Le=!((Ct=g.afternoon)!=null&&Ct.length);return ue&&Le?p.jsx("div",{className:"warning-message",children:"No available slots for the selected date"}):p.jsxs("div",{className:"time-slots-container",children:[!ue&&p.jsxs("div",{className:"slot-section",children:[p.jsx("h4",{children:"Morning"}),p.jsx("div",{className:"slots-grid",children:Ae.morning.map(Ge=>{const Fe=g.morning.some(jn=>jn.start===Ge.start),Ut=le[`${Ge.start}-${Ge.end}`];return p.jsx("button",{type:"button",className:`slot-button ${(u==null?void 0:u.start)===Ge.start?"selected":""} ${Fe?"":"booked"} ${Ut?"loading":""}`,onClick:()=>Fe&&!Ut&&h(Ge),disabled:!Fe||Ut,children:Ut?"Booking...":Ge.label},Ge.start)})})]}),!Le&&p.jsxs("div",{className:"slot-section",children:[p.jsx("h4",{children:"Afternoon"}),p.jsx("div",{className:"slots-grid",children:Ae.afternoon.map(Ge=>{const Fe=g.afternoon.some(jn=>jn.start===Ge.start),Ut=le[`${Ge.start}-${Ge.end}`];return p.jsx("button",{type:"button",className:`slot-button ${(u==null?void 0:u.start)===Ge.start?"selected":""} ${Fe?"":"booked"} ${Ut?"loading":""}`,onClick:()=>Fe&&!Ut&&h(Ge),disabled:!Fe||Ut,children:Ut?"Booking...":Ge.label},Ge.start)})})]})]})},Ce=()=>e.length===0?p.jsx("div",{className:"loading-message",children:"Loading doctors..."}):p.jsx("div",{className:"doctors-grid",children:e.map(ue=>p.jsxs("div",{className:`doctor-card ${s===ue.user_id?"selected":""}`,onClick:()=>{a(ue.user_id),h(null),B(null)},children:[p.jsx("h4",{children:ue.full_name}),p.jsx("p",{children:ue.specialty})]},ue.user_id))}),Pe=()=>p.jsxs("div",{className:"appointment-type-section",children:[p.jsx("h3",{className:"section-title",children:"Appointment Type"}),p.jsxs("div",{className:"appointment-type-selectors",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"category",children:"Appointment Category"}),p.jsxs("select",{id:"category",value:G,onChange:ue=>ce(ue.target.value),className:"type-selector",required:!0,children:[p.jsx("option",{value:"",children:"-- Select Category --"}),Object.keys(jS).map(ue=>p.jsx("option",{value:ue,children:ue},ue))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"type",children:"Specific Type"}),p.jsxs("select",{id:"type",value:_e,onChange:ue=>I(ue.target.value),className:"type-selector",disabled:!G,required:!0,children:[p.jsx("option",{value:"",children:"-- Select Type --"}),te.map(ue=>p.jsx("option",{value:ue,children:ue},ue))]})]})]})]}),Me=()=>{if(!s||!o||!u)return null;const ue=e.find(Le=>Le.user_id===s);return p.jsxs("div",{className:"appointment-summary",children:[p.jsx("h3",{children:"Appointment Summary"}),p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Doctor:"}),p.jsx("span",{children:ue==null?void 0:ue.full_name})]}),p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Specialty:"}),p.jsx("span",{children:ue==null?void 0:ue.specialty})]}),p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Date:"}),p.jsx("span",{children:Yn(new Date(o),"MMMM d, yyyy")})]}),p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Time:"}),p.jsx("span",{children:u.label})]}),G&&p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Category:"}),p.jsx("span",{children:G})]}),_e&&p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Appointment Type:"}),p.jsx("span",{children:_e})]}),_&&p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Reason:"}),p.jsx("div",{className:"reason-text",children:_})]})]})},et=()=>{Te(!A)};return p.jsxs("div",{className:"booking-page",children:[p.jsx(di,{isSidebarCollapsed:X}),p.jsx("div",{className:`sidebar ${X?"collapsed":""} ${A?"mobile-visible":""}`,children:p.jsx(hd,{onSignOut:we,onCollapsedChange:ue=>oe(ue)})}),p.jsx("div",{className:`booking-container ${X?"sidebar-collapsed":""}`,children:p.jsxs("div",{className:"content-wrapper",children:[N&&p.jsx("div",{className:"error-message",children:N}),z&&p.jsx("div",{className:"success-message",children:"Appointment booked successfully!"}),ve(),p.jsxs("div",{className:"booking-layout",children:[p.jsxs("div",{className:"booking-main-content",children:[p.jsxs("section",{className:"doctor-selection-section",children:[p.jsx("h3",{className:"section-title",children:"Select Doctor"}),Ce()]}),p.jsxs("section",{className:"time-selection-section",children:[p.jsx("h3",{className:"section-title",children:"Available Times"}),se()]}),Pe(),p.jsxs("section",{className:"booking-form-section",children:[p.jsx("h3",{className:"section-title",children:"Complete Booking"}),p.jsxs("div",{className:"booking-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"reason",children:"Reason for Visit"}),p.jsx("textarea",{id:"reason",value:_,onChange:ue=>{S(ue.target.value),B(null)},required:!0,rows:4,placeholder:"Please describe the reason for your visit"})]}),p.jsx("button",{type:"submit",className:"book-button",onClick:F,disabled:T||!s||!o||!u||!_.trim()||!G||!_e,children:T?"Booking...":"Book Appointment"})]})]})]}),p.jsxs("div",{className:"booking-sidebar",children:[p.jsxs("div",{className:"calendar-widget",children:[p.jsx("h3",{className:"section-title",children:"Select Date"}),p.jsx(RU,{onChange:ue=>{ee(ue),l(Yn(ue,"yyyy-MM-dd")),h(null)},value:U,minDate:new Date,maxDate:Iw(new Date,2),tileDisabled:({date:ue})=>{const Le=ue.getDay();return Le===0||Le===6},tileClassName:({date:ue})=>{const Le=Yn(ue,"yyyy-MM-dd");return ae.some(Ct=>Ct.appointment_date===Le)?"has-appointment":null}})]}),p.jsx("div",{className:"summary-widget",children:Me()})]})]})]})}),p.jsx("button",{className:"mobile-sidebar-toggle",onClick:et,"aria-label":"Toggle sidebar",children:"≡"})]})}function Ym(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"},child:[]}]})(t)}function cA(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M244 400 100 256l144-144M120 256h292"},child:[]}]})(t)}function xc(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6zM432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75 1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480z"},child:[]}]})(t)}function uA(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"},child:[]}]})(t)}function hA(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(t)}var Am={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.9.0
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/var NU=Am.exports,MS;function DU(){return MS||(MS=1,function(t,e){(function(n,s){t.exports=s()})(NU,()=>{var n={},s={exports:n},a=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,S=(d,f,v)=>f in d?a(d,f,{enumerable:!0,configurable:!0,writable:!0,value:v}):d[f]=v,T=(d,f)=>{for(var v in f||(f={}))y.call(f,v)&&S(d,v,f[v]);if(g)for(var v of g(f))_.call(f,v)&&S(d,v,f[v]);return d},O=(d,f)=>o(d,u(f)),M=(d,f)=>{var v={};for(var x in d)y.call(d,x)&&f.indexOf(x)<0&&(v[x]=d[x]);if(d!=null&&g)for(var x of g(d))f.indexOf(x)<0&&_.call(d,x)&&(v[x]=d[x]);return v},R=(d,f)=>{for(var v in f)a(d,v,{get:f[v],enumerable:!0})},N=(d,f,v,x)=>{if(f&&typeof f=="object"||typeof f=="function")for(let C of h(f))!y.call(d,C)&&C!==v&&a(d,C,{get:()=>f[C],enumerable:!(x=l(f,C))||x.enumerable});return d},B=d=>N(a({},"__esModule",{value:!0}),d),z={};R(z,{ErrorInfo:()=>$,Realtime:()=>ra,Rest:()=>xl,default:()=>sf,makeProtocolMessageFromDeserialized:()=>ou,msgpack:()=>vo}),s.exports=B(z);var P=class{},U=typeof Or<"u"?Or:typeof window<"u"?window:self;function ee(d,f){return`${d}`.padStart(f?3:2,"0")}function ae(d){return P.Config.logTimestamps?function(f){const v=new Date;d(ee(v.getHours())+":"+ee(v.getMinutes())+":"+ee(v.getSeconds())+"."+ee(v.getMilliseconds(),1)+" "+f)}:function(f){d(f)}}var J=()=>{var d;let f,v;return typeof((d=U==null?void 0:U.console)==null?void 0:d.log)=="function"?(f=function(...x){console.log.apply(console,x)},v=console.warn?function(...x){console.warn.apply(console,x)}:f):f=v=function(){},[f,v].map(ae)},X=class Oh{constructor(){this.deprecated=(f,v)=>{this.deprecationWarning(`${f} is deprecated and will be removed in a future version. ${v}`)},this.shouldLog=f=>f<=this.logLevel,this.setLog=(f,v)=>{f!==void 0&&(this.logLevel=f),v!==void 0&&(this.logHandler=this.logErrorHandler=v)},this.logLevel=Oh.defaultLogLevel,this.logHandler=Oh.defaultLogHandler,this.logErrorHandler=Oh.defaultLogErrorHandler}static initLogHandlers(){const[f,v]=J();this.defaultLogHandler=f,this.defaultLogErrorHandler=v,this.defaultLogger=new Oh}static logActionNoStrip(f,v,x,C){f.logAction(v,x,C)}logAction(f,v,x){this.shouldLog(f)&&(f===1?this.logErrorHandler:this.logHandler)("Ably: "+v+": "+x,f)}renamedClientOption(f,v){this.deprecationWarning(`The \`${f}\` client option has been renamed to \`${v}\`. Please update your code to use \`${v}\` instead. \`${f}\` will be removed in a future version.`)}renamedMethod(f,v,x){this.deprecationWarning(`\`${f}\`’s \`${v}\` method has been renamed to \`${x}\`. Please update your code to use \`${x}\` instead. \`${v}\` will be removed in a future version.`)}deprecationWarning(f){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${f}`,1)}};X.defaultLogLevel=1,X.LOG_NONE=0,X.LOG_ERROR=1,X.LOG_MAJOR=2,X.LOG_MINOR=3,X.LOG_MICRO=4,X.logAction=(d,f,v,x)=>{X.logActionNoStrip(d,f,v,x)};var oe=X,A=oe,Te={};R(Te,{Format:()=>ue,allSame:()=>et,allToLowerCase:()=>Un,allToUpperCase:()=>Gr,arrChooseN:()=>At,arrDeleteValue:()=>ve,arrEquals:()=>sl,arrIntersect:()=>F,arrIntersectOb:()=>W,arrPopRandomElement:()=>Le,arrWithoutValue:()=>se,cheapRandStr:()=>Je,containsValue:()=>Re,copy:()=>ce,createMissingPluginError:()=>Fi,dataSizeBytes:()=>jn,decodeBody:()=>Mt,encodeBody:()=>cn,ensureArray:()=>_e,forInOwnNonNullProperties:()=>Me,getBackoffCoefficient:()=>nl,getGlobalObject:()=>Wr,getJitterCoefficient:()=>vs,getRetryTime:()=>un,inherits:()=>Ne,inspectBody:()=>Ut,inspectError:()=>Fe,intersect:()=>ye,isEmpty:()=>te,isErrorInfoOrPartialErrorInfo:()=>Ge,isNil:()=>xe,isObject:()=>I,keysArray:()=>Ce,matchDerivedChannel:()=>fn,mixin:()=>G,parseQueryString:()=>Ct,prototypicalClone:()=>we,randomString:()=>Tt,shallowClone:()=>Ae,shallowEquals:()=>rs,throwMissingPluginError:()=>Ht,toBase64:()=>mi,toQueryString:()=>Ye,valuesArray:()=>Pe,whenPromiseSettles:()=>mt,withTimeoutAsync:()=>gi});function le(d){let f="["+d.constructor.name;return d.message&&(f+=": "+d.message),d.statusCode&&(f+="; statusCode="+d.statusCode),d.code&&(f+="; code="+d.code),d.cause&&(f+="; cause="+Fe(d.cause)),d.href&&!(d.message&&d.message.indexOf("help.ably.io")>-1)&&(f+="; see "+d.href+" "),f+="]",f}var $=class Qv extends Error{constructor(f,v,x,C){super(f),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,Qv.prototype),this.code=v,this.statusCode=x,this.cause=C}toString(){return le(this)}static fromValues(f){const{message:v,code:x,statusCode:C}=f;if(typeof v!="string"||typeof x!="number"||typeof C!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+P.Config.inspect(f));const j=Object.assign(new Qv(v,x,C),f);return j.code&&!j.href&&(j.href="https://help.ably.io/error/"+j.code),j}},be=class Jv extends Error{constructor(f,v,x,C){super(f),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,Jv.prototype),this.code=v,this.statusCode=x,this.cause=C}toString(){return le(this)}static fromValues(f){const{message:v,code:x,statusCode:C}=f;if(typeof v!="string"||!xe(x)&&typeof x!="number"||!xe(C)&&typeof C!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+P.Config.inspect(f));const j=Object.assign(new Jv(v,x,C),f);return j.code&&!j.href&&(j.href="https://help.ably.io/error/"+j.code),j}};function q(d){return Math.floor(Math.random()*d.length)}function G(d,...f){for(let v=0;v<f.length;v++){const x=f[v];if(!x)break;for(const C in x)Object.prototype.hasOwnProperty.call(x,C)&&(d[C]=x[C])}return d}function ce(d){return G({},d)}function _e(d){return xe(d)?[]:Array.isArray(d)?d:[d]}function I(d){return Object.prototype.toString.call(d)=="[object Object]"}function te(d){for(const f in d)return!1;return!0}function xe(d){return d==null}function Ae(d){const f=new Object;for(const v in d)f[v]=d[v];return f}function we(d,f){class v{}v.prototype=d;const x=new v;return f&&G(x,f),x}var Ne=function(d,f){if(P.Config.inherits){P.Config.inherits(d,f);return}d.super_=f,d.prototype=we(f.prototype,{constructor:d})};function Re(d,f){for(const v in d)if(d[v]==f)return!0;return!1}function ye(d,f){return Array.isArray(f)?F(d,f):W(d,f)}function F(d,f){const v=[];for(let x=0;x<d.length;x++){const C=d[x];f.indexOf(C)!=-1&&v.push(C)}return v}function W(d,f){const v=[];for(let x=0;x<d.length;x++){const C=d[x];C in f&&v.push(C)}return v}function ve(d,f){const v=d.indexOf(f),x=v!=-1;return x&&d.splice(v,1),x}function se(d,f){const v=d.slice();return ve(v,f),v}function Ce(d,f){const v=[];for(const x in d)f&&!Object.prototype.hasOwnProperty.call(d,x)||v.push(x);return v}function Pe(d,f){const v=[];for(const x in d)f&&!Object.prototype.hasOwnProperty.call(d,x)||v.push(d[x]);return v}function Me(d,f){for(const v in d)Object.prototype.hasOwnProperty.call(d,v)&&d[v]&&f(v)}function et(d,f){if(d.length===0)return!0;const v=d[0][f];return d.every(function(x){return x[f]===v})}var ue=(d=>(d.msgpack="msgpack",d.json="json",d))(ue||{});function Le(d){return d.splice(q(d),1)[0]}function Ye(d){const f=[];if(d)for(const v in d)f.push(encodeURIComponent(v)+"="+encodeURIComponent(d[v]));return f.length?"?"+f.join("&"):""}function Ct(d){let f;const v=/([^?&=]+)=?([^&]*)/g,x={};for(;f=v.exec(d);)x[decodeURIComponent(f[1])]=decodeURIComponent(f[2]);return x}function Ge(d){return typeof d=="object"&&d!==null&&(d instanceof $||d instanceof be)}function Fe(d){var f,v;return d instanceof Error||((f=d==null?void 0:d.constructor)==null?void 0:f.name)==="ErrorInfo"||((v=d==null?void 0:d.constructor)==null?void 0:v.name)==="PartialErrorInfo"?d.toString():P.Config.inspect(d)}function Ut(d){return P.BufferUtils.isBuffer(d)?d.toString():typeof d=="string"?d:P.Config.inspect(d)}function jn(d){if(P.BufferUtils.isBuffer(d))return P.BufferUtils.byteLength(d);if(typeof d=="string")return P.Config.stringByteSize(d);if(typeof d=="number")return 8;if(typeof d=="boolean")return 1;throw new Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof d}`)}function Je(){return String(Math.random()).substr(2)}var Tt=async d=>{const f=await P.Config.getRandomArrayBuffer(d);return P.BufferUtils.base64Encode(f)};function At(d,f){const v=Math.min(f,d.length),x=d.slice(),C=[];for(let j=0;j<v;j++)C.push(Le(x));return C}function mt(d,f){d.then(v=>{f==null||f(null,v)}).catch(v=>{f==null||f(v)})}function Mt(d,f,v){return v=="msgpack"?(f||Ht("MsgPack"),f.decode(d)):JSON.parse(String(d))}function cn(d,f,v){return v=="msgpack"?(f||Ht("MsgPack"),f.encode(d,!0)):JSON.stringify(d)}function Un(d){return d.map(function(f){return f&&f.toLowerCase()})}function Gr(d){return d.map(function(f){return f&&f.toUpperCase()})}function nl(d){return Math.min((d+2)/3,2)}function vs(){return 1-Math.random()*.2}function un(d,f){return d*nl(f)*vs()}function Wr(){return typeof Or<"u"?Or:typeof window<"u"?window:self}function rs(d,f){return Object.keys(d).every(v=>d[v]===f[v])&&Object.keys(f).every(v=>f[v]===d[v])}function fn(d){const f=/^(\[([^?]*)(?:(.*))\])?(.+)$/,v=d.match(f);if(!v||!v.length||v.length<5)throw new $("regex match failed",400,40010);if(v[2])throw new $(`cannot use a derived option with a ${v[2]} channel`,400,40010);return{qualifierParam:v[3]||"",channelName:v[4]}}function mi(d){const f=P.BufferUtils,v=f.utf8Encode(d);return f.base64Encode(v)}function sl(d,f){return d.length===f.length&&d.every(function(v,x){return v===f[x]})}function Fi(d){return new $(`${d} plugin not provided`,40019,400)}function Ht(d){throw Fi(d)}async function gi(d,f=5e3,v="Timeout expired"){const x=new $(v,5e4,500);return Promise.race([d,new Promise((C,j)=>setTimeout(()=>j(x),f))])}var Dt="2.9.0",sn="ably-js/"+Dt,Ot={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:Dt,protocolVersion:3,agent:sn,getHost:wt,getPort:Jn,getHttpScheme:il,environmentFallbackHosts:pi,getFallbackHosts:Fs,getHosts:al,checkHost:qi,objectifyOptions:Yr,normaliseOptions:Os,defaultGetHeaders:Kr,defaultPostHeaders:tt};function wt(d,f,v){return v?f=f==d.restHost&&d.realtimeHost||f||d.realtimeHost:f=f||d.restHost,f}function Jn(d,f){return f||d.tls?d.tlsPort:d.port}function il(d){return d.tls?"https://":"http://"}function pi(d){return[d+"-a-fallback.ably-realtime.com",d+"-b-fallback.ably-realtime.com",d+"-c-fallback.ably-realtime.com",d+"-d-fallback.ably-realtime.com",d+"-e-fallback.ably-realtime.com"]}function Fs(d){const f=d.fallbackHosts,v=typeof d.httpMaxRetryCount<"u"?d.httpMaxRetryCount:Ot.httpMaxRetryCount;return f?At(f,v):[]}function al(d,f){const v=[d.restHost].concat(Fs(d));return f?v.map(x=>wt(d,x,!0)):v}function qi(d){if(typeof d!="string")throw new $("host must be a string; was a "+typeof d,4e4,400);if(!d.length)throw new $("host must not be zero-length",4e4,400)}function $i(d,f,v,x){return d.realtimeHost?d.realtimeHost:d.restHost?(A.logAction(x,A.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+d.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+d.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),d.restHost):f?Ot.REALTIME_HOST:v+"-"+Ot.REALTIME_HOST}function qa(d){const f={};for(const v in Ot.TIMEOUTS)f[v]=d[v]||Ot.TIMEOUTS[v];return f}function yi(d){let f=Ot.agent;if(d.agents)for(var v in d.agents)f+=" "+v+"/"+d.agents[v];return f}function Yr(d,f,v,x,C){if(d===void 0){const L=f?`${v} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${v} must be initialized with a client options object`;throw A.logAction(x,A.LOG_ERROR,`${v}()`,L),new Error(L)}let j;if(typeof d=="string")if(d.indexOf(":")==-1){if(!f){const L=`${v} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw A.logAction(x,A.LOG_ERROR,`${v}()`,L),new Error(L)}j={token:d}}else{if(!f){const L=`${v} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw A.logAction(x,A.LOG_ERROR,`${v}()`,L),new Error(L)}j={key:d}}else j=d;return C&&(j=O(T({},j),{plugins:T(T({},C),j.plugins)})),j}function Os(d,f,v){const x=v??A.defaultLogger;typeof d.recover=="function"&&d.closeOnUnload===!0&&(A.logAction(x,A.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),d.recover=void 0),"closeOnUnload"in d||(d.closeOnUnload=!d.recover),"queueMessages"in d||(d.queueMessages=!0);const C=d.environment&&String(d.environment).toLowerCase()||Ot.ENVIRONMENT,j=!C||C==="production";!d.fallbackHosts&&!d.restHost&&!d.realtimeHost&&!d.port&&!d.tlsPort&&(d.fallbackHosts=j?Ot.FALLBACK_HOSTS:pi(C));const L=d.restHost||(j?Ot.REST_HOST:C+"-"+Ot.REST_HOST),V=$i(d,j,C,x);(d.fallbackHosts||[]).concat(L,V).forEach(qi),d.port=d.port||Ot.PORT,d.tlsPort=d.tlsPort||Ot.TLS_PORT,"tls"in d||(d.tls=!0);const ne=qa(d);f?"useBinaryProtocol"in d?d.useBinaryProtocol=P.Config.supportsBinary&&d.useBinaryProtocol:d.useBinaryProtocol=P.Config.preferBinary:d.useBinaryProtocol=!1;const Q={};d.clientId&&(Q["X-Ably-ClientId"]=P.BufferUtils.base64Encode(P.BufferUtils.utf8Encode(d.clientId))),"idempotentRestPublishing"in d||(d.idempotentRestPublishing=!0);let ge=null,me=d.connectivityCheckUrl;if(d.connectivityCheckUrl){let[fe,De]=d.connectivityCheckUrl.split("?");ge=De?Ct(De):{},fe.indexOf("://")===-1&&(fe="https://"+fe),me=fe}let je=d.wsConnectivityCheckUrl;return je&&je.indexOf("://")===-1&&(je="wss://"+je),O(T({},d),{realtimeHost:V,restHost:L,maxMessageSize:d.maxMessageSize||Ot.maxMessageSize,timeouts:ne,connectivityCheckParams:ge,connectivityCheckUrl:me,wsConnectivityCheckUrl:je,headers:Q})}function Pt(d,f,v){const x=v||{};if(x.cipher){d||Ht("Crypto");const C=d.getCipher(x.cipher,f);x.cipher=C.cipherParams,x.channelCipher=C.cipher}else"cipher"in x&&(x.cipher=void 0,x.channelCipher=null);return x}var hn={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},bs={format:"json",protocolVersion:Ot.protocolVersion};function Kr(d,{format:f=bs.format,protocolVersion:v=bs.protocolVersion}={}){return{accept:hn[f],"X-Ably-Version":v.toString(),"Ably-Agent":yi(d)}}function tt(d,{format:f=bs.format,protocolVersion:v=bs.protocolVersion}={}){let x;return{accept:x=hn[f],"content-type":x,"X-Ably-Version":v.toString(),"Ably-Agent":yi(d)}}var Ee=Ot;function Lt(d){return Object.assign(Ot,d)}var mn=class dA{constructor(f,v){this.logger=f,this.members=v||[]}call(f,v){for(const x of this.members)if(x)try{x(f,v)}catch(C){A.logAction(this.logger,A.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+C+"; stack = "+C.stack)}}push(...f){this.members.push(...f)}createPromise(){return new Promise((f,v)=>{this.push((x,C)=>{x?v(x):f(C)})})}resolveAll(f){this.call(null,f)}rejectAll(f){this.call(f)}static create(f,v){const x=new dA(f,v);return Object.assign((C,j)=>x.call(C,j),{push:C=>x.push(C),createPromise:()=>x.createPromise(),resolveAll:C=>x.resolveAll(C),rejectAll:C=>x.rejectAll(C)})}},gn=mn,os=(d=>(d.Get="get",d.Delete="delete",d.Post="post",d.Put="put",d.Patch="patch",d))(os||{}),yt=os,vi=(d=>(d[d.Success=200]="Success",d[d.NoContent=204]="NoContent",d[d.BadRequest=400]="BadRequest",d[d.Unauthorized=401]="Unauthorized",d[d.Forbidden=403]="Forbidden",d[d.RequestTimeout=408]="RequestTimeout",d[d.InternalServerError=500]="InternalServerError",d))(vi||{});function $a(d){return d>=200&&d<400}var Ft=vi,rl=Math.pow(2,17);function xd(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function Gi(d){return!!d.connection}function Wi(d){return Ge(d)?(d.code||(d.statusCode===403?d.code=40300:(d.code=40170,d.statusCode=401)),d):new $(Fe(d),d.code||40170,d.statusCode||401)}var qs=(d,f)=>{const v=P.BufferUtils,x=v.utf8Encode(d),C=v.utf8Encode(f),j=v.hmacSha256(x,C);return v.base64Encode(j)};function wd(d){if(!d)return"";typeof d=="string"&&(d=JSON.parse(d));const f=Object.create(null),v=Ce(d,!0);if(!v)return"";v.sort();for(let x=0;x<v.length;x++)f[v[x]]=d[v[x]].sort();return JSON.stringify(f)}function Ic(d,f){if(d.authCallback)A.logAction(f,A.LOG_MINOR,"Auth()","using token auth with authCallback");else if(d.authUrl)A.logAction(f,A.LOG_MINOR,"Auth()","using token auth with authUrl");else if(d.key)A.logAction(f,A.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(d.tokenDetails)A.logAction(f,A.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const v="authOptions must include valid authentication parameters";throw A.logAction(f,A.LOG_ERROR,"Auth()",v),new Error(v)}}function Sd(d){return"useTokenAuth"in d&&!d.useTokenAuth}function Cd(d){return d.useTokenAuth||!Sd(d)&&(d.authCallback||d.authUrl||d.token||d.tokenDetails)}function ol(d){return!d.key&&!d.authCallback&&!d.authUrl}var ll=0;function $s(){return ll++}var ls=class{constructor(d,f){if(this.authOptions={},this.client=d,this.tokenParams=f.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Cd(f))ol(f)&&A.logAction(this.logger,A.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(f.defaultTokenParams,f),Ic(this.authOptions,this.logger);else{if(!f.key){const v="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw A.logAction(this.logger,A.LOG_ERROR,"Auth()",v),new $(v,40160,401)}A.logAction(this.logger,A.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(f)}}get logger(){return this.client.logger}async authorize(d,f){if(f&&f.key&&this.authOptions.key!==f.key)throw new $("Unable to update auth options with incompatible key",40102,401);try{let v=await this._forceNewToken(d??null,f??null);return Gi(this.client)?new Promise((x,C)=>{this.client.connection.connectionManager.onAuthUpdated(v,(j,L)=>j?C(j):x(L))}):v}catch(v){throw this.client.connection&&v.statusCode===Ft.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(v),v}}async _forceNewToken(d,f){this.tokenDetails=null,this._saveTokenOptions(d,f),Ic(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(d,f){const v=f||this.authOptions,x=d||ce(this.tokenParams);let C,j=this.client;if(v.authCallback)A.logAction(this.logger,A.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),C=v.authCallback;else if(v.authUrl)A.logAction(this.logger,A.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),C=(V,ne)=>{const Q=G({accept:"application/json, text/plain"},v.authHeaders),ge=v.authMethod&&v.authMethod.toLowerCase()==="post";let me;const je=v.authUrl.indexOf("?");je>-1&&(me=Ct(v.authUrl.slice(je)),v.authUrl=v.authUrl.slice(0,je),ge||(v.authParams=G(me,v.authParams)));const fe=G({},v.authParams||{},V),De=ke=>{var Ve,rt;let ht=(Ve=ke.body)!=null?Ve:null,pt=null;if(ke.error)A.logAction(this.logger,A.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Fe(ke.error));else{const bn=(rt=ke.headers["content-type"])!=null?rt:null;Array.isArray(bn)?pt=bn.join(", "):pt=bn,A.logAction(this.logger,A.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+pt+"; body: "+Ut(ht))}if(ke.error){ne(ke.error,null);return}if(ke.unpacked){ne(null,ht);return}if(P.BufferUtils.isBuffer(ht)&&(ht=ht.toString()),!pt){ne(new $("authUrl response is missing a content-type header",40170,401),null);return}const We=pt.indexOf("application/json")>-1,kn=pt.indexOf("text/plain")>-1||pt.indexOf("application/jwt")>-1;if(!We&&!kn){ne(new $("authUrl responded with unacceptable content-type "+pt+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(We){if(ht.length>rl){ne(new $("authUrl response exceeded max permitted length",40170,401),null);return}try{ht=JSON.parse(ht)}catch(bn){ne(new $("Unexpected error processing authURL response; err = "+bn.message,40170,401),null);return}}ne(null,ht,pt)};if(A.logAction(this.logger,A.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+v.authUrl+"; Params: "+JSON.stringify(fe)+"; method: "+(ge?"POST":"GET")),ge){const ke=Q||{};ke["content-type"]="application/x-www-form-urlencoded";const Ve=Ye(fe).slice(1);mt(this.client.http.doUri(yt.Post,v.authUrl,ke,Ve,me),(rt,ht)=>De(rt||ht))}else mt(this.client.http.doUri(yt.Get,v.authUrl,Q||{},null,fe),(ke,Ve)=>De(ke||Ve))};else if(v.key)A.logAction(this.logger,A.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),C=(V,ne)=>{mt(this.createTokenRequest(V,v),(Q,ge)=>ne(Q,ge??null))};else{const V="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw A.logAction(this.logger,A.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new $(V,40171,403)}"capability"in x&&(x.capability=wd(x.capability));const L=(V,ne)=>{const Q=V.keyName,ge="/keys/"+Q+"/requestToken",me=function(fe){return j.baseUri(fe)+ge},je=Ee.defaultPostHeaders(this.client.options);v.requestHeaders&&G(je,v.requestHeaders),A.logAction(this.logger,A.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+ge+"; Token params: "+JSON.stringify(V)),mt(this.client.http.do(yt.Post,me,je,JSON.stringify(V),null),(fe,De)=>fe?ne(fe):ne(De.error,De.body,De.unpacked))};return new Promise((V,ne)=>{let Q=!1,ge=this.client.options.timeouts.realtimeRequestTimeout,me=setTimeout(()=>{Q=!0;const je="Token request callback timed out after "+ge/1e3+" seconds";A.logAction(this.logger,A.LOG_ERROR,"Auth.requestToken()",je),ne(new $(je,40170,401))},ge);C(x,(je,fe,De)=>{if(Q)return;if(clearTimeout(me),je){A.logAction(this.logger,A.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Fe(je)),ne(Wi(je));return}if(typeof fe=="string"){fe.length===0?ne(new $("Token string is empty",40170,401)):fe.length>rl?ne(new $("Token string exceeded max permitted length (was "+fe.length+" bytes)",40170,401)):fe==="undefined"||fe==="null"?ne(new $("Token string was literal null/undefined",40170,401)):fe[0]==="{"&&!(De&&De.indexOf("application/jwt")>-1)?ne(new $("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):V({token:fe});return}if(typeof fe!="object"||fe===null){const Ve="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof fe;A.logAction(this.logger,A.LOG_ERROR,"Auth.requestToken()",Ve),ne(new $(Ve,40170,401));return}const ke=JSON.stringify(fe).length;if(ke>rl&&!v.suppressMaxLengthCheck){ne(new $("Token request/details object exceeded max permitted stringified size (was "+ke+" bytes)",40170,401));return}if("issued"in fe){V(fe);return}if(!("keyName"in fe)){const Ve="Expected token request callback to call back with a token string, token request object, or token details object";A.logAction(this.logger,A.LOG_ERROR,"Auth.requestToken()",Ve),ne(new $(Ve,40170,401));return}L(fe,(Ve,rt,ht)=>{if(Ve){A.logAction(this.logger,A.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Fe(Ve)),ne(Wi(Ve));return}ht||(rt=JSON.parse(rt)),A.logAction(this.logger,A.LOG_MINOR,"Auth.getToken()","token received"),V(rt)})})})}async createTokenRequest(d,f){f=f||this.authOptions,d=d||ce(this.tokenParams);const v=f.key;if(!v)throw new $("No key specified",40101,403);const x=v.split(":"),C=x[0],j=x[1];if(!j)throw new $("Invalid key specified",40101,403);if(d.clientId==="")throw new $("clientId can’t be an empty string",40012,400);"capability"in d&&(d.capability=wd(d.capability));const L=G({keyName:C},d),V=d.clientId||"",ne=d.ttl||"",Q=d.capability||"";L.timestamp||(L.timestamp=await this._getTimestamp(f&&f.queryTime));const ge=L.nonce||(L.nonce=xd()),me=L.timestamp,je=L.keyName+`
`+ne+`
`+Q+`
`+V+`
`+me+`
`+ge+`
`;return L.mac=L.mac||qs(je,j),A.logAction(this.logger,A.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),L}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let d=await this._ensureValidAuthCredentials(!1);if(!d)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:d.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const d=await this._ensureValidAuthCredentials(!1);if(!d)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+mi(d.token)}}}_saveBasicOptions(d){this.method="basic",this.key=d.key,this.basicKey=mi(d.key),this.authOptions=d||{},"clientId"in d&&this._userSetClientId(d.clientId)}_saveTokenOptions(d,f){this.method="token",d&&(this.tokenParams=d),f&&(f.token&&(f.tokenDetails=typeof f.token=="string"?{token:f.token}:f.token),f.tokenDetails&&(this.tokenDetails=f.tokenDetails),"clientId"in f&&this._userSetClientId(f.clientId),this.authOptions=f)}async _ensureValidAuthCredentials(d){const f=this.tokenDetails;if(f){if(this._tokenClientIdMismatch(f.clientId))throw new $("Mismatch between clientId in token ("+f.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!f.expires||f.expires>=this.client.getTimestampUsingOffset())return A.logAction(this.logger,A.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+f.expires),f;A.logAction(this.logger,A.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const v=(this.waitingForTokenRequest||(this.waitingForTokenRequest=gn.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!d)return v;const x=this.currentTokenRequestId=$s();let C,j=null;try{C=await this.requestToken(this.tokenParams,this.authOptions)}catch(V){j=V}if(this.currentTokenRequestId>x)return A.logAction(this.logger,A.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),v;this.currentTokenRequestId=null;const L=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,j?(L==null||L.rejectAll(j),v):(L==null||L.resolveAll(this.tokenDetails=C),v)}_userSetClientId(d){if(typeof d=="string"||d===null){if(d==="*")throw new $('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const f=this._uncheckedSetClientId(d);if(f)throw f}}else throw new $("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(d){if(this._tokenClientIdMismatch(d)){const f="Unexpected clientId mismatch: client has "+this.clientId+", requested "+d,v=new $(f,40102,401);return A.logAction(this.logger,A.LOG_ERROR,"Auth._uncheckedSetClientId()",f),v}else return this.clientId=this.tokenParams.clientId=d,null}_tokenClientIdMismatch(d){return!!(this.clientId&&this.clientId!=="*"&&d&&d!=="*"&&this.clientId!==d)}static isTokenErr(d){return d.code&&d.code>=40140&&d.code<40150}revokeTokens(d,f){return this.client.rest.revokeTokens(d,f)}async _getTimestamp(d){return this.client.getTimestamp(d||!!this.authOptions.queryTime)}},js=ls;function zc(d){const f=[];if(d)for(const v in d)f.push(v+"="+d[v]);return f.join("&")}function Gs(d,f){return d+(f?"?":"")+zc(f)}function Td(d,f,v,x,C){d.error?A.logActionNoStrip(C,A.LOG_MICRO,"Http."+f+"()","Received Error; "+Gs(v,x)+"; Error: "+Fe(d.error)):A.logActionNoStrip(C,A.LOG_MICRO,"Http."+f+"()","Received; "+Gs(v,x)+"; Headers: "+zc(d.headers)+"; StatusCode: "+d.statusCode+"; Body"+(P.BufferUtils.isBuffer(d.body)?" (Base64): "+P.BufferUtils.base64Encode(d.body):": "+d.body))}function cl(d,f,v,x,C){C.shouldLog(A.LOG_MICRO)&&A.logActionNoStrip(C,A.LOG_MICRO,"Http."+d+"()","Sending; "+Gs(f,x)+"; Body"+(P.BufferUtils.isBuffer(v)?" (Base64): "+P.BufferUtils.base64Encode(v):": "+v))}var Vc=class{constructor(d){this.client=d,this.platformHttp=new P.Http(d),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var d,f;return(f=(d=this.client)==null?void 0:d.logger)!=null?f:A.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(d){const f=d.connection,v=f&&f.connectionManager.host;return v?[v].concat(Ee.getFallbackHosts(d.options)):Ee.getHosts(d.options)}async do(d,f,v,x,C){try{const j=this.client;if(!j)return{error:new $("http.do called without client",5e4,500)};const L=typeof f=="function"?f:function(me){return j.baseUri(me)+f},V=j._currentFallback;if(V)if(V.validUntil>Date.now()){const me=await this.doUri(d,L(V.host),v,x,C);return me.error&&this.platformHttp.shouldFallback(me.error)?(j._currentFallback=null,this.do(d,f,v,x,C)):me}else j._currentFallback=null;const ne=this._getHosts(j);if(ne.length===1)return this.doUri(d,L(ne[0]),v,x,C);let Q=null;const ge=async(me,je)=>{const fe=me.shift();Q=Q??new Date;const De=await this.doUri(d,L(fe),v,x,C);return De.error&&this.platformHttp.shouldFallback(De.error)&&me.length?Date.now()-Q.getTime()>j.options.timeouts.httpMaxRetryDuration?{error:new $(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${j.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:ge(me,!0):(je&&(j._currentFallback={host:fe,validUntil:Date.now()+j.options.timeouts.fallbackRetryTimeout}),De)};return ge(ne)}catch(j){return{error:new $(`Unexpected error in Http.do: ${Fe(j)}`,500,5e4)}}}async doUri(d,f,v,x,C){try{cl(d,f,x,C,this.logger);const j=await this.platformHttp.doUri(d,f,v,x,C);return this.logger.shouldLog(A.LOG_MICRO)&&Td(j,d,f,C,this.logger),j}catch(j){return{error:new $(`Unexpected error in Http.doUri: ${Fe(j)}`,500,5e4)}}}};function cs(d,f,v,x){try{v.apply(f,x)}catch(C){A.logAction(d,A.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+C+"; stack = "+(C&&C.stack))}}function Xr(d,f,v){let x,C,j;for(let L=0;L<d.length;L++)if(x=d[L],v&&(x=x[v]),Array.isArray(x)){for(;(C=x.indexOf(f))!==-1;)x.splice(C,1);v&&x.length===0&&delete d[L][v]}else if(I(x))for(j in x)Object.prototype.hasOwnProperty.call(x,j)&&Array.isArray(x[j])&&Xr([x],f,j)}var Ad=class{constructor(d){this.logger=d,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...d){if(d.length===1){const f=d[0];if(typeof f=="function")this.any.push(f);else throw new Error("EventListener.on(): Invalid arguments: "+P.Config.inspect(d))}if(d.length===2){const[f,v]=d;if(typeof v!="function")throw new Error("EventListener.on(): Invalid arguments: "+P.Config.inspect(d));if(xe(f))this.any.push(v);else if(Array.isArray(f))f.forEach(x=>{this.on(x,v)});else{if(typeof f!="string")throw new Error("EventListener.on(): Invalid arguments: "+P.Config.inspect(d));(this.events[f]||(this.events[f]=[])).push(v)}}}off(...d){if(d.length==0||xe(d[0])&&xe(d[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[f,v]=d;let x=null,C=null;if(d.length===1||!v)typeof f=="function"?x=f:C=f;else{if(typeof v!="function")throw new Error("EventEmitter.off(): invalid arguments:"+P.Config.inspect(d));[C,x]=[f,v]}if(x&&xe(C)){Xr([this.any,this.events,this.anyOnce,this.eventsOnce],x);return}if(Array.isArray(C)){C.forEach(j=>{this.off(j,x)});return}if(typeof C!="string")throw new Error("EventEmitter.off(): invalid arguments:"+P.Config.inspect(d));x?Xr([this.events,this.eventsOnce],x,C):(delete this.events[C],delete this.eventsOnce[C])}listeners(d){if(d){const f=this.events[d]||[];return this.eventsOnce[d]&&Array.prototype.push.apply(f,this.eventsOnce[d]),f.length?f:null}return this.any.length?this.any:null}emit(d,...f){const v={event:d},x=[];this.anyOnce.length&&(Array.prototype.push.apply(x,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(x,this.any);const C=this.eventsOnce[d];C&&(Array.prototype.push.apply(x,C),delete this.eventsOnce[d]);const j=this.events[d];j&&Array.prototype.push.apply(x,j),x.forEach(L=>{cs(this.logger,v,L,f)})}once(...d){const f=d.length;if(f===0||f===1&&typeof d[0]!="function"){const C=d[0];return new Promise(j=>{this.once(C,j)})}const[v,x]=d;if(d.length===1&&typeof v=="function")this.anyOnce.push(v);else if(xe(v)){if(typeof x!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+P.Config.inspect(d));this.anyOnce.push(x)}else if(Array.isArray(v)){const C=this,j=function(){const L=Array.prototype.slice.call(arguments);if(v.forEach(function(V){C.off(V,j)}),typeof x!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+P.Config.inspect(d));x.apply(this,L)};v.forEach(function(L){C.on(L,j)})}else{if(typeof v!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+P.Config.inspect(d));const C=this.eventsOnce[v]||(this.eventsOnce[v]=[]);if(x){if(typeof x!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+P.Config.inspect(d));C.push(x)}}}async whenState(d,f){if(typeof d!="string"||typeof f!="string")throw new Error("whenState requires a valid state String argument");return d===f?null:this.once(d)}},Yt=Ad,Ie={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},Hc=[];Object.keys(Ie).forEach(function(d){Hc[Ie[d]]=d});var Mn={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},Ga=Object.keys(Mn);Mn.MODE_ALL=Mn.PRESENCE|Mn.PUBLISH|Mn.SUBSCRIBE|Mn.PRESENCE_SUBSCRIBE|Mn.ANNOTATION_PUBLISH|Mn.ANNOTATION_SUBSCRIBE|Mn.OBJECT_SUBSCRIBE|Mn.OBJECT_PUBLISH;var Od=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function jd(d){return!d||!d.channelOptions?{channelOptions:d,plugins:{},baseEncodedPreviousPayload:void 0}:d}function Fc(d,f,v){if(v&&v.cipher){d||Ht("Crypto");const x=d.getCipher(v.cipher,f);return{cipher:x.cipherParams,channelCipher:x.cipher}}return v??{}}async function qc(d,f){const{data:v,encoding:x}=await Md(d.data,d.encoding,f);return d.data=v,d.encoding=x,d}async function Md(d,f,v){let x=v.channelCipher,C=d,j=f?f+"/":"";P.BufferUtils.isBuffer(C)||(C=P.BufferUtils.utf8Encode(String(C)),j=j+"utf-8/");const L=await x.encrypt(C);return j=j+"cipher+"+x.algorithm,{data:L,encoding:j}}async function $c(d,f){const v=typeof d.data=="string"||P.BufferUtils.isBuffer(d.data)||d.data===null||d.data===void 0,{data:x,encoding:C}=Qr(d.data,d.encoding,v);return d.data=x,d.encoding=C,f!=null&&f.cipher?qc(d,f):d}function Qr(d,f,v){if(v)return{data:d,encoding:f};if(I(d)||Array.isArray(d))return{data:JSON.stringify(d),encoding:f?f+"/json":"json"};throw new $("Data type is unsupported",40013,400)}async function Jr(d,f){const{data:v,encoding:x,error:C}=await ul(d.data,d.encoding,f);if(d.data=v,d.encoding=x,C)throw C}async function ul(d,f,v){const x=jd(v);let C=d,j=d,L=f,V;if(f){const ne=f.split("/");let Q,ge=ne.length,me="";try{for(;(Q=ge)>0;){const je=ne[--ge].match(/([-\w]+)(\+([\w-]+))?/);if(!je)break;switch(me=je[1],me){case"base64":j=P.BufferUtils.base64Decode(String(j)),Q==ne.length&&(C=j);continue;case"utf-8":j=P.BufferUtils.utf8Decode(j);continue;case"json":j=JSON.parse(j);continue;case"cipher":if(x.channelOptions!=null&&x.channelOptions.cipher&&x.channelOptions.channelCipher){const fe=je[3],De=x.channelOptions.channelCipher;if(fe!=De.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");j=await De.decrypt(j);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!x.plugins||!x.plugins.vcdiff)throw new $("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new $("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let fe=x.baseEncodedPreviousPayload;typeof fe=="string"&&(fe=P.BufferUtils.utf8Encode(fe));const De=P.BufferUtils.toBuffer(fe);j=P.BufferUtils.toBuffer(j),j=P.BufferUtils.arrayBufferViewToBuffer(x.plugins.vcdiff.decode(j,De)),C=j}catch(fe){throw new $("Vcdiff delta decode failed with "+fe,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(je){const fe=je;V=new $(`Error processing the ${me} encoding, decoder returned ‘${fe.message}’`,fe.code||40013,400)}finally{L=Q<=0?null:ne.slice(0,Q).join("/")}}return V?{error:V,data:j,encoding:L}:(x.baseEncodedPreviousPayload=C,{data:j,encoding:L})}function bi(...d){const f=d.length>0?"json":"msgpack",{data:v,encoding:x}=Yi(this.data,this.encoding,f);return Object.assign({},this,{encoding:x,data:v})}function Yi(d,f,v){return!d||!P.BufferUtils.isBuffer(d)?{data:d,encoding:f}:v==="msgpack"?{data:P.BufferUtils.toBuffer(d),encoding:f}:{data:P.BufferUtils.base64Encode(d),encoding:f?f+"/base64":"base64"}}var Zr={encryptData:Md,encodeData:Qr,encodeDataForWire:Yi,decodeData:ul};function Wa(d){const{id:f,connectionId:v,timestamp:x}=d;let C;switch(d.action){case Ie.MESSAGE:{C=d.messages;break}case Ie.PRESENCE:case Ie.SYNC:C=d.presence;break;case Ie.ANNOTATION:C=d.annotations;break;case Ie.OBJECT:case Ie.OBJECT_SYNC:C=d.state;break;default:throw new $("Unexpected action "+d.action,4e4,400)}for(let j=0;j<C.length;j++){const L=C[j];L.connectionId||(L.connectionId=v),L.timestamp||(L.timestamp=x),f&&!L.id&&(L.id=f+":"+j)}}function Ki(d,f){let v="["+f;for(const x in d)x==="data"?typeof d.data=="string"?v+="; data="+d.data:P.BufferUtils.isBuffer(d.data)?v+="; data (buffer)="+P.BufferUtils.base64Encode(d.data):typeof d.data<"u"&&(v+="; data (json)="+JSON.stringify(d.data)):x&&(x==="extras"||x==="operation")?v+="; "+x+"="+JSON.stringify(d[x]):d[x]!==void 0&&(v+="; "+x+"="+d[x]);return v+="]",v}var Ms=class{},hl=class{constructor(d){this.Platform=P,this.ErrorInfo=$,this.Logger=A,this.Defaults=Ee,this.Utils=Te,this.EventEmitter=Yt,this.MessageEncoding=Zr;var f,v,x,C,j,L,V,ne,Q,ge;this._additionalHTTPRequestImplementations=(f=d.plugins)!=null?f:null,this.logger=new A,this.logger.setLog(d.logLevel,d.logHandler),A.logAction(this.logger,A.LOG_MICRO,"BaseClient()","initialized with clientOptions "+P.Config.inspect(d)),this._MsgPack=(x=(v=d.plugins)==null?void 0:v.MsgPack)!=null?x:null;const me=this.options=Ee.normaliseOptions(d,this._MsgPack,this.logger);if(me.key){const je=me.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!je){const fe="invalid key parameter";throw A.logAction(this.logger,A.LOG_ERROR,"BaseClient()",fe),new $(fe,40400,404)}me.keyName=je[1],me.keySecret=je[2]}if("clientId"in me)if(typeof me.clientId=="string"||me.clientId===null){if(me.clientId==="*")throw new $('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new $("clientId must be either a string or null",40012,400);A.logAction(this.logger,A.LOG_MINOR,"BaseClient()","started; version = "+Ee.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new Vc(this),this.auth=new js(this,me),this._rest=(C=d.plugins)!=null&&C.Rest?new d.plugins.Rest(this):null,this._Crypto=(L=(j=d.plugins)==null?void 0:j.Crypto)!=null?L:null,this.__FilteredSubscriptions=(ne=(V=d.plugins)==null?void 0:V.MessageInteractions)!=null?ne:null,this._Annotations=(ge=(Q=d.plugins)==null?void 0:Q.Annotations)!=null?ge:null}get rest(){return this._rest||Ht("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||Ht("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var d;return(!((d=this.options.plugins)!=null&&d.Push)||!this.push.LocalDevice)&&Ht("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(d){return Ee.getHttpScheme(this.options)+d+":"+Ee.getPort(this.options,!1)}async stats(d){return this.rest.stats(d)}async time(d){return this.rest.time(d)}async request(d,f,v,x,C,j){return this.rest.request(d,f,v,x,C,j)}batchPublish(d){return this.rest.batchPublish(d)}batchPresence(d){return this.rest.batchPresence(d)}setLog(d){this.logger.setLog(d.level,d.handler)}async getTimestamp(d){return!this.isTimeOffsetSet()&&d?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return this.serverTimeOffset!==null}};hl.Platform=P;var Ya=hl,_i=class cc{toJSON(){var f,v,x;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(f=this.push)==null?void 0:f.recipient,state:(v=this.push)==null?void 0:v.state,error:(x=this.push)==null?void 0:x.error}}}toString(){var f,v,x,C;let j="[DeviceDetails";return this.id&&(j+="; id="+this.id),this.platform&&(j+="; platform="+this.platform),this.formFactor&&(j+="; formFactor="+this.formFactor),this.clientId&&(j+="; clientId="+this.clientId),this.metadata&&(j+="; metadata="+this.metadata),this.deviceIdentityToken&&(j+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(f=this.push)!=null&&f.recipient&&(j+="; push.recipient="+JSON.stringify(this.push.recipient)),(v=this.push)!=null&&v.state&&(j+="; push.state="+this.push.state),(x=this.push)!=null&&x.error&&(j+="; push.error="+JSON.stringify(this.push.error)),(C=this.push)!=null&&C.metadata&&(j+="; push.metadata="+this.push.metadata),j+="]",j}static toRequestBody(f,v,x){return cn(f,v,x)}static fromResponseBody(f,v,x){return x&&(f=Mt(f,v,x)),Array.isArray(f)?cc.fromValuesArray(f):cc.fromValues(f)}static fromValues(f){return f.error=f.error&&$.fromValues(f.error),Object.assign(new cc,f)}static fromLocalDevice(f){return Object.assign(new cc,f)}static fromValuesArray(f){const v=f.length,x=new Array(v);for(let C=0;C<v;C++)x[C]=cc.fromValues(f[C]);return x}},xi=_i;async function eo(d,f,v,x){if(d.http.supportsAuthHeaders){const C=await d.auth.getAuthHeaders();return x(G(C,f),v)}else{const C=await d.auth.getAuthParams();return x(f,G(C,v))}}function Ed(d,f,v){if(d.err&&!d.body)return{err:d.err};if(d.statusCode===Ft.NoContent)return O(T({},d),{body:[],unpacked:!0});let x=d.body;if(!d.unpacked)try{x=Mt(x,f,v)}catch(V){return Ge(V)?{err:V}:{err:new be(Fe(V),null)}}if(!x)return{err:new be("unenvelope(): Response body is missing",null)};const{statusCode:C,response:j,headers:L}=x;if(C===void 0)return O(T({},d),{body:x,unpacked:!0});if(C<200||C>=300){let V=j&&j.error||d.err;return V||(V=new Error("Error in unenveloping "+x),V.statusCode=C),{err:V,body:j,headers:L,unpacked:!0,statusCode:C}}return{err:d.err,body:j,headers:L,unpacked:!0,statusCode:C}}function dl(d,f,v,x,C){d.err?A.logAction(C,A.LOG_MICRO,"Resource."+f+"()","Received Error; "+Gs(v,x)+"; Error: "+Fe(d.err)):A.logAction(C,A.LOG_MICRO,"Resource."+f+"()","Received; "+Gs(v,x)+"; Headers: "+zc(d.headers)+"; StatusCode: "+d.statusCode+"; Body: "+(P.BufferUtils.isBuffer(d.body)?" (Base64): "+P.BufferUtils.base64Encode(d.body):": "+P.Config.inspect(d.body)))}var fl=class uc{static async get(f,v,x,C,j,L){return uc.do(yt.Get,f,v,null,x,C,j,L??!1)}static async delete(f,v,x,C,j,L){return uc.do(yt.Delete,f,v,null,x,C,j,L)}static async post(f,v,x,C,j,L,V){return uc.do(yt.Post,f,v,x,C,j,L,V)}static async patch(f,v,x,C,j,L,V){return uc.do(yt.Patch,f,v,x,C,j,L,V)}static async put(f,v,x,C,j,L,V){return uc.do(yt.Put,f,v,x,C,j,L,V)}static async do(f,v,x,C,j,L,V,ne){V&&((L=L||{}).envelope=V);const Q=v.logger;async function ge(je,fe){var De;if(Q.shouldLog(A.LOG_MICRO)){let Ve=C;if(((De=je["content-type"])==null?void 0:De.indexOf("msgpack"))>0)try{v._MsgPack||Ht("MsgPack"),Ve=v._MsgPack.decode(C)}catch(rt){A.logAction(Q,A.LOG_MICRO,"Resource."+f+"()","Sending MsgPack Decoding Error: "+Fe(rt))}A.logAction(Q,A.LOG_MICRO,"Resource."+f+"()","Sending; "+Gs(x,fe)+"; Body: "+Ve)}const ke=await v.http.do(f,x,je,C,fe);return ke.error&&js.isTokenErr(ke.error)?(await v.auth.authorize(null,null),eo(v,je,fe,ge)):{err:ke.error,body:ke.body,headers:ke.headers,unpacked:ke.unpacked,statusCode:ke.statusCode}}let me=await eo(v,j,L,ge);if(V&&(me=Ed(me,v._MsgPack,V)),Q.shouldLog(A.LOG_MICRO)&&dl(me,f,x,L,Q),ne){if(me.err)throw me.err;{const je=T({},me);return delete je.err,je}}return me}},qt=fl;function In(d){const f=d.match(/^\.\/(\w+)\?(.*)$/);return f&&f[2]&&Ct(f[2])}function Xi(d){typeof d=="string"&&(d=d.split(","));const f={};for(let v=0;v<d.length;v++){const x=d[v].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(x){const C=In(x[1]);C&&(f[x[2]]=C)}}return f}function ml(d,f,v){return!(v&&(f||typeof d.code=="number"))}var to=class{constructor(d,f,v,x,C,j){this.client=d,this.path=f,this.headers=v,this.envelope=x??null,this.bodyHandler=C,this.useHttpPaginatedResponse=j||!1}get logger(){return this.client.logger}async get(d){const f=await qt.get(this.client,this.path,this.headers,d,this.envelope,!1);return this.handlePage(f)}async delete(d){const f=await qt.delete(this.client,this.path,this.headers,d,this.envelope,!1);return this.handlePage(f)}async post(d,f){const v=await qt.post(this.client,this.path,f,this.headers,d,this.envelope,!1);return this.handlePage(v)}async put(d,f){const v=await qt.put(this.client,this.path,f,this.headers,d,this.envelope,!1);return this.handlePage(v)}async patch(d,f){const v=await qt.patch(this.client,this.path,f,this.headers,d,this.envelope,!1);return this.handlePage(v)}async handlePage(d){if(d.err&&ml(d.err,d.body,this.useHttpPaginatedResponse))throw A.logAction(this.logger,A.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Fe(d.err)),d.err;let f,v,x;try{f=d.statusCode==Ft.NoContent?[]:await this.bodyHandler(d.body,d.headers||{},d.unpacked)}catch(C){throw d.err||C}return d.headers&&(v=d.headers.Link||d.headers.link)&&(x=Xi(v)),this.useHttpPaginatedResponse?new Gc(this,f,d.headers||{},d.statusCode,x,d.err):new Rd(this,f,x)}},Rd=class{constructor(d,f,v){this.resource=d,this.items=f,this._relParams=v}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new $("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new $("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return this._relParams!=null&&"first"in this._relParams}hasCurrent(){return this._relParams!=null&&"current"in this._relParams}hasNext(){return this._relParams!=null&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(d){const f=this.resource,v=await qt.get(f.client,f.path,f.headers,d,f.envelope,!1);return f.handlePage(v)}},Gc=class extends Rd{constructor(d,f,v,x,C,j){super(d,f,C),this.statusCode=x,this.success=x<300&&x>=200,this.headers=v,this.errorCode=j&&j.code,this.errorMessage=j&&j.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},us=to,Ka=class jh{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let f="[PushChannelSubscription";return this.channel&&(f+="; channel="+this.channel),this.deviceId&&(f+="; deviceId="+this.deviceId),this.clientId&&(f+="; clientId="+this.clientId),f+="]",f}static fromResponseBody(f,v,x){return x&&(f=Mt(f,v,x)),Array.isArray(f)?jh.fromValuesArray(f):jh.fromValues(f)}static fromValues(f){return Object.assign(new jh,f)}static fromValuesArray(f){const v=f.length,x=new Array(v);for(let C=0;C<v;C++)x[C]=jh.fromValues(f[C]);return x}};Ka.toRequestBody=cn;var gl=Ka,no=gl,gg=class{constructor(d){var f;this.client=d,this.admin=new pg(d),P.Config.push&&((f=d.options.plugins)!=null&&f.Push)&&(this.stateMachine=new d.options.plugins.Push.ActivationStateMachine(d),this.LocalDevice=d.options.plugins.Push.localDeviceFactory(xi))}async activate(d,f){await new Promise((v,x)=>{var C;if(!((C=this.client.options.plugins)!=null&&C.Push)){x(Fi("Push"));return}if(!this.stateMachine){x(new $("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){x(new $("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=j=>{if(j){x(j);return}v()},this.stateMachine.updateFailedCallback=f,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,d))})}async deactivate(d){await new Promise((f,v)=>{var x;if(!((x=this.client.options.plugins)!=null&&x.Push)){v(Fi("Push"));return}if(!this.stateMachine){v(new $("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){v(new $("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=C=>{if(C){v(C);return}f()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,d))})}},pg=class{constructor(d){this.client=d,this.deviceRegistrations=new yg(d),this.channelSubscriptions=new Wc(d)}async publish(d,f){const v=this.client,x=v.options.useBinaryProtocol?"msgpack":"json",C=Ee.defaultPostHeaders(v.options,{format:x}),j={},L=G({recipient:d},f);G(C,v.options.headers),v.options.pushFullWait&&G(j,{fullWait:"true"});const V=cn(L,v._MsgPack,x);await qt.post(v,"/push/publish",V,C,j,null,!0)}},yg=class{constructor(d){this.client=d}async save(d){const f=this.client,v=xi.fromValues(d),x=f.options.useBinaryProtocol?"msgpack":"json",C=Ee.defaultPostHeaders(f.options,{format:x}),j={};G(C,f.options.headers),f.options.pushFullWait&&G(j,{fullWait:"true"});const L=cn(v,f._MsgPack,x),V=await qt.put(f,"/push/deviceRegistrations/"+encodeURIComponent(d.id),L,C,j,null,!0);return xi.fromResponseBody(V.body,f._MsgPack,V.unpacked?void 0:x)}async get(d){const f=this.client,v=f.options.useBinaryProtocol?"msgpack":"json",x=Ee.defaultGetHeaders(f.options,{format:v}),C=d.id||d;if(typeof C!="string"||!C.length)throw new $("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);G(x,f.options.headers);const j=await qt.get(f,"/push/deviceRegistrations/"+encodeURIComponent(C),x,{},null,!0);return xi.fromResponseBody(j.body,f._MsgPack,j.unpacked?void 0:v)}async list(d){const f=this.client,v=f.options.useBinaryProtocol?"msgpack":"json",x=this.client.http.supportsLinkHeaders?void 0:v,C=Ee.defaultGetHeaders(f.options,{format:v});return G(C,f.options.headers),new us(f,"/push/deviceRegistrations",C,x,async function(j,L,V){return xi.fromResponseBody(j,f._MsgPack,V?void 0:v)}).get(d)}async remove(d){const f=this.client,v=f.options.useBinaryProtocol?"msgpack":"json",x=Ee.defaultGetHeaders(f.options,{format:v}),C={},j=d.id||d;if(typeof j!="string"||!j.length)throw new $("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);G(x,f.options.headers),f.options.pushFullWait&&G(C,{fullWait:"true"}),await qt.delete(f,"/push/deviceRegistrations/"+encodeURIComponent(j),x,C,null,!0)}async removeWhere(d){const f=this.client,v=f.options.useBinaryProtocol?"msgpack":"json",x=Ee.defaultGetHeaders(f.options,{format:v});G(x,f.options.headers),f.options.pushFullWait&&G(d,{fullWait:"true"}),await qt.delete(f,"/push/deviceRegistrations",x,d,null,!0)}},Wc=class fA{constructor(f){this.remove=fA.prototype.removeWhere,this.client=f}async save(f){const v=this.client,x=no.fromValues(f),C=v.options.useBinaryProtocol?"msgpack":"json",j=Ee.defaultPostHeaders(v.options,{format:C}),L={};G(j,v.options.headers),v.options.pushFullWait&&G(L,{fullWait:"true"});const V=cn(x,v._MsgPack,C),ne=await qt.post(v,"/push/channelSubscriptions",V,j,L,null,!0);return no.fromResponseBody(ne.body,v._MsgPack,ne.unpacked?void 0:C)}async list(f){const v=this.client,x=v.options.useBinaryProtocol?"msgpack":"json",C=this.client.http.supportsLinkHeaders?void 0:x,j=Ee.defaultGetHeaders(v.options,{format:x});return G(j,v.options.headers),new us(v,"/push/channelSubscriptions",j,C,async function(L,V,ne){return no.fromResponseBody(L,v._MsgPack,ne?void 0:x)}).get(f)}async removeWhere(f){const v=this.client,x=v.options.useBinaryProtocol?"msgpack":"json",C=Ee.defaultGetHeaders(v.options,{format:x});G(C,v.options.headers),v.options.pushFullWait&&G(f,{fullWait:"true"}),await qt.delete(v,"/push/channelSubscriptions",C,f,null,!0)}async listChannels(f){const v=this.client,x=v.options.useBinaryProtocol?"msgpack":"json",C=this.client.http.supportsLinkHeaders?void 0:x,j=Ee.defaultGetHeaders(v.options,{format:x});return G(j,v.options.headers),v.options.pushFullWait&&G(f,{fullWait:"true"}),new us(v,"/push/channels",j,C,async function(L,V,ne){const Q=!ne&&x?Mt(L,v._MsgPack,x):L;for(let ge=0;ge<Q.length;ge++)Q[ge]=String(Q[ge]);return Q}).get(f)}},vg=gg,kd=["absent","present","enter","leave","update"];async function Nd(d,f,v,x){const C=Fc(f,d,x??null);return so.fromValues(v).decode(C,d)}async function bg(d,f,v,x){return Promise.all(v.map(function(C){return Nd(d,f,C,x)}))}async function _g(d,f){return so.fromValues(d).decode(f.channelOptions,f.logger)}async function Yc(d,f){return Promise.all(d.map(function(v){return _g(v,f)}))}var Dd=class Mh extends Ms{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const f=this.id.split(":");return{connectionId:f[0],msgSerial:parseInt(f[1],10),index:parseInt(f[2],10)}}async encode(f){const v=Object.assign(new so,this,{action:kd.indexOf(this.action||"present")});return $c(v,f)}static fromValues(f){return Object.assign(new Mh,f)}static fromValuesArray(f){return f.map(v=>Mh.fromValues(v))}static fromData(f){return f instanceof Mh?f:Mh.fromValues({data:f})}toString(){return Ki(this,"PresenceMessage")}},so=class Zv extends Ms{toJSON(...f){return bi.call(this,...f)}static fromValues(f){return Object.assign(new Zv,f)}static fromValuesArray(f){return f.map(v=>Zv.fromValues(v))}async decode(f,v){const x=Object.assign(new Dd,O(T({},this),{action:kd[this.action]}));try{await Jr(x,f)}catch(C){A.logAction(v,A.LOG_ERROR,"WirePresenceMessage.decode()",Fe(C))}return x}toString(){return Ki(this,"WirePresenceMessage")}},wi=Dd,xg=class{constructor(d){this.channel=d}get logger(){return this.channel.logger}async get(d){A.logAction(this.logger,A.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const f=this.channel.client,v=f.options.useBinaryProtocol?"msgpack":"json",x=this.channel.client.http.supportsLinkHeaders?void 0:v,C=Ee.defaultGetHeaders(f.options,{format:v});return G(C,f.options.headers),new us(f,this.channel.client.rest.presenceMixin.basePath(this),C,x,async(j,L,V)=>{const ne=V?j:Mt(j,f._MsgPack,v);return Yc(ne,this.channel)}).get(d)}async history(d){return A.logAction(this.logger,A.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,d)}},Kc=xg,Pd=["message.create","message.update","message.delete","meta","message.summary"];function wg(d){return Pd[d||0]||"unknown"}function Sg(d){let f=0;return d.name&&(f+=d.name.length),d.clientId&&(f+=d.clientId.length),d.extras&&(f+=JSON.stringify(d.extras).length),d.data&&(f+=jn(d.data)),f}async function Xc(d,f,v,x){const C=Fc(f,d,x??null);return io.fromValues(v).decode(C,d)}async function Cg(d,f,v,x){return Promise.all(v.map(function(C){return Xc(d,f,C,x)}))}async function Tg(d,f){return io.fromValues(d).decode(f.channelOptions,f.logger)}async function Ag(d,f){return Promise.all(d.map(function(v){return Tg(v,f)}))}async function Ld(d,f){return Promise.all(d.map(v=>v.encode(f)))}var Og=cn;function Qc(d){let f,v=0;for(let x=0;x<d.length;x++)f=d[x],v+=f.size||(f.size=Sg(f));return v}var Bd=class e0 extends Ms{expandFields(){this.action==="message.create"&&(this.version&&!this.serial&&(this.serial=this.version),this.timestamp&&!this.createdAt&&(this.createdAt=this.timestamp))}async encode(f){const v=Object.assign(new io,this,{action:Pd.indexOf(this.action||"message.create")});return $c(v,f)}static fromValues(f){return Object.assign(new e0,f)}static fromValuesArray(f){return f.map(v=>e0.fromValues(v))}toString(){return Ki(this,"Message")}},io=class t0 extends Ms{toJSON(...f){return bi.call(this,...f)}static fromValues(f){return Object.assign(new t0,f)}static fromValuesArray(f){return f.map(v=>t0.fromValues(v))}async decodeWithErr(f,v){const x=Object.assign(new Bd,O(T({},this),{action:wg(this.action)}));let C;try{await Jr(x,f)}catch(j){A.logAction(v,A.LOG_ERROR,"WireMessage.decode()",Fe(j)),C=j}return x.expandFields(),{decoded:x,err:C}}async decode(f,v){const{decoded:x}=await this.decodeWithErr(f,v);return x}toString(){return Ki(this,"WireMessage")}},Si=Bd,Jc=9;function ao(d){return d.every(function(f){return!f.id})}var jg=class{constructor(d,f,v){this._annotations=null;var x,C;A.logAction(d.logger,A.LOG_MINOR,"RestChannel()","started; name = "+f),this.name=f,this.client=d,this.presence=new Kc(this),this.channelOptions=Pt((x=d._Crypto)!=null?x:null,this.logger,v),(C=d.options.plugins)!=null&&C.Push&&(this._push=new d.options.plugins.Push.PushChannel(this)),d._Annotations&&(this._annotations=new d._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||Ht("Annotations"),this._annotations}get push(){return this._push||Ht("Push"),this._push}get logger(){return this.client.logger}setOptions(d){var f;this.channelOptions=Pt((f=this.client._Crypto)!=null?f:null,this.logger,d)}async history(d){return A.logAction(this.logger,A.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,d)}async publish(...d){const f=d[0],v=d[1];let x,C;if(typeof f=="string"||f===null)x=[Si.fromValues({name:f,data:v})],C=d[2];else if(I(f))x=[Si.fromValues(f)],C=d[1];else if(Array.isArray(f))x=Si.fromValuesArray(f),C=d[1];else throw new $("The single-argument form of publish() expects a message object or an array of message objects",40013,400);C||(C={});const j=this.client,L=j.options,V=L.useBinaryProtocol?"msgpack":"json",ne=j.options.idempotentRestPublishing,Q=Ee.defaultPostHeaders(j.options,{format:V});if(G(Q,L.headers),ne&&ao(x)){const fe=await Tt(Jc);x.forEach(function(De,ke){De.id=fe+":"+ke.toString()})}const ge=await Ld(x,this.channelOptions),me=Qc(ge),je=L.maxMessageSize;if(me>je)throw new $(`Maximum size of messages that can be published at once exceeded (was ${me} bytes; limit is ${je} bytes)`,40009,400);await this._publish(Og(ge,j._MsgPack,V),Q,C)}async _publish(d,f,v){await qt.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",d,f,v,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},Ud=jg,Id=class mA{constructor(f){this.entries=f&&f.entries||void 0,this.schema=f&&f.schema||void 0,this.appId=f&&f.appId||void 0,this.inProgress=f&&f.inProgress||void 0,this.unit=f&&f.unit||void 0,this.intervalId=f&&f.intervalId||void 0}static fromValues(f){return new mA(f)}},zd=Id,Zc=class{static basePath(d){return"/channels/"+encodeURIComponent(d.name)}static history(d,f){const v=d.client,x=v.options.useBinaryProtocol?"msgpack":"json",C=d.client.http.supportsLinkHeaders?void 0:x,j=Ee.defaultGetHeaders(v.options,{format:x});return G(j,v.options.headers),new us(v,this.basePath(d)+"/messages",j,C,async function(L,V,ne){const Q=ne?L:Mt(L,v._MsgPack,x);return Ag(Q,d)}).get(f)}static async status(d){const f=d.client.options.useBinaryProtocol?"msgpack":"json",v=Ee.defaultPostHeaders(d.client.options,{format:f});return(await qt.get(d.client,this.basePath(d),v,{},f,!0)).body}},Vd=class{static basePath(d){return Zc.basePath(d.channel)+"/presence"}static async history(d,f){const v=d.channel.client,x=v.options.useBinaryProtocol?"msgpack":"json",C=d.channel.client.http.supportsLinkHeaders?void 0:x,j=Ee.defaultGetHeaders(v.options,{format:x});return G(j,v.options.headers),new us(v,this.basePath(d)+"/history",j,C,async(L,V,ne)=>{const Q=ne?L:Mt(L,v._MsgPack,x);return Yc(Q,d.channel)}).get(f)}},Qi=class{constructor(d){this.channelMixin=Zc,this.presenceMixin=Vd,this.Resource=qt,this.PaginatedResource=us,this.DeviceDetails=xi,this.PushChannelSubscription=no,this.client=d,this.channels=new Mg(this.client),this.push=new vg(this.client)}async stats(d){const f=Ee.defaultGetHeaders(this.client.options),v=this.client.options.useBinaryProtocol?"msgpack":"json",x=this.client.http.supportsLinkHeaders?void 0:v;return G(f,this.client.options.headers),new us(this.client,"/stats",f,x,function(C,j,L){const V=L?C:JSON.parse(C);for(let ne=0;ne<V.length;ne++)V[ne]=zd.fromValues(V[ne]);return V}).get(d)}async time(d){const f=Ee.defaultGetHeaders(this.client.options);this.client.options.headers&&G(f,this.client.options.headers);const v=V=>this.client.baseUri(V)+"/time";let{error:x,body:C,unpacked:j}=await this.client.http.do(yt.Get,v,f,null,d);if(x)throw x;j||(C=JSON.parse(C));const L=C[0];if(!L)throw new $("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=L-Date.now(),L}async request(d,f,v,x,C,j){var L;const[V,ne,Q]=this.client.options.useBinaryProtocol?(this.client._MsgPack||Ht("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],ge=this.client.http.supportsLinkHeaders?void 0:Q;x=x||{};const me=d.toLowerCase(),je=me=="get"?Ee.defaultGetHeaders(this.client.options,{format:Q,protocolVersion:v}):Ee.defaultPostHeaders(this.client.options,{format:Q,protocolVersion:v});typeof C!="string"&&(C=(L=V(C))!=null?L:null),G(je,this.client.options.headers),j&&G(je,j);const fe=new us(this.client,f,je,ge,async function(De,ke,Ve){return _e(Ve?De:ne(De))},!0);if(!P.Http.methods.includes(me))throw new $("Unsupported method "+me,40500,405);return P.Http.methodsWithBody.includes(me)?fe[me](x,C):fe[me](x)}async batchPublish(d){let f,v;Array.isArray(d)?(f=d,v=!1):(f=[d],v=!0);const x=this.client.options.useBinaryProtocol?"msgpack":"json",C=Ee.defaultPostHeaders(this.client.options,{format:x});this.client.options.headers&&G(C,this.client.options.headers);const j=cn(f,this.client._MsgPack,x),L=await qt.post(this.client,"/messages",j,C,{},null,!0),V=L.unpacked?L.body:Mt(L.body,this.client._MsgPack,x);return v?V[0]:V}async batchPresence(d){const f=this.client.options.useBinaryProtocol?"msgpack":"json",v=Ee.defaultPostHeaders(this.client.options,{format:f});this.client.options.headers&&G(v,this.client.options.headers);const x=d.join(","),C=await qt.get(this.client,"/presence",v,{channels:x},null,!0);return C.unpacked?C.body:Mt(C.body,this.client._MsgPack,f)}async revokeTokens(d,f){if(Cd(this.client.options))throw new $("Cannot revoke tokens when using token auth",40162,401);const v=this.client.options.keyName;let x=f??{};const C=T({targets:d.map(Q=>`${Q.type}:${Q.value}`)},x),j=this.client.options.useBinaryProtocol?"msgpack":"json",L=Ee.defaultPostHeaders(this.client.options,{format:j});this.client.options.headers&&G(L,this.client.options.headers);const V=cn(C,this.client._MsgPack,j),ne=await qt.post(this.client,`/keys/${v}/revokeTokens`,V,L,{},null,!0);return ne.unpacked?ne.body:Mt(ne.body,this.client._MsgPack,j)}},Mg=class{constructor(d){this.client=d,this.all=Object.create(null)}get(d,f){d=String(d);let v=this.all[d];return v?f&&v.setOptions(f):this.all[d]=v=new Ud(this.client,d,f),v}release(d){delete this.all[String(d)]}},Eg=class extends Ya{constructor(d){super(Ee.objectifyOptions(d,!1,"BaseRest",A.defaultLogger,{Rest:Qi}))}},Hd={Rest:Qi},eu=class extends Si{static async fromEncoded(d,f){return Xc(A.defaultLogger,P.Crypto,d,f)}static async fromEncodedArray(d,f){return Cg(A.defaultLogger,P.Crypto,d,f)}static fromValues(d){return Si.fromValues(d)}},tu=class extends wi{static async fromEncoded(d,f){return Nd(A.defaultLogger,P.Crypto,d,f)}static async fromEncodedArray(d,f){return bg(A.defaultLogger,P.Crypto,d,f)}static fromValues(d){return wi.fromValues(d)}},Xa=["annotation.create","annotation.delete"];async function Qa(d,f,v){return Ci.fromValues(f).decode(v||{},d)}async function Rg(d,f,v){return Promise.all(f.map(function(x){return Qa(d,x,v)}))}async function pl(d,f){return Ci.fromValues(d).decode(f.channelOptions,f.logger)}async function Fd(d,f){return Promise.all(d.map(function(v){return pl(v,f)}))}var nu=class n0 extends Ms{async encode(){const f=Object.assign(new Ci,this,{action:Xa.indexOf(this.action||"annotation.create")});return $c(f,{})}static fromValues(f){return Object.assign(new n0,f)}static fromValuesArray(f){return f.map(v=>n0.fromValues(v))}toString(){return Ki(this,"Annotation")}},Ci=class s0 extends Ms{toJSON(...f){return bi.call(this,...f)}static fromValues(f){return Object.assign(new s0,f)}static fromValuesArray(f){return f.map(v=>s0.fromValues(v))}async decode(f,v){const x=Object.assign(new nu,O(T({},this),{action:Xa[this.action]}));try{await Jr(x,f)}catch(C){A.logAction(v,A.LOG_ERROR,"WireAnnotation.decode()",Fe(C))}return x}toString(){return Ki(this,"WireAnnotation")}},Ji=nu,su=class extends Ji{static async fromEncoded(d,f){return Qa(A.defaultLogger,d,f)}static async fromEncodedArray(d,f){return Rg(A.defaultLogger,d,f)}static fromValues(d){return Ji.fromValues(d)}};function iu(d){let f;switch(typeof d){case"string":f=d;break;case"object":f=d.serial;break}if(!f||typeof f!="string")throw new $("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return f}function au(d,f){const v=iu(d);if(!f||typeof f!="object")throw new $("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const x=Ji.fromValues(f);return x.messageSerial=v,x.action||(x.action="annotation.create"),x}function qd(d,f){return d.client.rest.channelMixin.basePath(d)+"/messages/"+encodeURIComponent(f)+"/annotations"}var kg=class{constructor(d){this.channel=d}async publish(d,f){const v=au(d,f),x=await v.encode(),C=this.channel.client,j=C.options,L=j.useBinaryProtocol?"msgpack":"json",V=Ee.defaultPostHeaders(C.options,{format:L}),ne={};G(V,C.options.headers);const Q=cn([x],C._MsgPack,L);await qt.post(C,qd(this.channel,v.messageSerial),Q,V,ne,null,!0)}async delete(d,f){return f.action="annotation.delete",this.publish(d,f)}async get(d,f){const v=this.channel.client,x=iu(d),C=v.options.useBinaryProtocol?"msgpack":"json",j=v.http.supportsLinkHeaders?void 0:C,L=Ee.defaultGetHeaders(v.options,{format:C});return G(L,v.options.headers),new us(v,qd(this.channel,x),L,j,async(V,ne,Q)=>{const ge=Q?V:Mt(V,v._MsgPack,C);return Fd(ge,this.channel)}).get(f)}},ru=kg,Ng=cn;function yl(d){const f=[];if(d)for(let v=0;v<d.length;v++)f.push(d[v].toString());return"[ "+f.join(", ")+" ]"}function Zn(d,f,v,x,C,j){const L=Mt(d,f,j);return Zi(L,v,x,C)}function Zi(d,f,v,x){let C;d.error&&(C=$.fromValues(d.error));let j;d.messages&&(j=io.fromValuesArray(d.messages));let L;f&&d.presence&&(L=f.WirePresenceMessage.fromValuesArray(d.presence));let V;v&&d.annotations&&(V=v.WireAnnotation.fromValuesArray(d.annotations));let ne;return x&&d.state&&(ne=x.ObjectMessage.fromValuesArray(d.state,Te,Zr)),Object.assign(new bl,O(T({},d),{presence:L,messages:j,annotations:V,state:ne,error:C}))}function ou(d){return f=>{var v;return Zi(f,{WirePresenceMessage:so},{WireAnnotation:Ci},(v=d==null?void 0:d.ObjectsPlugin)!=null?v:null)}}function zn(d){return Object.assign(new bl,d)}function vl(d,f,v,x){let C="[ProtocolMessage";d.action!==void 0&&(C+="; action="+Hc[d.action]||d.action);const j=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let L;for(let V=0;V<j.length;V++)L=j[V],d[L]!==void 0&&(C+="; "+L+"="+d[L]);if(d.messages&&(C+="; messages="+yl(io.fromValuesArray(d.messages))),d.presence&&f&&(C+="; presence="+yl(f.WirePresenceMessage.fromValuesArray(d.presence))),d.annotations&&v&&(C+="; annotations="+yl(v.WireAnnotation.fromValuesArray(d.annotations))),d.state&&x&&(C+="; state="+yl(x.ObjectMessage.fromValuesArray(d.state,Te,Zr))),d.error&&(C+="; error="+$.fromValues(d.error).toString()),d.auth&&d.auth.accessToken&&(C+="; token="+d.auth.accessToken),d.flags&&(C+="; flags="+Ga.filter(d.hasFlag).join(",")),d.params){let V="";Me(d.params,function(ne){V.length>0&&(V+="; "),V+=ne+"="+d.params[ne]}),V.length>0&&(C+="; params=["+V+"]")}return C+="]",C}var bl=class{constructor(){this.hasFlag=d=>(this.flags&Mn[d])>0}setFlag(d){return this.flags=this.flags|Mn[d]}getMode(){return(this.flags||0)&Mn.MODE_ALL}encodeModesToFlags(d){d.forEach(f=>this.setFlag(f))}decodeModesFromFlags(){const d=[];return Od.forEach(f=>{this.hasFlag(f)&&d.push(f)}),d.length>0?d:void 0}},lu=bl,Dg=class{constructor(d,f,v,x,C){this.previous=d,this.current=f,f==="attached"&&(this.resumed=v,this.hasBacklog=x),C&&(this.reason=C)}},cu=Dg,ea=function(){};function uu(d){if(d&&"params"in d&&!I(d.params))return new $("options.params must be an object",4e4,400);if(d&&"modes"in d){if(!Array.isArray(d.modes))return new $("options.modes must be an array",4e4,400);for(let f=0;f<d.modes.length;f++){const v=d.modes[f];if(!v||typeof v!="string"||!Od.includes(String.prototype.toUpperCase.call(v)))return new $("Invalid channel mode: "+v,4e4,400)}}}var ro=class i0 extends Yt{constructor(f,v,x){var C,j,L;super(f.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(V){A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const ne=this.client.rest.channelMixin;if(V&&V.untilAttach){if(this.state!=="attached")throw new $("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new $("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete V.untilAttach,V.from_serial=this.properties.attachSerial}return ne.history(this,V)},this.whenState=V=>Yt.prototype.whenState.call(this,V,this.state),A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel()","started; name = "+v),this.name=v,this.channelOptions=Pt((C=f._Crypto)!=null?C:null,this.logger,x),this.client=f,this._presence=f._RealtimePresence?new f._RealtimePresence.RealtimePresence(this):null,f._Annotations&&(this._annotations=new f._Annotations.RealtimeAnnotations(this)),this.connectionManager=f.connection.connectionManager,this.state="initialized",this.subscriptions=new Yt(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(x),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:f.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new Yt(this.logger),(j=f.options.plugins)!=null&&j.Push&&(this._push=new f.options.plugins.Push.PushChannel(this)),(L=f.options.plugins)!=null&&L.Objects&&(this._objects=new f.options.plugins.Objects.Objects(this))}get presence(){return this._presence||Ht("RealtimePresence"),this._presence}get annotations(){return this._annotations||Ht("Annotations"),this._annotations}get push(){return this._push||Ht("Push"),this._push}get objects(){return this._objects||Ht("Objects"),this._objects}invalidStateError(){return new $("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(f){return f=Array.prototype.slice.call(f),typeof f[0]=="function"&&f.unshift(null),f}async setOptions(f){var v;const x=this.channelOptions,C=uu(f);if(C)throw C;if(this.channelOptions=Pt((v=this.client._Crypto)!=null?v:null,this.logger,f),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(f,x))return this.attachImpl(),new Promise((j,L)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(V){switch(this.event){case"update":case"attached":j();break;default:L(V.reason)}})})}_shouldReattachToSetOptions(f,v){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(f!=null&&f.params){const x=_l(f.params),C=_l(v.params);if(Object.keys(x).length!==Object.keys(C).length||!rs(C,x))return!0}return!!(f!=null&&f.modes&&(!v.modes||!sl(f.modes,v.modes)))}async publish(...f){let v;if(f.length==1)if(I(f[0]))v=[Si.fromValues(f[0])];else if(Array.isArray(f[0]))v=Si.fromValuesArray(f[0]);else throw new $("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else v=[Si.fromValues({name:f[0],data:f[1]})];const C=this.client.options.maxMessageSize,j=await Ld(v,this.channelOptions),L=Qc(j);if(L>C)throw new $(`Maximum size of messages that can be published at once exceeded (was ${L} bytes; limit is ${C} bytes)`,40009,400);this.throwIfUnpublishableState(),A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+j.length);const V=zn({action:Ie.MESSAGE,channel:this.name,messages:j});return this.sendMessage(V)}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(this.state==="failed"||this.state==="suspended")throw this.invalidStateError()}onEvent(f){A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const v=this.subscriptions;for(let x=0;x<f.length;x++){const C=f[x];v.emit(C.name,C)}}async attach(){return this.state==="attached"?null:new Promise((f,v)=>{this._attach(!1,null,(x,C)=>x?v(x):f(C))})}_attach(f,v,x){x||(x=j=>{j&&A.logAction(this.logger,A.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+j.toString())});const C=this.connectionManager;if(!C.activeState()){x(C.getError());return}(this.state!=="attaching"||f)&&this.requestState("attaching",v),this.once(function(j){switch(this.event){case"attached":x==null||x(null,j);break;case"detached":case"suspended":case"failed":x==null||x(j.reason||C.getError()||new $("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":x==null||x(new $("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const f=zn({action:Ie.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&f.encodeModesToFlags(Gr(this.channelOptions.modes)),this._attachResume&&f.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(f.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(f).catch(ea)}async detach(){const f=this.connectionManager;if(!f.activeState())throw f.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new $("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((v,x)=>{this.once(function(C){switch(this.event){case"detached":v();break;case"attached":case"suspended":case"failed":x(C.reason||f.getError()||new $("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":x(new $("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(){A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const f=zn({action:Ie.DETACH,channel:this.name});this.sendMessage(f).catch(ea)}async subscribe(...f){const[v,x]=i0.processListenerArgs(f);if(this.state==="failed")throw $.fromValues(this.invalidStateError());return v&&typeof v=="object"&&!Array.isArray(v)?this.client._FilteredSubscriptions.subscribeFilter(this,v,x):this.subscriptions.on(v,x),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...f){var v;const[x,C]=i0.processListenerArgs(f);if(typeof x=="object"&&!C||(v=this.filteredSubscriptions)!=null&&v.has(C)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,x,C).forEach(j=>this.subscriptions.off(j));return}this.subscriptions.off(x,C)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new be("Unable to sync to channel; not attached",4e4)}const f=this.connectionManager;if(!f.activeState())throw f.getError();const v=zn({action:Ie.SYNC,channel:this.name});this.syncChannelSerial&&(v.channelSerial=this.syncChannelSerial),f.send(v)}async sendMessage(f){return new Promise((v,x)=>{this.connectionManager.send(f,this.client.options.queueMessages,C=>{C?x(C):v()})})}async sendPresence(f){const v=zn({action:Ie.PRESENCE,channel:this.name,presence:f});return this.sendMessage(v)}sendState(f){const v=zn({action:Ie.OBJECT,channel:this.name,state:f});return this.sendMessage(v)}async processMessage(f){(f.action===Ie.ATTACHED||f.action===Ie.MESSAGE||f.action===Ie.PRESENCE||f.action===Ie.OBJECT||f.action===Ie.ANNOTATION)&&this.setChannelSerial(f.channelSerial);let v,x=!1;switch(f.action){case Ie.ATTACHED:{this.properties.attachSerial=f.channelSerial,this._mode=f.getMode(),this.params=f.params||{};const C=f.decodeModesFromFlags();this.modes=C&&Un(C)||void 0;const j=f.hasFlag("RESUMED"),L=f.hasFlag("HAS_PRESENCE"),V=f.hasFlag("HAS_BACKLOG"),ne=f.hasFlag("HAS_OBJECTS");if(this.state==="attached"){j||(this._presence&&this._presence.onAttached(L),this._objects&&this._objects.onAttached(ne));const Q=new cu(this.state,this.state,j,V,f.error);this._allChannelChanges.emit("update",Q),(!j||this.channelOptions.updateOnAttached)&&this.emit("update",Q)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",f.error,j,L,V,ne);break}case Ie.DETACHED:{const C=f.error?$.fromValues(f.error):new $("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",C):this.state==="attaching"?this.notifyState("suspended",C):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",C);break}case Ie.SYNC:if(x=!0,v=this.syncChannelSerial=f.channelSerial,!f.presence)break;case Ie.PRESENCE:{if(!f.presence)break;Wa(f);const C=this.channelOptions;if(this._presence){const j=await Promise.all(f.presence.map(L=>L.decode(C,this.logger)));this._presence.setPresence(j,x,v)}break}case Ie.OBJECT:case Ie.OBJECT_SYNC:{if(!this._objects||!f.state)return;Wa(f);const C=f.state,j=this.client.connection.connectionManager.getActiveTransportFormat();await Promise.all(C.map(L=>this.client._objectsPlugin.ObjectMessage.decode(L,this.client,this.logger,A,Te,j))),f.action===Ie.OBJECT?this._objects.handleObjectMessages(C):this._objects.handleObjectSyncMessages(C,f.channelSerial);break}case Ie.MESSAGE:{if(this.state!=="attached"){A.logAction(this.logger,A.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+f.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}Wa(f);const C=f.messages,j=C[0],L=C[C.length-1];if(j.extras&&j.extras.delta&&j.extras.delta.from!==this._lastPayload.messageId){const ne='Delta message decode failure - previous message not available for message "'+f.id+'" on this channel "'+this.name+'".';A.logAction(this.logger,A.LOG_ERROR,"RealtimeChannel.processMessage()",ne),this._startDecodeFailureRecovery(new $(ne,40018,400));break}let V=[];for(let ne=0;ne<C.length;ne++){const{decoded:Q,err:ge}=await C[ne].decodeWithErr(this._decodingContext,this.logger);if(V[ne]=Q,ge)switch(ge.code){case 40018:this._startDecodeFailureRecovery(ge);return;case 40019:case 40021:this.notifyState("failed",ge);return}}this._lastPayload.messageId=L.id,this._lastPayload.protocolMessageChannelSerial=f.channelSerial,this.onEvent(V);break}case Ie.ANNOTATION:{Wa(f);const C=this.channelOptions;if(this._annotations){const j=await Promise.all((f.annotations||[]).map(L=>L.decode(C,this.logger)));this._annotations._processIncoming(j)}break}case Ie.ERROR:{const C=f.error;C&&C.code==80016?this.checkPendingState():this.notifyState("failed",$.fromValues(C));break}default:A.logAction(this.logger,A.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+f.action+")")}}_startDecodeFailureRecovery(f){this._lastPayload.decodeFailureRecoveryInProgress||(A.logAction(this.logger,A.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,f,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(f,v,x,C,j,L){if(A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+f),this.clearStateTimer(),["detached","suspended","failed"].includes(f)&&(this.properties.channelSerial=null),f===this.state)return;this._presence&&this._presence.actOnChannelState(f,C,v),this._objects&&this._objects.actOnChannelState(f,L),f==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),v&&(this.errorReason=v);const V=new cu(this.state,f,x,j,v),ne='Channel state for channel "'+this.name+'"',Q=f+(v?"; reason: "+v:"");f==="failed"?A.logAction(this.logger,A.LOG_ERROR,ne,Q):A.logAction(this.logger,A.LOG_MAJOR,ne,Q),f!=="attaching"&&f!=="suspended"&&(this.retryCount=0),f==="attached"&&this.onAttached(),f==="attached"?this._attachResume=!0:(f==="detaching"||f==="failed")&&(this._attachResume=!1),this.state=f,this._allChannelChanges.emit(f,V),this.emit(f,V)}requestState(f,v){A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+f),this.notifyState(f,v),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const f=new $("Channel attach timed out",90007,408);this.notifyState("suspended",f);break}case"detaching":{const f=new $("Channel detach timed out",90007,408);this.notifyState("attached",f);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const f=this.stateTimer;f&&(clearTimeout(f),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const f=un(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},f)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const f=this.state;return f==="initialized"||f==="detached"||f==="failed"?null:new $("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+f,90001,400)}setChannelSerial(f){A.logAction(this.logger,A.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+f+"; previous = "+this.properties.channelSerial),f&&(this.properties.channelSerial=f)}async status(){return this.client.rest.channelMixin.status(this)}};function _l(d){const f=d||{},{agent:v}=f;return M(f,["agent"])}var Ja=ro,ta=class{constructor(d){this.channel=d,this.logger=d.logger,this.subscriptions=new Yt(this.logger)}async publish(d,f){const v=this.channel.name,x=au(d,f),C=await x.encode();this.channel.throwIfUnpublishableState(),A.logAction(this.logger,A.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+v+", sending annotation with messageSerial = "+x.messageSerial+", type = "+x.type);const j=zn({action:Ie.ANNOTATION,channel:v,annotations:[C]});return this.channel.sendMessage(j)}async delete(d,f){return f.action="annotation.delete",this.publish(d,f)}async subscribe(...d){const f=Ja.processListenerArgs(d),v=f[0],x=f[1],C=this.channel;if(C.state==="failed")throw $.fromValues(C.invalidStateError());if(this.subscriptions.on(v,x),this.channel.channelOptions.attachOnSubscribe!==!1&&await C.attach(),(this.channel.state==="attached"&&this.channel._mode&Mn.ANNOTATION_SUBSCRIBE)===0)throw new $("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...d){const f=Ja.processListenerArgs(d),v=f[0],x=f[1];this.subscriptions.off(v,x)}_processIncoming(d){for(const f of d)this.subscriptions.emit(f.type||"",f)}async get(d,f){return ru.prototype.get.call(this,d,f)}},na=ta,Ws=class Om extends Eg{constructor(f){var v,x;if(!Om._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Ee.objectifyOptions(f,!0,"Rest",A.defaultLogger,O(T({},Hd),{Crypto:(v=Om.Crypto)!=null?v:void 0,MsgPack:(x=Om._MsgPack)!=null?x:void 0,Annotations:{Annotation:Ji,WireAnnotation:Ci,RealtimeAnnotations:na,RestAnnotations:ru}})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(f){this._Crypto=f}};Ws._Crypto=null,Ws.Message=eu,Ws.PresenceMessage=tu,Ws.Annotation=su,Ws._MsgPack=null,Ws._Http=Vc;var xl=Ws,sa=class extends Yt{constructor(d){super(d),this.messages=[]}count(){return this.messages.length}push(d){this.messages.push(d)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(d){this.messages.push.apply(this.messages,d)}prepend(d){this.messages.unshift.apply(this.messages,d)}completeMessages(d,f,v){A.logAction(this.logger,A.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+d+"; count = "+f),v=v||null;const x=this.messages;if(x.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const C=x[0];if(C){const j=C.message.msgSerial,L=d+f;if(L>j){const V=x.splice(0,L-j);for(const ne of V)ne.callback(v)}x.length==0&&this.emit("idle")}}completeAllMessages(d){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,d)}resetSendAttempted(){for(let d of this.messages)d.sendAttempted=!1}clear(){A.logAction(this.logger,A.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},hu=sa,du=class{constructor(d,f){this.message=d,this.callback=f,this.merged=!1;const v=d.action;this.sendAttempted=!1,this.ackRequired=typeof v=="number"&&[Ie.MESSAGE,Ie.PRESENCE,Ie.ANNOTATION,Ie.OBJECT].includes(v)}},$d=class extends Yt{constructor(d){super(d.logger),this.transport=d,this.messageQueue=new hu(this.logger),d.on("ack",(f,v)=>{this.onAck(f,v)}),d.on("nack",(f,v,x)=>{this.onNack(f,v,x)})}onAck(d,f){A.logAction(this.logger,A.LOG_MICRO,"Protocol.onAck()","serial = "+d+"; count = "+f),this.messageQueue.completeMessages(d,f)}onNack(d,f,v){A.logAction(this.logger,A.LOG_ERROR,"Protocol.onNack()","serial = "+d+"; count = "+f+"; err = "+Fe(v)),v||(v=new $("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(d,f,v)}onceIdle(d){const f=this.messageQueue;if(f.count()===0){d();return}f.once("idle",d)}send(d){d.ackRequired&&this.messageQueue.push(d),this.logger.shouldLog(A.LOG_MICRO)&&A.logActionNoStrip(this.logger,A.LOG_MICRO,"Protocol.send()","sending msg; "+vl(d.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._objectsPlugin)),d.sendAttempted=!0,this.transport.send(d.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const d=this.transport;this.onceIdle(function(){d.disconnect()})}},Pg=$d,Lg=class{constructor(d,f,v,x){this.previous=d,this.current=f,v&&(this.retryIn=v),x&&(this.reason=x)}},wl=Lg,Ys={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},Gd={disconnected:()=>$.fromValues({statusCode:400,code:Ys.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>$.fromValues({statusCode:400,code:Ys.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>$.fromValues({statusCode:400,code:Ys.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>$.fromValues({statusCode:400,code:Ys.CLOSING,message:"Connection closing"}),closed:()=>$.fromValues({statusCode:400,code:Ys.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>$.fromValues({statusCode:500,code:Ys.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>$.fromValues({statusCode:500,code:Ys.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function Wd(d){return!d.statusCode||!d.code||d.statusCode>=500?!0:Object.values(Ys).includes(d.code)}var pn=Gd,hs=zn({action:Ie.CLOSE}),Za=zn({action:Ie.DISCONNECT}),fu=class extends Yt{constructor(d,f,v,x){super(d.logger),x&&(v.format=void 0,v.heartbeats=!0),this.connectionManager=d,this.auth=f,this.params=v,this.timeouts=v.options.timeouts,this.format=v.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",pn.closed())}disconnect(d){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",d||pn.disconnected())}fail(d){this.isConnected&&this.requestDisconnect(),this.finish("failed",d||pn.failed())}finish(d,f){var v;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((v=this.idleTimer)!=null?v:void 0),this.idleTimer=null,this.emit(d,f),this.dispose())}onProtocolMessage(d){switch(this.logger.shouldLog(A.LOG_MICRO)&&A.logActionNoStrip(this.logger,A.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+vl(d,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),d.action){case Ie.HEARTBEAT:A.logActionNoStrip(this.logger,A.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",d.id);break;case Ie.CONNECTED:this.onConnect(d),this.emit("connected",d.error,d.connectionId,d.connectionDetails,d);break;case Ie.CLOSED:this.onClose(d);break;case Ie.DISCONNECTED:this.onDisconnect(d);break;case Ie.ACK:this.emit("ack",d.msgSerial,d.count);break;case Ie.NACK:this.emit("nack",d.msgSerial,d.count,d.error);break;case Ie.SYNC:this.connectionManager.onChannelMessage(d,this);break;case Ie.ACTIVATE:break;case Ie.AUTH:mt(this.auth.authorize(),f=>{f&&A.logAction(this.logger,A.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Fe(f))});break;case Ie.ERROR:if(A.logAction(this.logger,A.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+P.Config.inspect(d.error)+(d.channel?", channel: "+d.channel:"")),d.channel===void 0){this.onFatalError(d);break}this.connectionManager.onChannelMessage(d,this);break;default:this.connectionManager.onChannelMessage(d,this)}}onConnect(d){if(this.isConnected=!0,!d.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const f=d.connectionDetails.maxIdleInterval;f&&(this.maxIdleInterval=f+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(d){const f=d&&d.error;A.logAction(this.logger,A.LOG_MINOR,"Transport.onDisconnect()","err = "+Fe(f)),this.finish("disconnected",f)}onFatalError(d){const f=d&&d.error;A.logAction(this.logger,A.LOG_MINOR,"Transport.onFatalError()","err = "+Fe(f)),this.finish("failed",f)}onClose(d){const f=d&&d.error;A.logAction(this.logger,A.LOG_MINOR,"Transport.onClose()","err = "+Fe(f)),this.finish("closed",f)}requestClose(){A.logAction(this.logger,A.LOG_MINOR,"Transport.requestClose()",""),this.send(hs)}requestDisconnect(){A.logAction(this.logger,A.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Za)}ping(d){const f={action:Ie.HEARTBEAT};d&&(f.id=d),this.send(zn(f))}dispose(){A.logAction(this.logger,A.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(d){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},d))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const d=Date.now()-this.lastActivity,f=this.maxIdleInterval-d;if(f<=0){const v="No activity seen from realtime in "+d+"ms; assuming connection has dropped";A.logAction(this.logger,A.LOG_ERROR,"Transport.onIdleTimerExpire()",v),this.disconnect(new $(v,80003,408))}else this.setIdleTimer(f+100)}static tryConnect(d,f,v,x,C){const j=new d(f,v,x);let L;const V=function(Q){clearTimeout(L),C({event:this.event,error:Q})},ne=f.options.timeouts.realtimeRequestTimeout;return L=setTimeout(()=>{j.off(["preconnect","disconnected","failed"]),j.dispose(),V.call({event:"disconnected"},new $("Timeout waiting for transport to indicate itself viable",5e4,500))},ne),j.on(["failed","disconnected"],V),j.on("preconnect",function(){A.logAction(f.logger,A.LOG_MINOR,"Transport.tryConnect()","viable transport "+j),clearTimeout(L),j.off(["failed","disconnected"],V),C(null,j)}),j.connect(),j}static isAvailable(){throw new $("isAvailable not implemented for transport",5e4,500)}},Ks=fu,yn;(d=>{d.WebSocket="web_socket",d.Comet="comet",d.XhrPolling="xhr_polling"})(yn||(yn={}));var mu=typeof Or<"u"?Or:typeof window<"u"?window:self,Es=()=>{var d;return typeof P.WebStorage<"u"&&((d=P.WebStorage)==null?void 0:d.localSupported)},er=()=>{var d;return typeof P.WebStorage<"u"&&((d=P.WebStorage)==null?void 0:d.sessionSupported)},oo=function(){},Ti="ably-transport-preference";function Yd(d,f,v){let x;if(d.channel!==f.channel||(x=d.action)!==Ie.PRESENCE&&x!==Ie.MESSAGE||x!==f.action)return!1;const C=x===Ie.PRESENCE?"presence":"messages",j=d[C].concat(f[C]);return Qc(j)>v||!et(j,"clientId")||!j.every(function(V){return!V.id})?!1:(d[C]=j,!0)}function Vn(d){try{return JSON.parse(d)}catch{return null}}var tr=class{constructor(d,f,v,x){this.options=d,this.host=f,this.mode=v,this.connectionKey=x,this.format=d.useBinaryProtocol?"msgpack":"json"}getConnectParams(d){const f=d?ce(d):{},v=this.options;switch(this.mode){case"resume":f.resume=this.connectionKey;break;case"recover":{const x=Vn(v.recover);x&&(f.recover=x.connectionKey);break}}return v.clientId!==void 0&&(f.clientId=v.clientId),v.echoMessages===!1&&(f.echo="false"),this.format!==void 0&&(f.format=this.format),this.stream!==void 0&&(f.stream=this.stream),this.heartbeats!==void 0&&(f.heartbeats=this.heartbeats),f.v=Ee.protocolVersion,f.agent=yi(this.options),v.transportParams!==void 0&&G(f,v.transportParams),f}toString(){let d="[mode="+this.mode;return this.host&&(d+=",host="+this.host),this.connectionKey&&(d+=",connectionKey="+this.connectionKey),this.format&&(d+=",format="+this.format),d+="]",d}},nr=class gA extends Yt{constructor(f,v){super(f.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=f,this.initTransports(),this.options=v;const x=v.timeouts,C=x.webSocketConnectTimeout+x.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:C,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:x.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:x.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:x.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new hu(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=x.connectionStateTtl,this.maxIdleInterval=null,this.transports=ye(v.transports||Ee.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(yn.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(yn.XhrPolling)?this.baseTransport=yn.XhrPolling:this.transports.includes(yn.Comet)&&(this.baseTransport=yn.Comet),this.httpHosts=Ee.getHosts(v),this.wsHosts=Ee.getHosts(v,!0),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,A.logAction(this.logger,A.LOG_MINOR,"Realtime.ConnectionManager()","started"),A.logAction(this.logger,A.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(v.transports||Ee.defaultTransports)+"]"),A.logAction(this.logger,A.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),A.logAction(this.logger,A.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){const L="no requested transports available";throw A.logAction(this.logger,A.LOG_ERROR,"realtime.ConnectionManager()",L),new Error(L)}const j=P.Config.addEventListener;j&&(er()&&typeof v.recover=="function"&&j("beforeunload",this.persistConnection.bind(this)),v.closeOnUnload===!0&&j("beforeunload",()=>{A.logAction(this.logger,A.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),j("online",()=>{var L;this.state==this.states.disconnected||this.state==this.states.suspended?(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((L=this.pendingTransport)==null||L.off(),this.disconnectAllTransports(),this.startConnect())}),j("offline",()=>{this.state==this.states.connected&&(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(f){const v={supportedTransports:{}};return this.initTransports(f,v),v.supportedTransports}static initTransports(f,v){const x=T(T({},P.Transports.bundledImplementations),f);[yn.WebSocket,...P.Transports.order].forEach(C=>{const j=x[C];j&&j.isAvailable()&&(v.supportedTransports[C]=j)})}initTransports(){gA.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(f,v){return new tr(this.options,f,v,this.connectionKey)}getTransportParams(f){(x=>{if(this.connectionKey){x("resume");return}if(typeof this.options.recover=="string"){x("recover");return}const C=this.options.recover,j=this.getSessionRecoverData(),L=this.sessionRecoveryName();if(j&&typeof C=="function"){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+L+")"),C(j,V=>{V?(this.options.recover=j.recoveryKey,x("recover")):x("clean")});return}x("clean")})(x=>{const C=this.createTransportParams(null,x);if(x==="recover"){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const j=Vn(this.options.recover);j&&(this.msgSerial=j.msgSerial)}else A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+C.toString());f(C)})}tryATransport(f,v,x){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+v),this.proposedTransport=Ks.tryConnect(this.supportedTransports[v],this,this.realtime.auth,f,(C,j)=>{const L=this.state;if(L==this.states.closing||L==this.states.closed||L==this.states.failed){j&&(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+L.state+" while we were attempting the transport; closing "+j),j.close()),x(!0);return}if(C){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+v+" "+C.event+", err: "+C.error.toString()),js.isTokenErr(C.error)&&!(this.errorReason&&js.isTokenErr(this.errorReason))?(this.errorReason=C.error,mt(this.realtime.auth._forceNewToken(null,null),V=>{if(V){this.actOnErrorFromAuthorize(V);return}this.tryATransport(f,v,x)})):C.event==="failed"?(this.notifyState({state:"failed",error:C.error}),x(!0)):C.event==="disconnected"&&(Wd(C.error)?x(!1):(this.notifyState({state:this.states.connecting.failState,error:C.error}),x(!0)));return}A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+v+"; setting pending"),this.setTransportPending(j,f),x(null,j)})}setTransportPending(f,v){const x=v.mode;A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+f+"; mode = "+x),this.pendingTransport=f,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),f.once("connected",(j,L,V)=>{this.activateTransport(j,f,L,V),x==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const C=this;f.on(["disconnected","closed","failed"],function(j){C.deactivateTransport(f,this.event,j)}),this.emit("transport.pending",f)}activateTransport(f,v,x,C){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+v),f&&A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+f),x&&A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+x),C&&A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(C)),this.persistTransportPreference(v);const j=this.state,L=this.states.connected.state;if(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+j.state),j.state==this.states.closing.state||j.state==this.states.closed.state||j.state==this.states.failed.state)return A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),v.disconnect(),!1;if(delete this.pendingTransport,!v.isConnected)return A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+v+" since it appears to no longer be connected"),!1;const V=this.activeProtocol;this.activeProtocol=new Pg(v),this.host=v.params.host;const ne=C.connectionKey;if(ne&&this.connectionKey!=ne&&this.setConnection(x,C,!!f),this.onConnectionDetailsUpdate(C,v),P.Config.nextTick(()=>{v.on("connected",(Q,ge,me)=>{this.onConnectionDetailsUpdate(me,v),this.emit("update",new wl(L,L,null,Q))})}),j.state===this.states.connected.state?f&&(this.errorReason=this.realtime.connection.errorReason=f,this.emit("update",new wl(L,L,null,f))):(this.notifyState({state:"connected",error:f}),this.errorReason=this.realtime.connection.errorReason=f||null),this.emit("transport.active",v),V)if(V.messageQueue.count()>0&&A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+V.transport.shortName+", new one is "+v.shortName+") finishing with "+V.messageQueue.count()+" messages still pending"),V.transport===v){const Q="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+v.shortName+"; stack = "+new Error().stack;A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.activateTransport()",Q)}else V.finish();return!0}deactivateTransport(f,v,x){const C=this.activeProtocol,j=C&&C.getTransport()===f,L=f===this.pendingTransport,V=this.noTransportsScheduledForActivation();if(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+f),A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+v+(j?"; was active":L?"; was pending":"")+(V?"":"; another transport is scheduled for activation")),x&&x.message&&A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+x.message),j&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(C.getPendingMessages()),C.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",f),j&&V||j&&v==="failed"||v==="closed"||C===null&&L){if(v==="disconnected"&&x&&x.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:v,error:x,retryImmediately:!0});return}const ne=v==="failed"&&js.isTokenErr(x)?"disconnected":v;this.notifyState({state:ne,error:x});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(f,v,x){const C=this.connectionId;(C&&C!==f||!C&&x)&&(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==f&&A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=f,this.realtime.connection.key=this.connectionKey=v.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const f=Date.now()-this.lastActivity;f>this.connectionStateTtl+this.maxIdleInterval&&(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+f+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(er()){const f=this.createRecoveryKey();f&&this.setSessionRecoverData({recoveryKey:f,disconnectedAt:Date.now(),location:mu.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var f;return(f=this.activeProtocol)==null?void 0:f.getTransport().format}getError(){if(this.errorReason){const f=be.fromValues(this.errorReason);return f.cause=this.errorReason,f}return this.getStateError()}getStateError(){var f,v;return(v=(f=pn)[this.state.state])==null?void 0:v.call(f)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(f){const v="Connection state",x=f.current+(f.reason?"; reason: "+f.reason:"");f.current==="failed"?A.logAction(this.logger,A.LOG_ERROR,v,x):A.logAction(this.logger,A.LOG_MAJOR,v,x),A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+f.current+"; reason = "+(f.reason&&f.reason.message));const C=this.state=this.states[f.current];f.reason&&(this.errorReason=f.reason,this.realtime.connection.errorReason=f.reason),(C.terminal||C.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",f)}startTransitionTimer(f){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+f.state),this.transitionTimer&&(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager "+f.state+" timer expired","requesting new state: "+f.failState),this.notifyState({state:f.failState}))},f.retryDelay)}cancelTransitionTimer(){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(f){f!=="disconnected"&&f!=="suspended"&&f!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(f){this.retryTimer=setTimeout(()=>{A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},f)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{A.logAction(this.logger,A.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&mt(this.realtime.http.checkConnectivity(),(f,v)=>{f||!v?(A.logAction(this.logger,A.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new $("Unable to connect (network unreachable)",80003,404)})):A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(f){this.webSocketGiveUpTimer=setTimeout(()=>{var v,x;this.wsCheckResult||(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(v=this.proposedTransport)==null||v.dispose(),(x=this.pendingTransport)==null||x.dispose(),this.connectBase(f,++this.connectCounter)):A.logAction(this.logger,A.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(f){var v,x;const C=f.state,j=C==="disconnected"&&(this.state===this.states.connected||f.retryImmediately||this.state===this.states.connecting&&f.error&&js.isTokenErr(f.error)&&!(this.errorReason&&js.isTokenErr(this.errorReason)));if(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+C+(j?"; will retry connection immediately":"")),C==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(f.state),(C==="suspended"||C==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const L=this.states[f.state];let V=L.retryDelay;L.state==="disconnected"&&(this.disconnectedRetryCount++,V=un(L.retryDelay,this.disconnectedRetryCount));const ne=new wl(this.state.state,L.state,V,f.error||((x=(v=pn)[L.state])==null?void 0:x.call(v)));if(j){const Q=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},ge=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;ge&&ge<1e3?(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+ge+"ms ago, waiting another "+(1e3-ge)+"ms before trying again"),setTimeout(Q,1e3-ge)):P.Config.nextTick(Q)}else(C==="disconnected"||C==="suspended")&&this.startRetryTimer(V);(C==="disconnected"&&!j||C==="suspended"||L.terminal)&&P.Config.nextTick(()=>{this.disconnectAllTransports()}),C=="connected"&&!this.activeProtocol&&A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(ne),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(C,ne.reason),this.failQueuedMessages(ne.reason))}requestState(f){var v,x;const C=f.state;if(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+C+"; current state: "+this.state.state),C==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(C),C=="connecting"&&this.state.state=="connected")||C=="closing"&&this.state.state=="closed")return;const j=this.states[C],L=new wl(this.state.state,j.state,null,f.error||((x=(v=pn)[j.state])==null?void 0:x.call(v)));this.enactStateChange(L),C=="connecting"&&P.Config.nextTick(()=>{this.startConnect()}),C=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const f=this.realtime.auth,v=++this.connectCounter,x=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(C=>{if(C.mode==="recover"&&C.options.recover){const j=Vn(C.options.recover);j&&this.realtime.channels.recoverChannels(j.channelSerials)}v===this.connectCounter&&this.connectImpl(C,v)})};if(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),f.method==="basic")x();else{const C=j=>{v===this.connectCounter&&(j?this.actOnErrorFromAuthorize(j):x())};this.errorReason&&js.isTokenErr(this.errorReason)?mt(f._forceNewToken(null,null),C):mt(f._ensureValidAuthCredentials(!1),C)}}connectImpl(f,v){const x=this.state.state;if(x!==this.states.connecting.state){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+x);return}const C=this.getTransportPreference();C&&C===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(f,++this.connectCounter))}).catch(oo),C&&C===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(f,v):this.connectWs(f,v)}connectWs(f,v){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(f),this.tryTransportWithFallbacks("web_socket",f,!0,v,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(f,v){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,f,!1,v,()=>!0):this.notifyState({state:"disconnected",error:new $("No transports left to try",8e4,404)})}tryTransportWithFallbacks(f,v,x,C,j){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",f);const L=me=>{this.notifyState({state:this.states.connecting.failState,error:me})},V=x?this.wsHosts.slice():this.httpHosts.slice(),ne=(me,je)=>{if(C===this.connectCounter){if(!j()){je&&je.dispose();return}!je&&!me&&ge()}},Q=V.shift();if(!Q){L(new $("Unable to connect (no available host)",80003,404));return}v.host=Q;const ge=()=>{if(!V.length){L(new $("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){L(new be("Internal error: Http.checkConnectivity not set",null,500));return}mt(this.realtime.http.checkConnectivity(),(me,je)=>{if(C===this.connectCounter&&j()){if(me){L(me);return}if(!je){L(new $("Unable to connect (network unreachable)",80003,404));return}v.host=Le(V),this.tryATransport(v,f,ne)}})};if(this.forceFallbackHost&&V.length){this.forceFallbackHost=!1,ge();return}this.tryATransport(v,f,ne)}closeImpl(){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(f,v){var x;switch(this.state.state){case"connected":{A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const C=(x=this.activeProtocol)==null?void 0:x.getTransport();C&&C.onAuthUpdated&&C.onAuthUpdated(f);const j=zn({action:Ie.AUTH,auth:{accessToken:f.token}});this.send(j);const L=()=>{this.off(V),v(null,f)},V=ne=>{ne.current==="failed"&&(this.off(L),this.off(V),v(ne.reason||this.getStateError()))};this.once("connectiondetails",L),this.on("connectionstate",V);break}case"connecting":A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const C=j=>{switch(j.current){case"connected":this.off(C),v(null,f);break;case"failed":case"closed":case"suspended":this.off(C),v(j.reason||this.getStateError());break}};this.on("connectionstate",C),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(f,v,x){x=x||oo;const C=this.state;if(C.sendEvents){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new du(f,x));return}if(!(v&&C.queueEvents)){const L="rejecting event, queueEvent was "+v+", state was "+C.state;A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.send()",L),x(this.errorReason||new $(L,9e4,400));return}this.logger.shouldLog(A.LOG_MICRO)&&A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+vl(f,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._objectsPlugin)),this.queue(f,x)}sendImpl(f){const v=f.message;f.ackRequired&&!f.sendAttempted&&(v.msgSerial=this.msgSerial++);try{this.activeProtocol.send(f)}catch(x){A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+x.stack)}}queue(f,v){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.queue()","queueing event");const x=this.queuedMessages.last(),C=this.options.maxMessageSize;x&&!x.sendAttempted&&Yd(x.message,f,C)?(x.merged||(x.callback=gn.create(this.logger,[x.callback]),x.merged=!0),x.callback.push(v)):this.queuedMessages.push(new du(f,v))}sendQueuedMessages(){A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let f;for(;f=this.queuedMessages.shift();)this.sendImpl(f)}queuePendingMessages(f){f&&f.length&&(A.logAction(this.logger,A.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+f.length+" pending messages"),this.queuedMessages.prepend(f))}failQueuedMessages(f){const v=this.queuedMessages.count();v>0&&(A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+v+" queued messages, err = "+Fe(f)),this.queuedMessages.completeAllMessages(f))}onChannelMessage(f,v){this.pendingChannelMessagesState.queue.push({message:f,transport:v}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const f=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(f.message).catch(v=>{A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",v)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(f){await this.realtime.channels.processChannelMessage(f)}async ping(){var f;if(this.state.state!=="connected")throw new $("Unable to ping service; not connected",4e4,400);const v=(f=this.activeProtocol)==null?void 0:f.getTransport();if(!v)throw this.getStateError();A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.ping()","transport = "+v);const x=Date.now(),C=Je();return gi(new Promise(j=>{const L=V=>{V===C&&(v.off("heartbeat",L),j(Date.now()-x))};v.on("heartbeat",L),v.ping(C)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(f){this.activeProtocol.getTransport().fail(f)}getTransportPreference(){var f,v;return this.transportPreference||Es()&&((v=(f=P.WebStorage)==null?void 0:f.get)==null?void 0:v.call(f,Ti))}persistTransportPreference(f){var v,x;this.transportPreference=f.shortName,Es()&&((x=(v=P.WebStorage)==null?void 0:v.set)==null||x.call(v,Ti,f.shortName))}unpersistTransportPreference(){var f,v;this.transportPreference=null,Es()&&((v=(f=P.WebStorage)==null?void 0:f.remove)==null||v.call(f,Ti))}actOnErrorFromAuthorize(f){if(f.code===40171)this.notifyState({state:"failed",error:f});else if(f.code===40102)this.notifyState({state:"failed",error:f});else if(f.statusCode===Ft.Forbidden){const v="Client configured authentication provider returned 403; failing the connection";A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",v),this.notifyState({state:"failed",error:new $(v,80019,403,f)})}else{const v="Client configured authentication provider request failed";A.logAction(this.logger,A.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",v),this.notifyState({state:this.state.failState,error:new $(v,80019,401,f)})}}onConnectionDetailsUpdate(f,v){if(!f)return;this.connectionDetails=f,f.maxMessageSize&&(this.options.maxMessageSize=f.maxMessageSize);const x=f.clientId;if(x){const j=this.realtime.auth._uncheckedSetClientId(x);if(j){A.logAction(this.logger,A.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",j.message),v.fail(j);return}}const C=f.connectionStateTtl;C&&(this.connectionStateTtl=C),this.maxIdleInterval=f.maxIdleInterval,this.emit("connectiondetails",f)}checkWsConnectivity(){const f=this.options.wsConnectivityCheckUrl||Ee.wsConnectivityCheckUrl,v=new P.Config.WebSocket(f);return new Promise((x,C)=>{let j=!1;v.onopen=()=>{j||(j=!0,x(),v.close())},v.onclose=v.onerror=()=>{j||(j=!0,C())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var f,v;return er()&&((v=(f=P.WebStorage)==null?void 0:f.getSession)==null?void 0:v.call(f,this.sessionRecoveryName()))}setSessionRecoverData(f){var v,x;return er()&&((x=(v=P.WebStorage)==null?void 0:v.setSession)==null?void 0:x.call(v,this.sessionRecoveryName(),f))}clearSessionRecoverData(){var f,v;return er()&&((v=(f=P.WebStorage)==null?void 0:f.removeSession)==null?void 0:v.call(f,this.sessionRecoveryName()))}},lo=nr,Sl=class extends Yt{constructor(d,f){super(d.logger),this.whenState=v=>Yt.prototype.whenState.call(this,v,this.state),this.ably=d,this.connectionManager=new lo(d,f),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",v=>{const x=this.state=v.current;P.Config.nextTick(()=>{this.emit(x,v)})}),this.connectionManager.on("update",v=>{P.Config.nextTick(()=>{this.emit("update",v)})})}connect(){A.logAction(this.logger,A.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return A.logAction(this.logger,A.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){A.logAction(this.logger,A.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},ds=Sl,es=class pA extends Ya{constructor(f){var v,x,C,j;if(super(Ee.objectifyOptions(f,!1,"BaseRealtime",A.defaultLogger)),A.logAction(this.logger,A.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new $(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=pA.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(x=(v=this.options.plugins)==null?void 0:v.RealtimePresence)!=null?x:null,this._objectsPlugin=(j=(C=this.options.plugins)==null?void 0:C.Objects)!=null?j:null,this.connection=new ds(this,this.options),this._channels=new Xs(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(f){const v={};return f!=null&&f.WebSocketTransport&&(v[yn.WebSocket]=f.WebSocketTransport),f!=null&&f.XHRPolling&&(v[yn.XhrPolling]=f.XHRPolling),v}get channels(){return this._channels}connect(){A.logAction(this.logger,A.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){A.logAction(this.logger,A.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};es.EventEmitter=Yt;var ia=es,Xs=class extends Yt{constructor(d){super(d.logger),this.realtime=d,this.all=Object.create(null),d.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let d={};for(const f of Ce(this.all,!0)){const v=this.all[f];v.properties.channelSerial&&(d[f]=v.properties.channelSerial)}return d}recoverChannels(d){for(const f of Ce(d,!0)){const v=this.get(f);v.properties.channelSerial=d[f]}}async processChannelMessage(d){const f=d.channel;if(f===void 0){A.logAction(this.logger,A.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+d.action);return}const v=this.all[f];if(!v){A.logAction(this.logger,A.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+f);return}await v.processMessage(d)}onTransportActive(){for(const d in this.all){const f=this.all[d];f.state==="attaching"||f.state==="detaching"?f.checkPendingState():f.state==="suspended"?f._attach(!1,null):f.state==="attached"&&f.requestState("attaching")}}propogateConnectionInterruption(d,f){const v={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},x=["attaching","attached","detaching","suspended"],C=v[d];for(const j in this.all){const L=this.all[j];x.includes(L.state)&&L.notifyState(C,f)}}get(d,f){d=String(d);let v=this.all[d];if(!v)v=this.all[d]=new Ja(this.realtime,d,f);else if(f){if(v._shouldReattachToSetOptions(f,v.channelOptions))throw new $("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);v.setOptions(f)}return v}getDerived(d,f,v){if(f.filter){const x=mi(f.filter),C=fn(d);d=`[filter=${x}${C.qualifierParam}]${C.channelName}`}return this.get(d,v)}release(d){d=String(d);const f=this.all[d];if(!f)return;const v=f.getReleaseErr();if(v)throw v;delete this.all[d]}},Qs=ia;function aa(d,f){if(d.isSynthesized()||f.isSynthesized())return d.timestamp>=f.timestamp;const v=d.parseId(),x=f.parseId();return v.msgSerial===x.msgSerial?v.index>x.index:v.msgSerial>x.msgSerial}var Cl=class extends Yt{constructor(d,f,v=aa){super(d.logger),this.presence=d,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=f,this.newerThan=v}get(d){return this.map[d]}getClient(d){const f=this.map,v=[];for(const x in f){const C=f[x];C.clientId==d&&C.action!="absent"&&v.push(C)}return v}list(d){const f=this.map,v=d&&d.clientId,x=d&&d.connectionId,C=[];for(const j in f){const L=f[j];L.action!=="absent"&&(v&&v!=L.clientId||x&&x!=L.connectionId||C.push(L))}return C}put(d){(d.action==="enter"||d.action==="update")&&(d=wi.fromValues(d),d.action="present");const f=this.map,v=this.memberKey(d);this.residualMembers&&delete this.residualMembers[v];const x=f[v];return x&&!this.newerThan(d,x)?!1:(f[v]=d,!0)}values(){const d=this.map,f=[];for(const v in d){const x=d[v];x.action!="absent"&&f.push(x)}return f}remove(d){const f=this.map,v=this.memberKey(d),x=f[v];return x&&!this.newerThan(d,x)?!1:(this.syncInProgress?(d=wi.fromValues(d),d.action="absent",f[v]=d):delete f[v],!!x)}startSync(){const d=this.map,f=this.syncInProgress;A.logAction(this.logger,A.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),this.syncInProgress||(this.residualMembers=ce(d),this.setInProgress(!0))}endSync(){const d=this.map,f=this.syncInProgress;if(A.logAction(this.logger,A.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),f){for(const v in d)d[v].action==="absent"&&delete d[v];this.presence._synthesizeLeaves(Pe(this.residualMembers));for(const v in this.residualMembers)delete d[v];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(d){const f=this.syncInProgress;if(A.logAction(this.logger,A.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+f),!f){d();return}this.once("sync",d)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(d){A.logAction(this.logger,A.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+d),this.syncInProgress=d,this.presence.syncComplete=!d}};function gu(d){return d.channel.client.auth.clientId}function co(d){const f=d.channel.client,v=f.auth.clientId;return(!v||v==="*")&&f.connection.state==="connected"}function En(d,f,v){switch(d.state){case"attached":case"suspended":v();break;case"initialized":case"detached":case"detaching":case"attaching":mt(d.attach(),function(x){x?f(x):v()});break;default:f($.fromValues(d.invalidStateError()))}}var vn=class extends Yt{constructor(d){super(d.logger),this.channel=d,this.syncComplete=!1,this.members=new Cl(this,f=>f.clientId+":"+f.connectionId),this._myMembers=new Cl(this,f=>f.clientId),this.subscriptions=new Yt(this.logger),this.pendingPresence=[]}async enter(d){if(co(this))throw new $("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,d,"enter")}async update(d){if(co(this))throw new $("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,d,"update")}async enterClient(d,f){return this._enterOrUpdateClient(void 0,d,f,"enter")}async updateClient(d,f){return this._enterOrUpdateClient(void 0,d,f,"update")}async _enterOrUpdateClient(d,f,v,x){const C=this.channel;if(!C.connectionManager.activeState())throw C.connectionManager.getError();A.logAction(this.logger,A.LOG_MICRO,"RealtimePresence."+x+"Client()","channel = "+C.name+", id = "+d+", client = "+(f||"(implicit) "+gu(this)));const j=wi.fromData(v);j.action=x,d&&(j.id=d),f&&(j.clientId=f);const L=await j.encode(C.channelOptions);switch(C.state){case"attached":return C.sendPresence([L]);case"initialized":case"detached":C.attach();case"attaching":return new Promise((V,ne)=>{this.pendingPresence.push({presence:L,callback:Q=>Q?ne(Q):V()})});default:{const V=new be("Unable to "+x+" presence channel while in "+C.state+" state",90001);throw V.code=90001,V}}}async leave(d){if(co(this))throw new $("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,d)}async leaveClient(d,f){const v=this.channel;if(!v.connectionManager.activeState())throw v.connectionManager.getError();A.logAction(this.logger,A.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+d);const x=wi.fromData(f);x.action="leave",d&&(x.clientId=d);const C=await x.encode(v.channelOptions);switch(v.state){case"attached":return v.sendPresence([C]);case"attaching":return new Promise((j,L)=>{this.pendingPresence.push({presence:C,callback:V=>V?L(V):j()})});case"initialized":case"failed":throw new be("Unable to leave presence channel (incompatible state)",90001);default:throw v.invalidStateError()}}async get(d){const f=!d||("waitForSync"in d?d.waitForSync:!0);return new Promise((v,x)=>{function C(j){v(d?j.list(d):j.values())}if(this.channel.state==="suspended"){f?x($.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):C(this.members);return}En(this.channel,j=>x(j),()=>{const j=this.members;f?j.waitSync(function(){C(j)}):C(j)})})}async history(d){A.logAction(this.logger,A.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const f=this.channel.client.rest.presenceMixin;if(d&&d.untilAttach)if(this.channel.state==="attached")delete d.untilAttach,d.from_serial=this.channel.properties.attachSerial;else throw new $("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return f.history(this,d)}setPresence(d,f,v){A.logAction(this.logger,A.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+d.length+" participants; syncChannelSerial = "+v);let x,C;const j=this.members,L=this._myMembers,V=[],ne=this.channel.connectionManager.connectionId;f&&(this.members.startSync(),v&&(C=v.match(/^[\w-]+:(.*)$/))&&(x=C[1]));for(let Q of d)switch(Q.action){case"leave":j.remove(Q)&&V.push(Q),Q.connectionId===ne&&!Q.isSynthesized()&&L.remove(Q);break;case"enter":case"present":case"update":j.put(Q)&&V.push(Q),Q.connectionId===ne&&L.put(Q);break}f&&!x&&(j.endSync(),this.channel.syncChannelSerial=null);for(let Q=0;Q<V.length;Q++){const ge=V[Q];this.subscriptions.emit(ge.action,ge)}}onAttached(d){A.logAction(this.logger,A.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+d),d?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const f=this.pendingPresence,v=f.length;if(v){this.pendingPresence=[];const x=[],C=gn.create(this.logger);A.logAction(this.logger,A.LOG_MICRO,"RealtimePresence.onAttached","sending "+v+" queued presence messages");for(let j=0;j<v;j++){const L=f[j];x.push(L.presence),C.push(L.callback)}this.channel.sendPresence(x).then(()=>C()).catch(j=>C(j))}}actOnChannelState(d,f,v){switch(d){case"attached":this.onAttached(f);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(v);break}}failPendingPresence(d){if(this.pendingPresence.length){A.logAction(this.logger,A.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Fe(d));for(let f=0;f<this.pendingPresence.length;f++)try{this.pendingPresence[f].callback(d)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const d=this._myMembers,f=this.channel.connectionManager.connectionId;for(const v in d.map){const x=d.map[v];A.logAction(this.logger,A.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+x.clientId+'" into the presence set');const C=x.connectionId===f?x.id:void 0;this._enterOrUpdateClient(C,x.clientId,x.data,"enter").catch(j=>{const L=new $("Presence auto re-enter failed",91004,400,j);A.logAction(this.logger,A.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Fe(j));const V=new cu(this.channel.state,this.channel.state,!0,!1,L);this.channel.emit("update",V)})}}_synthesizeLeaves(d){const f=this.subscriptions;d.forEach(function(v){const x=wi.fromValues({action:"leave",connectionId:v.connectionId,clientId:v.clientId,data:v.data,encoding:v.encoding,timestamp:Date.now()});f.emit("leave",x)})}async subscribe(...d){const f=Ja.processListenerArgs(d),v=f[0],x=f[1],C=this.channel;if(C.state==="failed")throw $.fromValues(C.invalidStateError());this.subscriptions.on(v,x),C.channelOptions.attachOnSubscribe!==!1&&await C.attach()}unsubscribe(...d){const f=Ja.processListenerArgs(d),v=f[0],x=f[1];this.subscriptions.off(v,x)}},ct=vn,_s=yn.WebSocket;function Rs(d){return!!d.on}var pu=class extends Ks{constructor(d,f,v){super(d,f,v),this.shortName=_s,v.heartbeats=P.Config.useProtocolHeartbeats,this.wsHost=v.host}static isAvailable(){return!!P.Config.WebSocket}createWebSocket(d,f){return this.uri=d+Ye(f),new P.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.connect()","starting"),Ks.prototype.connect.call(this);const d=this,f=this.params,v=f.options,C=(v.tls?"wss://":"ws://")+this.wsHost+":"+Ee.getPort(v)+"/";A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.connect()","uri: "+C),mt(this.auth.getAuthParams(),function(j,L){if(d.isDisposed)return;let V="";for(const Q in L)V+=" "+Q+": "+L[Q]+";";if(A.logAction(d.logger,A.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+V+" err: "+j),j){d.disconnect(j);return}const ne=f.getConnectParams(L);try{const Q=d.wsConnection=d.createWebSocket(C,ne);Q.binaryType=P.Config.binaryType,Q.onopen=function(){d.onWsOpen()},Q.onclose=function(ge){d.onWsClose(ge)},Q.onmessage=function(ge){d.onWsData(ge.data)},Q.onerror=function(ge){d.onWsError(ge)},Rs(Q)&&Q.on("ping",function(){d.onActivity()})}catch(Q){A.logAction(d.logger,A.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(Q.stack||Q.message)),d.disconnect(Q)}})}send(d){const f=this.wsConnection;if(!f){A.logAction(this.logger,A.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{f.send(Ng(d,this.connectionManager.realtime._MsgPack,this.params.format))}catch(v){const x="Exception from ws connection when trying to send: "+Fe(v);A.logAction(this.logger,A.LOG_ERROR,"WebSocketTransport.send()",x),this.finish("disconnected",new $(x,5e4,500))}}onWsData(d){A.logAction(this.logger,A.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+d.length+"; type = "+typeof d);try{this.onProtocolMessage(Zn(d,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin,this.format))}catch(f){A.logAction(this.logger,A.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+f.stack)}}onWsOpen(){A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(d){let f,v;if(typeof d=="object"?(v=d.code,f=d.wasClean||v===1e3):(v=d,f=v==1e3),delete this.wsConnection,f){A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const x=new $("Websocket closed",80003,400);this.finish("disconnected",x)}else{const x="Unclean disconnection of WebSocket ; code = "+v,C=new $(x,80003,400);A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.onWsClose()",x),this.finish("disconnected",C)}this.emit("disposed")}onWsError(d){A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+d.message),P.Config.nextTick(()=>{this.disconnect(Error(d.message))})}dispose(){A.logAction(this.logger,A.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const d=this.wsConnection;d&&(d.onmessage=function(){},delete this.wsConnection,P.Config.nextTick(()=>{if(A.logAction(this.logger,A.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!d)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");d.close()}))}},Ai=pu,Kd=class{static subscribeFilter(d,f,v){const x=C=>{var j,L,V,ne,Q,ge;const me={name:C.name,refTimeserial:(L=(j=C.extras)==null?void 0:j.ref)==null?void 0:L.timeserial,refType:(ne=(V=C.extras)==null?void 0:V.ref)==null?void 0:ne.type,isRef:!!((ge=(Q=C.extras)==null?void 0:Q.ref)!=null&&ge.timeserial),clientId:C.clientId};Object.entries(f).find(([je,fe])=>fe!==void 0?me[je]!==fe:!1)||v(C)};this.addFilteredSubscription(d,f,v,x),d.subscriptions.on(x)}static addFilteredSubscription(d,f,v,x){var C;if(d.filteredSubscriptions||(d.filteredSubscriptions=new Map),d.filteredSubscriptions.has(v)){const j=d.filteredSubscriptions.get(v);j.set(f,((C=j==null?void 0:j.get(f))==null?void 0:C.concat(x))||[x])}else d.filteredSubscriptions.set(v,new Map([[f,[x]]]))}static getAndDeleteFilteredSubscriptions(d,f,v){if(!d.filteredSubscriptions)return[];if(!v&&f)return Array.from(d.filteredSubscriptions.entries()).map(([j,L])=>{var V;let ne=L.get(f);return L.delete(f),L.size===0&&((V=d.filteredSubscriptions)==null||V.delete(j)),ne}).reduce((j,L)=>L?j.concat(...L):j,[]);if(!v||!d.filteredSubscriptions.has(v))return[];const x=d.filteredSubscriptions.get(v);if(!f){const j=Array.from(x.values()).reduce((L,V)=>L.concat(...V),[]);return d.filteredSubscriptions.delete(v),j}let C=x.get(f);return x.delete(f),C||[]}},ts=class a0 extends Qs{constructor(f){var v;const x=a0._MsgPack;if(!x)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Ee.objectifyOptions(f,!0,"Realtime",A.defaultLogger,O(T({},Hd),{Crypto:(v=a0.Crypto)!=null?v:void 0,MsgPack:x,RealtimePresence:{RealtimePresence:ct,PresenceMessage:wi,WirePresenceMessage:so},Annotations:{Annotation:Ji,WireAnnotation:Ci,RealtimeAnnotations:na,RestAnnotations:ru},WebSocketTransport:Ai,MessageInteractions:Kd})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(f){this._Crypto=f}};ts.Utils=Te,ts.ConnectionManager=lo,ts.ProtocolMessage=lu,ts._Crypto=null,ts.Message=eu,ts.PresenceMessage=tu,ts.Annotation=su,ts._MsgPack=null,ts._Http=Vc,ts._PresenceMap=Cl,ts._MessageEncoding=Zr;var ra=ts,oa=Uint8Array,Js=Uint32Array,la=Math.pow,yu=new Js(8),Tl=[],sr=new Js(64);function uo(d){return(d-(d|0))*la(2,32)|0}for(var ir=2,Zs=0;Zs<64;){for(Al=!0,ei=2;ei<=ir/2;ei++)ir%ei===0&&(Al=!1);Al&&(Zs<8&&(yu[Zs]=uo(la(ir,1/2))),Tl[Zs]=uo(la(ir,1/3)),Zs++),ir++}var Al,ei,ho=!!new oa(new Js([1]).buffer)[0];function ar(d){return ho?d>>>24|(d>>>16&255)<<8|(d&65280)<<8|d<<24:d}function Hn(d,f){return d>>>f|d<<32-f}function ca(d){var f=yu.slice(),v=d.length,x=v*8,C=512-(x+64)%512-1+x+65,j=new oa(C/8),L=new Js(j.buffer);j.set(d,0),j[v]=128,L[L.length-1]=ar(x);for(var V,ne=0;ne<C/32;ne+=16){var Q=f.slice();for(V=0;V<64;V++){var ge;if(V<16)ge=ar(L[ne+V]);else{var me=sr[V-15],je=sr[V-2];ge=sr[V-7]+sr[V-16]+(Hn(me,7)^Hn(me,18)^me>>>3)+(Hn(je,17)^Hn(je,19)^je>>>10)}sr[V]=ge|=0;for(var fe=(Hn(Q[4],6)^Hn(Q[4],11)^Hn(Q[4],25))+(Q[4]&Q[5]^~Q[4]&Q[6])+Q[7]+ge+Tl[V],De=(Hn(Q[0],2)^Hn(Q[0],13)^Hn(Q[0],22))+(Q[0]&Q[1]^Q[2]&(Q[0]^Q[1])),ke=7;ke>0;ke--)Q[ke]=Q[ke-1];Q[0]=fe+De|0,Q[4]=Q[4]+fe|0}for(V=0;V<8;V++)f[V]=f[V]+Q[V]|0}return new oa(new Js(f.map(function(Ve){return ar(Ve)})).buffer)}function Xd(d,f){if(d.length>64&&(d=ca(d)),d.length<64){const V=new Uint8Array(64);V.set(d,0),d=V}for(var v=new Uint8Array(64),x=new Uint8Array(64),C=0;C<64;C++)v[C]=54^d[C],x[C]=92^d[C];var j=new Uint8Array(f.length+64);j.set(v,0),j.set(f,64);var L=new Uint8Array(96);return L.set(x,0),L.set(ca(j),64),ca(L)}var Qd=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(d){let f="";const v=this.base64CharSet,x=d.byteLength,C=x%3,j=x-C;let L,V,ne,Q,ge;for(let me=0;me<j;me=me+3)ge=d[me]<<16|d[me+1]<<8|d[me+2],L=(ge&16515072)>>18,V=(ge&258048)>>12,ne=(ge&4032)>>6,Q=ge&63,f+=v[L]+v[V]+v[ne]+v[Q];return C==1?(ge=d[j],L=(ge&252)>>2,V=(ge&3)<<4,f+=v[L]+v[V]+"=="):C==2&&(ge=d[j]<<8|d[j+1],L=(ge&64512)>>10,V=(ge&1008)>>4,ne=(ge&15)<<2,f+=v[L]+v[V]+v[ne]+"="),f}base64ToArrayBuffer(d){const f=atob==null?void 0:atob(d),v=f.length,x=new Uint8Array(v);for(let C=0;C<v;C++){const j=f.charCodeAt(C);x[C]=j}return this.toArrayBuffer(x)}isBuffer(d){return d instanceof ArrayBuffer||ArrayBuffer.isView(d)}toBuffer(d){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(d instanceof ArrayBuffer)return new Uint8Array(d);if(ArrayBuffer.isView(d))return new Uint8Array(this.toArrayBuffer(d));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(d){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(d instanceof ArrayBuffer)return d;if(ArrayBuffer.isView(d))return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(d){return this.uint8ViewToBase64(this.toBuffer(d))}base64UrlEncode(d){return this.base64Encode(d).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(d){if(ArrayBuffer&&P.Config.atob)return this.base64ToArrayBuffer(d);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(d){return this.toBuffer(d).reduce((v,x)=>v+x.toString(16).padStart(2,"0"),"")}hexDecode(d){if(d.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const f=new Uint8Array(d.length/2);for(let v=0;v<f.length;v++)f[v]=parseInt(d.slice(2*v,2*(v+1)),16);return this.toArrayBuffer(f)}utf8Encode(d){if(P.Config.TextEncoder){const f=new P.Config.TextEncoder().encode(d);return this.toArrayBuffer(f)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(d){if(!this.isBuffer(d))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(d);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(d,f){if(!d||!f)return!1;const v=this.toArrayBuffer(d),x=this.toArrayBuffer(f);if(v.byteLength!=x.byteLength)return!1;const C=new Uint8Array(v),j=new Uint8Array(x);for(var L=0;L<C.length;L++)if(C[L]!=j[L])return!1;return!0}byteLength(d){return d instanceof ArrayBuffer||ArrayBuffer.isView(d)?d.byteLength:-1}arrayBufferViewToBuffer(d){return this.toArrayBuffer(d)}concat(d){const f=d.reduce((C,j)=>C+j.byteLength,0),v=new Uint8Array(f);let x=0;for(const C of d){const j=this.toBuffer(C);v.set(j,x),x+=j.byteLength}return v.buffer}sha256(d){const f=ca(this.toBuffer(d));return this.toArrayBuffer(f)}hmacSha256(d,f){const v=Xd(this.toBuffer(f),this.toBuffer(d));return this.toArrayBuffer(v)}},Oi=new Qd,Jd=function(d,f){var v="aes",x=256,C="cbc",j=16;function L(je){if(je.algorithm==="aes"&&je.mode==="cbc"){if(je.keyLength===128||je.keyLength===256)return;throw new Error("Unsupported key length "+je.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function V(je){return je.replace("_","/").replace("-","+")}function ne(je){return je instanceof Q}class Q{constructor(fe,De,ke,Ve){this.algorithm=fe,this.keyLength=De,this.mode=ke,this.key=Ve}}class ge{static getDefaultParams(fe){var De;if(!fe.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof fe.key=="string"?De=f.toArrayBuffer(f.base64Decode(V(fe.key))):fe.key instanceof ArrayBuffer?De=fe.key:De=f.toArrayBuffer(fe.key);var ke=fe.algorithm||v,Ve=De.byteLength*8,rt=fe.mode||C,ht=new Q(ke,Ve,rt,De);if(fe.keyLength&&fe.keyLength!==ht.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+fe.keyLength+" was specified, but the key actually has length "+ht.keyLength);return L(ht),ht}static async generateRandomKey(fe){try{return d.getRandomArrayBuffer((fe||x)/8)}catch(De){throw new $("Failed to generate random key: "+De.message,400,5e4,De)}}static getCipher(fe,De){var ke,Ve=ne(fe)?fe:this.getDefaultParams(fe);return{cipherParams:Ve,cipher:new me(Ve,(ke=fe.iv)!=null?ke:null,De)}}}ge.CipherParams=Q;class me{constructor(fe,De,ke){if(this.logger=ke,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=fe.algorithm+"-"+String(fe.keyLength)+"-"+fe.mode,this.webCryptoAlgorithm=fe.algorithm+"-"+fe.mode,this.key=f.toArrayBuffer(fe.key),this.iv=De?f.toArrayBuffer(De):null}concat(fe,De){const ke=new ArrayBuffer(fe.byteLength+De.byteLength),Ve=new DataView(ke),rt=new DataView(f.toArrayBuffer(fe));for(let pt=0;pt<rt.byteLength;pt++)Ve.setInt8(pt,rt.getInt8(pt));const ht=new DataView(f.toArrayBuffer(De));for(let pt=0;pt<ht.byteLength;pt++)Ve.setInt8(rt.byteLength+pt,ht.getInt8(pt));return ke}async encrypt(fe){A.logAction(this.logger,A.LOG_MICRO,"CBCCipher.encrypt()","");const De=await this.getIv(),ke=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),Ve=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:De},ke,fe);return this.concat(De,Ve)}async decrypt(fe){A.logAction(this.logger,A.LOG_MICRO,"CBCCipher.decrypt()","");const De=f.toArrayBuffer(fe),ke=De.slice(0,j),Ve=De.slice(j),rt=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:ke},rt,Ve)}async getIv(){if(this.iv){var fe=this.iv;return this.iv=null,fe}const De=await d.getRandomArrayBuffer(j);return f.toArrayBuffer(De)}}return ge},ua=(d=>(d[d.REQ_SEND=0]="REQ_SEND",d[d.REQ_RECV=1]="REQ_RECV",d[d.REQ_RECV_POLL=2]="REQ_RECV_POLL",d[d.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",d))(ua||{}),fs=ua;function vu(){return new $("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var ha,Ol=(ha=class{constructor(d){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var f;this.client=d??null;const v=(d==null?void 0:d.options.connectivityCheckUrl)||Ee.connectivityCheckUrl,x=(f=d==null?void 0:d.options.connectivityCheckParams)!=null?f:null,C=!(d!=null&&d.options.connectivityCheckUrl),j=T(T({},Ol.bundledRequestImplementations),d==null?void 0:d._additionalHTTPRequestImplementations),L=j.XHRRequest,V=j.FetchRequest,ne=!!(L||V);if(!ne)throw vu();P.Config.xhrSupported&&L?(this.supportsAuthHeaders=!0,this.Request=async function(Q,ge,me,je,fe){return new Promise(De=>{var ke;const Ve=L.createRequest(ge,me,je,fe,fs.REQ_SEND,(ke=d&&d.options.timeouts)!=null?ke:null,this.logger,Q);Ve.once("complete",(rt,ht,pt,We,kn)=>De({error:rt,body:ht,headers:pt,unpacked:We,statusCode:kn})),Ve.exec()})},d!=null&&d.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var Q;A.logAction(this.logger,A.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+v);const ge=await this.doUri(yt.Get,v,null,null,x);let me=!1;return C?me=!ge.error&&((Q=ge.body)==null?void 0:Q.replace(/\n/,""))=="yes":me=!ge.error&&$a(ge.statusCode),A.logAction(this.logger,A.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+me),me}):P.Config.fetchSupported&&V?(this.supportsAuthHeaders=!0,this.Request=async(Q,ge,me,je,fe)=>V(Q,d??null,ge,me,je,fe),d!=null&&d.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var Q;A.logAction(this.logger,A.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+v);const ge=await this.doUri(yt.Get,v,null,null,null),me=!ge.error&&((Q=ge.body)==null?void 0:Q.replace(/\n/,""))=="yes";return A.logAction(this.logger,A.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+me),me}):this.Request=async()=>({error:ne?new be("no supported HTTP transports available",null,400):vu()})}get logger(){var d,f;return(f=(d=this.client)==null?void 0:d.logger)!=null?f:A.defaultLogger}async doUri(d,f,v,x,C){return this.Request?this.Request(d,f,v,C,x):{error:new be("Request invoked before assigned to",null,500)}}shouldFallback(d){const f=d.statusCode;return f===408&&!d.code||f===400&&!d.code||f>=500&&f<=504}},ha.methods=[yt.Get,yt.Delete,yt.Post,yt.Put,yt.Patch],ha.methodsWithoutBody=[yt.Get,yt.Delete],ha.methodsWithBody=[yt.Post,yt.Put,yt.Patch],ha),ns=Ol,Rn="ablyjs-storage-test",ss=typeof Or<"u"?Or:typeof window<"u"?window:self,Zd=class{constructor(){try{ss.sessionStorage.setItem(Rn,Rn),ss.sessionStorage.removeItem(Rn),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{ss.localStorage.setItem(Rn,Rn),ss.localStorage.removeItem(Rn),this.localSupported=!0}catch{this.localSupported=!1}}get(d){return this._get(d,!1)}getSession(d){return this._get(d,!0)}remove(d){return this._remove(d,!1)}removeSession(d){return this._remove(d,!0)}set(d,f,v){return this._set(d,f,v,!1)}setSession(d,f,v){return this._set(d,f,v,!0)}_set(d,f,v,x){const C={value:f};return v&&(C.expires=Date.now()+v),this.storageInterface(x).setItem(d,JSON.stringify(C))}_get(d,f){if(f&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!f&&!this.localSupported)throw new Error("Local Storage not supported");const v=this.storageInterface(f).getItem(d);if(!v)return null;const x=JSON.parse(v);return x.expires&&x.expires<Date.now()?(this.storageInterface(f).removeItem(d),null):x.value}_remove(d,f){return this.storageInterface(f).removeItem(d)}storageInterface(d){return d?ss.sessionStorage:ss.localStorage}},ti=new Zd,gt=Wr(),an=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!an&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function jl(){const d=gt.location;return!gt.WebSocket||!d||!d.origin||d.origin.indexOf("http")>-1}function Bg(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var Ug=gt.navigator&&gt.navigator.userAgent.toString(),Ig=gt.location&&gt.location.href,rn={agent:"browser",logTimestamps:!0,userAgent:Ug,currentUrl:Ig,binaryType:"arraybuffer",WebSocket:gt.WebSocket,fetchSupported:!!gt.fetch,xhrSupported:gt.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:jl(),useProtocolHeartbeats:!0,supportsBinary:!!gt.TextDecoder,preferBinary:!1,ArrayBuffer:gt.ArrayBuffer,atob:gt.atob,nextTick:typeof gt.setImmediate<"u"?gt.setImmediate.bind(gt):function(d){setTimeout(d,0)},addEventListener:gt.addEventListener,inspect:JSON.stringify,stringByteSize:function(d){return gt.TextDecoder&&new gt.TextEncoder().encode(d).length||d.length},TextEncoder:gt.TextEncoder,TextDecoder:gt.TextDecoder,getRandomArrayBuffer:async function(d){const f=new Uint8Array(d);return gt.crypto.getRandomValues(f),f.buffer},isWebworker:Bg(),push:{platform:"browser",formFactor:"desktop",storage:ti}},Ml=rn;function fo(d){const f=[80015,80017,80030];return d.code?js.isTokenErr(d)?!1:f.includes(d.code)?!0:d.code>=4e4&&d.code<5e4:!1}function da(d){return fo(d)?[zn({action:Ie.ERROR,error:d})]:[zn({action:Ie.DISCONNECTED,error:d})]}var bu=class extends Ks{constructor(d,f,v){super(d,f,v,!0),this.onAuthUpdated=x=>{this.authParams={access_token:x.token}},this.stream="stream"in v?v.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){A.logAction(this.logger,A.LOG_MINOR,"CometTransport.connect()","starting"),Ks.prototype.connect.call(this);const d=this.params,f=d.options,v=Ee.getHost(f,d.host),x=Ee.getPort(f),C=f.tls?"https://":"http://";this.baseUri=C+v+":"+x+"/comet/";const j=this.baseUri+"connect";A.logAction(this.logger,A.LOG_MINOR,"CometTransport.connect()","uri: "+j),mt(this.auth.getAuthParams(),(L,V)=>{if(L){this.disconnect(L);return}if(this.isDisposed)return;this.authParams=V;const ne=this.params.getConnectParams(V);"stream"in ne&&(this.stream=ne.stream),A.logAction(this.logger,A.LOG_MINOR,"CometTransport.connect()","connectParams:"+Ye(ne));let Q=!1;const ge=this.recvRequest=this.createRequest(j,null,ne,null,this.stream?fs.REQ_RECV_STREAM:fs.REQ_RECV);ge.on("data",me=>{this.recvRequest&&(Q||(Q=!0,this.emit("preconnect")),this.onData(me))}),ge.on("complete",me=>{if(this.recvRequest||(me=me||new $("Request cancelled",80003,400)),this.recvRequest=null,!Q&&!me&&(Q=!0,this.emit("preconnect")),this.onActivity(),me){me.code?this.onData(da(me)):this.disconnect(me);return}P.Config.nextTick(()=>{this.recv()})}),ge.exec()})}requestClose(){A.logAction(this.logger,A.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){A.logAction(this.logger,A.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(d){const f=d?this.closeUri:this.disconnectUri;if(f){const v=this.createRequest(f,null,this.authParams,null,fs.REQ_SEND);v.on("complete",x=>{x&&(A.logAction(this.logger,A.LOG_ERROR,"CometTransport.request"+(d?"Close()":"Disconnect()"),"request returned err = "+Fe(x)),this.finish("disconnected",x))}),v.exec()}}dispose(){A.logAction(this.logger,A.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(A.logAction(this.logger,A.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",pn.disconnected()),P.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(d){var f;if(this.isDisposed)return;const v=(f=d.connectionDetails)==null?void 0:f.connectionKey;Ks.prototype.onConnect.call(this,d);const x=this.baseUri+v;A.logAction(this.logger,A.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+x),this.sendUri=x+"/send",this.recvUri=x+"/recv",this.closeUri=x+"/close",this.disconnectUri=x+"/disconnect"}send(d){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(d);return}const f=this.pendingItems||[];f.push(d),this.pendingItems=null,this.sendItems(f)}sendAnyPending(){const d=this.pendingItems;d&&(this.pendingItems=null,this.sendItems(d))}sendItems(d){const f=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(d),fs.REQ_SEND);f.on("complete",(v,x)=>{if(v&&A.logAction(this.logger,A.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Fe(v)),this.sendRequest=null,v){v.code?this.onData(da(v)):this.disconnect(v);return}x&&this.onData(x),this.pendingItems&&P.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),f.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const d=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?fs.REQ_RECV_STREAM:fs.REQ_RECV_POLL);d.on("data",f=>{this.onData(f)}),d.on("complete",f=>{if(this.recvRequest=null,this.onActivity(),f){f.code?this.onData(da(f)):this.disconnect(f);return}P.Config.nextTick(()=>{this.recv()})}),d.exec()}onData(d){try{const f=this.decodeResponse(d);if(f&&f.length)for(let v=0;v<f.length;v++)this.onProtocolMessage(Zi(f[v],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin))}catch(f){A.logAction(this.logger,A.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+f.stack)}}encodeRequest(d){return JSON.stringify(d)}decodeResponse(d){return typeof d=="string"?JSON.parse(d):d}},rr=bu;function or(d,f){return Un(Ce(f)).includes("x-ably-errorcode")}function zg(d,f){if(or(d,f))return d.error&&$.fromValues(d.error)}var ef=function(){},Vg=0,_u={};function fa(d,f){return d.getResponseHeader&&d.getResponseHeader(f)}function xu(d){return d.getResponseHeader&&(d.getResponseHeader("transfer-encoding")||!d.getResponseHeader("content-length"))}function El(d){const f=d.getAllResponseHeaders().trim().split(`\r
`),v={};for(let x=0;x<f.length;x++){const C=f[x].split(":").map(j=>j.trim());v[C[0].toLowerCase()]=C[1]}return v}var tf=class yA extends Yt{constructor(f,v,x,C,j,L,V,ne){super(V),x=x||{},x.rnd=Je(),this.uri=f+Ye(x),this.headers=v||{},this.body=C,this.method=ne?ne.toUpperCase():xe(C)?"GET":"POST",this.requestMode=j,this.timeouts=L,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Vg),_u[this.id]=this}static createRequest(f,v,x,C,j,L,V,ne){const Q=L||Ee.TIMEOUTS;return new yA(f,v,ce(x),C,j,Q,V,ne)}complete(f,v,x,C,j){this.requestComplete||(this.requestComplete=!0,!f&&v&&this.emit("data",v),this.emit("complete",f,v,x,C,j),this.dispose())}abort(){this.dispose()}exec(){let f=this.headers;const v=this.requestMode==fs.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,x=this.timer=setTimeout(()=>{this.timedOut=!0,j.abort()},v),C=this.method,j=this.xhr=new XMLHttpRequest,L=f.accept;let V=this.body,ne="text";L?L.indexOf("application/x-msgpack")===0&&(ne="arraybuffer"):f.accept="application/json",V&&(f["content-type"]||(f["content-type"]="application/json")).indexOf("application/json")>-1&&typeof V!="string"&&(V=JSON.stringify(V)),j.open(C,this.uri,!0),j.responseType=ne,"authorization"in f&&(j.withCredentials=!0);for(const We in f)j.setRequestHeader(We,f[We]);const Q=(We,kn,bn,ur)=>{var ga;let Pl=kn+" (event type: "+We.type+")";(ga=this==null?void 0:this.xhr)!=null&&ga.statusText&&(Pl+=", current statusText is "+this.xhr.statusText),A.logAction(this.logger,A.LOG_ERROR,"Request.on"+We.type+"()",Pl),this.complete(new be(Pl,bn,ur))};j.onerror=function(We){Q(We,"XHR error occurred",null,400)},j.onabort=We=>{this.timedOut?Q(We,"Request aborted due to request timeout expiring",null,408):Q(We,"Request cancelled",null,400)},j.ontimeout=function(We){Q(We,"Request timed out",null,408)};let ge,me,je,fe=0,De=!1;const ke=()=>{if(clearTimeout(x),je=me<400,me==204){this.complete(null,null,null,null,me);return}ge=this.requestMode==fs.REQ_RECV_STREAM&&je&&xu(j)},Ve=()=>{let We;try{const bn=fa(j,"content-type");if(bn?bn.indexOf("application/json")>=0:j.responseType=="text"){const ga=j.responseType==="arraybuffer"?P.BufferUtils.utf8Decode(j.response):String(j.responseText);ga.length?We=JSON.parse(ga):We=ga,De=!0}else We=j.response;We.response!==void 0?(me=We.statusCode,je=me<400,f=We.headers,We=We.response):f=El(j)}catch(bn){this.complete(new be("Malformed response body from server: "+bn.message,null,400));return}if(je||Array.isArray(We)){this.complete(null,We,f,De,me);return}let kn=zg(We,f);kn||(kn=new be("Error response received from server: "+me+" body was: "+P.Config.inspect(We),null,me)),this.complete(kn,We,f,De,me)};function rt(){const We=j.responseText,kn=We.length-1;let bn,ur;for(;fe<kn&&(bn=We.indexOf(`
`,fe))>-1;)ur=We.slice(fe,bn),fe=bn+1,ht(ur)}const ht=We=>{try{We=JSON.parse(We)}catch(kn){this.complete(new be("Malformed response body from server: "+kn.message,null,400));return}this.emit("data",We)},pt=()=>{rt(),this.streamComplete=!0,P.Config.nextTick(()=>{this.complete()})};j.onreadystatechange=function(){const We=j.readyState;We<3||j.status!==0&&(me===void 0&&(me=j.status,ke()),We==3&&ge?rt():We==4&&(ge?pt():Ve()))},j.send(V)}dispose(){const f=this.xhr;if(f){f.onreadystatechange=f.onerror=f.onabort=f.ontimeout=ef,this.xhr=null;const v=this.timer;v&&(clearTimeout(v),this.timer=null),this.requestComplete||f.abort()}delete _u[this.id]}},ni=tf,Qe=yn.XhrPolling,vt=class extends rr{constructor(d,f,v){super(d,f,v),this.shortName=Qe,v.stream=!1,this.shortName=Qe}static isAvailable(){return!!(P.Config.xhrSupported&&P.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(d,f,v,x,C){return ni.createRequest(d,f,v,x,C,this.timeouts,this.logger)}},Kt=vt,Rl=["xhr_polling"],lr={order:Rl,bundledImplementations:{web_socket:Ai,xhr_polling:Kt}},ma=lr,kl={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[yn.XhrPolling,yn.WebSocket]},mo=kl;function cr(d){if(d===void 0)return"undefined";let f,v;if(d instanceof ArrayBuffer?(v="ArrayBuffer",f=new DataView(d)):d instanceof DataView&&(v="DataView",f=d),!f)return JSON.stringify(d);const x=[];for(let C=0;C<d.byteLength;C++){if(C>20){x.push("...");break}let j=f.getUint8(C).toString(16);j.length===1&&(j="0"+j),x.push(j)}return"<"+v+" "+x.join(" ")+">"}function go(d,f,v){for(let x=0,C=v.length;x<C;x++){const j=v.charCodeAt(x);if(j<128){d.setUint8(f++,j>>>0&127|0);continue}if(j<2048){d.setUint8(f++,j>>>6&31|192),d.setUint8(f++,j>>>0&63|128);continue}if(j<65536){d.setUint8(f++,j>>>12&15|224),d.setUint8(f++,j>>>6&63|128),d.setUint8(f++,j>>>0&63|128);continue}if(j<1114112){d.setUint8(f++,j>>>18&7|240),d.setUint8(f++,j>>>12&63|128),d.setUint8(f++,j>>>6&63|128),d.setUint8(f++,j>>>0&63|128);continue}throw new Error("bad codepoint "+j)}}function It(d,f,v){let x="";for(let C=f,j=f+v;C<j;C++){const L=d.getUint8(C);if((L&128)===0){x+=String.fromCharCode(L);continue}if((L&224)===192){x+=String.fromCharCode((L&15)<<6|d.getUint8(++C)&63);continue}if((L&240)===224){x+=String.fromCharCode((L&15)<<12|(d.getUint8(++C)&63)<<6|(d.getUint8(++C)&63)<<0);continue}if((L&248)===240){x+=String.fromCharCode((L&7)<<18|(d.getUint8(++C)&63)<<12|(d.getUint8(++C)&63)<<6|(d.getUint8(++C)&63)<<0);continue}throw new Error("Invalid byte "+L.toString(16))}return x}function po(d){let f=0;for(let v=0,x=d.length;v<x;v++){const C=d.charCodeAt(v);if(C<128){f+=1;continue}if(C<2048){f+=2;continue}if(C<65536){f+=3;continue}if(C<1114112){f+=4;continue}throw new Error("bad codepoint "+C)}return f}function wu(d,f){const v=ji(d,f);if(v===0)return;const x=new ArrayBuffer(v),C=new DataView(x);return si(d,C,0,f),x}var Nl=65536*65536,Su=1/Nl;function Hg(d,f){return f=f||0,d.getInt32(f)*Nl+d.getUint32(f+4)}function Cu(d,f){return f=f||0,d.getUint32(f)*Nl+d.getUint32(f+4)}function Tu(d,f,v){v<9223372036854776e3?(d.setInt32(f,Math.floor(v*Su)),d.setInt32(f+4,v&-1)):(d.setUint32(f,2147483647),d.setUint32(f+4,2147483647))}function Au(d,f,v){v<18446744073709552e3?(d.setUint32(f,Math.floor(v*Su)),d.setInt32(f+4,v&-1)):(d.setUint32(f,4294967295),d.setUint32(f+4,4294967295))}var Fn=class{constructor(d,f){this.map=v=>{const x={};for(let C=0;C<v;C++){const j=this.parse();x[j]=this.parse()}return x},this.bin=v=>{const x=new ArrayBuffer(v);return new Uint8Array(x).set(new Uint8Array(this.view.buffer,this.offset,v),0),this.offset+=v,x},this.buf=this.bin,this.str=v=>{const x=It(this.view,this.offset,v);return this.offset+=v,x},this.array=v=>{const x=new Array(v);for(let C=0;C<v;C++)x[C]=this.parse();return x},this.ext=v=>(this.offset+=v,{type:this.view.getInt8(this.offset),data:this.buf(v)}),this.parse=()=>{const v=this.view.getUint8(this.offset);let x,C;if((v&128)===0)return this.offset++,v;if((v&240)===128)return C=v&15,this.offset++,this.map(C);if((v&240)===144)return C=v&15,this.offset++,this.array(C);if((v&224)===160)return C=v&31,this.offset++,this.str(C);if((v&224)===224)return x=this.view.getInt8(this.offset),this.offset++,x;switch(v){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return C=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(C);case 197:return C=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(C);case 198:return C=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(C);case 199:return C=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(C);case 200:return C=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(C);case 201:return C=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(C);case 202:return x=this.view.getFloat32(this.offset+1),this.offset+=5,x;case 203:return x=this.view.getFloat64(this.offset+1),this.offset+=9,x;case 204:return x=this.view.getUint8(this.offset+1),this.offset+=2,x;case 205:return x=this.view.getUint16(this.offset+1),this.offset+=3,x;case 206:return x=this.view.getUint32(this.offset+1),this.offset+=5,x;case 207:return x=Cu(this.view,this.offset+1),this.offset+=9,x;case 208:return x=this.view.getInt8(this.offset+1),this.offset+=2,x;case 209:return x=this.view.getInt16(this.offset+1),this.offset+=3,x;case 210:return x=this.view.getInt32(this.offset+1),this.offset+=5,x;case 211:return x=Hg(this.view,this.offset+1),this.offset+=9,x;case 212:return C=1,this.offset++,this.ext(C);case 213:return C=2,this.offset++,this.ext(C);case 214:return C=4,this.offset++,this.ext(C);case 215:return C=8,this.offset++,this.ext(C);case 216:return C=16,this.offset++,this.ext(C);case 217:return C=this.view.getUint8(this.offset+1),this.offset+=2,this.str(C);case 218:return C=this.view.getUint16(this.offset+1),this.offset+=3,this.str(C);case 219:return C=this.view.getUint32(this.offset+1),this.offset+=5,this.str(C);case 220:return C=this.view.getUint16(this.offset+1),this.offset+=3,this.array(C);case 221:return C=this.view.getUint32(this.offset+1),this.offset+=5,this.array(C);case 222:return C=this.view.getUint16(this.offset+1),this.offset+=3,this.map(C);case 223:return C=this.view.getUint32(this.offset+1),this.offset+=5,this.map(C)}throw new Error("Unknown type 0x"+v.toString(16))},this.offset=f||0,this.view=d}};function Xt(d){const f=new DataView(d),v=new Fn(f),x=v.parse();if(v.offset!==d.byteLength)throw new Error(d.byteLength-v.offset+" trailing bytes");return x}function yo(d,f){return Object.keys(d).filter(function(v){const x=d[v],C=typeof x;return(!f||x!=null)&&(C!=="function"||!!x.toJSON)})}function si(d,f,v,x){const C=typeof d;if(typeof d=="string"){const j=po(d);if(j<32)return f.setUint8(v,j|160),go(f,v+1,d),1+j;if(j<256)return f.setUint8(v,217),f.setUint8(v+1,j),go(f,v+2,d),2+j;if(j<65536)return f.setUint8(v,218),f.setUint16(v+1,j),go(f,v+3,d),3+j;if(j<4294967296)return f.setUint8(v,219),f.setUint32(v+1,j),go(f,v+5,d),5+j}if(ArrayBuffer.isView&&ArrayBuffer.isView(d)&&(d=d.buffer),d instanceof ArrayBuffer){const j=d.byteLength;if(j<256)return f.setUint8(v,196),f.setUint8(v+1,j),new Uint8Array(f.buffer).set(new Uint8Array(d),v+2),2+j;if(j<65536)return f.setUint8(v,197),f.setUint16(v+1,j),new Uint8Array(f.buffer).set(new Uint8Array(d),v+3),3+j;if(j<4294967296)return f.setUint8(v,198),f.setUint32(v+1,j),new Uint8Array(f.buffer).set(new Uint8Array(d),v+5),5+j}if(typeof d=="number"){if(Math.floor(d)!==d)return f.setUint8(v,203),f.setFloat64(v+1,d),9;if(d>=0){if(d<128)return f.setUint8(v,d),1;if(d<256)return f.setUint8(v,204),f.setUint8(v+1,d),2;if(d<65536)return f.setUint8(v,205),f.setUint16(v+1,d),3;if(d<4294967296)return f.setUint8(v,206),f.setUint32(v+1,d),5;if(d<18446744073709552e3)return f.setUint8(v,207),Au(f,v+1,d),9;throw new Error("Number too big 0x"+d.toString(16))}if(d>=-32)return f.setInt8(v,d),1;if(d>=-128)return f.setUint8(v,208),f.setInt8(v+1,d),2;if(d>=-32768)return f.setUint8(v,209),f.setInt16(v+1,d),3;if(d>=-2147483648)return f.setUint8(v,210),f.setInt32(v+1,d),5;if(d>=-9223372036854776e3)return f.setUint8(v,211),Tu(f,v+1,d),9;throw new Error("Number too small -0x"+(-d).toString(16).substr(1))}if(C==="undefined")return x?0:(f.setUint8(v,212),f.setUint8(v+1,0),f.setUint8(v+2,0),3);if(d===null)return x?0:(f.setUint8(v,192),1);if(C==="boolean")return f.setUint8(v,d?195:194),1;if(typeof d.toJSON=="function")return si(d.toJSON(),f,v,x);if(C==="object"){let j,L=0,V;const ne=Array.isArray(d);if(ne?j=d.length:(V=yo(d,x),j=V.length),j<16?(f.setUint8(v,j|(ne?144:128)),L=1):j<65536?(f.setUint8(v,ne?220:222),f.setUint16(v+1,j),L=3):j<4294967296&&(f.setUint8(v,ne?221:223),f.setUint32(v+1,j),L=5),ne)for(let Q=0;Q<j;Q++)L+=si(d[Q],f,v+L,x);else if(V)for(let Q=0;Q<j;Q++){const ge=V[Q];L+=si(ge,f,v+L),L+=si(d[ge],f,v+L,x)}return L}if(C==="function")return 0;throw new Error("Unknown type "+C)}function ji(d,f){const v=typeof d;if(v==="string"){const x=po(d);if(x<32)return 1+x;if(x<256)return 2+x;if(x<65536)return 3+x;if(x<4294967296)return 5+x}if(ArrayBuffer.isView&&ArrayBuffer.isView(d)&&(d=d.buffer),d instanceof ArrayBuffer){const x=d.byteLength;if(x<256)return 2+x;if(x<65536)return 3+x;if(x<4294967296)return 5+x}if(typeof d=="number"){if(Math.floor(d)!==d)return 9;if(d>=0){if(d<128)return 1;if(d<256)return 2;if(d<65536)return 3;if(d<4294967296)return 5;if(d<18446744073709552e3)return 9;throw new Error("Number too big 0x"+d.toString(16))}if(d>=-32)return 1;if(d>=-128)return 2;if(d>=-32768)return 3;if(d>=-2147483648)return 5;if(d>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+d.toString(16).substr(1))}if(v==="boolean")return 1;if(d===null)return f?0:1;if(d===void 0)return f?0:3;if(typeof d.toJSON=="function")return ji(d.toJSON(),f);if(v==="object"){let x,C=0;if(Array.isArray(d)){x=d.length;for(let j=0;j<x;j++)C+=ji(d[j],f)}else{const j=yo(d,f);x=j.length;for(let L=0;L<x;L++){const V=j[L];C+=ji(V)+ji(d[V],f)}}if(x<16)return 1+C;if(x<65536)return 3+C;if(x<4294967296)return 5+C;throw new Error("Array or object too long 0x"+x.toString(16))}if(v==="function")return 0;throw new Error("Unknown type "+v)}var vo={encode:wu,decode:Xt,inspect:cr,utf8Write:go,utf8Read:It,utf8ByteCount:po};function ii(d,f){return!!f.get("x-ably-errorcode")}function Dl(d,f){if(ii(d,f))return d.error&&$.fromValues(d.error)}function Ou(d){const f={};return d.forEach((v,x)=>{f[x]=v}),f}async function ju(d,f,v,x,C,j){const L=new Headers(x||{}),V=d?d.toUpperCase():xe(j)?"GET":"POST",ne=new AbortController;let Q;const ge=new Promise(fe=>{Q=setTimeout(()=>{ne.abort(),fe({error:new be("Request timed out",null,408)})},f?f.options.timeouts.httpRequestTimeout:Ee.TIMEOUTS.httpRequestTimeout)}),me={method:V,headers:L,body:j,signal:ne.signal};P.Config.isWebworker||(me.credentials=L.has("authorization")?"include":"same-origin");const je=(async()=>{try{const fe=new URLSearchParams(C||{});fe.set("rnd",Je());const De=v+"?"+fe,ke=await Wr().fetch(De,me);if(clearTimeout(Q),ke.status==204)return{error:null,statusCode:ke.status};const Ve=ke.headers.get("Content-Type");let rt;Ve&&Ve.indexOf("application/x-msgpack")>-1?rt=await ke.arrayBuffer():Ve&&Ve.indexOf("application/json")>-1?rt=await ke.json():rt=await ke.text();const ht=!!Ve&&Ve.indexOf("application/x-msgpack")===-1,pt=Ou(ke.headers);return ke.ok?{error:null,body:rt,headers:pt,unpacked:ht,statusCode:ke.status}:{error:Dl(rt,ke.headers)||new be("Error response received from server: "+ke.status+" body was: "+P.Config.inspect(rt),null,ke.status),body:rt,headers:pt,unpacked:ht,statusCode:ke.status}}catch(fe){return clearTimeout(Q),{error:fe}}})();return Promise.race([ge,je])}var nf={XHRRequest:ni,FetchRequest:ju},Mu=Jd(Ml,Oi);P.Crypto=Mu,P.BufferUtils=Oi,P.Http=ns,P.Config=Ml,P.Transports=ma,P.WebStorage=ti;for(const d of[xl,ra])d.Crypto=Mu,d._MsgPack=vo;ns.bundledRequestImplementations=nf,A.initLogHandlers(),P.Defaults=Lt(mo),P.Config.agent&&(P.Defaults.agent+=" "+P.Config.agent);var sf={ErrorInfo:$,Rest:xl,Realtime:ra,msgpack:vo,makeProtocolMessageFromDeserialized:ou};if(typeof s.exports=="object"&&typeof n=="object"){var af=(d,f,v,x)=>{if(f&&typeof f=="object"||typeof f=="function")for(let C of Object.getOwnPropertyNames(f))!Object.prototype.hasOwnProperty.call(d,C)&&C!==v&&Object.defineProperty(d,C,{get:()=>f[C],enumerable:!(x=Object.getOwnPropertyDescriptor(f,C))||x.enumerable});return d};s.exports=af(s.exports,n)}return s.exports})}(Am)),Am.exports}var PU=DU(),LU={};const BU=()=>{const t=LU.REACT_APP_ABLY_API_KEY||"BNJk9g.SK-MXA:A4605sq6wJIekCFesj48rKYQAJPIhkN1x1X1FwBp8oA";return new PU.Ably.Realtime({key:t,clientId:`webapp-${Math.random().toString(36).substring(2,9)}`,echoMessages:!1})};let oc=null;const UU=()=>(oc||(oc=BU(),oc.connection.on("connected",()=>{console.log("Ably connection successful")}),oc.connection.on("failed",t=>{console.error("Ably connection failed:",t)}),oc.connection.on("disconnected",()=>{console.log("Ably disconnected")})),oc),vA=t=>UU().channels.get(t),bA=(t,e)=>{try{const n=vA(t);return console.log(`Subscribing to channel: ${t}`),n.subscribe(s=>{console.log(`Received message on ${t}:`,s),e(s.data)}),()=>{console.log(`Unsubscribing from channel: ${t}`),n.unsubscribe()}}catch(n){return console.error(`Error subscribing to channel ${t}:`,n),()=>{}}},_A=async(t,e)=>{try{const n=vA(t);return console.log(`Publishing to channel ${t}:`,e),await n.publish("message",e),!0}catch(n){return console.error(`Error publishing to channel ${t}:`,n),!1}},IU=()=>{var Re,ye;const[t,e]=k.useState([]),[n,s]=k.useState(null),[a,o]=k.useState([]),[l,u]=k.useState(""),[h,g]=k.useState(null),[y,_]=k.useState(!0),[S,T]=k.useState(null),[O,M]=k.useState(!1),[R,N]=k.useState(!1),[B,z]=k.useState([]),[P,U]=k.useState(""),[ee,ae]=k.useState(!1),J=k.useRef(null),X=Hi(),oe=k.useRef(null),[A,Te]=k.useState(!1),[le,$]=k.useState(!1);k.useEffect(()=>{async function F(){try{_(!0);const{data:{user:W}}=await Oe.auth.getUser();if(!W){X("/login");return}let{data:ve,error:se}=await Oe.from("doctors").select("*").eq("user_id",W.id).single();if(se||!ve){X("/unauthorized");return}g({...ve,userType:"doctor",user_id:W.id}),await be(ve.id),_(!1)}catch(W){console.error("Error loading data:",W),T("Failed to load messages. Please try again later."),_(!1)}}F()},[X]);const be=async F=>{try{const{data:W,error:ve}=await Oe.from("conversations").select(`
          id,
          updated_at,
          last_message,
          patient_id,
          patients!conversations_patient_id_fkey (
            id,
            full_name,
            profile_picture_path
          )
        `).eq("doctor_id",F).order("updated_at",{ascending:!1});if(ve){console.error("Error fetching conversations:",ve),T(`Failed to load conversations: ${ve.message}`);return}const se=W.map(Ce=>({...Ce,patient:Ce.patients}));e(se||[]),console.log("Fetched conversations:",se)}catch(W){console.error("Error fetching conversations:",W),T(`Failed to load conversations: ${W.message}`)}},q=async()=>{if(h)try{ae(!0);const{data:F,error:W}=await Oe.from("patients").select("id, full_name, profile_picture_path").ilike("full_name",`%${P}%`).order("full_name",{ascending:!0});if(W)throw W;const ve=t.map(Ce=>Ce.patient_id),se=F.filter(Ce=>!ve.includes(Ce.id));z(se),ae(!1)}catch(F){console.error("Error fetching available patients:",F),ae(!1)}};k.useEffect(()=>{R&&q()},[P,R]);const G=async F=>{try{s(F),oe.current&&(oe.current(),oe.current=null);const{data:W,error:ve}=await Oe.from("messages").select("*").eq("conversation_id",F.id).order("created_at",{ascending:!0});if(ve)throw ve;o(W||[]);const{data:{user:se}}=await Oe.auth.getUser();se&&await Oe.from("messages").update({is_read:!0}).eq("conversation_id",F.id).eq("receiver_id",se.id).eq("is_read",!1);const Ce=`conversation:${F.id}`;oe.current=bA(Ce,Pe=>{o(Me=>Me.some(ue=>ue.id===Pe.id)?Me:[...Me,Pe]),se&&Pe.receiver_id===se.id&&Oe.from("messages").update({is_read:!0}).eq("id",Pe.id).then()})}catch(W){console.error("Error selecting conversation:",W),T(`Failed to load conversation messages: ${W.message}`)}},ce=async F=>{if(F.preventDefault(),!(!l.trim()||!n||O))try{M(!0);const{data:{user:W}}=await Oe.auth.getUser();if(!W)throw new Error("Not authenticated");const ve=n.patient_id,{data:se,error:Ce}=await Oe.from("patients").select("user_id").eq("id",ve).single();if(Ce)throw Ce;const Pe=se.user_id,Me={conversation_id:n.id,sender_id:W.id,receiver_id:Pe,content:l},{data:et,error:ue}=await Oe.from("messages").insert(Me).select().single();if(ue)throw ue;await Oe.from("conversations").update({last_message:l,updated_at:new Date().toISOString()}).eq("id",n.id),o(Le=>[...Le,et]),e(Le=>Le.map(Ye=>Ye.id===n.id?{...Ye,last_message:l,updated_at:new Date().toISOString()}:Ye)),await _A(`conversation:${n.id}`,et),u(""),M(!1)}catch(W){console.error("Error sending message:",W),T(`Failed to send message: ${W.message}`),M(!1)}},_e=async F=>{try{if(!h)throw new Error("User profile not loaded");const{data:W,error:ve}=await Oe.rpc("get_or_create_conversation",{p_patient_id:F.id,p_doctor_id:h.id});if(ve)throw ve;const{data:se,error:Ce}=await Oe.from("conversations").select(`
          id,
          updated_at,
          last_message,
          patient_id,
          patients!conversations_patient_id_fkey (
            id,
            full_name,
            profile_picture_path
          )
        `).eq("id",W).single();if(Ce)throw Ce;const Pe={...se,patient:se.patients};e(Me=>[Pe,...Me]),s(Pe),N(!1),U("")}catch(W){console.error("Error creating conversation:",W),T(`Failed to create conversation: ${W.message}`)}};k.useEffect(()=>{var F;(F=J.current)==null||F.scrollIntoView({behavior:"smooth"})},[a]),k.useEffect(()=>()=>{oe.current&&oe.current()},[]),k.useEffect(()=>{const F=localStorage.getItem("doctorSidebarCollapsed");F!==null&&Te(JSON.parse(F))},[]);const I=F=>{Te(F),localStorage.setItem("doctorSidebarCollapsed",JSON.stringify(F))},te=()=>{console.log("Sign out clicked")},xe=F=>new Date(F).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ae=F=>{const W=new Date(F),ve=new Date;return W.toDateString()===ve.toDateString()?W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):W.toLocaleDateString()},we=F=>h&&h.user_id===F,Ne=[...t].sort((F,W)=>new Date(W.updated_at)-new Date(F.updated_at));return y?p.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading messages..."}):S?p.jsx("div",{className:"flex justify-center items-center h-screen text-red-500",children:S}):p.jsxs("div",{className:"app-container",children:[p.jsx(Cc,{onSignOut:te,onSidebarToggle:I,isCollapsed:A,isMobileOpen:le}),le&&p.jsx("div",{className:"mobile-menu-backdrop",onClick:()=>$(!1)}),p.jsxs("div",{className:`main-content ${A?"content-expanded":""}`,children:[p.jsx(di,{isSidebarCollapsed:A,onMobileMenuToggle:()=>$(!le)}),p.jsx("div",{className:"content",children:p.jsxs("div",{className:"messages-container",children:[p.jsxs("div",{className:`conversations-sidebar ${n?"hidden md:block":""}`,children:[p.jsxs("div",{className:"sidebar-header",children:[p.jsx("h2",{children:"Messages"}),p.jsx("button",{onClick:()=>N(!0),className:"new-conversation-button","aria-label":"New conversation",children:p.jsx(Ym,{size:20})})]}),p.jsx("div",{className:"conversations-list",children:Ne.length===0?p.jsx("div",{className:"no-conversations",children:"No conversations yet. Click the + button to start a new conversation."}):Ne.map(F=>{var W,ve;return p.jsx("div",{className:`conversation-item ${(n==null?void 0:n.id)===F.id?"active":""}`,onClick:()=>G(F),children:p.jsxs("div",{className:"conversation-profile",children:[(W=F.patient)!=null&&W.profile_picture_path?p.jsx("img",{src:F.patient.profile_picture_path,alt:F.patient.full_name,className:"profile-image"}):p.jsx("div",{className:"profile-placeholder",children:p.jsx(xc,{size:24})}),p.jsxs("div",{className:"conversation-info",children:[p.jsxs("div",{className:"conversation-header",children:[p.jsx("h3",{className:"conversation-name",children:((ve=F.patient)==null?void 0:ve.full_name)||"Unknown Patient"}),p.jsx("span",{className:"conversation-time",children:Ae(F.updated_at)})]}),p.jsx("p",{className:"conversation-preview",children:F.last_message})]})]})},F.id)})})]}),p.jsx("div",{className:`chat-area ${!n&&"hidden md:flex"}`,children:n?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"chat-header",children:[p.jsx("button",{className:"back-button md:hidden",onClick:()=>s(null),children:p.jsx(cA,{size:20})}),(Re=n.patient)!=null&&Re.profile_picture_path?p.jsx("img",{src:n.patient.profile_picture_path,alt:n.patient.full_name,className:"chat-profile-image"}):p.jsx("div",{className:"chat-profile-placeholder",children:p.jsx(xc,{size:20})}),p.jsxs("div",{className:"chat-profile-info",children:[p.jsx("h3",{children:((ye=n.patient)==null?void 0:ye.full_name)||"Unknown Patient"}),p.jsx("p",{children:"Patient"})]})]}),p.jsxs("div",{className:"messages-area",children:[a.length===0?p.jsx("div",{className:"empty-chat",children:"No messages yet. Start a conversation!"}):a.map(F=>p.jsxs("div",{className:`message-bubble ${we(F.sender_id)?"own":"other"}`,children:[p.jsx("div",{className:`message-content ${we(F.sender_id)?"own":"other"}`,children:F.content}),p.jsx("div",{className:`message-time ${we(F.sender_id)?"own":""}`,children:xe(F.created_at)})]},F.id)),p.jsx("div",{ref:J})]}),p.jsx("div",{className:"message-input-container",children:p.jsxs("form",{onSubmit:ce,className:"message-form",children:[p.jsx("input",{type:"text",className:"message-input",placeholder:"Type your message...",value:l,onChange:F=>u(F.target.value),disabled:O}),p.jsx("button",{type:"submit",className:`send-button ${(O||!l.trim())&&"disabled"}`,disabled:!l.trim()||O,children:p.jsx(hA,{size:20})})]})})]}):p.jsxs("div",{className:"empty-chat-container",children:[p.jsx("p",{className:"empty-chat-title",children:"Select a conversation"}),p.jsx("p",{className:"empty-chat-subtitle",children:"Choose a patient to start messaging"}),p.jsxs("button",{onClick:()=>N(!0),className:"new-chat-button",children:[p.jsx(Ym,{size:20})," New Conversation"]})]})})]})})]}),R&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{className:"modal-title",children:"New Conversation"}),p.jsx("button",{onClick:()=>{N(!1),U("")},className:"modal-close",children:"×"})]}),p.jsx("div",{className:"search-container",children:p.jsxs("div",{className:"search-input-wrapper",children:[p.jsx("div",{className:"search-icon-container",children:p.jsx(uA,{size:20})}),p.jsx("input",{type:"text",placeholder:"Search patients...",className:"search-input",value:P,onChange:F=>U(F.target.value)})]})}),p.jsx("div",{className:"patients-list",children:ee?p.jsx("div",{className:"loading-patients",children:"Loading patients..."}):B.length===0?p.jsx("div",{className:"no-patients",children:P?"No patients found":"No patients available"}):B.map(F=>p.jsxs("div",{className:"patient-item",onClick:()=>_e(F),children:[F.profile_picture_path?p.jsx("img",{src:F.profile_picture_path,alt:F.full_name,className:"chat-profile-image"}):p.jsx("div",{className:"chat-profile-placeholder",children:p.jsx(xc,{size:20})}),p.jsx("div",{children:p.jsx("h4",{className:"conversation-name",children:F.full_name})})]},F.id))})]})})]})},zU=()=>{var Ne,Re,ye;const[t,e]=k.useState([]),[n,s]=k.useState(null),[a,o]=k.useState([]),[l,u]=k.useState(""),[h,g]=k.useState(null),[y,_]=k.useState(!0),[S,T]=k.useState(null),[O,M]=k.useState(!1),[R,N]=k.useState(!1),[B,z]=k.useState([]),[P,U]=k.useState(""),[ee,ae]=k.useState(!1),[J,X]=k.useState(()=>{const F=localStorage.getItem("sidebarCollapsed");return F?JSON.parse(F):!1}),[oe,A]=k.useState(!1),Te=k.useRef(null),le=Hi(),$=k.useRef(null),be=()=>{A(!oe)};k.useEffect(()=>{async function F(){try{_(!0);const{data:{user:W}}=await Oe.auth.getUser();if(!W){le("/login");return}let{data:ve,error:se}=await Oe.from("patients").select("*").eq("user_id",W.id).single();if(se||!ve){le("/unauthorized");return}g({...ve,userType:"patient",user_id:W.id}),await q(ve.id),_(!1)}catch(W){console.error("Error loading data:",W),T("Failed to load messages. Please try again later."),_(!1)}}F()},[le]);const q=async F=>{try{const{data:W,error:ve}=await Oe.from("conversations").select(`
          id,
          updated_at,
          last_message,
          doctor_id,
          doctors!conversations_doctor_id_fkey (
            id,
            full_name,
            specialty,
            profile_picture_path
          )
        `).eq("patient_id",F).order("updated_at",{ascending:!1});if(ve){console.error("Error fetching conversations:",ve),T(`Failed to load conversations: ${ve.message}`);return}const se=W.map(Ce=>({...Ce,doctor:Ce.doctors}));e(se||[]),console.log("Fetched conversations:",se)}catch(W){console.error("Error fetching conversations:",W),T(`Failed to load conversations: ${W.message}`)}},G=async()=>{if(h)try{ae(!0);const{data:F,error:W}=await Oe.from("doctors").select("id, full_name, specialty, profile_picture_path").ilike("full_name",`%${P}%`).order("full_name",{ascending:!0});if(W)throw W;const ve=t.map(Ce=>Ce.doctor_id),se=F.filter(Ce=>!ve.includes(Ce.id));z(se),ae(!1)}catch(F){console.error("Error fetching available doctors:",F),ae(!1)}};k.useEffect(()=>{R&&G()},[P,R]);const ce=async F=>{try{s(F),$.current&&($.current(),$.current=null);const{data:W,error:ve}=await Oe.from("messages").select("*").eq("conversation_id",F.id).order("created_at",{ascending:!0});if(ve)throw ve;o(W||[]);const{data:{user:se}}=await Oe.auth.getUser();se&&await Oe.from("messages").update({is_read:!0}).eq("conversation_id",F.id).eq("receiver_id",se.id).eq("is_read",!1);const Ce=`conversation:${F.id}`;$.current=bA(Ce,Pe=>{o(Me=>Me.some(ue=>ue.id===Pe.id)?Me:[...Me,Pe]),se&&Pe.receiver_id===se.id&&Oe.from("messages").update({is_read:!0}).eq("id",Pe.id).then()})}catch(W){console.error("Error selecting conversation:",W),T(`Failed to load conversation messages: ${W.message}`)}},_e=async F=>{if(F.preventDefault(),!(!l.trim()||!n||O))try{M(!0);const{data:{user:W}}=await Oe.auth.getUser();if(!W)throw new Error("Not authenticated");const ve=n.doctor_id,{data:se,error:Ce}=await Oe.from("doctors").select("user_id").eq("id",ve).single();if(Ce)throw Ce;const Pe=se.user_id,Me={conversation_id:n.id,sender_id:W.id,receiver_id:Pe,content:l},{data:et,error:ue}=await Oe.from("messages").insert(Me).select().single();if(ue)throw ue;await Oe.from("conversations").update({last_message:l,updated_at:new Date().toISOString()}).eq("id",n.id),o(Le=>[...Le,et]),e(Le=>Le.map(Ye=>Ye.id===n.id?{...Ye,last_message:l,updated_at:new Date().toISOString()}:Ye)),await _A(`conversation:${n.id}`,et),u(""),M(!1)}catch(W){console.error("Error sending message:",W),T(`Failed to send message: ${W.message}`),M(!1)}},I=async F=>{try{if(!h)throw new Error("User profile not loaded");const{data:W,error:ve}=await Oe.rpc("get_or_create_conversation",{p_patient_id:h.id,p_doctor_id:F.id});if(ve)throw ve;const{data:se,error:Ce}=await Oe.from("conversations").select(`
          id,
          updated_at,
          last_message,
          doctor_id,
          doctors!conversations_doctor_id_fkey (
            id,
            full_name,
            specialty,
            profile_picture_path
          )
        `).eq("id",W).single();if(Ce)throw Ce;const Pe={...se,doctor:se.doctors};e(Me=>[Pe,...Me]),s(Pe),N(!1),U("")}catch(W){console.error("Error creating conversation:",W),T(`Failed to create conversation: ${W.message}`)}};k.useEffect(()=>{var F;(F=Te.current)==null||F.scrollIntoView({behavior:"smooth"})},[a]),k.useEffect(()=>()=>{$.current&&$.current()},[]);const te=F=>new Date(F).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),xe=F=>{const W=new Date(F),ve=new Date;return W.toDateString()===ve.toDateString()?W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):W.toLocaleDateString()},Ae=F=>h&&h.user_id===F,we=[...t].sort((F,W)=>new Date(W.updated_at)-new Date(F.updated_at));return y?p.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading messages..."}):S?p.jsx("div",{className:"flex justify-center items-center h-screen text-red-500",children:S}):p.jsxs("div",{className:"messages-page",children:[p.jsx(di,{isSidebarCollapsed:J}),p.jsx("div",{className:`sidebar ${J?"collapsed":""} ${oe?"mobile-visible":""}`,children:p.jsx(hd,{onCollapsedChange:F=>X(F)})}),p.jsxs("div",{className:`messages-container ${J?"sidebar-collapsed":""}`,children:[p.jsxs("div",{className:`conversations-sidebar ${n?"hidden md:block":""}`,children:[p.jsxs("div",{className:"sidebar-header",children:[p.jsx("h2",{children:"Messages"}),p.jsx("button",{onClick:()=>N(!0),className:"new-conversation-button","aria-label":"New conversation",children:p.jsx(Ym,{size:20})})]}),p.jsx("div",{className:"conversations-list",children:we.length===0?p.jsx("div",{className:"no-conversations",children:"No conversations yet. Click the + button to start a new conversation with a doctor."}):we.map(F=>{var W,ve,se;return p.jsx("div",{className:`conversation-item ${(n==null?void 0:n.id)===F.id?"active":""}`,onClick:()=>ce(F),children:p.jsxs("div",{className:"conversation-profile",children:[(W=F.doctor)!=null&&W.profile_picture_path?p.jsx("img",{src:F.doctor.profile_picture_path,alt:F.doctor.full_name,className:"profile-image"}):p.jsx("div",{className:"profile-placeholder",children:p.jsx(xc,{size:24})}),p.jsxs("div",{className:"conversation-info",children:[p.jsxs("div",{className:"conversation-header",children:[p.jsx("h3",{className:"conversation-name",children:((ve=F.doctor)==null?void 0:ve.full_name)||"Unknown Doctor"}),p.jsx("span",{className:"conversation-time",children:xe(F.updated_at)})]}),p.jsxs("p",{className:"conversation-preview",children:[((se=F.doctor)==null?void 0:se.specialty)&&p.jsx("span",{className:"specialty-tag",children:F.doctor.specialty}),F.last_message]})]})]})},F.id)})})]}),p.jsx("div",{className:`chat-area ${n?"":"hidden md:flex"}`,children:n?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"chat-header",children:[p.jsx("button",{className:"back-button md:hidden",onClick:()=>s(null),children:p.jsx(cA,{size:20})}),(Ne=n.doctor)!=null&&Ne.profile_picture_path?p.jsx("img",{src:n.doctor.profile_picture_path,alt:n.doctor.full_name,className:"chat-profile-image"}):p.jsx("div",{className:"chat-profile-placeholder",children:p.jsx(xc,{size:20})}),p.jsxs("div",{className:"chat-profile-info",children:[p.jsx("h3",{children:((Re=n.doctor)==null?void 0:Re.full_name)||"Unknown Doctor"}),p.jsx("p",{children:((ye=n.doctor)==null?void 0:ye.specialty)||"Doctor"})]})]}),p.jsxs("div",{className:"messages-area",children:[a.length===0?p.jsx("div",{className:"empty-chat",children:"No messages yet. Start a conversation with your doctor!"}):a.map(F=>p.jsxs("div",{className:`message-bubble ${Ae(F.sender_id)?"own":"other"}`,children:[p.jsx("div",{className:`message-content ${Ae(F.sender_id)?"own":"other"}`,children:F.content}),p.jsx("div",{className:`message-time ${Ae(F.sender_id)?"own":""}`,children:te(F.created_at)})]},F.id)),p.jsx("div",{ref:Te})]}),p.jsx("div",{className:"message-input-container",children:p.jsxs("form",{onSubmit:_e,className:"message-form",children:[p.jsx("input",{type:"text",className:"message-input",placeholder:"Type your message...",value:l,onChange:F=>u(F.target.value),disabled:O}),p.jsx("button",{type:"submit",className:"send-button",disabled:!l.trim()||O,children:p.jsx(hA,{size:20})})]})})]}):p.jsxs("div",{className:"empty-chat-container",children:[p.jsx("p",{className:"empty-chat-title",children:"Select a conversation"}),p.jsx("p",{className:"empty-chat-subtitle",children:"Choose a doctor to start messaging"}),p.jsxs("button",{onClick:()=>N(!0),className:"new-chat-button",children:[p.jsx(Ym,{size:20})," New Conversation"]})]})}),R&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{className:"modal-title",children:"Message a Doctor"}),p.jsx("button",{onClick:()=>{N(!1),U("")},className:"modal-close",children:"×"})]}),p.jsx("div",{className:"search-container",children:p.jsxs("div",{className:"search-input-wrapper",children:[p.jsx("div",{className:"search-icon-container",children:p.jsx(uA,{size:20})}),p.jsx("input",{type:"text",placeholder:"Search doctors...",className:"search-input",value:P,onChange:F=>U(F.target.value)})]})}),p.jsx("div",{className:"doctors-list",children:ee?p.jsx("div",{className:"loading-doctors",children:"Loading doctors..."}):B.length===0?p.jsx("div",{className:"no-doctors",children:P?"No doctors found":"No doctors available"}):B.map(F=>p.jsxs("div",{className:"doctor-item",onClick:()=>I(F),children:[F.profile_picture_path?p.jsx("img",{src:F.profile_picture_path,alt:F.full_name,className:"profile-image"}):p.jsx("div",{className:"profile-placeholder",children:p.jsx(xc,{size:20})}),p.jsxs("div",{children:[p.jsx("h4",{className:"conversation-name",children:F.full_name}),F.specialty&&p.jsx("p",{className:"specialty-tag",children:F.specialty})]})]},F.id))})]})})]}),p.jsx("button",{className:"mobile-sidebar-toggle",onClick:be,"aria-label":"Toggle sidebar",children:"≡"})]})};function VU(){return p.jsx(Qj,{children:p.jsx(iR,{children:p.jsx("div",{className:"app-container",children:p.jsxs(jj,{children:[p.jsx(_n,{path:"/",element:p.jsx(r3,{})}),p.jsx(_n,{path:"/home-page",element:p.jsx(o3,{})}),p.jsx(_n,{path:"/patient-register",element:p.jsx(aR,{})}),p.jsx(_n,{path:"/patient-login",element:p.jsx(rR,{})}),p.jsx(_n,{path:"/doctor-login",element:p.jsx(oR,{})}),p.jsx(_n,{path:"/unauthorized",element:p.jsx(a3,{})}),p.jsx(_n,{path:"/patient-dashboard",element:p.jsx(oi,{requiredRole:"patient",children:p.jsx(DR,{})})}),p.jsx(_n,{path:"/profile",element:p.jsx(oi,{requiredRole:"patient",children:p.jsx(TP,{})})}),p.jsx(_n,{path:"/appointments-booking",element:p.jsx(oi,{requiredRole:"patient",children:p.jsx(kU,{})})}),p.jsx(_n,{path:"/medical-records",element:p.jsx(oi,{requiredRole:"patient",children:p.jsx(iB,{})})}),p.jsx(_n,{path:"/patient-messages",element:p.jsx(oi,{requiredRole:"patient",children:p.jsx(zU,{})})}),p.jsx(_n,{path:"/doctor-dashboard",element:p.jsx(oi,{requiredRole:"doctor",children:p.jsx(i3,{})})}),p.jsx(_n,{path:"/doctor-profile",element:p.jsx(oi,{requiredRole:"doctor",children:p.jsx(fC,{})})}),p.jsx(_n,{path:"/patient-appointments",element:p.jsx(oi,{requiredRole:"doctor",children:p.jsx(vP,{})})}),p.jsx(_n,{path:"/patient-records",element:p.jsx(oi,{requiredRole:"doctor",children:p.jsx(_P,{})})}),p.jsx(_n,{path:"/patients-data",element:p.jsx(oi,{requiredRole:"doctor",children:p.jsx(wP,{})})}),p.jsx(_n,{path:"/doctor-messages",element:p.jsx(oi,{requiredRole:"doctor",children:p.jsx(IU,{})})}),p.jsx(_n,{path:"*",element:p.jsx(dm,{to:"/"})})]})})})})}UO.createRoot(document.getElementById("root")).render(p.jsx(k.StrictMode,{children:p.jsx(VU,{})}));export{r0 as g};
